@using System.Linq;
@using System.Security.Claims;
@using BusinessEntities;
@model BusinessEntities.InsuranceForms.AdnicMemberConsent

@{
    var claims = ClaimsPrincipal.Current.Identities.First().Claims.ToList();
    var emp_designation = claims.Where(c => c.Type == ClaimTypes.Role).Select(c => c.Value).SingleOrDefault();
    EMRInfo emr = (EMRInfo)TempData["emr_data"];
    TempData.Keep("emr_data");
}
<form id="form_AdnicMemberConsent" autocomplete="off" name="AdnicMemberConsent" ondrop="return false;" onpaste="return false;" oncut="return false;">
    @Html.AntiForgeryToken()
    <div class="row">
        <div class="row">
            <div>&nbsp;</div>
            <div class="col-sm-12 col-md-12 col-lg-12">
                <div class="row border-dark">
                    <div class="col-sm-12 col-md-12 col-lg-12">
                        <div>&nbsp;</div>
                        <div class="row">
                            <div class="col-sm-4 col-md-3 col-lg-4">
                                <div class="form-group mb-3"><label class="form-label text-black text-align-left">Group Member Name&nbsp;:</label></div>
                            </div>
                            
                            <div class="col-sm-4 col-md-6 col-lg-4 text-center">
                                @Html.TextBoxFor(m => m.mcaf_mem_name, new { @class = "form-control form-control-sm", @placeholder = "Enter Group Member Name", @id = "mcaf_mem_name" })&nbsp;

                            </div>
                           
                            <div class="col-sm-4 col-md-3 col-lg-4 text-right" dir="rtl">
                                <div class="form-group mb-4"><label class="form-label text-black">اسم العضو الرئيسي&nbsp;:</label></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4 col-md-3 col-lg-4">
                                <div class="form-group mb-3"><label class="form-label text-black text-align-left">Patient Name&nbsp;:</label></div>
                            </div>
                            
                            <div class="col-sm-4 col-md-6 col-lg-4 text-center">
                                @Html.TextBoxFor(m => m.mcaf_pat_name, new { @class = "form-control form-control-sm", @placeholder = "Enter Patient Name", @id = "mcaf_pat_name" })&nbsp;

                            </div>
                           
                            <div class="col-sm-4 col-md-3 col-lg-4 text-right" dir="rtl">
                                <div class="form-group mb-3"><label class="form-label text-black">اسم المريض&nbsp;:</label></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4 col-md-3 col-lg-4">
                                <div class="form-group mb-3"><label class="form-label text-black text-align-left">Patient’s Membership No&nbsp;:</label></div>
                            </div>
                           
                            <div class="col-sm-4 col-md-6 col-lg-4 text-center">
                                @Html.TextBoxFor(m => m.mcaf_pat_memno, new { @class = "form-control form-control-sm", @placeholder = "Enter Patient’s Membership No", @id = "mcaf_pat_memno" })&nbsp;
                            </div>
                           
                            <div class="col-sm-4 col-md-3 col-lg-4 text-right" dir="rtl">
                                <div class="form-group mb-3"><label class="form-label text-black">رقم عضوية المريض&nbsp;:</label></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4 col-md-3 col-lg-4">
                                <div class="form-group mb-3"><label class="form-label text-black text-align-left">Relationship&nbsp;:</label></div>
                            </div>

                            <div class="col-sm-4 col-md-6 col-lg-4 text-center">
                                @Html.TextBoxFor(m => m.mcaf_relationship, new { @class = "form-control form-control-sm", @placeholder = "Enter Relationship", @id = "mcaf_relationship" })&nbsp;
                            </div>

                            <div class="col-sm-4 col-md-3 col-lg-4 text-right" dir="rtl">
                                <div class="form-group mb-3"><label class="form-label text-black">درجة القرابة&nbsp;:</label></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4 col-md-3 col-lg-4">
                                <div class="form-group mb-3"><label class="form-label text-black text-align-left">Patient File No&nbsp;:</label></div>
                            </div>
                           
                            <div class="col-sm-4 col-md-6 col-lg-4 text-center">
                                @Html.TextBoxFor(m => m.mcaf_pat_fileno, new { @class = "form-control form-control-sm", @placeholder = "Enter Patient File No", @id = "mcaf_pat_fileno" })&nbsp;
                            </div>
                          
                            <div class="col-sm-4 col-md-6 col-lg-4 text-right" dir="rtl">
                                <div class="form-group mb-3"><label class="form-label text-black">رقم ملف المريض&nbsp;:</label></div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-4 col-md-4 col-lg-4">
                                <div class="form-group mb-3"><label class="form-label text-black text-align-left">Patient Mobile No&nbsp;:</label></div>
                            </div>
                            
                            <div class="col-sm-4 col-md-4 col-lg-4 text-center">
                                @Html.TextBoxFor(m => m.mcaf_pat_mob, new { @class = "form-control form-control-sm", @placeholder = "Enter Patient Mobile No", @id = "mcaf_pat_mob" })&nbsp;
                            </div>
                         
                            <div class="col-sm-4 col-md-4 col-lg-4 text-right" dir="rtl">
                                <div class="form-group mb-3"><label class="form-label text-black">هاتف المريض&nbsp;:</label></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div>&nbsp;</div>
            <div class="col-sm-12 col-md-12 col-lg-12">
                <div class="row border-dark">
                    <div class="row text-justify">
                        <div class="col-lg-6 mb-4">
                            <p>I hereby authorize,<br />occupational @Html.TextBoxFor(m => m.mcaf_auth, new { @class = "form-control form-control-sm", @placeholder = "Enter authorize", @id = "mcaf_auth" })</p>
                            <p>To provide all the needed medical information related to me or my Spouse/Child to Abu Dhabi National Insurance Company allowing their Doctors and Medical Claims Officers to have access to my medical records and to obtain the required copies of the medical reports and investigations.</p>
                            <p>Abu Dhabi National Insurance Company to access this information to evaluate my medical condition and treatment received.</p>
                            <p>Abu Dhabi National Insurance Company to refer my case for second opinion consultation and review the best treatment plan possible subject to my policy benefits.</p>
                            <p>Abu Dhabi National Insurance Company guarantees complete confidentiality of the information received.</p>
                            <p>I understand this consent is valid for the duration of my Policy Period with Abu Dhabi National Insurance Company at any healthcare provider, including but not limited to Hospitals, medical centers, clinics, laboratories, diagnostic centers and pharmacies.</p>
                            <div class="font-weight-bold">Patient Signature:</div>
                            <div id="pat_sign_box" class="d-none">
                                <img alt="stamp" id="pat_sign" class="avatar avatar-xl bsquare" />
                            </div>
                            <div>
                                Date<br />
                                <span class="text-capitalize text-left text-black">@emr.app_fdate&nbsp;</span>
                            </div>
                        </div>
                        <div dir="rtl" class="col-lg-6 mb-4 text-right pl-3">
                            <p class="text-right">أقر أنا الموقع أدناه،<br />occupational @Html.TextBoxFor(m => m.mcaf_auth1, new { @class = "form-control form-control-sm", @placeholder = "Enter authorize1", @id = "mcaf_auth1" })</p>
                            <p>بإعطــاء المعلومــات الطبيــة الخاصة بــي أو بالــزوج / الزوجة أو بالأبناء لشــركة أبوظبــي الوطنية للتأمين وأن أســمح لأطباء و مســؤولي التعويضــات الطبيــة التابعيــن للشــركة بالاطــاع علــى الملف الطبي و الحصــول على صور من التقاريــر الطبية و الفحوصات التشخيصية الازمة.</p>
                            <p>و إننــي علــى علم بأن شــركة أبوظبــي الوطنية للتأمين ســوف تطلــع علــى هذه المعلومــات من أجــل تقييم الحالــة الطبية و العاج الطبي الذي تلقيته.</p>
                            <p>مراجعه شــركة أبوظبي الوطنية للتأمين لحالتي لأخذ رأي طبي ثانــي أو مراجعه التقاريــر الطبية الخاصه بي مــع طبيب ثاني من أجــل الوصول إلى افضــل عاج ممكن وفقــا للتغطيه التأمينيه الخاصه بي.</p>
                            <p>و تؤكــد شــركة أبوظبــي الوطنيــة للتأميــن التعامــل مــع هذه المعلومات بسرية تامة.</p>
                            <p>إن هــذا الإقــرار صالــح خــال فتــرة وثيقــة التأميــن الخاصة بي مــع شــركة أبوظبــي الوطنيــة للتأميــن و معمول بهــا لدى أي مــزود خدمــات ،بما في ذلك علي ســبيل الذكــر و ليس الحصر ، المستشــفيات، المراكز والعيادات الطبية ، المختبرات ، مراكز التشخيص والصيدليات.</p>
                            <div dir="rtl" class="font-weight-bold">توقيع المريض :</div>
                            <div id="pat_sign_box0" class="d-none">
                                <img alt="stamp" id="pat_sign0" class="avatar avatar-xl bsquare" />
                            </div>
                            <div>
                                Date<br />
                                <span class="text-capitalize text-left text-black">@emr.app_fdate&nbsp;</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div>&nbsp;</div>
        </div>
        <div class="row mt-2">
            <div class="col-sm-12 col-md-6 col-lg-12 text-center">

                <table class="table table-bordered table-condensed">
                    <tr>
                        <td class="font-weight-semibold text-blue text-center">
                            Patient
                            <br />
                            <div class="btn-group mr-2">
                                <div class="dropdown">
                                    <button type="button" class="btn-sm btn-secondary me-2 mb-2 dropdown-toggle" data-bs-toggle="dropdown">
                                        <i class="fa fa-paint-brush">&nbsp;&nbsp;</i> Patient
                                    </button>
                                    <div class="dropdown-menu">
                                        <a class="dropdown-item" onclick="openSignaturePad('patient')">Tab</a>
                                        <a class="dropdown-item" onclick="openWacomTabSignaturePad('patient')">Wacom Tab</a>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-sm-12 col-md-6 col-lg-12 text-center">
                <div class="btn-list btn-animation">
                    <button type="submit" class="btn btn-success btn-sm" id="btn_Insert">Save</button>
                    <button type="button" class="btn btn-outline-dark btn-sm" id="btn_Reset">Reset</button>
                    <button type="button" class="btn btn-danger btn-sm d-none" id="btn_Delete">Delete</button>
                    <button type="button" class="btn btn-sm btn-outline-success d-none" id="btn_Print"> Download/Print </button>
                </div>
            </div>
        </div>
    </div>
</form>

<script type="text/javascript">


    $(function () {
        if ("@emp_designation.ToString()" === "Super Administrator") {
            $("#btn_Insert").show();
        }
        else {
            if ("@emr.set_emr_lock" == "NoLock") {
                $("#btn_Insert").show();
            }
            else {
                if ("@emr.app_ae_date" >= "@emr.today") {
                    $("#btn_Insert").show();
                }
                else {
                    $("#btn_Insert").hide();
                }
            }
        }

        $("#mcaf_mem_name").val("@emr.pat_name");
        $("#mcaf_pat_name").val("@emr.pat_name");
        $("#mcaf_pat_fileno").val("@emr.pat_code");
        $("#mcaf_pat_mob").val("@emr.pat_mob");
        $("#mcaf_auth").val("@emr.emp_license");
        $("#mcaf_auth1").val("@emr.emp_license");

        validate();


    });


    //#region Validation Initialization
    var validate = function () {
        $("#form_AdnicMemberConsent").validate({
            rules: {
                mcaf_mem_name: {
                    required: true
                },
                mcaf_pat_name: {
                    required: true
                },
                mcaf_pat_memno: {
                    required: true
                },
                mcaf_relationship: {
                    required: true
                },
                mcaf_pat_fileno: {
                    required: true
                },
                mcaf_pat_mob: {
                    required: true
                },
                mcaf_auth: {
                    required: true
                },
                mcaf_auth1: {
                    required: true
                },
            },
            messages: {
                mcaf_mem_name: {
                    required: "Please Enter Group Member Name!"
                },
                mcaf_pat_name: {
                    required: "Please Enter Patient Name!"
                },
                mcaf_pat_memno: {
                    required: "Please Enter Patient’s Membership No!"
                },
                mcaf_relationship: {
                    required: "Please Enter Relationship!"
                },
                mcaf_pat_fileno: {
                    required: "Please Enter Patient File No!"
                },
                mcaf_pat_mob: {
                    required: "Please Enter Patient Mobile No!"
                },
                mcaf_auth: {
                    required: "Please Enter authorize!"
                },
                mcaf_auth1: {
                    required: "Please Enter authorize1!"
                },
            },
            highlight: function (element) {
                var elem = $(element);
                $(element).parent().addClass('has-error');
                //error_timeout(elem.attr("id"));
            },
            unhighlight: function (element) {
                var elem = $(element);
                $(element).parent().removeClass('has-error');
            },
            errorElement: 'span',
            errorClass: 'text-danger fw-bold',
            errorPlacement: function (error, element) {
                var elem = $(element);
                if (element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                } else {
                    error.insertAfter(element);
                }
            }
        });
        //$('#ads_contact').keypress(function (e) {
        //    var charCode = (e.which) ? e.which : e.keyCode
        //    var inputValue = $(this).val() + String.fromCharCode(charCode);

        //    if (String.fromCharCode(charCode).match(/[^0-9.]/g)) {
        //        return false;
        //    }
        //});
        //$('#ads_visit').keypress(function (e) {
        //    var charCode = (e.which) ? e.which : e.keyCode
        //    if (String.fromCharCode(charCode).match(/[^0-9./-]/g)) {
        //        return false;

        //    }
        //    else {
        //        if (e.target.value.length >= 18)
        //            return false;
        //    }
        //});

    }
    //#endregion

    //#region Add  Click
    $('#btn_Insert').on('click', function (e) {
        e.preventDefault();
        if ($("#form_AdnicMemberConsent").valid()) {
            $('#btn_Insert').removeClass("btn btn-sm btn-success");
            $('#btn_Insert').addClass("btn btn-sm btn-success btn-loaders btn-icon");
            $('#btn_Insert').html("Saving the Record....");

            var _dateInsert = {
                "mcafId": 0,
                "mcaf_appId": "@emr.appId",
                "mcaf_mem_name": $("#mcaf_mem_name").val(),
                "mcaf_pat_name": $("#mcaf_pat_name").val(),
                "mcaf_pat_memno": $("#mcaf_pat_memno").val(),
                "mcaf_relationship": $("#mcaf_relationship").val(),
                "mcaf_pat_fileno": $("#mcaf_pat_fileno").val(),
                "mcaf_pat_mob": $("#mcaf_pat_mob").val(),
                "mcaf_auth": $("#mcaf_auth").val(),
                "mcaf_auth1": $("#mcaf_auth1").val(),
                //"pcd_status": "Active",
                "__RequestVerificationToken": $('input[name="__RequestVerificationToken"]').val()
            }

            $.ajax({
                type: "Post",
                url: "@Url.Action("InsertAdnicMemberConsent", "AdnicMemberConsent", new {area = "InsuranceForms" })",
                dataType: 'JSON',
                data: _dateInsert,
                success: function (data) {
                    $('#btn_Insert').removeClass("btn btn-sm btn-success btn-loaders btn-icon");
                    $('#btn_Insert').addClass("btn btn-sm btn-success");
                    $('#btn_Insert').html("Save Changes");



                    if (data.isSuccess) {
                        if (data.isInserted) {
                            var alertPlaceholder = document.getElementById("Alert");

                            function alert(e, t) {
                                var l = document.createElement("div");
                                l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" role="alert">' + e +
                                    '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                            }
                            alert("<i class='fe fe-check-circle text-white'></i> Adnic Member Consent Saved Successfully!", "success");

                            Timeout();

                            $("#btn_Delete").removeClass("d-none");
                            $("#btn_Print").removeClass("d-none");
                        }
                        else {
                            let html = "<div class='col-12 col-sm-12 col-md-6 d-flex justify-content-center'>" +
                                "<div class='alert alert-warning' role='alert'>" +
                                "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                "<strong>Warning.. Adnic Member Consent already Exists..</strong><br/>" +
                                "</div></div>";
                            $("#Alert").html(html);
                        }
                    }
                    else {
                        let html = "<div class='col-12 col-sm-12 col-md-6 d-flex justify-content-center'>" +
                        "<div class='alert alert-danger' role='alert'>" +
                        "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                        "<strong>Validation Error.. Please correct before you submit the form!&nbsp;</strong><br/><ul>";

                        $.each(data.message, function (index, value) {
                            html += "<li><small>" + value + "</small><li>";
                            var elem = $("#" + index);
                            if (elem.hasClass("select2-hidden-accessible")) {
                                $("#select2-" + elem.attr("id") + "-container").parent().addClass('error');
                            }
                            else {
                                $(elem).addClass(" is-invalid");
                            }

                            setTimeout(function () {
                                if (elem.hasClass("select2-hidden-accessible")) {
                                    $("#select2-" + elem.attr("id") + "-container").parent().removeClass('error');
                                }
                                else {
                                    $(elem).removeClass("is-invalid");
                                }
                                }, 5000);
                        });

                        html += "</ul></div></div>";

                        $("#error").html(html);
                    }
                },
                error: function (xhr) {
                    $('#btn_Insert').removeClass("btn btn-sm btn-success btn-loaders btn-icon");
                    $('#btn_Insert').addClass("btn btn-sm btn-warning");
                    $('#btn_Insert').html("Add");
                    Timeout();
                }
            });
        }
        else {
            $('.modal-body').animate({
                scrollTop: ($('.has-error').offset().top - 300)
            }, 2000);
        }
    });
    //#endregion Add Click

    //#region Delete Click
    $('#btn_Delete').on('click', function (e) {
        e.preventDefault();
        $('#btn_Delete').removeClass("btn btn-success");
        $('#btn_Delete').addClass("btn btn-success btn-loaders btn-icon");
        $('#btn_Delete').html("Deleting the Record....");

        $.ajax({
            url: '@Url.Action("DeleteAdnicMemberConsent", "AdnicMemberConsent", new { area = "InsuranceForms" })?appId=' + "@emr.appId",
            type: "POST",
            dataType: 'JSON',
            success: function (data) {
                $('#btn_Delete').removeClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Delete').addClass("btn btn-warning");
                $('#btn_Delete').html("Delete");
                if (data.isAuthorized) {
                    if (data.success) {
                        var alertPlaceholder = document.getElementById("Alert");
                        function alert(e, t) {
                            var l = document.createElement("div");
                            l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                                '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                        }
                        alert("<i class='fe fe-check-circle text-white'></i>Adnic Member Consent Deleted Successfully!", "success");
                        clearControls();
                        Timeout();

                        $('#btn_Delete').addClass("d-none");
                        $("#pat_sign_box").addClass("d-none");

                    }
                    else {
                        let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                            "<div class='alert alert-warning' role='alert'>" +
                            "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                            "<strong>Error!.. Failed to Delete..</strong><br/>" +
                            "</div></div>";
                        $("#error").html(html);
                    }
                }
                else {
                    var alertPlaceholder = document.getElementById("Alert");
                    function alert(e, t) {
                        var l = document.createElement("div");
                        l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                            '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                    }
                    alert("<i class='fe fe-check-circle text-white'></i> You do not have Enough Privileges to Delete this Designation!", "Access Denied!");
                }
            },
            error: function (xhr) {
                $('#btn_Delete').removeClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Delete').addClass("btn btn-Delete");
                $('#btn_Delete').html("Delete");
                Timeout();
            }
        })
    });
//#endregion

    //#region Reset
    $('#btn_Reset').on('click', function (e) {
        e.preventDefault();
        clearControls();
    });
    //#endregion Reset

    //#region Print
    $('#btn_Print').on('click', function (e) {
        e.preventDefault();
        $.ajax({
            type: "Get",
            url: "@Url.Action("PrintPDFConsent", "AdnicMemberConsent", new {area = "InsuranceForms" })?appId=" + "@emr.appId" + "&form=AdnicMemberConsent",
            dataType: 'JSON',
            success: function (data) {
                if (data.isAuthorized) {
                    if (data.success) {
                        window.location.href = data.message.pdfPath
                    }
                }
            },
            error: function (xhr) {
                console.log(xhr);
            }
        });
    });
    //#endregion Print

    //#region Clear Controls
    var clearControls = function () {
        $(".form-control").val("");
    }
    //#endregion Clear Controls
    //#region Wacom Tab Signature
        var openWacomTabSignaturePad = function (id) {
            var _data = {
                "patId": "@emr.patId",
                "person": id,
                "form": "AdnicMemberConsent",
                "appId": "@emr.appId",
                "formname":"Adnic Member Consent",
                "formlink":"",
                "eSign":""
            }
            $.ajax({
                type: "GET",
                url: "@Url.Action("WacomTabSignaturePad", "WacomTabSignaturePad", new { area = "Common" })",
                contentType: "application/json",
                dataType: "html",
                data: _data,
                success: function (response) {
                    $("#signature_pad_body").html(response);
                    $("#signature_pad").modal("show");
                },
                error: function (xhr) {
                    console.log("Error :" + xhr.statusText);
                }
            });
        }
    //#endregion

    //#region Signature
    var openSignaturePad = function (id) {
        var _data = {
            "patId": "@emr.patId",
            "person": id,
            "form": "AdnicMemberConsent",
            "appId": "@emr.appId",
            "formname":"Adnic Member Consent",
            "formlink":"",
            "eSign":""
        }
        $.ajax({
            type: "GET",
            url: "@Url.Action("SignaturePad", "SignaturePad", new { area = "Common" })",
            contentType: "application/json",
            dataType: "html",
            data: _data,
            success: function (response) {
                $("#signature_pad_body").html(response);
                $("#signature_pad").modal("show");
            },
            error: function (xhr) {
                console.log("Error :" + xhr.statusText);
            }
        });
    }
    //#endregion Signature

    $('#signature_pad').on('hidden.bs.modal', function () {
        if (localStorage.getItem("sign") != null) {
            GetSignaturename('patient');
            localStorage.removeItem("sign");
        }
    });

    //#region Get Signature
    var GetSignaturename = function  (person) {
        $.ajax({
            url: '@Url.Action("GetSignature", "SignaturePad", new { area = "Common" })?appId=' + "@emr.appId" + '&person=' + person + '&form=AdnicMemberConsent',
            type: "GET",
            dataType: "json",
            async: false,
            success: function (response) {
                console.log(response);
                let sign = response[0].psb_sign;
                if (response[0].person == "patient") {
                    $("#pat_sign_box").removeClass("d-none");
                    $("#pat_sign").attr("src", sign);
                }
                if (response[0].person == "patient") {
                    $("#pat_sign_box0").removeClass("d-none");
                    $("#pat_sign0").attr("src", sign);
                }

            },
            error: function (xhr) {
                console.log(xhr);
                alert(xhr);
            }

        });
    };
    //#endregion Get Signature

    //#region Alert Timeout
    function Timeout() {
        window.setTimeout(function () {
            $(".alert").fadeTo(500, 0).slideUp(500, function () {
                $(this).remove();
            });
        }, 4200);
    }
    //#endregion Alert Timeout
</script>

