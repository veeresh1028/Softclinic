@model BusinessEntities.EMR.ConsultationEMR_Main
@using System.Linq;
@using System.Security.Claims;
@using BusinessEntities;
@using System.Configuration;
@{
    var claims = ClaimsPrincipal.Current.Identities.First().Claims.ToList();
    var emp_designation = claims.Where(c => c.Type == ClaimTypes.Role).Select(c => c.Value).SingleOrDefault();
    EMRInfo emr = (EMRInfo)TempData["emr_data"];
    TempData.Keep("emr_data");

}
<!-- Row -->

<div class="card">
    <div class="row g-0">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <div>
                <h4 class="page-title mb-0 text-primary align-content-center ms-5 mb-4 ">
                    ConsultationEMR edit
                </h4>
            </div>
        </div>

        <div class="col-lg-8 col-xl-2">
            <div class="overflow-hidden mb-0 mb-lg-0">
                <div class="card-body p-0">
                    <div class="main-content-left main-content-left-chat">

                        <div class="main-chat-list" id="uTittleList">
                            <a href="#uconsultation_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">Consultation Summary</span>
                                </div>
                            </a>
                            <a href="#uhyjamatype_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">Type of Hijjama</span>
                                </div>
                            </a>
                            <a href="#ucomplaints_body">
                                <div class="media ">
                                    <span class="font-weight-semibold">Complaints</span>
                                </div>
                            </a>
                            <a href="#upfa_body">
                                <div class="media">
                                    <span class="font-weight-semibold">Past Medical History</span>
                                </div>
                            </a>
                            <a href="#umentalstatus_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">Mental Status</span>
                                </div>
                            </a>
                            <a href="#upain_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">Pain Scale</span>
                                </div>
                            </a>
                            <a href="#upainsclasification_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">Pain Clasification</span>
                                </div>
                            </a>
                            <a href="#udurationinjurry_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">Duration of Injury</span>
                                </div>
                            </a>
                            <a href="#uconditionstatus_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">Condition Status</span>
                                </div>
                            </a>

                            <a href="#uaffected_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">Affected Body Parts</span>
                                </div>
                            </a>
                            <a href="#uphysicalassesment_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">Physical Assesment</span>
                                </div>
                            </a>
                            <a href="#ubodyimage_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">Body Image</span>
                                </div>
                            </a>
                            <a href="#uneurological_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">Neurological Assesment</span>
                                </div>
                            </a>
                            <a href="#udiagnosis_body">
                                <div class="media">
                                    <span class="font-weight-semibold">Diagnosis Details</span>
                                </div>
                            </a>
                            <a href="#utreatmentplan_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">Treatment Plan</span>
                                </div>
                            </a>
                            <a href="#ufollowup_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">Follow up Sessions</span>
                                </div>
                            </a>

                            <a href="#utreatment_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">Treatment Points</span>
                                </div>
                            </a>
                            <a href="#umanagement_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">Management</span>
                                </div>
                            </a>


                        </div><!-- main-chat-list -->
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-7 col-xl-10">
            <div class="border-start">
                <div class="main-content-body main-content-body-chat">
                    <div class="main-chat-header">
                        <nav class="nav">
                            <select placeholder="Select Template" class="form-select select2" id="templates_load" name="template">
                            </select>
                        </nav>
                    </div><!-- main-chat-header -->
                    <form id="editform_ConsultationEMR" autocomplete="off" ondrop="return false;" oncut="return false;">
                        <div class="main-chat-body" id="uContentb">
                            <section id="uconsultation_body">
                                <div class="main-chat-msg-name mt-3">
                                    <h6><span class='badge bg-gray'>Consultation Summary</span></h6>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Consultation&nbsp;</label>
                                                <input class="form-control mb-4 text-capitalize" placeholder="Patient Details" readonly="" value="@Model.template_info.consultation" type="text">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Status&nbsp;</label>
                                                <input class="form-control mb-4 text-capitalize" placeholder="Status" readonly="" value="@Model.template_info.app_status" type="text">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Referred By&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Referred By" readonly="" type="text" value="">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Order Remarks&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Order Remarks" readonly="" type="text" value="@Model.template_info.app_comments">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Visit Type&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Visit Type" readonly="" type="text" value="@Model.template_info.app_type">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Consultation Type&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Consultation Type" readonly="" type="text" value="@Model.template_info.consultationtype">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Start Time&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="0:00" readonly="" type="text" value="@Model.template_info.starttime">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">End Time&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="0:00" readonly="" type="text" value="@Model.template_info.endtime">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row d-none">
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">PBM prescription Id&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="" readonly="" type="text" value="">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">ERx prescription Id&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="" readonly="" type="text" value="">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Erx Reference Number&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="" readonly="" type="text" value="">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="uhyjjama_body">
                                <div class="main-chat-msg-name">
                                    <h6><span class='badge bg-gray'>Type of Hyjjama</span></h6>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-12">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Type&nbsp;</label>
                                                <select placeholder="Select Any" class="form-select select2 mb-2" id="ucemt_type" name="ucemt_type">
                                                    <option value="">Select Type</option>
                                                    <option value="Therapeutic">Therapeutic</option>
                                                    <option value="NonTherapeutic">Non-Therapeutic</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="ucomplaints_body">
                                <div class="main-chat-msg-name">
                                    <h6><span class='badge bg-gray'>Complaints</span></h6>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-10">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Cheif Complaints&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Enter Cheif Complaints" rows="3" id="ucemr_complaint">@(Model.template_details?.cemr_complaint ?? string.Empty)</textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-2 mt-5">
                                            <button class="btn btn-outline-dark btn-sm ms-lg-2 ms-sm-2" type="button" id="addComplaints">
                                                <i class="fa fa-bullseye"></i>
                                                Add New
                                            </button>
                                        </div>
                                    </div>
                                </div>

                            </section>
                            <div>
                                <section id="upfa_body">
                                    <div class="main-chat-msg-name">
                                        <h6><span class='badge bg-gray'>Past Medical History</span></h6>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-12">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">History&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Enter Past Medical History" rows="3" id="ucemr_pasthistory">@(Model.template_details?.cemr_pasthistory ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section id="umentalstatus_body">
                                    <div class="main-chat-msg-name">
                                        <h6><span class='badge bg-gray'>Mental Status</span></h6>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-6">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Parameter&nbsp;</label>
                                                    <div class="custom-controls-stacked">
                                                        <label class="custom-control custom-checkbox">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Oriented" id="1">
                                                            <span class="custom-control-label">Oriented</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Disoriented" id="2">
                                                            <span class="custom-control-label">Disoriented</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Impired Cognition" id="3">
                                                            <span class="custom-control-label">Impired Cognition</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-6">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Remarks&nbsp;</label>
                                                    <div class="custom-controls-stacked">
                                                        <input class="form-control mb-4" placeholder="Enter Oriented Remarks" type="text" id="ucemr_mentalorianted" value="@(Model.template_details?.cemr_mentalorianted ?? string.Empty)">
                                                        <input class="form-control mb-4" placeholder="Enter Disoriented Remarks" type="text" id="ucemr_mentaldisoriented" value="@(Model.template_details?.cemr_mentaldisoriented ?? string.Empty)">
                                                        <input class="form-control mb-4" placeholder="Enter Impired Cognition Remarks" type="text" id="ucemr_mentalimpired" value="@(Model.template_details?.cemr_mentalimpired ?? string.Empty)" >
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section id="upain_body">
                                    <div class="main-chat-msg-name">
                                        <h6><span class='badge bg-gray'>Pain Scale</span></h6>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-12 col-lg-12 text-center">
                                                <div class="row">
                                                    <div class="col-sm-3 col-md-3 col-lg-3">
                                                        <div class="form-group mb-3">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3 rounded-circle" id="cimg1">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#fbec5d" class="bi bi-emoji-laughing-fill" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5c0 .501-.164.396-.415.235C6.42 6.629 6.218 6.5 6 6.5c-.218 0-.42.13-.585.235C5.164 6.896 5 7 5 6.5 5 5.672 5.448 5 6 5s1 .672 1 1.5zm5.331 3a1 1 0 0 1 0 1A4.998 4.998 0 0 1 8 13a4.998 4.998 0 0 1-4.33-2.5A1 1 0 0 1 4.535 9h6.93a1 1 0 0 1 .866.5zm-1.746-2.765C10.42 6.629 10.218 6.5 10 6.5c-.218 0-.42.13-.585.235C9.164 6.896 9 7 9 6.5c0-.828.448-1.5 1-1.5s1 .672 1 1.5c0 .501-.164.396-.415.235z" /></svg>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3 rounded-circle " id="cimg2">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#ffe135" class="bi bi-emoji-neutral-fill" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm-3 4a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8z" /></svg><div class="form-group mb-3">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3 rounded-circle " id="cimg3">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#f5c71a" class="bi bi-emoji-frown-fill" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm-2.715 5.933a.5.5 0 0 1-.183-.683A4.498 4.498 0 0 1 8 9.5a4.5 4.5 0 0 1 3.898 2.25.5.5 0 0 1-.866.5A3.498 3.498 0 0 0 8 10.5a3.498 3.498 0 0 0-3.032 1.75.5.5 0 0 1-.683.183zM10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8z" /></svg>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3 rounded-circle " id="cimg4">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#ffa500" class="bi bi-emoji-expressionless-fill" viewBox="0 0 16 16">
                                                                <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM4.5 6h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm5 0h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm-5 4h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1z" />
                                                            </svg>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3 rounded-circle " id="cimg5">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#ff7518" class="bi bi-emoji-dizzy-fill" viewBox="0 0 16 16">
                                                                <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM4.146 5.146a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 1 1 .708.708l-.647.646.647.646a.5.5 0 1 1-.708.708L5.5 7.207l-.646.647a.5.5 0 1 1-.708-.708l.647-.646-.647-.646a.5.5 0 0 1 0-.708zm5 0a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708.708l-.647.646.647.646a.5.5 0 0 1-.708.708l-.646-.647-.646.647a.5.5 0 1 1-.708-.708l.647-.646-.647-.646a.5.5 0 0 1 0-.708zM8 13a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" />
                                                            </svg>

                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3 rounded-circle " id="cimg6">
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#ff4500" class="bi bi-emoji-angry-fill" viewBox="0 0 16 16">
                                                                <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM4.053 4.276a.5.5 0 0 1 .67-.223l2 1a.5.5 0 0 1 .166.76c.071.206.111.44.111.687C7 7.328 6.552 8 6 8s-1-.672-1-1.5c0-.408.109-.778.285-1.049l-1.009-.504a.5.5 0 0 1-.223-.67zm.232 8.157a.5.5 0 0 1-.183-.683A4.498 4.498 0 0 1 8 9.5a4.5 4.5 0 0 1 3.898 2.25.5.5 0 1 1-.866.5A3.498 3.498 0 0 0 8 10.5a3.498 3.498 0 0 0-3.032 1.75.5.5 0 0 1-.683.183zM10 8c-.552 0-1-.672-1-1.5 0-.247.04-.48.11-.686a.502.502 0 0 1 .166-.761l2-1a.5.5 0 1 1 .448.894l-1.009.504c.176.27.285.64.285 1.049 0 .828-.448 1.5-1 1.5z" />
                                                            </svg>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3 col-md-3 col-lg-3">
                                                        <div class="form-group mb-3">
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-sm-3 col-md-3 col-lg-3">
                                                        <div class="form-group mb-3">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3">
                                                            <label class="form-label text-black text-center">0&nbsp;</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3">
                                                            <label class="form-label text-black text-center">2&nbsp;</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3">
                                                            <label class="form-label text-black text-center">4&nbsp;</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3">
                                                            <label class="form-label text-black text-center">6&nbsp;</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3">

                                                            <label class="form-label text-black text-center">8&nbsp;</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3">
                                                            <label class="form-label text-black text-center">10&nbsp;</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3 col-md-3 col-lg-3">
                                                        <div class="form-group mb-3">
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-sm-3 col-md-3 col-lg-3">
                                                        <div class="form-group mb-3">
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3">
                                                            <label class="form-label text-black text-center">NO HURT&nbsp;</label>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3">
                                                            <label class="form-label text-black text-center">
                                                                HURTS LITTLE BIT&nbsp;
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3">
                                                            <label class="form-label text-black text-center">
                                                                HURTS LITTLE MORE&nbsp;
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3">
                                                            <label class="form-label text-black text-center">
                                                                HURTS EVEN MORE&nbsp;
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3">

                                                            <label class="form-label text-black text-center">
                                                                HURTS WHOLE LOT&nbsp;
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-1 col-md-1 col-lg-1">
                                                        <div class="form-group mb-3">
                                                            <label class="form-label text-black text-center">
                                                                HURTS WORST&nbsp;
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-3 col-md-3 col-lg-3">
                                                        <div class="form-group mb-3">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-12 col-md-12 col-lg-12">
                                                        <input class="rangeslider1" data-extra-classes="irs-outline" id="ucemr_pain" name="example_name" type="text">
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </section>
                                <section id="upainsclasification_body">
                                    <div class="main-chat-msg-name">
                                        <h6><span class='badge bg-gray'>Pain Classification</span></h6>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-12">
                                                <div class="custom-controls-stacked">
                                                    <div class="d-flex flex-row bg-light ">
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Acute" id="acute1">
                                                            <span class="custom-control-label">Acute</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Sub Acute" id="subacute">
                                                            <span class="custom-control-label">Sub Acute</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Chronic" id="chronic">
                                                            <span class="custom-control-label">Chronic</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Recurrent" id="recurrent">
                                                            <span class="custom-control-label">Recurrent</span>
                                                        </label>
                                                    </div>
                                                    <div class="d-flex flex-row bg-light ">
                                                        <input class="form-control me-2 d-none" placeholder="Acute" type="text" id="ucemr_acute1" value="@(Model.template_details?.cemr_acute1 ?? string.Empty)" >
                                                        <input class="form-control me-2 d-none" placeholder="Sub Acute" type="text" id="ucemr_subacute" value="@(Model.template_details?.cemr_subacute ?? string.Empty)" >
                                                        <input class="form-control me-2 d-none" placeholder="Chronic" type="text" id="ucemr_chronic" value="@(Model.template_details?.cemr_chronic ?? string.Empty)" >
                                                        <input class="form-control me-2 d-none" placeholder="Recurrent" type="text" id="ucemr_recurrent" value="@(Model.template_details?.cemr_recurrent ?? string.Empty)" >
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>

                                <section id="udurationinjurry_body">
                                    <div class="main-chat-msg-name">
                                        <h6><span class='badge bg-gray'>Duration of injury</span></h6>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-12">
                                                <div class="form-group mb-3">
                                                    <input class="form-control mb-4" placeholder="Enter Duration" type="text" id="ucemr_durationin" value="@(Model.template_details?.cemr_durationin ?? string.Empty)">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section id="uconditionstatus_body">
                                    <div class="main-chat-msg-name">
                                        <h6><span class='badge bg-gray'>Condition Status</span></h6>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-6">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Parameter&nbsp;</label>
                                                    <div class="custom-controls-stacked">
                                                        <label class="custom-control custom-checkbox">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Getting worse" id="gettingworse">
                                                            <span class="custom-control-label">Getting worse</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Better" id="better">
                                                            <span class="custom-control-label">Better</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Still The same" id="stillsame">
                                                            <span class="custom-control-label">Still The same</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-6">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Remarks&nbsp;</label>
                                                    <div class="custom-controls-stacked">
                                                        <input class="form-control mb-4 d-none" placeholder="Enter Remarks" type="text" id="ucemr_gettingworse" value="@(Model.template_details?.cemr_gettingworse ?? string.Empty)">
                                                        <input class="form-control mb-4 d-none" placeholder="Enter Remarks" type="text" id="ucemr_better" value="@(Model.template_details?.cemr_better ?? string.Empty)">
                                                        <input class="form-control mb-4 d-none" placeholder="Enter Remarks" type="text" id="ucemr_stillsame" value="@(Model.template_details?.cemr_stillsame ?? string.Empty)">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section id="uaffected_body">
                                    <div class="main-chat-msg-name">
                                        <h6><span class='badge bg-gray'>Affected Body Parts</span></h6>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-12">
                                                <div class="form-group mb-3">
                                                    <textarea class="form-control mb-4" placeholder="Affected Body Parts" rows="3" id="ucemr_bodyparts">@(Model.template_details?.cemr_bodyparts ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>


                                <section id="uphysicalassesment_body">
                                    <div class="main-chat-msg-name">
                                        <h6><span class='badge bg-gray'>Physical Assesment</span></h6>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-3">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Observation Inspection&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Observation Inspection" rows="3" id="ucemr_observationins">@(Model.template_details?.cemr_observationins ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-3">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Palpation&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Palpation" rows="3" id="ucemr_palpation">@(Model.template_details?.cemr_palpation ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-3">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">ROM&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="ROM" rows="3" id="ucemr_rom">@(Model.template_details?.cemr_rom ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-3">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Muscle Power Test&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Muscle Power Test" rows="3" id="ucemr_mptest">@(Model.template_details?.cemr_mptest ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-12">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Special Tests&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Special Tests" rows="2" id="ucemr_stest">@(Model.template_details?.cemr_stest ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section id="ubodyimage_body">
                                    <div class="main-chat-msg-name">
                                        <h6><span class='badge bg-gray'>Body Image</span></h6>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-12">
                                                <div class="form-group mb-3">
                                                    <button id="drawingdot" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode" data-mode="dot" type="button">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle-fill" viewBox="0 0 16 16">
                                                            <circle cx="8" cy="8" r="8" />
                                                        </svg>
                                                    </button>
                                                    <button id="drawingcheck" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode" data-mode="check" type="button">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                                            <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
                                                        </svg>
                                                    </button>
                                                    <input id="color_picker" type="text">
                                                    <button id="undo_button" class="btn bg-dark-transparent btn-icon btn-svg" type="button">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
                                                            <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z" />
                                                            <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z" />
                                                        </svg>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-7">
                                                <div>
                                                    <canvas id="cuppingCanvas" width="578" height="650"></canvas>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-12">
                                                <div class="form-group mb-3">
                                                    <textarea class="form-control mb-4" placeholder="Enter notes" rows="2" id="lfm_doc2"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section id="uneurological_body">
                                    <div class="main-chat-msg-name">
                                        <h6><span class='badge bg-gray'>Neurological Assesment</span></h6>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-4">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Reflexes&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Reflexes" rows="2" id="ucemr_reflexes">@(Model.template_details?.cemr_reflexes ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-4">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Dermatone&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Dermatone" rows="2" id="ucemr_dermatone">@(Model.template_details?.cemr_dermatone ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-4">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Myotome&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Myotome" rows="2" id="ucemr_myotome">@(Model.template_details?.cemr_myotome ?? string.Empty)</textarea>
                                                </div>
                                            </div>


                                            <div class="col-sm-12 col-md-6 col-lg-12">
                                                <label class="form-label text-black">ADL Activities&nbsp;</label>
                                                <div class="custom-controls-stacked">
                                                    <div class="d-flex flex-row bg-light ">
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Independent" id="independent">
                                                            <span class="custom-control-label">Independent</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Dependent" id="dependent">
                                                            <span class="custom-control-label">Dependent</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Needs Crutches" id="crutches">
                                                            <span class="custom-control-label">Needs Crutches</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Walker" id="walker">
                                                            <span class="custom-control-label">Walker</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Wheelchair" id="wheelchair">
                                                            <span class="custom-control-label">Wheelchair</span>
                                                        </label>
                                                    </div>
                                                    <div class="d-flex flex-row bg-light ">
                                                        <input class="form-control me-2 d-none" placeholder="Independent" type="text" id="ucemr_independent" value="@(Model.template_details?.cemr_independent ?? string.Empty)">
                                                        <input class="form-control me-2 d-none" placeholder="Dependent" type="text" id="ucemr_dependent" value="@(Model.template_details?.cemr_dependent ?? string.Empty)">
                                                        <input class="form-control me-2 d-none" placeholder="Needs Crutches" type="text" id="ucemr_crutches" value="@(Model.template_details?.cemr_crutches ?? string.Empty)">
                                                        <input class="form-control me-2 d-none" placeholder="Walker" type="text" id="ucemr_walker" value="@(Model.template_details?.cemr_walker ?? string.Empty)">
                                                        <input class="form-control me-2 d-none" placeholder="Wheelchair" type="text" id="ucemr_wheelchair" value="@(Model.template_details?.cemr_wheelchair ?? string.Empty)">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-12">
                                                <label class="form-label text-black">Physical Condition&nbsp;</label>
                                                <div class="custom-controls-stacked">
                                                    <div class="d-flex flex-row bg-light ">
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Active" id="active">
                                                            <span class="custom-control-label">Active</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Athlete" id="athlete">
                                                            <span class="custom-control-label">Athlete</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Sedentary Lifestyle" id="lifestyle">
                                                            <span class="custom-control-label">Sedentary Lifestyle</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Bedridden" id="bedridden">
                                                            <span class="custom-control-label">Bedridden</span>
                                                        </label>
                                                    </div>
                                                    <div class="d-flex flex-row bg-light ">
                                                        <input class="form-control me-2 d-none" placeholder="Active" type="text" id="ucemr_active" value="@(Model.template_details?.cemr_active ?? string.Empty)">
                                                        <input class="form-control me-2 d-none" placeholder="Athlete" type="text" id="ucemr_athlete" value="@(Model.template_details?.cemr_athlete ?? string.Empty)">
                                                        <input class="form-control me-2 d-none" placeholder="Sedentary Lifestyle" type="text" id="ucemr_lifestyle" value="@(Model.template_details?.cemr_lifestyle ?? string.Empty)">
                                                        <input class="form-control me-2 d-none" placeholder="Bedridden" type="text" id="ucemr_bedridden" value="@(Model.template_details?.cemr_bedridden ?? string.Empty)">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-12">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Radiology Report&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Radiology Report" rows="2" id="ucemr_radiology">@(Model.template_details?.cemr_radiology ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section id="udiagnosis_body">
                                    <div class="main-chat-msg-name">
                                        <span class='badge bg-gray'>Diagnosis</span>
                                        <span>
                                            <button class="btn btn-outline-dark btn-sm ms-lg-2 ms-sm-2" type="button" id="addDiagnosis">
                                                <i class="fa fa-bullseye"></i>   Add Diagnosis
                                            </button>
                                        </span>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row" id="listItemsl">
                                            <div class="col-sm-12 col-md-12 col-lg-12">
                                                <div class="table-responsive" style="min-height:unset;">
                                                    <table id="tbl_emrpatdignosis" class="table table-striped table-bordered text-nowrap resize-table" style="width: 100%; cursor: pointer;">
                                                        <thead>
                                                            <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                                <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Type</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Code</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Diagnosis</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Notes</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">year</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Change To Primary</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section id="utreatmentplan_body">
                                    <div class="main-chat-msg-name">
                                        <h6><span class='badge bg-gray'>Treatment Plan</span></h6>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-6">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Procedure&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Procedure" rows="3" id="ucemr_procedure">@(Model.template_details?.cemr_procedure ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-6">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Short Term Goals&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Short Term Goals" rows="3" id="ucemr_stgoals">@(Model.template_details?.cemr_stgoals ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-6">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Long Term Goals&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Long Term Goals" rows="3" id="ucemr_ltgoals">@(Model.template_details?.cemr_ltgoals ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-6">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Follow Up plan and Session&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Follow Up plan and Session" rows="3" id="ucemr_followup">@(Model.template_details?.cemr_followup ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section id="ufollowup_body">
                                    <div class="main-chat-msg-name">
                                        <h6><span class='badge bg-gray'>Follow Up Sessions</span></h6>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-12">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">-&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Enter Something" rows="3" id="ucemr_session">@(Model.template_details?.cemr_session ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section id="utreatment_body">
                                    <div class="main-chat-msg-name">
                                        <h6><span class='badge bg-gray'>Treatment Points</span></h6>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-12">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">-&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Enter Something" rows="3" id="ucemr_treatpoints"> @(Model.template_details?.cemr_treatpoints ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section id="umanagement_body">
                                    <div class="main-chat-msg-name">
                                        <span class='badge bg-gray'>Management</span> <span>
                                            <button class="btn btn-outline-dark btn-sm ms-lg-2 ms-sm-2" type="button" id="addPrescription">
                                                <i class="fa fa-bullseye"></i>   Add Prescription
                                            </button>
                                        </span>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row">
                                            <div class="table-responsive">
                                                <table id="tbl_prescription" class="table table-striped table-bordered text-nowrap resize-table" style="width: 100%; cursor: pointer;">
                                                    <thead>
                                                        <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                            <th class="border-bottom-0 font-weight-semibold text-white text-center"></th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">ID</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Code</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Generic</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Brand</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Dosage</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Strength</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Use <br />(Units)</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Frequency<br /> Value</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Frequency</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Duration</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Quantity</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Route for Admin</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Instructions</th>
                                                        </tr>
                                                    </thead>
                                                </table>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-12">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Patient Instructions&nbsp;</label>
                                                    <textarea class="form-control mb-4" placeholder="Enter Something" rows="3" id="ucemr_management">@(Model.template_details?.cemr_management ?? string.Empty)</textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                                <section id="ufollowupdetail_body">
                                    <div class="main-chat-msg-name">
                                        <h6><span class='badge bg-gray'>Followup Details</span></h6>
                                    </div>
                                    <div class="content-inner">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-3">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Doctor Name&nbsp;</label>
                                                    <input class="form-control mb-4" placeholder="Input box (readonly)" readonly="" type="text" value="@Model.template_info.doc_name">
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-3">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Visiting Date&nbsp;</label>
                                                    <input class="form-control mb-4" placeholder="Remarks" readonly="" type="text" value="@Model.template_info.app_fdate.ToString()">
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-3">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Remarks&nbsp;</label>
                                                    <input class="form-control mb-4" placeholder="Remarks" readonly="" type="text" value="@Model.template_info.app_resnforvisit">
                                                </div>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-3">
                                                <div class="form-group mb-3">
                                                    <label class="form-label text-black">Actions&nbsp;</label>
                                                    <input class="form-control mb-4" placeholder="Actions" readonly="" type="text" value="@Model.template_info.app_status">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>

                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-2 col-lg-2">
                                <div class="checkbox d-flex flex-row ms-5 ">
                                    <div class="custom-checkbox custom-control me-2">
                                        <input type="checkbox" data-checkboxes="mygroup" class="custom-control-input" id="chk_template1" value="Appointment">
                                        <label class="custom-control-label"> Save Patient</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-lg-4">
                                <div class="checkbox d-flex flex-row ms-5 ">
                                    <div class="custom-checkbox custom-control me-2">
                                        <input type="checkbox" data-checkboxes="mygroup" class="custom-control-input" id="chk_template" value="Template">
                                        <label class="custom-control-label"> Template</label>
                                    </div>
                                    <input class="form-control d-none" style="width: 40%;" placeholder="Template Name" type="text" id="temp_name">
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6 text-center">
                                <div class="btn-list btn-animation">
                                    <button type="submit" class="btn btn-sm btn-warning" id="btn_Update_ConsultEMR">Save Changes</button>
                                    <button type="submit" class="btn btn-sm btn-outline-danger" id="btn_Delete_ConsultEMR">Delete</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <!-- /Row -->
        </div>

    </div>
</div>

<script>
       var item_arr = [];
       var isTemplate = false;
       var isvalid = true;
       var tempName = "";
   //#region Page Load
   $(function () {
       $("body").addClass("app sidebar-mini sidenav-toggled");
       GetCheckedValues();
        $('#upa_pain').ionRangeSlider({
            min: 0,
            max: 10,
            from: 0,
        });
        var instance = $('#upa_pain').data("ionRangeSlider");
        instance.update({
            from: "@Model.template_details.cemr_pain" //your new value ionRangeSlider
        });
       const ps = new PerfectScrollbar('#uTittleList', {
           useBothWheelAxes: false,
           suppressScrollX: false,
       });

       const ps1 = new PerfectScrollbar('#uContentb', {
           useBothWheelAxes: false,
           suppressScrollX: false,
       });
       $("#ucemt_type").select2({
           placeholder: 'Select Type',
           width: '50%',
           dropdownParent: $('#editform_ConsultationEMR')
       });
       $("#template").select2({
           placeholder: 'Select Type',
           minimumResultsForSearch: '',
           width: '100%',
           dropdownParent: $('#editform_ConsultationEMR')
       });
       //GetTemplates("");
       //GetPatDiagnosis();
       //GetPrescription();
       $('[data-bs-toggle="tooltip"]').tooltip();
       $('.btnCloseCreate').removeClass("d-none");
       $("#drawingMode").select2({
           placeholder: 'Select Drawing Mode',
           width: '7%',
           minimumResultsForSearch: '',
           dropdownParent: $('#editform_ConsultationEMR'),
           escapeMarkup: function (markup) {
               return markup;
           }
       });
       $('#color_picker').spectrum({
           type: "flat",
           showInput: true,
           preferredFormat: "hex",
           color: '#0061da'
       });

      /* Loadimage();*/
   });
   //#endregion Page Load

   //#region Get CheckedValues
    var GetCheckedValues = function () {

         var pd_1_ = "@Model.template_details.cemr_checkvalue";
        if (pd_1_ !== "") {
            var myarray = pd_1_.split(',');
            myarray.forEach(function (value) {
            var checkbox = $('#u' + value);

                if (checkbox.length > 0) {
                    checkbox.prop("checked", true);
                }
            });
        }

    }
    //#endregion

   //#region load Templates
   var GetTemplates = function (query) {
       $.ajax({
           url: '@Url.Action("GetTemplates", "ConsultationEMR", new { area = "EMR" })?query=' + query,
           type: "GET",
           dataType: "json",
           async: false,
           success: function (response) {
               $("#template").select2({
                   placeholder: 'Select Type ',
                   width: '100%',
                   minimumResultsForSearch: '',
                   maximumInputLength: 3,
                   dropdownParent: $('#editform_ConsultationEMR'),

               });
               if (response.length > 0) {
                   var newOption;
                   var data;
                   $.each(response, function (j) {
                        data = {
                           "id": response[j].id,
                           "text": response[j].text,
                       };
                       newOption = new Option(response[j].text, response[j].id, true, true);
                       $('#templates_load').append(newOption);
                   });
                  /* $('#templates_load').trigger('change');*/

               }


           },
           error: function (xhr) {
               console.log(xhr);
               alert(xhr);
           },

       });
   };
   //#endregion load Templates


   $('#uContentb').on('scroll', function () {
       var scrollPosition = $(this).scrollTop();

       $("#uTittleList a").each(function () {
           var target = $($(this).attr('href'));
           if (target.position().top <= scrollPosition && target.position().top + target.outerHeight() > scrollPosition) {
               $("#uTittleList a").removeClass("selected");
               $(this).addClass("selected");
           }
       });
   });

   //#region Slider Event
   $('#cemr_pain').on("change", function () {
       var $inp = $(this);
       var from = $inp.prop("value"); // reading input value
       var from2 = $inp.data("from"); // reading input data-from attribute
       if (from == 0) {
           $('#cimg1').addClass("btn  btn-outline-success");
       } else if (from == 2) {
           $('#cimg2').addClass("btn  btn-outline-success");
       } else if (from == 4) {
           $('#cimg3').addClass("btn  btn-outline-success");
       } else if (from == 6) {
           $('#cimg4').addClass("btn  btn-outline-success");
       } else if (from == 8) {
           $('#cimg5').addClass("btn  btn-outline-success");
       } else if (from == 10) {
           $('#cimg6').addClass("btn  btn-outline-success");
       } else {
           $('#cimg1').removeClass("btn  btn-outline-success");
           $('#cimg2').removeClass("btn  btn-outline-success");
           $('#cimg3').removeClass("btn  btn-outline-success");
           $('#cimg4').removeClass("btn  btn-outline-success");
           $('#cimg5').removeClass("btn  btn-outline-success");
           $('#cimg6').removeClass("btn  btn-outline-success");
       }
   });
   //#endregion Slider Event

   //#region Load PatientDiagnosis
   var GetPatDiagnosis = function () {
       $.ajax({
           type: "GET",
           url: "@Url.Action("GetAllPatientDiagnosis", "PatientDiagnosis", new { area = "EMR" })?appId=" + "@emr.appId",
           success: function (response) {

               if (response.isAuthorized != false) {
                   var table;
                   if ($.fn.dataTable.isDataTable('#tbl_emrpatdignosis')) {
                       table = $('#tbl_emrpatdignosis').DataTable();
                       table.clear();
                       table.rows.add(response).draw();
                   }
                   else {
                       console.log(response);
                       BindDataTableDiagEMR(response);
                   }
               }
               else {
                   console.log("You are not Authorized!");
               }
           },
           error: function (xhr) {
               console.log(xhr);
           }
       }).done(function () {
           resizedt();
       });
   }
   //#endregion Load PatientDiagnosis
   //#region Load Prescription
   var GetPrescription = function () {
       $.ajax({
           type: "GET",
           url: "@Url.Action("GetAllPrescription", "Prescription", new { area = "EMR" })?appId=" + "@emr.appId" + "&pre_med_type=CASH",
           success: function (response) {

               if (response.isAuthorized != false) {
                   var table;
                   if ($.fn.dataTable.isDataTable('#tbl_prescription')) {
                       table = $('#tbl_prescription').DataTable();
                       table.clear();
                       table.rows.add(response).draw();
                   }
                   else {
                       console.log(response);
                       BindDataTablePresc(response);
                   }
               }
               else {
                   console.log("You are not Authorized!");
               }
           },
           error: function (xhr) {
               console.log(xhr);
           }
       }).done(function () {
           resizedt();
       });
   }
   //#endregion Load Prescription

   //Reset Treatment
   $('#btn_Reset_Diag').on('click', function (e) {
       e.preventDefault();
       $("#pad_notes").val("");
       $("#pad_year").val("");
       $("#pad_diagnosis").val("").trigger("change");

   });
   //Load Invoice Items
   var GetInvoiceItems = function (response) {
       if (response != null && response != undefined) {
           var table;
           if ($.fn.dataTable.isDataTable('#tbl_emrpatdignosis')) {
               table = $('#tbl_emrpatdignosis').DataTable();
               table.clear();
               table.rows.add(response).draw();
           }
           else {
               BindDataTableDiagEMR(response);
           }
       }
   }
   //#region Bind Datatable
       var BindDataTableDiagEMR = function (response) {
           var table = $("#tbl_emrpatdignosis").DataTable({
               fixedHeader: {
                   header: true,
                   footer: true
               },
               processing: true,
               "deferRender": true,
               "pageLength": 100,
               "retrieve": true,
               lengthChange: true,
               "aaData": response,
               "aoColumns": [
                   {
                       "mData": "padId",
                       "orderable": false,
                       "searchable": false,
                       "className": "text-center",
                       "render": function (data, type, row, meta) {
                           let _index = (meta.row) + 1;
                           if (_index >= 10) {
                               return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                           }
                           else {
                               return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                           }
                       }
                   },

                   {
                       "mData": "pad_type",
                       "className": 'text-left',

                   },
                   {
                       "mData": "diag_code",
                       "className": 'text-left',

                   },
                   {
                       "mData": "diag_name",
                       "className": 'text-left',

                   },
                   {
                       "mData": "pad_notes",
                       "className": 'text-left',

                   },
                   {
                       "mData": "pad_year",
                       "className": 'text-left',

                   },
                   {
                       "mData": "padId",
                       "className": 'btn-view text-center',
                       "orderable": false,
                       "searchable": false,
                       "render": function (padId, type, full, meta) {
                           var pad_type = full.pad_type;
                           var Action = '';
                           //Change diagnosis type

                           Action += '<a id=btn_Type_Diagnosis  onclick="ChangeDiagnosisType(' + padId + ',' + "'" + pad_type + "'" + ')"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-left-right" viewBox="0 0 16 16">  <path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"/></svg></a>';
                           return Action;

                       },
                   }

               ],
               order: [[1, 'asc']],
               "searching": false,
               scrollX: true,
               scrollY: 500,
               "bPaginate": false,
               "bLengthChange": false,
               "bInfo": false,

           });

       };
    //#endregion Bind Datatable

      //#region Bind Datatable
     var BindDataTablePresc = function (response) {
         var table = $("#tbl_prescription").DataTable({
             fixedHeader: {
                 header: true,
                 footer: true
             },
             processing: true,
             "deferRender": true,
             "pageLength": 100,
             "retrieve": true,
             lengthChange: true,
             "aaData": response,
             "aoColumns": [
                 {
                     "mData": "preId",
                     "orderable": false,
                     "className": "select-checkbox text-center inbox-small-cells",
                     'checkboxes': {
                         'selectRow': true
                     }
                 },
                 {
                     "mData": "preId",
                     "orderable": false,
                     "searchable": false,
                     "className": "text-center",
                     "render": function (data, type, row, meta) {
                         let _index = (meta.row) + 1;
                         if (_index >= 10) {
                             return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                         }
                         else {
                             return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                         }
                     }
                 },

                 {
                     "mData": "preId",
                     "className": 'text-left',

                 },
                 {
                     "mData": "item_code",
                     "className": 'text-left',

                 },
                 {
                     "mData": "item_name",
                     "className": 'text-justify text-wrap',

                 },
                 {
                     "mData": "item_brand",
                     "className": 'text-justify text-wrap',

                 },
                 {
                     "mData": "item_dosage",
                     "className": 'text-justify text-wrap',

                 },{
                     "mData": "item_strength",
                     "className": 'text-left',

                 },{
                     "mData": "pre_temp3",
                     "className": 'text-left',

                 },{
                     "mData": "pre_temp4",
                     "className": 'text-left',

                 },{
                     "mData": "pre_temp5",
                     "className": 'text-left',

                 },{
                     "mData": "pre_duration",
                     "className": 'text-left',

                 },{
                     "mData": "pre_qty_type",
                     "className": 'text-left',

                 },{
                     "mData": "ra_code_desc",
                     "className": 'text-left',

                 },{
                     "mData": "pre_instr",
                     "className": 'text-justify text-wrap',

                 },


             ],
             order: [[2, 'asc']],
             "bPaginate": false,
             "bLengthChange": false,
             "bInfo": false,
             "searching": false,
         });
         table.buttons().container().appendTo('#tbl_prescription_wrapper .col-md-6:eq(0)');
     };
 //#endregion Bind Datatable
    //#region Add  Click
        $('#btn_Update_ConsultEMR').on('click', function (e) {
            e.preventDefault();
            if ($("#editform_ConsultationEMR").valid()) {



                var chartname = "@emr.patId" + "_" + "CuppingTherapy" + "_" + "@emr.appId";

                var cemr_checkvalue_ = $.map($(':checkbox[name=ucemr_checkvalue]:checked'), function (n, i) {
                    return n.value;
                }).join(',');

                var _template_details = {
                    "cemrId": "@Model.template_details.cemrId",
                    "cemr_appId": @emr.appId,
                    "cemr_cemtId":"@Model.template_details.cemr_cemtId",
                    "cemr_complaint": $("#ucemr_complaint").val(),
                    "cemr_pasthistory": $("#ucemr_pasthistory").val(),
                    "cemr_checkvalue": cemr_checkvalue_,
                    "cemr_mentalorianted": $("#ucemr_mentalorianted").val(),
                    "cemr_mentaldisoriented": $("#ucemr_mentaldisoriented").val(),
                    "cemr_mentalimpired": $("#ucemr_mentalimpired").val(),
                    "cemr_acute1": $("#ucemr_acute1").val(),
                    "cemr_subacute": $("#ucemr_subacute").val(),
                    "cemr_chronic": $("#ucemr_chronic").val(),
                    "cemr_recurrent": $("#ucemr_recurrent").val(),
                    "cemr_durationin": $("#ucemr_durationin").val(),
                    "cemr_gettingworse": $("#ucemr_gettingworse").val(),
                    "cemr_better": $("#ucemr_better").val(),
                    "cemr_stillsame": $("#ucemr_stillsame").val(),
                    "cemr_bodyparts": $("#ucemr_bodyparts").val(),
                    "cemr_observationins": $("#ucemr_observationins").val(),
                    "cemr_palpation": $("#ucemr_palpation").val(),
                    "cemr_rom": $("#ucemr_rom").val(),
                    "cemr_mptest": $("#ucemr_mptest").val(),
                    "cemr_stest": $("#ucemr_stest").val(),
                    "cemr_reflexes": $("#ucemr_reflexes").val(),
                    "cemr_dermatone": $("#ucemr_dermatone").val(),
                    "cemr_myotome": $("#ucemr_myotome").val(),
                    "cemr_independent": $("#ucemr_independent").val(),
                    "cemr_dependent": $("#ucemr_dependent").val(),
                    "cemr_crutches": $("#ucemr_crutches").val(),
                    "cemr_walker": $("#ucemr_walker").val(),
                    "cemr_wheelchair": $("#ucemr_wheelchair").val(),
                    "cemr_active": $("#ucemr_active").val(),
                    "cemr_athlete": $("#ucemr_athlete").val(),
                    "cemr_lifestyle": $("#ucemr_lifestyle").val(),
                    "cemr_bedridden": $("#ucemr_bedridden").val(),
                    "cemr_radiology": $("#ucemr_radiology").val(),
                    "cemr_procedure": $("#ucemr_procedure").val(),
                    "cemr_stgoals": $("#ucemr_stgoals").val(),
                    "cemr_ltgoals": $("#ucemr_ltgoals").val(),
                    "cemr_followup": $("#ucemr_followup").val(),
                    "cemr_session": $("#ucemr_session").val(),
                    "cemr_treatpoints": $("#ucemr_treatpoints").val(),
                    "cemr_management": $("#ucemr_management").val(),
                    "type1": $('#chk_template:checked').val(),
                    "type2": $('#chk_template1:checked').val(),
                    "cemr_bodyimage": '',
                    "cemr_bimage": chartname,
                    "cemr_pain": $("#ucemr_pain").val(),
                    "__RequestVerificationToken": $('input[name="__RequestVerificationToken"]').val()
                }

                if (isvalid) {
                    $('#btn_Update_ConsultEMR').removeClass("btn btn-success");
                    $('#btn_Update_ConsultEMR').addClass("btn btn-success btn-loaders btn-icon");
                    $('#btn_Update_ConsultEMR').html("Saving the Record....");
                    $.ajax({
                        type: "Post",
                        url: "@Url.Action("UpdateConsultationTemplate", "ConsultationEMR", new {area = "EMR" })",
                        dataType: 'JSON',
                        data: _template_details,
                        success: function (data) {
                            $('#btn_Update_ConsultEMR').removeClass("btn btn-success btn-loaders btn-icon");
                            $('#btn_Update_ConsultEMR').addClass("btn btn-success");
                            $('#btn_Update_ConsultEMR').html("Add");
                            if (data.isInserted) {
                                var alertPlaceholder = document.getElementById("Alert");
                                function alert(e, t) {
                                    var l = document.createElement("div");
                                    l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" role="alert">' + e +
                                        '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                                }
                                alert("<i class='fe fe-check-circle text-white'></i>  Consultation EMR Saved Successfully!", "success");
                                /*GetMusculoSkeletal();*/
                                Timeout();
                            }
                            else {

                                let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                                    "<div class='alert alert-warning' role='alert'>" +
                                    "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                    "<strong>Warning.. Consultation EMR Alredy Exists..</strong><br/>" +
                                    "</div></div>";
                                $("#Alert").html(html);
                            }
                        },
                        error: function (xhr) {
                            $('#btn_Update_ConsultEMR').removeClass("btn btn-success btn-loaders btn-icon");
                            $('#btn_Update_ConsultEMR').addClass("btn btn-warning");
                            $('#btn_Update_ConsultEMR').html("Add");
                            Timeout();
                        }
                    });
                }
            }
            else {
                $('.modal-body').animate({
                    scrollTop: ($('.has-error').offset().top - 300)
                }, 2000);
            }
        });
       //#endregion Add Click
       //#region checkchange
       $('#chk_template').on('change', function () {
           if ($(this).is(':checked')) {
               isTemplate = true;
               isvalid = false;
               $("#temp_name").removeClass("d-none");


           } else {
               isTemplate = false;
               isvalid = true;
               $("#temp_name").addClass("d-none");
           }
       });
       //#endregion

       //#region Clear Controls
       var clearData = function () {
           $("#ucemr_complaint").val("");
           $("#ucemr_pasthistory").val("");
           $("#ucemr_mentalorianted").val("");
           $("#ucemr_mentaldisoriented").val("");
           $("#ucemr_mentalimpired").val("");
           $("#ucemr_acute1").val("");
           $("#ucemr_subacute").val("");
           $("#ucemr_chronic").val("");
           $("#ucemr_recurrent").val("");
           $("#ucemr_durationin").val("");
           $("#ucemr_gettingworse").val("");
           $("#ucemr_better").val("");
           $("#ucemr_stillsame").val("");
           $("#ucemr_bodyparts").val("");
           $("#ucemr_observationins").val("");
           $("#ucemr_palpation").val("");
           $("#ucemr_rom").val("");
           $("#ucemr_mptest").val("");
           $("#ucemr_stest").val("");
           $("#ucemr_reflexes").val("");
           $("#ucemr_dermatone").val("");
           $("#ucemr_myotome").val("");
           $("#ucemr_independent").val("");
           $("#ucemr_dependent").val("");
           $("#ucemr_crutches").val("");
           $("#ucemr_walker").val("");
           $("#ucemr_wheelchair").val("");
           $("#ucemr_active").val("");
           $("#ucemr_athlete").val("");
           $("#ucemr_lifestyle").val("");
           $("#ucemr_bedridden").val("");
           $("#ucemr_radiology").val("");
           $("#ucemr_procedure").val("");
           $("#ucemr_stgoals").val("");
           $("#ucemr_ltgoals").val("");
           $("#ucemr_followup").val("");
           $("#ucemr_session").val("");
           $("#ucemr_treatpoints").val("");
           $("#ucemr_management").val("");
           $("#lfm_doc2").val("");
       }
       //#endregion Clear Controls
       //#region Add NotesMaster
          $('#addComplaints').on('click', function (e) {
              $.ajax({
                  type: "GET",
                  url: "@Url.Action("CheifComplaints", "CheifComplaints", new { area = "EMR" })",
                  contentType: "application/json",
                  dataType: "html",
                  success: function (data) {
                      $("#complaints_emr_body").html(data);
                      $("#complaints_emr_modal").modal("show");
                  },
                  error: function (xhr) {
                      console.log("Error while Adding Notes : " + xhr.statusText);
                  }
              });
          });
       //#endregion
       //#region Create Notes On Modal Close
       $('#complaints_emr_modal').on('hidden.bs.modal', function () {
           location.reload();
       });
       //#endregion Create Notes On Modal Close
       //#region Add NotesMaster
           $('#addDiagnosis').on('click', function (e) {
              $.ajax({
                  type: "GET",
                  url: "@Url.Action("PatientDiagnosis", "PatientDiagnosis", new { area = "EMR" })",
                  contentType: "application/json",
                  dataType: "html",
                  success: function (data) {
                      $("#diagnosis_emr_body").html(data);
                      $("#diagnosis_emr_modal").modal("show");
                  },
                  error: function (xhr) {
                      console.log("Error while Adding Notes : " + xhr.statusText);
                  }
              });
          });
       //#endregion
       //#region Add NotesMaster
           $('#addPrescription').on('click', function (e) {
              $.ajax({
                  type: "GET",
                  url: "@Url.Action("Prescription", "Prescription", new { area = "EMR" })",
                  contentType: "application/json",
                  dataType: "html",
                  success: function (data) {
                      $("#prescription_emr_body").html(data);
                      $("#prescription_emr_modal").modal("show");
                  },
                  error: function (xhr) {
                      console.log("Error while Adding Notes : " + xhr.statusText);
                  }
              });
          });
       //#endregion
       var isErasing = false;


       //#region drawing
       var canvas = document.getElementById('cuppingCanvas');
       var ctx = canvas.getContext('2d');
       var drawingHistory = [];
       var DrawingMode = 'dot';

       //#region Load an image
       var Loadimage = function () {
           var image = new Image();
           image.src = "@ConfigurationManager.AppSettings["ClinicSoftEndPoint"].ToString()" + "images/Therapy/cupping.jpg";
           console.log(image.src);
           image.onload = function () {
               ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
           };
       }


       // Add drawing functionality
       var isDrawing = false;
       var lastX, lastY;

       canvas.addEventListener('mousedown', function (e) {
           var rect = canvas.getBoundingClientRect();
           var x = e.clientX - rect.left;
           var y = e.clientY - rect.top;

           if (isErasing) {
               erase(x, y);
           } else {
               if (DrawingMode === 'dot') {
                   drawDot(x, y);
               } else if (DrawingMode === 'check') {
                   drawcheckMark(x, y);
               }
           }
       });

       const drawingButtons = document.querySelectorAll('.drawing-mode');
       drawingButtons.forEach((button) => {
           button.addEventListener('click', function () {
               DrawingMode = button.getAttribute('data-mode');
           });
       });

       canvas.addEventListener('mousemove', function (e) {

           if (isErasing) {
               var x = e.clientX - canvas.getBoundingClientRect().left;
               var y = e.clientY - canvas.getBoundingClientRect().top;
               erase(x, y);
           } else if (!isDrawing) {
               return;
           }

           if (!isDrawing) return;

           var x = e.offsetX - canvas.getBoundingClientRect().left;
           var y = e.offsetY - canvas.getBoundingClientRect().top;


           isDrawing = true;
           drawingHistory.push(canvas.toDataURL());
       });
       function drawDot(x, y) {
           ctx.fillStyle = $("#color_picker").val();
           ctx.beginPath();
           ctx.arc(x, y, 5, 0, Math.PI * 2);
           ctx.fill();
           drawingHistory.push(canvas.toDataURL());
       }
       var drawcheckMark = function (x, y) {
           ctx.strokeStyle = $("#color_picker").val();
           ctx.lineWidth = 2;
           ctx.beginPath();
           ctx.moveTo(x - 20, y);
           ctx.lineTo(x - 10, y + 10);
           ctx.lineTo(x + 20, y - 20);
           ctx.stroke();
           drawingHistory.push(canvas.toDataURL());
       }
       function erase(x, y) {
           ctx.fillStyle = '#ffffff';
           ctx.beginPath();
           ctx.arc(x, y, 10, 0, Math.PI * 2);
           ctx.fill();
           drawingHistory.push(canvas.toDataURL());
       }
       canvas.addEventListener('mouseup', function () {
           isDrawing = false;
       });



        //#region Undo
            $('#undo_button').on('click', function (e) {
                if (drawingHistory.length > 1) {
                    drawingHistory.pop(); // Remove the current state
                    var img = new Image();
                    img.src = drawingHistory[drawingHistory.length - 1];
                    img.onload = function () {
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                    };
                }

            });
        //#endregion Undo

       //#region checkbox change event
       $('input[name="ucemr_checkvalue"]').change(function () {
           var textboxId = "cemr_" + $(this).attr("id");
           var textbox = $("#" + textboxId);

           if ($(this).prop("checked")) {
               textbox.removeClass("d-none");
           } else {
               textbox.addClass("d-none");
           }
       });
       //#endregion

        //#region load CheifComplaints
    $('#templates_load').on('select2:select', function (e) {
        clearData();
        var data = e.params.data;
        if (data.id > 0) {

            $.ajax({
                url: '@Url.Action("GetConsultationEMRInfo", "ConsultationEMR", new { area = "EMR" })?cemtId=' + data.id,
                type: "GET",
                dataType: "json",
                async: false,
                success: function (response) {
                    if (response.length > 0) {
                        var keys = Object.keys(response[0]);
                        if (response[0]["ucemt_type"] == "Therapeutic") {
                            $("#hyjjama_body").hide();
                        }
                        var instance = $('#cemr_pain').data("ionRangeSlider");
                        instance.update({
                            from: response[0]["cemr_pain"] //your new value ionRangeSlider
                        });
                         var image = new Image();
                        image.src = "@ConfigurationManager.AppSettings["ClinicSoftEndPoint"].ToString()" + "images/Therapy/Template/" + response[0]["cemr_bodyimage"];
                        console.log(image.src);
                         image.onload = function () {
                             // Draw the image onto the canvas
                             ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
                         };
                        keys.forEach(function (key) {
                            var element = $('#' + key);
                            if (element.length > 0) {
                                element.val(response[0][key]);
                            }
                        });

                    }
                    else {
                       /* $("#divPackageOrderInfo").hide();*/
                    }

                },
                error: function (xhr) {
                    console.log(xhr);
                    alert(xhr.statusText);
                }
            });
        }
    });
    //#endregion load CheifComplaints
     //#region Delete Click
     $('#btn_Delete_ConsultEMR').on('click', function (e) {
         e.preventDefault();
         $('#btn_Delete_ConsultEMR').removeClass("btn btn-sm btn-success");
         $('#btn_Delete_ConsultEMR').addClass("btn btn-sm btn-success btn-loaders btn-icon");
         $('#btn_Delete_ConsultEMR').html("Deleting the Record....");

             $.ajax({
                 url: '@Url.Action("DeleteConsultationEMR", "ConsultationEMR", new { area = "EMR" })?chd_Id=' + @Model.template_details.cemrId,
                 type: "POST",
                 dataType: 'JSON',
                 success: function (data) {
                     $('#btn_Delete_ConsultEMR').removeClass("btn btn-sm btn-success btn-loaders btn-icon");
                     $('#btn_Delete_ConsultEMR').addClass("btn btn-sm btn-warning");
                     $('#btn_Delete_ConsultEMR').html("Delete");
                     if (data.isAuthorized) {
                         if (data.success) {
                             var alertPlaceholder = document.getElementById("Alert");
                             function alert(e, t) {
                                 var l = document.createElement("div");
                                 l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" role="alert">' + e +
                                     '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                             }
                             alert("<i class='fe fe-check-circle text-white'></i> Consultation EMR  Deleted Successfully!", "success");
                             clearControls();
                             GetConsultEMR();
                             Timeout();
                         }
                         else {
                             let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                                 "<div class='alert alert-warning' role='alert'>" +
                                 "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                 "<strong>Error!.. Failed to Delete..</strong><br/>" +
                                 "</div></div>";
                             $("#error").html(html);
                         }
                     }
                     else {
                         var alertPlaceholder = document.getElementById("Alert");
                         function alert(e, t) {
                             var l = document.createElement("div");
                             l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" role="alert">' + e +
                                 '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                         }
                         alert("<i class='fe fe-check-circle text-white'></i> You do not have Enough Privileges to Delete this Designation!", "Access Denied!");
                     }
                 },
                 error: function (xhr) {
                     $('#btn_Delete_ConsultEMR').removeClass("btn btn-sm btn-success btn-loaders btn-icon");
                     $('#btn_Delete_ConsultEMR').addClass("btn btn-sm btn-Delete");
                     $('#btn_Delete_ConsultEMR').html("Delete");
                     Timeout();
                 }
             })
     });
 //#endregion Delete Click

       //#region Resize Datatable
       function resizedt() {
           setTimeout(function () {
               $.fn.dataTable.tables({ visible: true, api: true }).columns.adjust();
           }, 350);
       }
       //#endregion Resize Datatable

       //#region Alert Timeout
       function Timeout() {
           window.setTimeout(function () {
               $(".alert").fadeTo(500, 0).slideUp(500, function () {
                   $(this).remove();
               });
           }, 4200);
       }
       //#endregion Alert Timeout
</script>