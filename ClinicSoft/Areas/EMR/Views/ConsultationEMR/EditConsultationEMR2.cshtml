@*@model BusinessEntities.EMR.ConsultationEMR*@
@model BusinessEntities.EMR.ConsultationEMR_Main
@using System.Linq;
@using System.Security.Claims;
@using BusinessEntities;
@using System.Configuration;
@{
    var claims = ClaimsPrincipal.Current.Identities.First().Claims.ToList();
    var emp_designation = claims.Where(c => c.Type == ClaimTypes.Role).Select(c => c.Value).SingleOrDefault();
    EMRInfo emr = (EMRInfo)TempData["emr_data"];
    TempData.Keep("emr_data");
    ViewBag.Title = "ConsultationEMR";

}
<!-- Row -->
<style>
    section {
        border: 1px solid #e6ebf1;
        padding: 5px;
        margin: 2px;
    }

    .dataTables_scrollBody {
        position: relative;
        overflow: auto;
        width: 100%;
        max-height: 200px;
        min-height: 100px;
    }
</style>
<div class="card">
    <div class="row g-0">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <div>
                <h4 class="page-title mb-0 text-primary align-content-center ms-5 mb-4 ">
                    Update Consultation Sheet
                </h4>
                <input type="hidden" id="ucemrId" value="0" />
            </div>
        </div>

        <div class="col-lg-8 col-xl-2">
            <div class="overflow-hidden mb-0 mb-lg-0">
                <div class="card-body p-0">
                    <div class="main-content-left main-content-left-chat">

                        <div class="main-chat-list" id="uTittleList">
                            <a href="#uconsultation_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Consultation Summary
                                    </span>
                                </div>
                            </a>
                            <a href="#uhyjamatype_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Treatment Type
                                    </span>
                                </div>
                            </a>
                            <a href="#ucomplaints_body">
                                <div class="media ">
                                    <span class="font-weight-semibold">
                                        Complaints/ PM Histroy
                                    </span>
                                </div>
                            </a>
                            <a href="#udiagnosis_body">
                                <div class="media">
                                    <span class="font-weight-semibold">
                                        Diagnosis Details
                                    </span>
                                </div>
                            </a>
                            <a href="#utreatment_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Treatment Points
                                    </span>
                                </div>
                            </a>
                            <a href="#umentalstatus_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Mental Status
                                    </span>
                                </div>
                            </a>
                            <a href="#upain_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Pain Scale
                                    </span>
                                </div>
                            </a>
                            <a href="#upainsclasification_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Pain/Duration/Condition Notes
                                    </span>
                                </div>
                            </a>
                            <a href="#uphysicalassesment_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Affected Body/ Physical Assesment
                                    </span>
                                </div>
                            </a>
                            <a href="#ubodyimage_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Body/Face Marking
                                    </span>
                                </div>
                            </a>
                            <a href="#uneurological_body" id="ulnk_Neurological_Assesment">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Neurological Assesment
                                    </span>
                                </div>
                            </a>

                            <a href="#utreatmentplan_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Treatment Plan
                                    </span>
                                </div>
                            </a>
                            <a href="#ufollowup_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Follow up Sessions
                                    </span>
                                </div>
                            </a>

                            <a href="#umanagement_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Management
                                    </span>
                                </div>
                            </a>
                            <a href="#followupdetail_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Followup Details
                                    </span>
                                </div>
                            </a>
                        </div><!-- main-chat-list -->
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-7 col-xl-10">
            <div class="border-start">
                <div class="main-content-body main-content-body-chat">
                    <div class="main-chat-header">
                        <div class="col-lg-7"></div>
                        <div class="col-lg-5">
                            <select placeholder="Select Template" class="form-select select2" id="utemplates_load" name="template">
                            </select>
                        </div>
                    </div><!-- main-chat-header -->
                    <form id="form_ConsultationEMR_update" autocomplete="off" ondrop="return false;" oncut="return false;">
                        <div class="main-chat-body" id="uContentb">
                            <section id="uconsultation_body">
                                <div class="main-chat-msg-name mt-3">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Consultation Summary</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Consultation&nbsp;</label>
                                                <input class="form-control mb-4 text-capitalize" placeholder="Patient Details" readonly="" id="uconsultation" type="text">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Status&nbsp;</label>
                                                <input class="form-control mb-4 text-capitalize" placeholder="Status" readonly="" type="text" id="uapp_status">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Referred By&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Referred By" readonly="" type="text" value="" id="urefferedby">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Order Remarks&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Order Remarks" readonly="" type="text" id="uapp_comments">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Visit Type&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Visit Type" readonly="" type="text" id="uapp_type">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Consultation Type&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Consultation Type" readonly="" type="text" id="uconsultationtype">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Start Time&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="0:00" readonly="" type="text" id="ustarttime">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">End Time&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="0:00" readonly="" type="text" id="uendtime">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row d-none">
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">PBM prescription Id&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="" readonly="" type="text" value="">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">ERx prescription Id&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="" readonly="" type="text" value="">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Erx Reference Number&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="" readonly="" type="text" value="">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="uhyjjama_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Treatment Type</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Treatment Type&nbsp;</label>
                                                <select placeholder="Select Any" class="form-select select2 mb-2" id="ucemt_type2" name="ucemt_type2">
                                                    <option value="">Select Type</option>
                                                    <option value="hijama">Hijama</option>
                                                    <option value="physiotherapy">Physiotherapy</option>
                                                    <option value="dermatology">Dermatology</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-6" id="uddl_hijama_type">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Treatment Sub Type&nbsp;</label>
                                                <select placeholder="Select Any" class="form-select select2 mb-2" id="ucemt_type" name="ucemt_type">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="ucomplaints_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Complaints/PM Histroy</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">
                                                    Cheif Complaints&nbsp;
                                                    <button class="btn btn-success btn-sm ms-lg-2 ms-sm-2" type="button" id="uaddComplaints">
                                                        <i class="fa fa-plus"></i>
                                                        Add New
                                                    </button>
                                                </label>
                                                <textarea class="form-control mb-4" placeholder="Enter Cheif Complaints" rows="3" id="ucemr_complaint"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">
                                                    Past Medical History&nbsp;
                                                </label>
                                                <textarea class="form-control mb-4 mt-3" placeholder="Enter Past Medical History" rows="3" id="ucemr_pasthistory"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="udiagnosis_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Diagnosis</span>
                                    <span>
                                        <button class="btn btn-success btn-sm ms-lg-2 ms-sm-2" type="button" id="uaddDiagnosis">
                                            <i class="fa fa-plus"></i>   Add Diagnosis
                                        </button>
                                    </span>
                                </div>
                                <div class="content-inner">
                                    <div class="row" id="ulistItemsl">
                                        <div class="col-sm-12 col-md-12 col-lg-12">
                                            <div class="table-responsive">
                                                <table id="utbl_emrpatdignosis" class="table table-striped table-bordered text-nowrap resize-table" style="width: 100%; cursor: pointer;">
                                                    <thead>
                                                        <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                            <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Type</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Code</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Diagnosis</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Notes</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">year</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Change To Primary</th>
                                                        </tr>
                                                    </thead>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="utreatment_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Treatment Points</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-12">
                                            <div class="form-group mb-3">
                                                <textarea class="form-control mb-4" placeholder="Enter Something" rows="3" id="ucemr_treatpoints"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="umentalstatus_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Mental Status</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="custom-controls-stacked">
                                            <div class="d-flex flex-row bg-light ">
                                                <label class="custom-control custom-checkbox me-2">
                                                    <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Oriented" id="u1">
                                                    <span class="custom-control-label">Oriented</span>
                                                </label>
                                                <label class="custom-control custom-checkbox me-2">
                                                    <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Disoriented" id="u2">
                                                    <span class="custom-control-label">Disoriented</span>
                                                </label>
                                                <label class="custom-control custom-checkbox me-2">
                                                    <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Impired Cognition" id="u3">
                                                    <span class="custom-control-label">Impired Cognition</span>
                                                </label>
                                                <label class="custom-control custom-checkbox me-2">
                                                    <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Other" id="u4">
                                                    <span class="custom-control-label">Other</span>
                                                </label>
                                            </div>
                                            <div class="d-flex flex-row bg-light ">
                                                <div class="col-md-3">
                                                    <input class="form-control mb-4" placeholder="Enter Oriented Remarks" type="text" id="ucemr_mentalorianted">
                                                </div>
                                                <div class="col-md-3">
                                                    <input class="form-control mb-4" placeholder="Enter Disoriented Remarks" type="text" id="ucemr_mentaldisoriented">
                                                </div>
                                                <div class="col-md-3">
                                                    <input class="form-control mb-4" placeholder="Enter Impired Cognition Remarks" type="text" id="ucemr_mentalimpired">
                                                </div>
                                                <div class="col-md-3">
                                                    <input class="form-control mb-4" placeholder="Enter Other Remarks" type="text" id="ucemr_mentalother">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="upain_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Pain Scale</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-12 col-lg-12 text-center">
                                            <div class="row">
                                                <div class="col-sm-3 col-md-3 col-lg-3">
                                                    <div class="form-group mb-3">
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3 rounded-circle" id="ucimg1">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#fbec5d" class="bi bi-emoji-laughing-fill" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5c0 .501-.164.396-.415.235C6.42 6.629 6.218 6.5 6 6.5c-.218 0-.42.13-.585.235C5.164 6.896 5 7 5 6.5 5 5.672 5.448 5 6 5s1 .672 1 1.5zm5.331 3a1 1 0 0 1 0 1A4.998 4.998 0 0 1 8 13a4.998 4.998 0 0 1-4.33-2.5A1 1 0 0 1 4.535 9h6.93a1 1 0 0 1 .866.5zm-1.746-2.765C10.42 6.629 10.218 6.5 10 6.5c-.218 0-.42.13-.585.235C9.164 6.896 9 7 9 6.5c0-.828.448-1.5 1-1.5s1 .672 1 1.5c0 .501-.164.396-.415.235z" /></svg>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3 rounded-circle " id="ucimg2">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#ffe135" class="bi bi-emoji-neutral-fill" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm-3 4a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8z" /></svg><div class="form-group mb-3">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3 rounded-circle " id="ucimg3">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#f5c71a" class="bi bi-emoji-frown-fill" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm-2.715 5.933a.5.5 0 0 1-.183-.683A4.498 4.498 0 0 1 8 9.5a4.5 4.5 0 0 1 3.898 2.25.5.5 0 0 1-.866.5A3.498 3.498 0 0 0 8 10.5a3.498 3.498 0 0 0-3.032 1.75.5.5 0 0 1-.683.183zM10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8z" /></svg>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3 rounded-circle " id="ucimg4">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#ffa500" class="bi bi-emoji-expressionless-fill" viewBox="0 0 16 16">
                                                            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM4.5 6h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm5 0h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm-5 4h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1z" />
                                                        </svg>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3 rounded-circle " id="ucimg5">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#ff7518" class="bi bi-emoji-dizzy-fill" viewBox="0 0 16 16">
                                                            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM4.146 5.146a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 1 1 .708.708l-.647.646.647.646a.5.5 0 1 1-.708.708L5.5 7.207l-.646.647a.5.5 0 1 1-.708-.708l.647-.646-.647-.646a.5.5 0 0 1 0-.708zm5 0a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708.708l-.647.646.647.646a.5.5 0 0 1-.708.708l-.646-.647-.646.647a.5.5 0 1 1-.708-.708l.647-.646-.647-.646a.5.5 0 0 1 0-.708zM8 13a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" />
                                                        </svg>

                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3 rounded-circle " id="ucimg6">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#ff4500" class="bi bi-emoji-angry-fill" viewBox="0 0 16 16">
                                                            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM4.053 4.276a.5.5 0 0 1 .67-.223l2 1a.5.5 0 0 1 .166.76c.071.206.111.44.111.687C7 7.328 6.552 8 6 8s-1-.672-1-1.5c0-.408.109-.778.285-1.049l-1.009-.504a.5.5 0 0 1-.223-.67zm.232 8.157a.5.5 0 0 1-.183-.683A4.498 4.498 0 0 1 8 9.5a4.5 4.5 0 0 1 3.898 2.25.5.5 0 1 1-.866.5A3.498 3.498 0 0 0 8 10.5a3.498 3.498 0 0 0-3.032 1.75.5.5 0 0 1-.683.183zM10 8c-.552 0-1-.672-1-1.5 0-.247.04-.48.11-.686a.502.502 0 0 1 .166-.761l2-1a.5.5 0 1 1 .448.894l-1.009.504c.176.27.285.64.285 1.049 0 .828-.448 1.5-1 1.5z" />
                                                        </svg>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3 col-md-3 col-lg-3">
                                                    <div class="form-group mb-3">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-sm-3 col-md-3 col-lg-3">
                                                    <div class="form-group mb-3">
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">0&nbsp;</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">2&nbsp;</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">4&nbsp;</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">6&nbsp;</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">

                                                        <label class="form-label text-black text-center">8&nbsp;</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">10&nbsp;</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3 col-md-3 col-lg-3">
                                                    <div class="form-group mb-3">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-sm-3 col-md-3 col-lg-3">
                                                    <div class="form-group mb-3">
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">NO HURT&nbsp;</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">
                                                            HURTS LITTLE BIT&nbsp;
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">
                                                            HURTS LITTLE MORE&nbsp;
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">
                                                            HURTS EVEN MORE&nbsp;
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">

                                                        <label class="form-label text-black text-center">
                                                            HURTS WHOLE LOT&nbsp;
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">
                                                            HURTS WORST&nbsp;
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3 col-md-3 col-lg-3">
                                                    <div class="form-group mb-3">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-12 col-md-12 col-lg-12">
                                                    <input class="rangeslider1" data-extra-classes="irs-outline" id="ucemr_pain" name="example_name" type="text">
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </section>
                            <section id="upainsclasification_body">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="main-chat-msg-name">
                                            <span class='badge bg-gray' style="font-size: 1.25em;">Pain Classification</span>
                                        </div>
                                        <div class="content-inner">
                                            <div class="row">
                                                <div class="col-sm-12 col-md-3 col-lg-12">
                                                    <div class="custom-controls-stacked">
                                                        <div class="d-flex flex-row bg-light ">
                                                            <label class="custom-control custom-checkbox me-2">
                                                                <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Acute" id="uacute1">
                                                                <span class="custom-control-label">Acute</span>
                                                            </label>
                                                            <label class="custom-control custom-checkbox me-2">
                                                                <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Sub Acute" id="usubacute">
                                                                <span class="custom-control-label">Sub Acute</span>
                                                            </label>
                                                            <label class="custom-control custom-checkbox me-2">
                                                                <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Chronic" id="uchronic">
                                                                <span class="custom-control-label">Chronic</span>
                                                            </label>
                                                            <label class="custom-control custom-checkbox me-2">
                                                                <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Recurrent" id="urecurrent">
                                                                <span class="custom-control-label">Recurrent</span>
                                                            </label>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <textarea class="form-control mb-2 mt-2 d-none" placeholder="Acute Remarks..." rows="3" id="ucemr_acute1"></textarea>
                                                            </div>
                                                            <div class="col-md-12">
                                                                <textarea class="form-control mb-2 d-none" placeholder="Sub Acute Remarks..." rows="3" id="ucemr_subacute"></textarea>
                                                            </div>
                                                            <div class="col-md-12">
                                                                <textarea class="form-control mb-2 d-none" placeholder="Chronic Remarks..." rows="3" id="ucemr_chronic"></textarea>
                                                            </div>
                                                            <div class="col-md-12">
                                                                <textarea class="form-control mb-2 d-none" placeholder="Recurrent Remarks..." rows="3" id="ucemr_recurrent"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="main-chat-msg-name">
                                            <span class='badge bg-gray' style="font-size: 1.25em;">Duration of injury</span>
                                        </div>
                                        <div class="content-inner">
                                            <div class="row">
                                                <div class="col-sm-12 col-md-6 col-lg-12">
                                                    <div class="form-group mb-3">
                                                        <input class="form-control mb-4" placeholder="Enter Duration" type="text" id="ucemr_durationin">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="main-chat-msg-name">
                                            <span class='badge bg-gray' style="font-size: 1.25em;">Condition Status</span>
                                        </div>
                                        <div class="content-inner">
                                            <div class="row">
                                                <div class="custom-controls-stacked">
                                                    <div class="d-flex flex-row bg-light ">
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Getting worse" id="ugettingworse">
                                                            <span class="custom-control-label">Getting worse</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Better" id="ubetter">
                                                            <span class="custom-control-label">Better</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Still The same" id="ustillsame">
                                                            <span class="custom-control-label">Still The same</span>
                                                        </label>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <input class="form-control mb-2 mt-2 d-none" placeholder="Enter Remarks" type="text" id="ucemr_gettingworse">
                                                        </div>
                                                        <div class="col-md-12">
                                                            <input class="form-control mb-2 d-none" placeholder="Enter Remarks" type="text" id="ucemr_better">
                                                        </div>
                                                        <div class="col-md-12">
                                                            <input class="form-control mb-2 d-none" placeholder="Enter Remarks" type="text" id="ucemr_stillsame">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="uphysicalassesment_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Physical Assesment</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Observation Inspection&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Observation Inspection" rows="3" id="ucemr_observationins"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-2">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Palpation&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Palpation" rows="3" id="ucemr_palpation"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-2">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">ROM&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="ROM" rows="3" id="ucemr_rom"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Muscle Power Test&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Muscle Power Test" rows="3" id="ucemr_mptest"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-2">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Special Tests&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Special Tests" rows="3" id="ucemr_stest"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Affected Body Parts</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-12">
                                            <div class="form-group mb-3">
                                                <textarea class="form-control mb-4" placeholder="Affected Body Parts" rows="3" id="ucemr_bodyparts"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="ubodyimage_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Body/Face Marking</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row" id="ubody_marking">
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <button id="udrawingdot" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode" data-mode="dot" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle-fill" viewBox="0 0 16 16">
                                                        <circle cx="8" cy="8" r="8" />
                                                    </svg>
                                                </button>
                                                <button id="udrawingcheck" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode" data-mode="check" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                                        <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
                                                    </svg>
                                                </button>
                                                <button id="udrawingcircle" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode" data-mode="circle" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle" viewBox="0 0 16 16">
                                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                                                    </svg>
                                                </button>
                                                <button id="udrawingcupping" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode" data-mode="cupping" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash2" viewBox="0 0 16 16">
                                                        <path d="M14 3a.7.7 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225A.7.7 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2M3.215 4.207l1.493 8.957a1 1 0 0 0 .986.836h4.612a1 1 0 0 0 .986-.836l1.493-8.957C11.69 4.689 9.954 5 8 5s-3.69-.311-4.785-.793" />
                                                    </svg>
                                                </button>
                                                <button id="uundo_button" class="btn bg-dark-transparent btn-icon btn-svg" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
                                                        <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z" />
                                                        <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z" />
                                                    </svg>
                                                </button>
                                                <button id="udrawingeraser" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode" data-mode="eraser" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eraser-fill text-danger" viewBox="0 0 16 16">
                                                        <path d="M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828zm.66 11.34L3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293z" />
                                                    </svg>
                                                </button>
                                                <input id="ucolor_picker" type="text">
                                            </div>
                                            <div>
                                                <canvas id="ucuppingCanvas" width="578" height="650"></canvas>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <button id="udrawingdot2" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode2" data-mode="dot2" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle-fill" viewBox="0 0 16 16">
                                                        <circle cx="8" cy="8" r="8" />
                                                    </svg>
                                                </button>
                                                <button id="udrawingcheck2" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode2" data-mode="check2" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                                        <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
                                                    </svg>
                                                </button>
                                                <button id="udrawingcircle2" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode2" data-mode="circle2" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle" viewBox="0 0 16 16">
                                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                                                    </svg>
                                                </button>
                                                <button id="udrawingcupping2" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode2" data-mode="cupping2" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash2" viewBox="0 0 16 16">
                                                        <path d="M14 3a.7.7 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225A.7.7 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2M3.215 4.207l1.493 8.957a1 1 0 0 0 .986.836h4.612a1 1 0 0 0 .986-.836l1.493-8.957C11.69 4.689 9.954 5 8 5s-3.69-.311-4.785-.793" />
                                                    </svg>
                                                </button>
                                                <button id="uundo_button2" class="btn bg-dark-transparent btn-icon btn-svg" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
                                                        <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z" />
                                                        <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z" />
                                                    </svg>
                                                </button>
                                                <button id="udrawingeraser2" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode2" data-mode="eraser2" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eraser-fill text-danger" viewBox="0 0 16 16">
                                                        <path d="M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828zm.66 11.34L3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293z" />
                                                    </svg>
                                                </button>
                                                <input id="ucolor_picker2" type="text">
                                            </div>
                                            <div>
                                                <canvas id="ucuppingCanvas2" width="578" height="650"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" id="uface_marking">
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <button id="udrawingdot3" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode3" data-mode="dot3" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle-fill" viewBox="0 0 16 16">
                                                        <circle cx="8" cy="8" r="8" />
                                                    </svg>
                                                </button>
                                                <button id="udrawingcheck3" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode3" data-mode="check3" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                                        <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
                                                    </svg>
                                                </button>
                                                <button id="udrawingcircle3" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode3" data-mode="circle3" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle" viewBox="0 0 16 16">
                                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                                                    </svg>
                                                </button>
                                                <button id="udrawingcupping3" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode3" data-mode="cupping3" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash2" viewBox="0 0 16 16">
                                                        <path d="M14 3a.7.7 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225A.7.7 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2M3.215 4.207l1.493 8.957a1 1 0 0 0 .986.836h4.612a1 1 0 0 0 .986-.836l1.493-8.957C11.69 4.689 9.954 5 8 5s-3.69-.311-4.785-.793" />
                                                    </svg>
                                                </button>
                                                <button id="uundo_button3" class="btn bg-dark-transparent btn-icon btn-svg" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
                                                        <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z" />
                                                        <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z" />
                                                    </svg>
                                                </button>
                                                <button id="udrawingeraser3" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode3" data-mode="eraser3" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eraser-fill text-danger" viewBox="0 0 16 16">
                                                        <path d="M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828zm.66 11.34L3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293z" />
                                                    </svg>
                                                </button>
                                                <input id="ucolor_picker3" type="text">
                                            </div>
                                            <div>
                                                <canvas id="ucuppingCanvas3" width="650" height="450"></canvas>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Marking Notes&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Enter notes" rows="2" id="ucemr_marking_notes"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Patient Instructions&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Enter Something" rows="2" id="ucemr_management"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="uneurological_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Neurological Assesment</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Reflexes&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Reflexes" rows="2" id="ucemr_reflexes"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Dermatone&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Dermatone" rows="2" id="ucemr_dermatone"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Myotome&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Myotome" rows="2" id="ucemr_myotome"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Radiology Report&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Radiology Report" rows="2" id="ucemr_radiology"></textarea>
                                            </div>
                                        </div>

                                        <div class="col-sm-12 col-md-6 col-lg-12">
                                            <label class="form-label text-black">ADL Activities&nbsp;</label>
                                            <div class="custom-controls-stacked">
                                                <div class="d-flex flex-row bg-light ">
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Independent" id="uindependent">
                                                        <span class="custom-control-label">Independent</span>
                                                    </label>
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Dependent" id="udependent">
                                                        <span class="custom-control-label">Dependent</span>
                                                    </label>
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Needs Crutches" id="ucrutches">
                                                        <span class="custom-control-label">Needs Crutches</span>
                                                    </label>
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Walker" id="uwalker">
                                                        <span class="custom-control-label">Walker</span>
                                                    </label>
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Wheelchair" id="uwheelchair">
                                                        <span class="custom-control-label">Wheelchair</span>
                                                    </label>
                                                </div>
                                                <div class="d-flex flex-row bg-light ">
                                                    <input class="form-control me-2 d-none" placeholder="Independent" type="text" id="ucemr_independent">
                                                    <input class="form-control me-2 d-none" placeholder="Dependent" type="text" id="ucemr_dependent">
                                                    <input class="form-control me-2 d-none" placeholder="Needs Crutches" type="text" id="ucemr_crutches">
                                                    <input class="form-control me-2 d-none" placeholder="Walker" type="text" id="ucemr_walker">
                                                    <input class="form-control me-2 d-none" placeholder="Wheelchair" type="text" id="ucemr_wheelchair">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-12">
                                            <label class="form-label text-black">Physical Condition&nbsp;</label>
                                            <div class="custom-controls-stacked">
                                                <div class="d-flex flex-row bg-light ">
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Active" id="uactive">
                                                        <span class="custom-control-label">Active</span>
                                                    </label>
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Athlete" id="uathlete">
                                                        <span class="custom-control-label">Athlete</span>
                                                    </label>
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Sedentary Lifestyle" id="ulifestyle">
                                                        <span class="custom-control-label">Sedentary Lifestyle</span>
                                                    </label>
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="ucemr_checkvalue" value="Bedridden" id="ubedridden">
                                                        <span class="custom-control-label">Bedridden</span>
                                                    </label>
                                                </div>
                                                <div class="d-flex flex-row bg-light ">
                                                    <input class="form-control me-2 d-none" placeholder="Active" type="text" id="ucemr_active">
                                                    <input class="form-control me-2 d-none" placeholder="Athlete" type="text" id="ucemr_athlete">
                                                    <input class="form-control me-2 d-none" placeholder="Sedentary Lifestyle" type="text" id="ucemr_lifestyle">
                                                    <input class="form-control me-2 d-none" placeholder="Bedridden" type="text" id="ucemr_bedridden">
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </section>
                            <section id="utreatmentplan_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Treatment Plan</span>
                                    <span>
                                        <button class="btn btn-success btn-sm ms-lg-2 ms-sm-2" type="button" id="uaddTreatments">
                                            <i class="fa fa-plus"></i>   Add Treatments &amp; Procedure
                                        </button>
                                    </span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Procedure&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Procedure" rows="3" id="ucemr_procedure"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Short Term Goals&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Short Term Goals" rows="3" id="ucemr_stgoals"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Long Term Goals&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Long Term Goals" rows="3" id="ucemr_ltgoals"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Follow Up plan and Session&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Follow Up plan and Session" rows="3" id="ucemr_followup"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="ufollowup_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Follow Up Sessions</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-12">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">-&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Enter Something" rows="3" id="ucemr_session"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="umanagement_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Management</span>
                                    <span>
                                        <button class="btn btn-success btn-sm ms-lg-2 ms-sm-2" type="button" id="uaddPrescription">
                                            <i class="fa fa-plus"></i>   Add Prescription
                                        </button>
                                    </span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="table-responsive">
                                            <table id="utbl_prescription" class="table table-striped table-bordered text-nowrap resize-table" style="width: 100%; cursor: pointer;">
                                                <thead>
                                                    <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                        <th class="border-bottom-0 font-weight-semibold text-white text-center"></th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">ID</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Code</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Generic</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Brand</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Dosage</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Strength</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Use <br />(Units)</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Frequency<br /> Value</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Frequency</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Duration</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Quantity</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Route for Admin</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Instructions</th>
                                                    </tr>
                                                </thead>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="ufollowupdetail_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Followup Details</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Doctor Name&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Input box (readonly)" readonly="" type="text" id="udoc_name">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Visiting Date&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Remarks" type="text" id="uapp_fdate">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Remarks&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Followup Remarks..." rows="3" id="uapp_resnforvisit"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Actions&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Actions" type="text" id="uapp_status">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                        <div class="bg-light p-5">
                            <div class="row">
                                <div class="col-sm-12 col-lg-12  col-md-12">
                                    <div class="checkbox d-flex flex-row ms-5 pull-right">
                                        <div class="btn-list btn-animation">
                                            <button type="submit" class="btn btn-success" id="btn_Update_ConsultEMR">Update Consultation</button>
                                            <button type="button" class="btn btn-danger" id="btn_Delete_ConsultEMR">Delete</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

    </div>
</div>

<!-- Modal Notes Master Details -->
<div class="modal fade overflow-auto" id="ucomplaints_emr_modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true" data-modal-from="appointment-list">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content" id="ucomplaints_emr_body">
        </div>
    </div>
</div>
<!-- End Modal Notes Master Details -->
<!-- Modal Notes Master Details -->
<div class="modal fade overflow-auto" id="udiagnosis_emr_modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true" data-modal-from="appointment-list">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content" id="udiagnosis_emr_body">
        </div>
    </div>
</div>
<!-- End Modal Notes Master Details -->
<!-- Treatments Master Details -->
<div class="modal fade overflow-auto" id="utreatments_emr_modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true" data-modal-from="appointment-list">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content" id="utreatments_emr_body">
        </div>
    </div>
</div>
<!-- End Treatments Master Details -->
<!-- Modal Notes Master Details -->
<div class="modal fade overflow-auto" id="uprescription_emr_modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true" data-modal-from="appointment-list">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content" id="uprescription_emr_body">
        </div>
    </div>
</div>
<!-- End Modal Notes Master Details -->
<script>
    var uitem_arr = [];
    var uisTemplate = false;
    var uisvalid = true;
    var utempName = "";

    $(function () {
        $("body").addClass("app sidebar-mini sidenav-toggled");

        const ups = new PerfectScrollbar('#uTittleList', {
            useBothWheelAxes: false,
            suppressScrollX: false,
        });

        const ups1 = new PerfectScrollbar('#uContentb', {
            useBothWheelAxes: false,
            suppressScrollX: false,
        });

        $("#utemplates_load").select2({
            placeholder: 'Select your template',
            minimumResultsForSearch: '',
            width: '100%',
            dropdownParent: $('#form_ConsultationEMR_update')
        });

        $("#ucemt_type").select2({
            placeholder: 'Select Type',
            width: '100%',
            dropdownParent: $('#form_ConsultationEMR_update')
        });

        $("#ucemt_type2").select2({
            placeholder: 'Select Type',
            width: '100%',
            dropdownParent: $('#form_ConsultationEMR_update')
        });

        $('#ucemr_pain').ionRangeSlider({
            min: 0,
            max: 10,
            from: 0,
        });

        $('#ucolor_picker').spectrum({
            type: "flat",
            showInput: true,
            preferredFormat: "hex",
            color: '#0061da'
        });

        $('#ucolor_picker2').spectrum({
            type: "flat",
            showInput: true,
            preferredFormat: "hex",
            color: '#0061da'
        });

        $('#ucolor_picker3').spectrum({
            type: "flat",
            showInput: true,
            preferredFormat: "hex",
            color: '#0061da'
        });

        GetTemplates_Update("");
        GetPatDiagnosis_Update();
        GetPrescription_Update();

        var jsonData = @Html.Raw(Json.Encode(Model));
        LoadDataBySelection(jsonData);
        $("#ucemrId").val(jsonData.template_details.cemrId);
    });

    var LoadDataBySelection = function (obj) {
        $("#uddl_hijama_type").hide();
        $("#ubody_marking").hide();
        $("#uface_marking").hide();

        DisplayInputBasedSelection(obj.template_details);

        var instance = $('#ucemr_pain').data("ionRangeSlider");
        instance.update({
            from: obj.template_details.cemr_pain
        });

        LoadTreatentSubTypes(obj.template_details.cemr_type2);
        selectRange(obj.template_details.cemr_pain);

        $("#ucemt_type2").val(obj.template_details.cemr_type2).trigger("change");
        $("#ucemt_type").val(obj.template_details.cemr_type).trigger("change");

        $("#uconsultation").val(obj.template_info.consultation);
        $("#uapp_status").val(obj.template_info.app_status);
        $("#urefferedby").val("");
        $("#uapp_comments").val(obj.template_info.app_comments);
        $("#uapp_type").val(obj.template_info.app_type);
        $("#uconsultationtype").val(obj.template_info.consultationtype);
        $("#ustarttime").val(obj.template_info.starttime);
        $("#uendtime").val(obj.template_info.endtime);

        $("#ucemr_complaint").text(obj.template_details.cemr_complaint);
        $("#ucemr_pasthistory").text(obj.template_details.cemr_pasthistory);
        $("#ucemr_treatpoints").text(obj.template_details.cemr_treatpoints);

        $("#ucemr_mentalorianted").val(obj.template_details.cemr_mentalorianted);
        $("#ucemr_mentaldisoriented").val(obj.template_details.cemr_mentaldisoriented);
        $("#ucemr_mentalimpired").val(obj.template_details.cemr_mentalimpired);
        $("#ucemr_mentalother").val(obj.template_details.cemr_mentalother);

        $("#ucemr_acute1").val(obj.template_details.cemr_acute1);
        $("#ucemr_subacute").val(obj.template_details.cemr_subacute);
        $("#ucemr_chronic").val(obj.template_details.cemr_chronic);
        $("#ucemr_recurrent").val(obj.template_details.cemr_recurrent);

        $("#ucemr_durationin").val(obj.template_details.cemr_durationin);

        $("#ucemr_gettingworse").val(obj.template_details.cemr_gettingworse);
        $("#ucemr_better").val(obj.template_details.cemr_better);
        $("#ucemr_stillsame").val(obj.template_details.cemr_stillsame);

        $("#ucemr_observationins").text(obj.template_details.cemr_observationins);
        $("#ucemr_palpation").text(obj.template_details.cemr_palpation);
        $("#ucemr_rom").text(obj.template_details.cemr_rom);
        $("#ucemr_mptest").text(obj.template_details.cemr_mptest);
        $("#ucemr_stest").text(obj.template_details.cemr_stest);
        $("#ucemr_bodyparts").text(obj.template_details.cemr_bodyparts);

        $("#ucemr_management").text(obj.template_details.cemr_management);
        $("#ucemr_marking_notes").text(obj.template_details.cemr_marking_notes);

        $("#ucemr_reflexes").text(obj.template_details.cemr_reflexes);
        $("#ucemr_dermatone").text(obj.template_details.cemr_dermatone);
        $("#ucemr_myotome").text(obj.template_details.cemr_myotome);
        $("#ucemr_radiology").text(obj.template_details.cemr_radiology);

        $("#ucemr_independent").text(obj.template_details.cemr_independent);
        $("#ucemr_dependent").text(obj.template_details.cemr_dependent);
        $("#ucemr_crutches").text(obj.template_details.cemr_crutches);
        $("#ucemr_walker").text(obj.template_details.cemr_walker);
        $("#ucemr_wheelchair").text(obj.template_details.cemr_wheelchair);

        $("#ucemr_active").text(obj.template_details.cemr_active);
        $("#ucemr_athlete").text(obj.template_details.cemr_athlete);
        $("#ucemr_lifestyle").text(obj.template_details.cemr_lifestyle);
        $("#ucemr_bedridden").text(obj.template_details.cemr_bedridden);

        $("#ucemr_procedure").text(obj.template_details.cemr_procedure);
        $("#ucemr_stgoals").text(obj.template_details.cemr_stgoals);
        $("#ucemr_ltgoals").text(obj.template_details.cemr_ltgoals);
        $("#ucemr_followup").text(obj.template_details.cemr_followup);

        $("#ucemr_session").text(obj.template_details.cemr_session);

        $("#udoc_name").val(obj.template_info.doc_name);
        $("#uapp_fdate").val(obj.template_info.app_fdate);
        $("#uapp_resnforvisit").text(obj.template_details.cemr_followup_remarks);
        $("#uapp_status").val(obj.template_info.app_status);

        Loadimage_Update(obj.template_details.cemr_bodyimage);
        Loadimage2_Update(obj.template_details.cemr_bodyimage2);
        Loadimage3_Update(obj.template_details.cemr_faceimage);
        GetCheckedValues(obj.template_details.cemr_checkvalue);
    }
    var GetCheckedValues = function (checknames) {
       
        var data = checknames;
        console.log("checknames"+checknames);
        if (checknames !== null) {
            var x = data.split(",");
            console.log(checknames);
            console.log(x);
            if (x != "") {
                if (x.includes("Oriented")) {
                    $('#u1').attr('checked', 'checked');
                    $("#u1").prop("checked", true);
                }
                if (x.includes("Disoriented")) {
                    $('#u2').attr('checked', 'checked');
                    $("#u2").prop("checked", true);
                }
                if (x.includes("Impired Cognition")) {
                    $('#u3').attr('checked', 'checked');
                    $("#u3").prop("checked", true);
                }
                if (x.includes("Other")) {
                    $('#u4').attr('checked', 'checked');
                    $("#u4").prop("checked", true);
                }
                if (x.includes("Acute")) {
                    $('#uacute1').attr('checked', 'checked');
                    $("#uacute1").prop("checked", true);
                }
                if (x.includes("Sub Acute")) {
                    $('#usubacute').attr('checked', 'checked');
                    $("#usubacute").prop("checked", true);
                }
                if (x.includes("Chronic")) {
                    $('#uchronic').attr('checked', 'checked');
                    $("#uchronic").prop("checked", true);
                }
                if (x.includes("Recurrent")) {
                    $('#urecurrent').attr('checked', 'checked');
                    $("#urecurrent").prop("checked", true);
                }
                if (x.includes("Getting worse")) {
                    $('#ugettingworse').attr('checked', 'checked');
                    $("#ugettingworse").prop("checked", true);
                }
                if (x.includes("Better")) {
                    $('#ubetter').attr('checked', 'checked');
                    $("#ubetter").prop("checked", true);
                }
                if (x.includes("Still The same")) {
                    $('#ustillsame').attr('checked', 'checked');
                    $("#ustillsame").prop("checked", true);
                }
                if (x.includes("Independent")) {
                    $('#uindependent').attr('checked', 'checked');
                    $("#uindependent").prop("checked", true);
                }
                if (x.includes("Dependent")) {
                    $('#udependent').attr('checked', 'checked');
                    $("#udependent").prop("checked", true);
                }
                if (x.includes("Needs Crutches")) {
                    $('#ucrutches').attr('checked', 'checked');
                    $("#ucrutches").prop("checked", true);
                }
                if (x.includes("Walker")) {
                    $('#uwalker').attr('checked', 'checked');
                    $("#uwalker").prop("checked", true);
                }
                if (x.includes("Wheelchair")) {
                    $('#uwheelchair').attr('checked', 'checked');
                    $("#uwheelchair").prop("checked", true);
                }
                if (x.includes("Active")) {
                    $('#uactive').attr('checked', 'checked');
                    $("#uactive").prop("checked", true);
                }
                if (x.includes("Athlete")) {
                    $('#uathlete').attr('checked', 'checked');
                    $("#uathlete").prop("checked", true);
                }
                if (x.includes("Sedentary Lifestyle")) {
                    $('#ulifestyle').attr('checked', 'checked');
                    $("#ulifestyle").prop("checked", true);
                }
                if (x.includes("Bedridden")) {
                    $('#ubedridden').attr('checked', 'checked');
                    $("#ubedridden").prop("checked", true);
                }
            }
        }
    }

    //#region load Templates
    var GetTemplates_Update = function (query) {
        $.ajax({
            url: '@Url.Action("GetTemplates", "ConsultationEMR", new { area = "EMR" })?query=' + query,
            type: "GET",
            dataType: "json",
            async: false,
            success: function (response) {
                if (response.length > 0) {
                    var newOption;
                    newOption = new Option("Select Any Template", 0, true, true);
                    $('#utemplates_load').append(newOption);
                    console.log("dsds"+response);
                    var data;
                    $.each(response, function (j) {
                         data = {
                            "id": response[j].id,
                            "text": response[j].text,
                        };
                        newOption = new Option(response[j].text, response[j].id, false, false);
                        $('#utemplates_load').append(newOption);
                    });
                }
            },
            error: function (xhr) {
                console.log(xhr);
                alert(xhr);
            },

        });
    };
    //#endregion load Templates

    var LoadTreatentSubTypes = function (type) {
        if (type === "hijama") {
            $("#uddl_hijama_type").show();
            $("#ulnk_Neurological_Assesment").hide();
            $("#uneurological_body").hide();
            $("#ubody_marking").show();
            $("#uface_marking").hide();

            var data = [
                { "id": "", "text": "Select Any Type" },
                { "id": "Therapeutic", "text": "Therapeutic" },
                { "id": "Prophylactic", "text": "Prophylactic" }
            ];

            $('#ucemt_type').empty();

            $.each(data, function (j) {
                var newOption = new Option(data[j].text, data[j].id, (j == 0) ? true : false, (j == 0) ? true : false);
                $('#ucemt_type').append(newOption);
            });
        }
        else if (type === "physiotherapy") {
            $("#uddl_hijama_type").show();
            $("#ulnk_Neurological_Assesment").hide();
            $("#uneurological_body").hide();
            $("#ubody_marking").show();
            $("#uface_marking").hide();

            var data = [
                { "id": "", "text": "Select Any Type" },
                { "id": "Manual Therapy", "text": "Manual Therapy" },
                { "id": "Physiotherapy", "text": "Physiotherapy" },
                { "id": "Massage Therapy", "text": "Massage Therapy" },
                { "id": "Intensive Physiotherapy Session", "text": "Intensive Physiotherapy Session" },
                { "id": "Free consultation", "text": "Free consultation" }
            ];

            $('#ucemt_type').empty();

            $.each(data, function (j) {
                var newOption = new Option(data[j].text, data[j].id, (j == 0) ? true : false, (j == 0) ? true : false);
                $('#ucemt_type').append(newOption);
            });
        }
        else {
            $("#uddl_hijama_type").hide();
            $("#ulnk_Neurological_Assesment").show();
            $("#uneurological_body").show();
            $("#ubody_marking").show();
            $("#uface_marking").show();
        }
    }

    $('#ucemt_type2').on('select2:select', function (e) {
        var data = e.params.data;
        LoadTreatentSubTypes(data.id);
    });

    //#region Add NotesMaster
    $('#uaddComplaints').on('click', function (e) {
        $.ajax({
            type: "GET",
            url: "@Url.Action("CheifComplaints", "CheifComplaints", new { area = "EMR" })",
            contentType: "application/json",
            dataType: "html",
            success: function (data) {
                $("#ucomplaints_emr_body").html(data);
                $("#ucomplaints_emr_modal").modal("show");
            },
            error: function (xhr) {
                console.log("Error while Adding Notes : " + xhr.statusText);
            }
        });
    });
    //#endregion

    //#region Add NotesMaster
    $('#uaddDiagnosis').on('click', function (e) {
       $.ajax({
           type: "GET",
           url: "@Url.Action("PatientDiagnosisModal", "PatientDiagnosis", new { area = "EMR" })",
           contentType: "application/json",
           dataType: "html",
           success: function (data) {
               $("#udiagnosis_emr_body").html(data);
               $("#udiagnosis_emr_modal").modal("show");
           },
           error: function (xhr) {
               console.log("Error while Adding Notes : " + xhr.statusText);
           }
       });
   });
    //#endregion

    //#region Add Treatments
    $('#uaddTreatments').on('click', function (e) {
       $.ajax({
           type: "GET",
           url: "@Url.Action("CashTreatmentsModal", "PatientTreatments", new { area = "EMR" })",
           contentType: "application/json",
           dataType: "html",
           success: function (data) {
               $("#utreatments_emr_body").html(data);
               $("#utreatments_emr_modal").modal("show");
           },
           error: function (xhr) {
               console.log("Error while Adding Notes : " + xhr.statusText);
           }
       });
   });
    //#endregion

    //#region Add NotesMaster
    $('#uaddPrescription').on('click', function (e) {
       $.ajax({
           type: "GET",
           url: "@Url.Action("PrescriptionModal", "Prescription", new { area = "EMR" })",
           contentType: "application/json",
           dataType: "html",
           success: function (data) {
               $("#uprescription_emr_body").html(data);
               $("#uprescription_emr_modal").modal("show");
           },
           error: function (xhr) {
               console.log("Error while Adding Notes : " + xhr.statusText);
           }
       });
   });
    //#endregion

    //#region Load PatientDiagnosis
    var GetPatDiagnosis_Update = function () {
        $.ajax({
            type: "GET",
            url: "@Url.Action("GetAllPatientDiagnosis", "PatientDiagnosis", new { area = "EMR" })?appId=" + "@emr.appId",
            success: function (response) {
                console.log(response)
                if (response.isAuthorized != false) {
                    if (response.length > 0) {
                        var table;
                        if ($.fn.dataTable.isDataTable('#utbl_emrpatdignosis')) {
                            table = $('#utbl_emrpatdignosis').DataTable();
                            table.clear();
                            table.rows.add(response).draw();
                        }
                        else {
                            BindDataTableDiagEMRUpdate(response);
                        }
                    }

                }
                else {
                    console.log("You are not Authorized!");
                }
            },
            error: function (xhr) {
                console.log(xhr);
            }
        }).done(function () {
            resizedt();
        });
    }
    //#endregion Load PatientDiagnosis

    //#region Bind Datatable
    var BindDataTableDiagEMRUpdate = function (response) {
        var table = $("#utbl_emrpatdignosis").DataTable({
            fixedHeader: {
                header: true,
                footer: true
            },
            processing: true,
            "deferRender": true,
            "pageLength": 100,
            "retrieve": true,
            lengthChange: true,
            "aaData": response,
            "aoColumns": [
                {
                    "mData": "padId",
                    "orderable": false,
                    "searchable": false,
                    "className": "text-center",
                    "render": function (data, type, row, meta) {
                        let _index = (meta.row) + 1;
                        if (_index >= 10) {
                            return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                        }
                        else {
                            return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                        }
                    }
                },

                {
                    "mData": "pad_type",
                    "className": 'text-left',

                },
                {
                    "mData": "diag_code",
                    "className": 'text-left',

                },
                {
                    "mData": "diag_name",
                    "className": 'text-left',

                },
                {
                    "mData": "pad_notes",
                    "className": 'text-left',

                },
                {
                    "mData": "pad_year",
                    "className": 'text-left',

                },
                {
                    "mData": "padId",
                    "className": 'btn-view text-center',
                    "orderable": false,
                    "searchable": false,
                    "render": function (padId, type, full, meta) {
                        var pad_type = full.pad_type;
                        var Action = '';
                        //Change diagnosis type

                        Action += '<a id=btn_Type_Diagnosis  onclick="ChangeDiagnosisType(' + padId + ',' + "'" + pad_type + "'" + ')"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-left-right" viewBox="0 0 16 16">  <path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"/></svg></a>';
                        return Action;

                    },
                }

            ],
            order: [[1, 'asc']],
            "searching": false,
            scrollX: true,
            scrollY: true,
            "bPaginate": false,
            "bLengthChange": false,
            "bInfo": false,

        });

    };
    //#endregion Bind Datatable

    //#region Load Prescription
    var GetPrescription_Update = function () {
        $.ajax({
            type: "GET",
            url: "@Url.Action("GetAllPrescription", "Prescription", new { area = "EMR" })?appId=" + "@emr.appId" + "&pre_med_type=CASH",
            success: function (response) {

                if (response.isAuthorized != false) {
                    var table;
                    if ($.fn.dataTable.isDataTable('#utbl_prescription')) {
                        table = $('#utbl_prescription').DataTable();
                        table.clear();
                        table.rows.add(response).draw();
                    }
                    else {
                        BindDataTablePrescUpdate(response);
                    }
                }
                else {
                    console.log("You are not Authorized!");
                }
            },
            error: function (xhr) {
                console.log(xhr);
            }
        }).done(function () {
            resizedt();
        });
    }
    //#endregion Load Prescription

    //#region Bind Datatable
    var BindDataTablePrescUpdate = function (response) {
        var table = $("#utbl_prescription").DataTable({
            fixedHeader: {
                header: true,
                footer: true
            },
            processing: true,
            "deferRender": true,
            "pageLength": 100,
            "retrieve": true,
            lengthChange: true,
            "aaData": response,
            "aoColumns": [
                {
                    "mData": "preId",
                    "orderable": false,
                    "className": "select-checkbox text-center inbox-small-cells",
                    'checkboxes': {
                        'selectRow': true
                    }
                },
                {
                    "mData": "preId",
                    "orderable": false,
                    "searchable": false,
                    "className": "text-center",
                    "render": function (data, type, row, meta) {
                        let _index = (meta.row) + 1;
                        if (_index >= 10) {
                            return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                        }
                        else {
                            return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                        }
                    }
                },

                {
                    "mData": "preId",
                    "className": 'text-left',

                },
                {
                    "mData": "item_code",
                    "className": 'text-left',

                },
                {
                    "mData": "item_name",
                    "className": 'text-justify text-wrap',

                },
                {
                    "mData": "item_brand",
                    "className": 'text-justify text-wrap',

                },
                {
                    "mData": "item_dosage",
                    "className": 'text-justify text-wrap',

                }, {
                    "mData": "item_strength",
                    "className": 'text-left',

                }, {
                    "mData": "pre_temp3",
                    "className": 'text-left',

                }, {
                    "mData": "pre_temp4",
                    "className": 'text-left',

                }, {
                    "mData": "pre_temp5",
                    "className": 'text-left',

                }, {
                    "mData": "pre_duration",
                    "className": 'text-left',

                }, {
                    "mData": "pre_qty_type",
                    "className": 'text-left',

                }, {
                    "mData": "ra_code_desc",
                    "className": 'text-left',

                }, {
                    "mData": "pre_instr",
                    "className": 'text-justify text-wrap',

                },


            ],
            order: [[2, 'asc']],
            "bPaginate": false,
            "bLengthChange": false,
            "bInfo": false,
            "searching": false,
        });
        table.buttons().container().appendTo('#tbl_prescription_wrapper .col-md-6:eq(0)');
    };
    //#endregion Bind Datatable

    //#region Slider Event
    $('#ucemr_pain').on("change", function () {
        var $inp = $(this);
        var from = $inp.prop("value"); // reading input value
        var from2 = $inp.data("from"); // reading input data-from attribute
        selectRange(from);
    });
    //#endregion Slider Event

    var selectRange = function (from) {
        if (from == 0) {
            $('#ucimg1').addClass("btn  btn-outline-success");
        } else if (from == 2) {
            $('#ucimg2').addClass("btn  btn-outline-success");
        } else if (from == 4) {
            $('#ucimg3').addClass("btn  btn-outline-success");
        } else if (from == 6) {
            $('#ucimg4').addClass("btn  btn-outline-success");
        } else if (from == 8) {
            $('#ucimg5').addClass("btn  btn-outline-success");
        } else if (from == 10) {
            $('#ucimg6').addClass("btn  btn-outline-success");
        } else {
            $('#ucimg1').removeClass("btn  btn-outline-success");
            $('#ucimg2').removeClass("btn  btn-outline-success");
            $('#ucimg3').removeClass("btn  btn-outline-success");
            $('#ucimg4').removeClass("btn  btn-outline-success");
            $('#ucimg5').removeClass("btn  btn-outline-success");
            $('#ucimg6').removeClass("btn  btn-outline-success");
        }
    }

    var DisplayInputBasedSelection = function (obj) {
        var _mentalorianted = obj.cemr_mentalorianted;
        var _mentaldisoriented = obj.cemr_mentaldisoriented;
        var _mentalimpired = obj.cemr_mentalimpired;
        var _mentalother = obj.cemr_mentalother;

        var _acute1 = obj.cemr_acute1;
        var _subacute = obj.cemr_subacute;
        var _chronic = obj.cemr_chronic;
        var _recurrent = obj.cemr_recurrent;

        var _gettingworse = obj.cemr_gettingworse;
        var _better = obj.cemr_better;
        var _stillsame = obj.cemr_stillsame;

        var _independent = obj.cemr_independent;
        var _dependent = obj.cemr_dependent;
        var _crutches = obj.cemr_crutches;
        var _walker = obj.cemr_walker;
        var _wheelchair = obj.cemr_wheelchair;

        var _active = obj.cemr_active;
        var _athlete = obj.cemr_athlete;
        var _lifestyle = obj.cemr_lifestyle;
        var _bedridden = obj.cemr_bedridden;

        if (_mentalorianted === "" || _mentalorianted === undefined || _mentalorianted === NaN || _mentalorianted === null) {
            $('#u1').prop("checked", false);
        }
        else {
            $('#u1').prop("checked", true);
        }

        if (_mentaldisoriented === "" || _mentaldisoriented === undefined || _mentaldisoriented === NaN || _mentaldisoriented === null) {
            $('#u2').prop("checked", false);
        }
        else {
            $('#u2').prop("checked", true);
        }

        if (_mentalimpired === "" || _mentalimpired === undefined || _mentalimpired === NaN || _mentalimpired === null) {
            $('#u3').prop("checked", false);
        }
        else {
            $('#u3').prop("checked", true);
        }

        if (_mentalother === "" || _mentalother === undefined || _mentalother === NaN || _mentalother === null) {
            $('#u4').prop("checked", false);
        }
        else {
            $('#u4').prop("checked", true);
        }

        if (_acute1 === "" || _acute1 === undefined || _acute1 === NaN || _acute1 === null) {
            $('#ucemr_acute1').addClass("d-none");
            $('#uacute1').prop("checked", false);
        }
        else {
            $('#ucemr_acute1').removeClass("d-none");
            $('#uacute1').prop("checked", true);
        }

        if (_subacute === "" || _subacute === undefined || _subacute === NaN || _subacute === null) {
            $('#ucemr_subacute').addClass("d-none");
            $('#usubacute').prop("checked", false);
        }
        else {
            $('#ucemr_subacute').removeClass("d-none");
            $('#usubacute').prop("checked", true);
        }

        if (_chronic === "" || _chronic === undefined || _chronic === NaN || _chronic === null) {
            $('#ucemr_chronic').addClass("d-none");
            $('#uchronic').prop("checked", false);
        }
        else {
            $('#ucemr_chronic').removeClass("d-none");
            $('#uchronic').prop("checked", true);
        }

        if (_recurrent === "" || _recurrent === undefined || _recurrent === NaN || _recurrent === null) {
            $('#ucemr_recurrent').addClass("d-none");
            $('#urecurrent').prop("checked", false);
        }
        else {
            $('#ucemr_recurrent').removeClass("d-none");
            $('#urecurrent').prop("checked", true);
        }

        if (_gettingworse === "" || _gettingworse === undefined || _gettingworse === NaN || _gettingworse === null) {
            $('#ucemr_gettingworse').addClass("d-none");
            $('#ugettingworse').prop("checked", false);
        }
        else {
            $('#ucemr_gettingworse').removeClass("d-none");
            $('#ugettingworse').prop("checked", true);
        }

        if (_better === "" || _better === undefined || _better === NaN || _better === null) {
            $('#ucemr_better').addClass("d-none");
            $('#ubetter').prop("checked", false);
        }
        else {
            $('#ucemr_better').removeClass("d-none");
            $('#ubetter').prop("checked", true);
        }

        if (_stillsame === "" || _stillsame === undefined || _stillsame === NaN || _stillsame === null) {
            $('#ucemr_stillsame').addClass("d-none");
            $('#ustillsame').prop("checked", false);
        }
        else {
            $('#ucemr_stillsame').removeClass("d-none");
            $('#ustillsame').prop("checked", true);
        }

        if (_independent === "" || _independent === undefined || _independent === NaN || _independent === null) {
            $('#ucemr_independent').addClass("d-none");
            $('#uindependent').prop("checked", false);
        }
        else {
            $('#ucemr_independent').removeClass("d-none");
            $('#uindependent').prop("checked", true);
        }

        if (_dependent === "" || _dependent === undefined || _dependent === NaN || _dependent === null) {
            $('#ucemr_dependent').addClass("d-none");
            $('#udependent').prop("checked", false);
        }
        else {
            $('#ucemr_dependent').removeClass("d-none");
            $('#udependent').prop("checked", true);
        }

        if (_crutches === "" || _crutches === undefined || _crutches === NaN || _crutches === null) {
            $('#ucemr_crutches').addClass("d-none");
            $('#ucrutches').prop("checked", false);
        }
        else {
            $('#ucemr_crutches').removeClass("d-none");
            $('#ucrutches').prop("checked", true);
        }

        if (_walker === "" || _walker === undefined || _walker === NaN || _walker === null) {
            $('#ucemr_walker').addClass("d-none");
            $('#uwalker').prop("checked", false);
        }
        else {
            $('#ucemr_walker').removeClass("d-none");
            $('#uwalker').prop("checked", true);
        }

        if (_wheelchair === "" || _wheelchair === undefined || _wheelchair === NaN || _wheelchair === null) {
            $('#ucemr_wheelchair').addClass("d-none");
            $('#uwheelchair').prop("checked", false);
        }
        else {
            $('#ucemr_wheelchair').removeClass("d-none");
            $('#uwheelchair').prop("checked", true);
        }

        if (_active === "" || _active === undefined || _active === NaN || _active === null) {
            $('#ucemr_active').addClass("d-none");
            $('#uactive').prop("checked", false);
        }
        else {
            $('#ucemr_active').removeClass("d-none");
            $('#uactive').prop("checked", true);
        }

        if (_athlete === "" || _athlete === undefined || _athlete === NaN || _athlete === null) {
            $('#ucemr_athlete').addClass("d-none");
            $('#uathlete').prop("checked", false);
        }
        else {
            $('#ucemr_athlete').removeClass("d-none");
            $('#uathlete').prop("checked", true);
        }

        if (_lifestyle === "" || _lifestyle === undefined || _lifestyle === NaN || _lifestyle === null) {
            $('#ucemr_lifestyle').addClass("d-none");
            $('#ulifestyle').prop("checked", false);
        }
        else {
            $('#ucemr_lifestyle').removeClass("d-none");
            $('#ulifestyle').prop("checked", true);
        }

        if (_bedridden === "" || _bedridden === undefined || _bedridden === NaN || _bedridden === null) {
            $('#ucemr_bedridden').addClass("d-none");
            $('#ubedridden').prop("checked", false);
        }
        else {
            $('#ucemr_bedridden').removeClass("d-none");
            $('#ubedridden').prop("checked", true);
        }
    }

    //#region checkbox change event
    $('input[name="ucemr_checkvalue"]').change(function () {
        var txtId = $(this).attr("id").slice(1);
        var textboxId = "ucemr_" + txtId;
        var textbox = $("#" + textboxId);

        if ($(this).prop("checked")) {
            textbox.removeClass("d-none");
        } else {
            textbox.addClass("d-none");
        }
    });
    //#endregion

    //#region Drawing One
    var uisErasing = false;
    var ucanvas = document.getElementById('ucuppingCanvas');
    var uctx = ucanvas.getContext('2d');
    var udrawingHistory = [];
    var uDrawingMode = 'dot';

    //Load an image
    @*var Loadimage_Update = function (img) {
        var image = new Image();
        image.src = "@ConfigurationManager.AppSettings["ClinicSoftEndPoint"].ToString()" + img;
        image.onload = function () {
            uctx.drawImage(image, 0, 0, ucanvas.width, ucanvas.height);
        };
    }*@
    var Loadimage_Update = function (img) {
        var image = new Image();
        var baseUrl = "@ConfigurationManager.AppSettings["ClinicSoftEndPoint"].ToString()";
        
        // Remove the specified text from img
        img = img.replace("D:/PROJECT/toplifephc/Published/", "");
        //img = img.replace("/server3/CLINICSOFT9/TopLifePHC/TopLifePHC/TopLifePHC/ClinicSoft/ClinicSoft/", "");
        console.log("111111111111"+img);
        image.src = baseUrl + img;

        image.onload = function () {
            uctx.drawImage(image, 0, 0, ucanvas.width, ucanvas.height);
        };
    }


    // Add drawing functionality
    var uisDrawing = false;
    var ulastX, ulastY;

    ucanvas.addEventListener('mousedown', function (e) {
        var rect = ucanvas.getBoundingClientRect();
        var x = e.clientX - rect.left;
        var y = e.clientY - rect.top;

        if (uisErasing) {
            erase(x, y);
        } else {
            if (uDrawingMode === 'dot') {
                udrawDot(x, y);
            }
            else if (uDrawingMode === 'check') {
                udrawcheckMark(x, y);
            }
            else if (uDrawingMode === 'circle') {
                udrawingCircle(x, y);
            }
            else if (uDrawingMode === 'cupping') {
                udrawingCupping(x, y);
            }
            else if (uDrawingMode === 'eraser') {
                udrawingEraser(x, y);
            }
        }
        uisDrawing = true;
        udrawingHistory.push(ucanvas.toDataURL());
    });

    const udrawingButtons = document.querySelectorAll('.drawing-mode');
    udrawingButtons.forEach((button) => {
        button.addEventListener('click', function () {
            uDrawingMode = button.getAttribute('data-mode');
        });
    });

    ucanvas.addEventListener('mousemove', function (e) {

        if (uisErasing) {
            var x = e.clientX - ucanvas.getBoundingClientRect().left;
            var y = e.clientY - ucanvas.getBoundingClientRect().top;
            uerase(x, y);
        } else if (!uisDrawing) {
            return;
        }

        if (!uisDrawing) return;

        var x = e.offsetX - ucanvas.getBoundingClientRect().left;
        var y = e.offsetY - ucanvas.getBoundingClientRect().top;

        uisDrawing = true;
        udrawingHistory.push(canvas.toDataURL());
    });

    function udrawDot(x, y) {
        uctx.fillStyle = $("#ucolor_picker").val();
        uctx.beginPath();
        uctx.arc(x, y, 5, 0, Math.PI * 2);
        uctx.fill();
        udrawingHistory.push(ucanvas.toDataURL());
    }

    var udrawcheckMark = function (x, y) {
        uctx.strokeStyle = $("#ucolor_picker").val();
        uctx.lineWidth = 2;
        uctx.beginPath();
        uctx.moveTo(x - 10, y);
        uctx.lineTo(x - 5, y + 5);
        uctx.lineTo(x + 10, y - 10);
        uctx.stroke();
        udrawingHistory.push(ucanvas.toDataURL());
    }

    var udrawingCircle = function (x, y) {
        uctx.strokeStyle = $("#ucolor_picker").val();
        uctx.lineWidth = 2;
        uctx.beginPath();
        uctx.arc(x, y, 5, 0, Math.PI * 2); // Use the arc method to draw a circle
        uctx.stroke();
        udrawingHistory.push(ucanvas.toDataURL());
    }

    var udrawingCupping = function (x, y) {
        uctx.strokeStyle = $("#ucolor_picker").val(); // Set color for the trash icon
        uctx.lineWidth = 2;
        uctx.beginPath();
        uctx.moveTo(x - 8, y - 16);
        uctx.lineTo(x + 8, y - 16);
        uctx.lineTo(x + 4, y - 2);
        uctx.lineTo(x - 4, y - 2);
        uctx.closePath();
        uctx.stroke();
        udrawingHistory.push(ucanvas.toDataURL());
    }

    var udrawingEraser = function (x, y) {
        var squareSize = 20;
        uctx.fillStyle = "#ffffff";
        uctx.beginPath();
        uctx.rect(x - squareSize / 2, y - squareSize / 2, squareSize, squareSize);
        uctx.fill();
        udrawingHistory.push(ucanvas.toDataURL());
        $("#ucolor_picker").val("#000000");
    }

    function uerase(x, y) {
        uctx.fillStyle = '#ffffff';
        uctx.beginPath();
        uctx.arc(x, y, 10, 0, Math.PI * 2);
        uctx.fill();
        udrawingHistory.push(ucanvas.toDataURL());
    }
    ucanvas.addEventListener('mouseup', function () {
        uisDrawing = false;
    });


    $('#uundo_button').on('click', function (e) {
        if (udrawingHistory.length > 0) {
            udrawingHistory.pop(); // Remove the current state
            var img = new Image();
            img.src = udrawingHistory[udrawingHistory.length - 1];
            img.onload = function () {
                uctx.clearRect(0, 0, ucanvas.width, ucanvas.height);
                uctx.drawImage(img, 0, 0, ucanvas.width, ucanvas.height);
            };
        }

    });

    //#endregion Drawing One

    //#region Drawing Two
    var uisErasing2 = false;
    var ucanvas2 = document.getElementById('ucuppingCanvas2');
    var uctx2 = ucanvas2.getContext('2d');
    var udrawingHistory2 = [];
    var uDrawingMode2 = 'dot2';

    //Load an image
    var Loadimage2_Update = function (img) {
       var image = new Image();
        var baseUrl = "@ConfigurationManager.AppSettings["ClinicSoftEndPoint"].ToString()";

        // Remove the specified text from img
        img = img.replace("D:/PROJECT/toplifephc/Published/", "");

        image.src = baseUrl + img;
        image.onload = function () {
            uctx2.drawImage(image, 0, 0, ucanvas2.width, ucanvas2.height);
        };
    }

    // Add drawing functionality
    var uisDrawing2 = false;

    ucanvas2.addEventListener('mousedown', function (e) {
        var rect = ucanvas2.getBoundingClientRect();
        var x = e.clientX - rect.left;
        var y = e.clientY - rect.top;

        if (uisErasing2) {
            uerase2(x, y);
        } else {
            if (uDrawingMode2 === 'dot2') {
                udrawDot2(x, y);
            }
            else if (uDrawingMode2 === 'check2') {
                udrawcheckMark2(x, y);
            }
            else if (uDrawingMode2 === 'circle2') {
                udrawingCircle2(x, y);
            }
            else if (uDrawingMode2 === 'cupping2') {
                udrawingCupping2(x, y);
            }
            else if (uDrawingMode2 === 'eraser2') {
                udrawingEraser2(x, y);
            }
        }
        uisDrawing2 = true;
        udrawingHistory2.push(canvas2.toDataURL());
    });

    const drawingButtons2 = document.querySelectorAll('.drawing-mode2');
    drawingButtons2.forEach((button) => {
        button.addEventListener('click', function () {
            uDrawingMode2 = button.getAttribute('data-mode');
        });
    });

    ucanvas2.addEventListener('mousemove', function (e) {

        if (uisErasing2) {
            var x = e.clientX - ucanvas2.getBoundingClientRect().left;
            var y = e.clientY - ucanvas2.getBoundingClientRect().top;
            uerase2(x, y);
        } else if (!uisDrawing2) {
            return;
        }

        if (!uisDrawing2) return;

        var x = e.offsetX - ucanvas2.getBoundingClientRect().left;
        var y = e.offsetY - ucanvas2.getBoundingClientRect().top;


        uisDrawing2 = true;
        udrawingHistory2.push(ucanvas2.toDataURL());
    });

    function udrawDot2(x, y) {
        uctx2.fillStyle = $("#ucolor_picker2").val();
        uctx2.beginPath();
        uctx2.arc(x, y, 5, 0, Math.PI * 2);
        uctx2.fill();
        udrawingHistory2.push(ucanvas2.toDataURL());
    }

    var udrawcheckMark2 = function (x, y) {
        uctx2.strokeStyle = $("#ucolor_picker2").val();
        uctx2.lineWidth = 2;
        uctx2.beginPath();
        uctx2.moveTo(x - 10, y);
        uctx2.lineTo(x - 5, y + 5);
        uctx2.lineTo(x + 10, y - 10);
        uctx2.stroke();
        udrawingHistory2.push(ucanvas2.toDataURL());
    }

    var udrawingCircle2 = function (x, y) {
        uctx2.strokeStyle = $("#ucolor_picker2").val();
        uctx2.lineWidth = 2;
        uctx2.beginPath();
        uctx2.arc(x, y, 5, 0, Math.PI * 2); // Use the arc method to draw a circle
        uctx2.stroke();
        udrawingHistory2.push(ucanvas2.toDataURL());
    }

    var udrawingCupping2 = function (x, y) {
        uctx2.strokeStyle = $("#ucolor_picker2").val(); // Set color for the trash icon
        uctx2.lineWidth = 2;
        uctx2.beginPath();
        uctx2.moveTo(x - 8, y - 16);
        uctx2.lineTo(x + 8, y - 16);
        uctx2.lineTo(x + 4, y - 2);
        uctx2.lineTo(x - 4, y - 2);
        uctx2.closePath();
        uctx2.stroke();
        udrawingHistory2.push(ucanvas2.toDataURL());
    }

    var udrawingEraser2 = function (x, y) {
        var squareSize = 20;
        uctx2.fillStyle = "#ffffff";
        uctx2.beginPath();
        uctx2.rect(x - squareSize / 2, y - squareSize / 2, squareSize, squareSize);
        uctx2.fill();
        udrawingHistory2.push(ucanvas2.toDataURL());
        $("#ucolor_picker2").val("#000000");
    }

    function uerase2(x, y) {
        uctx2.fillStyle = '#ffffff';
        uctx2.beginPath();
        uctx2.arc(x, y, 10, 0, Math.PI * 2);
        uctx2.fill();
        udrawingHistory2.push(ucanvas2.toDataURL());
    }

    ucanvas2.addEventListener('mouseup', function () {
        uisDrawing2 = false;
    });


    $('#uundo_button2').on('click', function (e) {
        if (udrawingHistory2.length > 1) {
            udrawingHistory2.pop(); // Remove the current state
            var img = new Image();
            img.src = udrawingHistory2[udrawingHistory2.length - 1];
            img.onload = function () {
                uctx2.clearRect(0, 0, ucanvas2.width, ucanvas2.height);
                uctx2.drawImage(img, 0, 0, ucanvas2.width, ucanvas2.height);
            };
        }

    });
    //#endregion drawing Two

    //#region Drawing Three
    var uisErasing3 = false;
    var ucanvas3 = document.getElementById('ucuppingCanvas3');
    var uctx3 = ucanvas3.getContext('2d');
    var udrawingHistory3 = [];
    var uDrawingMode3 = 'dot';

    //Load an image
    var Loadimage3_Update = function (img) {
        var image = new Image();
        var baseUrl = "@ConfigurationManager.AppSettings["ClinicSoftEndPoint"].ToString()";

        // Remove the specified text from img
        img = img.replace("D:/PROJECT/toplifephc/Published/", "");

        image.src = baseUrl + img;
        image.onload = function () {
            uctx3.drawImage(image, 0, 0, ucanvas3.width, ucanvas3.height);
        };
    }


    // Add drawing functionality
    var uisDrawing3 = false;

    ucanvas3.addEventListener('mousedown', function (e) {
        var rect = ucanvas3.getBoundingClientRect();
        var x = e.clientX - rect.left;
        var y = e.clientY - rect.top;

        if (uisErasing3) {
            uerase3(x, y);
        } else {
            if (uDrawingMode3 === 'dot3') {
                udrawDot3(x, y);
            }
            else if (uDrawingMode3 === 'check3') {
                udrawcheckMark3(x, y);
            }
            else if (uDrawingMode3 === 'circle3') {
                udrawingCircle3(x, y);
            }
            else if (uDrawingMode3 === 'cupping3') {
                udrawingCupping3(x, y);
            }
            else if (uDrawingMode3 === 'eraser3') {
                udrawingEraser3(x, y);
            }
        }
        uisDrawing3 = true;
        udrawingHistory3.push(ucanvas3.toDataURL());
    });

    const drawingButtons3 = document.querySelectorAll('.drawing-mode3');
    drawingButtons3.forEach((button) => {
        button.addEventListener('click', function () {
            uDrawingMode3 = button.getAttribute('data-mode');
        });
    });

    ucanvas3.addEventListener('mousemove', function (e) {
        if (uisErasing2) {
            var x = e.clientX - ucanvas3.getBoundingClientRect().left;
            var y = e.clientY - ucanvas3.getBoundingClientRect().top;
            uerase3(x, y);
        } else if (!uisDrawing3) {
            return;
        }

        if (!uisDrawing3) return;

        var x = e.offsetX - ucanvas3.getBoundingClientRect().left;
        var y = e.offsetY - ucanvas3.getBoundingClientRect().top;


        uisDrawing3 = true;
        udrawingHistory3.push(ucanvas3.toDataURL());
    });

    function udrawDot3(x, y) {
        uctx3.fillStyle = $("#ucolor_picker3").val();
        uctx3.beginPath();
        uctx3.arc(x, y, 5, 0, Math.PI * 2);
        uctx3.fill();
        udrawingHistory3.push(ucanvas3.toDataURL());
    }

    var udrawcheckMark3 = function (x, y) {
        uctx3.strokeStyle = $("#ucolor_picker3").val();
        uctx3.lineWidth = 2;
        uctx3.beginPath();
        uctx3.moveTo(x - 10, y);
        uctx3.lineTo(x - 5, y + 5);
        uctx3.lineTo(x + 10, y - 10);
        uctx3.stroke();
        udrawingHistory3.push(ucanvas3.toDataURL());
    }

    var udrawingCircle3 = function (x, y) {
        uctx3.strokeStyle = $("#ucolor_picker2").val();
        uctx3.lineWidth = 2;
        uctx3.beginPath();
        uctx3.arc(x, y, 5, 0, Math.PI * 2); // Use the arc method to draw a circle
        uctx3.stroke();
        udrawingHistory3.push(ucanvas3.toDataURL());
    }

    var udrawingCupping3 = function (x, y) {
        uctx3.strokeStyle = $("#ucolor_picker3").val(); // Set color for the trash icon
        uctx3.lineWidth = 2;
        uctx3.beginPath();
        uctx3.moveTo(x - 8, y - 16);
        uctx3.lineTo(x + 8, y - 16);
        uctx3.lineTo(x + 4, y - 2);
        uctx3.lineTo(x - 4, y - 2);
        uctx3.closePath();
        uctx3.stroke();
        udrawingHistory3.push(ucanvas3.toDataURL());
    }

    var udrawingEraser3 = function (x, y) {
        var squareSize = 20;
        uctx3.fillStyle = "#ffffff";
        uctx3.beginPath();
        uctx3.rect(x - squareSize / 2, y - squareSize / 2, squareSize, squareSize);
        uctx3.fill();
        udrawingHistory3.push(ucanvas3.toDataURL());
        $("#ucolor_picker3").val("#000000");
    }

    function uerase3(x, y) {
        uctx3.fillStyle = '#ffffff';
        uctx3.beginPath();
        uctx3.arc(x, y, 10, 0, Math.PI * 2);
        uctx3.fill();
        udrawingHistory3.push(ucanvas3.toDataURL());
    }

    ucanvas3.addEventListener('mouseup', function () {
        uisDrawing3 = false;
    });


    $('#uundo_button3').on('click', function (e) {
        if (udrawingHistory3.length > 1) {
            udrawingHistory3.pop(); // Remove the current state
            var img = new Image();
            img.src = udrawingHistory3[udrawingHistory3.length - 1];
            img.onload = function () {
                uctx3.clearRect(0, 0, ucanvas3.width, ucanvas3.height);
                uctx3.drawImage(img, 0, 0, ucanvas3.width, ucanvas3.height);
            };
        }

    });
    //#endregion Drawing Three

    //#region Update  Click
    $('#btn_Update_ConsultEMR').on('click', function (e) {
        e.preventDefault();

        //Body Image 1
        var canvas = $("#ucuppingCanvas").get(0);
        var imgData = canvas.toDataURL();

        //Body Image 2
        var canvas2 = $("#ucuppingCanvas2").get(0);
        var imgData2 = canvas2.toDataURL();

        //Body Image 2
        var canvas3 = $("#ucuppingCanvas3").get(0);
        var imgData3 = canvas3.toDataURL();

        var ucemr_checkvalue_ = $.map($(':checkbox[name=ucemr_checkvalue]:checked'), function (n, i) {
            return n.value;
        }).join(',');


        var _template_details = {
            "cemrId": $("#ucemrId").val(),
            "cemr_appId": @emr.appId,
            "cemr_cemtId": 0,
            "cemr_complaint": $("#ucemr_complaint").val(),
            "cemr_pasthistory": $("#ucemr_pasthistory").val(),
            "cemr_checkvalue": ucemr_checkvalue_,
            "cemr_mentalorianted": $("#ucemr_mentalorianted").val(),
            "cemr_mentaldisoriented": $("#ucemr_mentaldisoriented").val(),
            "cemr_mentalimpired": $("#ucemr_mentalimpired").val(),
            "cemr_acute1": $("#ucemr_acute1").val(),
            "cemr_subacute": $("#ucemr_subacute").val(),
            "cemr_chronic": $("#ucemr_chronic").val(),
            "cemr_recurrent": $("#ucemr_recurrent").val(),
            "cemr_durationin": $("#ucemr_durationin").val(),
            "cemr_gettingworse": $("#ucemr_gettingworse").val(),
            "cemr_better": $("#ucemr_better").val(),
            "cemr_stillsame": $("#ucemr_stillsame").val(),
            "cemr_bodyparts": $("#ucemr_bodyparts").val(),
            "cemr_observationins": $("#ucemr_observationins").val(),
            "cemr_palpation": $("#ucemr_palpation").val(),
            "cemr_rom": $("#ucemr_rom").val(),
            "cemr_mptest": $("#ucemr_mptest").val(),
            "cemr_stest": $("#ucemr_stest").val(),
            "cemr_reflexes": $("#ucemr_reflexes").val(),
            "cemr_dermatone": $("#ucemr_dermatone").val(),
            "cemr_myotome": $("#ucemr_myotome").val(),
            "cemr_independent": $("#ucemr_independent").val(),
            "cemr_dependent": $("#ucemr_dependent").val(),
            "cemr_crutches": $("#ucemr_crutches").val(),
            "cemr_walker": $("#ucemr_walker").val(),
            "cemr_wheelchair": $("#ucemr_wheelchair").val(),
            "cemr_active": $("#ucemr_active").val(),
            "cemr_athlete": $("#ucemr_athlete").val(),
            "cemr_lifestyle": $("#ucemr_lifestyle").val(),
            "cemr_bedridden": $("#ucemr_bedridden").val(),
            "cemr_radiology": $("#ucemr_radiology").val(),
            "cemr_procedure": $("#ucemr_procedure").val(),
            "cemr_stgoals": $("#ucemr_stgoals").val(),
            "cemr_ltgoals": $("#ucemr_ltgoals").val(),
            "cemr_followup": $("#ucemr_followup").val(),
            "cemr_session": $("#ucemr_session").val(),
            "cemr_treatpoints": $("#ucemr_treatpoints").val(),
            "cemr_management": $("#ucemr_management").val(),
            "type1": "Appointment",
            "type2": "",
            "cemr_bodyimage": "",
            "cemr_bimage": "",
            "image": imgData,
            "cemr_pain": $("#cemr_pain").val(),

            //Newly Added
            "cemt_type2": $("#ucemt_type2").val(),
            "cemr_mentalother": $("#ucemr_mentalother").val(),
            "cemr_bodyimage2": "",
            "cemr_bimage2": "",
            "image2": imgData2,
            "cemr_faceimage": "",
            "cemr_bimage3": "",
            "image3": imgData3,
            "cemr_type": $("#ucemt_type").val(),
            "cemr_type2": $("#ucemt_type2").val(),
            "cemr_followup_remarks": $("#uapp_resnforvisit").val(),
            "cemr_marking_notes": $("#ucemr_marking_notes").val(),

            "__RequestVerificationToken": $('input[name="__RequestVerificationToken"]').val()
        }

        $('#btn_Update_ConsultEMR').removeClass("btn btn-success");
        $('#btn_Update_ConsultEMR').addClass("btn btn-success btn-loaders btn-icon");
        $('#btn_Update_ConsultEMR').html("Updating the Record....");

        $.ajax({
            type: "Post",
            url: "@Url.Action("UpdateConsultationTemplate", "ConsultationEMR", new {area = "EMR" })",
            dataType: 'JSON',
            data: _template_details,
            success: function (data) {
                $('#btn_Update_ConsultEMR').removeClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Update_ConsultEMR').addClass("btn btn-success");
                $('#btn_Update_ConsultEMR').html("Update Consulation");
                if (data.isSuccess) {
                    var alertPlaceholder = document.getElementById("Alert");
                    function alert(e, t) {
                        var l = document.createElement("div");
                        l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" role="alert">' + e +
                            '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                    }
                    alert("<i class='fe fe-check-circle text-white'></i>  Consultation EMR Updated Successfully!", "success");
                    Timeout();
                }
                else {
                    let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                        "<div class='alert alert-warning' role='alert'>" +
                        "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                        "<strong>Warning.. Consultation EMR Alredy Exists..</strong><br/>" +
                        "</div></div>";
                    $("#Alert").html(html);
                }
            },
            error: function (xhr) {
                $('#btn_Update_ConsultEMR').removeClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Update_ConsultEMR').addClass("btn btn-warning");
                $('#btn_Update_ConsultEMR').html("Update Consultation");
                Timeout();
            }
        });



    });
   //#endregion Add Click


    $('#btn_Delete_ConsultEMR').on('click', function (e) {
        Swal.fire({
            title: "Are you sure you want to delete this Consultation?",
            text: "This action will delete this Consultation!",
            icon: "question",
            showCancelButton: !0,
            confirmButtonText: 'Yes! I Confirm',
            cancelButtonText: 'No! Cancel Please',
            confirmButtonClass: "btn btn-success mt-2", cancelButtonClass: "btn btn-danger ms-2 mt-2", buttonsStyling: !1
        }).then(function (t) {
            if (t.value) {
                $.ajax({
                    url: '@Url.Action("DeleteConsultationEMR", "ConsultationEMR", new { area = "EMR" })?cemrId=' + $("#ucemrId").val(),
                    type: "POST",
                    dataType: "json",
                    success: function (data) {
                        if (data.isAuthorized) {
                            if (data.success) {
                                Swal.fire({
                                    title: "Success!",
                                    text: data.message,
                                    icon: "success",
                                    showCancelButton: 0,
                                    confirmButtonColor: "#0bb197"
                                });

                                location.reload(true);
                            }
                            else {
                                Swal.fire({
                                    title: "Action Forbidden!",
                                    text: data.message,
                                    icon: "error",
                                    showCancelButton: 0,
                                    confirmButtonColor: "#0bb197"
                                });
                            }
                        }
                        else {
                            Swal.fire({
                                title: "Access Denied!",
                                text: "You do not have enough privileges to delete Consultation!",
                                icon: "error",
                                showCancelButton: 0,
                                confirmButtonColor: "#0bb197", cancelButtonColor: "#ff3d60",
                            });
                        }
                    },
                    error: function (xhr) {
                        Swal.fire({
                            title: "Error!",
                            text: "Failed to Delete Consultation! Please refresh the Page and Try again.",
                            icon: "error",
                            showCancelButton: 0,
                            confirmButtonColor: "#0bb197", cancelButtonColor: "#ff3d60",
                        });
                    }
                });
            }
        });
    });

    //#region Resize Datatable
    function resizedt() {
        setTimeout(function () {
            $.fn.dataTable.tables({ visible: true, api: true }).columns.adjust();
        }, 350);
    }
    //#endregion Resize Datatable

    //#region Alert Timeout
    function Timeout() {
        window.setTimeout(function () {
            $(".alert").fadeTo(500, 0).slideUp(500, function () {
                $(this).remove();
            });
        }, 4200);
    }
    //#endregion Alert Timeout

    $('#utemplates_load').on('select2:select', function (e) {
        $.ajax({
            url: '@Url.Action("GetConsultationEMRTemplate", "ConsultationEMR", new { area = "EMR" })?cemtId=' + $('#utemplates_load').val(),
            type: "GET",
            dataType: "json",
            async: false,
            success: function (response) {
                LoadDataBySelection_TemplateUpdate(response);
            },
            error: function (xhr) {
                console.log(xhr);
                alert(xhr);
            },
        });
    });

    var LoadDataBySelection_TemplateUpdate = function (obj) {
        $("#uddl_hijama_type").hide();
        $("#ubody_marking").hide();
        $("#uface_marking").hide();

        DisplayInputBasedSelection(obj);

        var instance = $('#ucemr_pain').data("ionRangeSlider");
        instance.update({
            from: obj.cemr_pain
        });

        LoadTreatentSubTypes(obj.cemr_type2);
        selectRange(obj.cemr_pain);

        $("#ucemt_type2").val(obj.cemr_type2).trigger("change");
        $("#ucemt_type").val(obj.cemr_type).trigger("change");

        $("#uconsultation").val(obj.consultation);
        $("#uapp_status").val(obj.app_status);
        $("#urefferedby").val("");
        $("#uapp_comments").val(obj.app_comments);
        $("#uapp_type").val(obj.app_type);
        $("#uconsultationtype").val(obj.consultationtype);
        $("#ustarttime").val(obj.starttime);
        $("#uendtime").val(obj.endtime);

        $("#ucemr_complaint").text(obj.cemr_complaint);
        $("#ucemr_pasthistory").text(obj.cemr_pasthistory);
        $("#ucemr_treatpoints").text(obj.cemr_treatpoints);

        $("#ucemr_mentalorianted").val(obj.cemr_mentalorianted);
        $("#ucemr_mentaldisoriented").val(obj.cemr_mentaldisoriented);
        $("#ucemr_mentalimpired").val(obj.cemr_mentalimpired);
        $("#ucemr_mentalother").val(obj.cemr_mentalother);

        $("#ucemr_acute1").val(obj.cemr_acute1);
        $("#ucemr_subacute").val(obj.cemr_subacute);
        $("#ucemr_chronic").val(obj.cemr_chronic);
        $("#ucemr_recurrent").val(obj.cemr_recurrent);

        $("#ucemr_durationin").val(obj.cemr_durationin);

        $("#ucemr_gettingworse").val(obj.cemr_gettingworse);
        $("#ucemr_better").val(obj.cemr_better);
        $("#ucemr_stillsame").val(obj.cemr_stillsame);

        $("#ucemr_observationins").text(obj.cemr_observationins);
        $("#ucemr_palpation").text(obj.cemr_palpation);
        $("#ucemr_rom").text(obj.cemr_rom);
        $("#ucemr_mptest").text(obj.cemr_mptest);
        $("#ucemr_stest").text(obj.cemr_stest);
        $("#ucemr_bodyparts").text(obj.cemr_bodyparts);

        $("#ucemr_management").text(obj.cemr_management);
        $("#ucemr_marking_notes").text(obj.cemr_marking_notes);

        $("#ucemr_reflexes").text(obj.cemr_reflexes);
        $("#ucemr_dermatone").text(obj.cemr_dermatone);
        $("#ucemr_myotome").text(obj.cemr_myotome);
        $("#ucemr_radiology").text(obj.cemr_radiology);

        $("#ucemr_independent").text(obj.cemr_independent);
        $("#ucemr_dependent").text(obj.cemr_dependent);
        $("#ucemr_crutches").text(obj.cemr_crutches);
        $("#ucemr_walker").text(obj.cemr_walker);
        $("#ucemr_wheelchair").text(obj.cemr_wheelchair);

        $("#ucemr_active").text(obj.cemr_active);
        $("#ucemr_athlete").text(obj.cemr_athlete);
        $("#ucemr_lifestyle").text(obj.cemr_lifestyle);
        $("#ucemr_bedridden").text(obj.cemr_bedridden);

        $("#ucemr_procedure").text(obj.cemr_procedure);
        $("#ucemr_stgoals").text(obj.cemr_stgoals);
        $("#ucemr_ltgoals").text(obj.cemr_ltgoals);
        $("#ucemr_followup").text(obj.cemr_followup);

        $("#ucemr_session").text(obj.cemr_session);


        Loadimage_Update(obj.cemr_bodyimage);
        Loadimage2_Update(obj.cemr_bodyimage2);
        Loadimage3_Update(obj.cemr_faceimage);
    }


</script>
