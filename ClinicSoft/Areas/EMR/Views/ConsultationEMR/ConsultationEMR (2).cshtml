@model BusinessEntities.EMR.ConsultationEMR
@using System.Linq;
@using System.Security.Claims;
@using BusinessEntities;
@using System.Configuration;
@{
    var claims = ClaimsPrincipal.Current.Identities.First().Claims.ToList();
    var emp_designation = claims.Where(c => c.Type == ClaimTypes.Role).Select(c => c.Value).SingleOrDefault();
    EMRInfo emr = (EMRInfo)TempData["emr_data"];
    TempData.Keep("emr_data");
    ViewBag.Title = "ConsultationEMR";

}
<!-- Row -->
<style>
    section {
        border: 1px solid #e6ebf1;
        padding: 5px;
        margin: 2px;
    }
</style>
<div class="card">
    <div class="row g-0">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <div>
                <h4 class="page-title mb-0 text-primary align-content-center ms-5 mb-4 ">
                    Consultation Sheet
                </h4>
            </div>
        </div>

        <div class="col-lg-8 col-xl-2">
            <div class="overflow-hidden mb-0 mb-lg-0">
                <div class="card-body p-0">
                    <div class="main-content-left main-content-left-chat">

                        <div class="main-chat-list" id="TittleList">
                            <a href="#consultation_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Consultation Summary
                                    </span>
                                </div>
                            </a>
                            <a href="#hyjamatype_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Treatment Type
                                    </span>
                                </div>
                            </a>
                            <a href="#complaints_body">
                                <div class="media ">
                                    <span class="font-weight-semibold">
                                        Complaints/ PM Histroy
                                    </span>
                                </div>
                            </a>
                            <a href="#diagnosis_body">
                                <div class="media">
                                    <span class="font-weight-semibold">
                                        Diagnosis Details
                                    </span>
                                </div>
                            </a>
                            <a href="#treatment_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Treatment Points
                                    </span>
                                </div>
                            </a>
                            <a href="#mentalstatus_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Mental Status
                                    </span>
                                </div>
                            </a>
                            <a href="#pain_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Pain Scale
                                    </span>
                                </div>
                            </a>
                            <a href="#painsclasification_body">
                                <div class="media new">                                    
                                    <span class="font-weight-semibold">
                                        Pain/Duration/Condition Notes
                                    </span>
                                </div>
                            </a>
                            <a href="#physicalassesment_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Affected Body/ Physical Assesment
                                    </span>
                                </div>
                            </a>
                            <a href="#bodyimage_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                        Body/Face Marking
                                    </span>
                                </div>
                            </a>
                            <a href="#neurological_body" id="lnk_Neurological_Assesment">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                    Neurological Assesment
                                    </span>
                                </div>
                            </a>

                            <a href="#treatmentplan_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                    Treatment Plan
                                    </span>
                                </div>
                            </a>
                            <a href="#followup_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                    Follow up Sessions
                                    </span>
                                </div>
                            </a>

                            <a href="#management_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                    Management
                                    </span>
                                </div>
                            </a>
                            <a href="#followupdetail_body">
                                <div class="media new">
                                    <span class="font-weight-semibold">
                                    Followup Details
                                    </span>
                                </div>
                            </a>



                        </div><!-- main-chat-list -->
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-7 col-xl-10">
            <div class="border-start">
                <div class="main-content-body main-content-body-chat">
                    <div class="main-chat-header">
                        <div class="col-lg-7"></div>
                        <div class="col-lg-5">
                            <select placeholder="Select Template" class="form-select select2" id="templates_load" name="template">
                            </select>
                        </div>
                    </div><!-- main-chat-header -->
                    <form id="form_ConsultationEMR" autocomplete="off" ondrop="return false;" oncut="return false;">
                        <div class="main-chat-body" id="Contentb">
                            <section id="consultation_body">
                                <div class="main-chat-msg-name mt-3">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Consultation Summary</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Consultation&nbsp;</label>
                                                <input class="form-control mb-4 text-capitalize" placeholder="Patient Details" readonly="" value="@Model.consultation" type="text">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Status&nbsp;</label>
                                                <input class="form-control mb-4 text-capitalize" placeholder="Status" readonly="" value="@Model.app_status" type="text">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Referred By&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Referred By" readonly="" type="text" value="">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Order Remarks&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Order Remarks" readonly="" type="text" value="@Model.app_comments">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Visit Type&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Visit Type" readonly="" type="text" value="@Model.app_type">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Consultation Type&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Consultation Type" readonly="" type="text" value="@Model.consultationtype">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Start Time&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="0:00" readonly="" type="text" value="@Model.starttime">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">End Time&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="0:00" readonly="" type="text" value="@Model.endtime">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row d-none">
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">PBM prescription Id&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="" readonly="" type="text" value="">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">ERx prescription Id&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="" readonly="" type="text" value="">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Erx Reference Number&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="" readonly="" type="text" value="">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="hyjjama_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Treatment Type</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Treatment Type&nbsp;</label>
                                                <select placeholder="Select Any" class="form-select select2 mb-2" id="cemt_type2" name="cemt_type2">
                                                    <option value="">Select Type</option>
                                                    <option value="hijama">Hijama</option>
                                                    <option value="physiotherapy">Physiotherapy</option>
                                                    <option value="dermatology">Dermatology</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-6" id="ddl_hijama_type">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Treatment Sub Type&nbsp;</label>
                                                <select placeholder="Select Any" class="form-select select2 mb-2" id="cemt_type" name="cemt_type">
                                                </select>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </section>
                            <section id="complaints_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Complaints/PM Histroy</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">
                                                    Cheif Complaints&nbsp;
                                                    <button class="btn btn-success btn-sm ms-lg-2 ms-sm-2" type="button" id="addComplaints">
                                                        <i class="fa fa-plus"></i>
                                                        Add New
                                                    </button>
                                                </label>
                                                <textarea class="form-control mb-4" placeholder="Enter Cheif Complaints" rows="3" id="cemr_complaint"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">
                                                    Past Medical History&nbsp;
                                                </label>
                                                <textarea class="form-control mb-4 mt-3" placeholder="Enter Past Medical History" rows="3" id="cemr_pasthistory"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="diagnosis_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Diagnosis</span>
                                    <span>
                                        <button class="btn btn-success btn-sm ms-lg-2 ms-sm-2" type="button" id="addDiagnosis">
                                            <i class="fa fa-plus"></i>   Add Diagnosis
                                        </button>
                                    </span>
                                </div>
                                <div class="content-inner">
                                    <div class="row" id="listItemsl">
                                        <div class="col-sm-12 col-md-12 col-lg-12">
                                            <div class="table-responsive" style="min-height:unset;">
                                                <table id="tbl_emrpatdignosis" class="table table-striped table-bordered text-nowrap resize-table" style="width: 100%; cursor: pointer;">
                                                    <thead>
                                                        <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                            <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Type</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Code</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Diagnosis</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Notes</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">year</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Change To Primary</th>
                                                        </tr>
                                                    </thead>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="treatment_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Treatment Points</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-12">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">-&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Enter Something" rows="3" id="cemr_treatpoints"> </textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="mentalstatus_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Mental Status</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="custom-controls-stacked">
                                            <div class="d-flex flex-row bg-light ">
                                                <label class="custom-control custom-checkbox me-2">
                                                    <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Oriented" id="1">
                                                    <span class="custom-control-label">Oriented</span>
                                                </label>
                                                <label class="custom-control custom-checkbox me-2">
                                                    <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Disoriented" id="2">
                                                    <span class="custom-control-label">Disoriented</span>
                                                </label>
                                                <label class="custom-control custom-checkbox me-2">
                                                    <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Impired Cognition" id="3">
                                                    <span class="custom-control-label">Impired Cognition</span>
                                                </label>
                                                <label class="custom-control custom-checkbox me-2">
                                                    <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Other" id="4">
                                                    <span class="custom-control-label">Other</span>
                                                </label>
                                            </div>
                                            <div class="d-flex flex-row bg-light ">
                                                <div class="col-md-3">
                                                    <input class="form-control mb-4" placeholder="Enter Oriented Remarks" type="text" id="cemr_mentalorianted">
                                                </div>
                                                <div class="col-md-3">
                                                    <input class="form-control mb-4" placeholder="Enter Disoriented Remarks" type="text" id="cemr_mentaldisoriented">
                                                </div>
                                                <div class="col-md-3">
                                                    <input class="form-control mb-4" placeholder="Enter Impired Cognition Remarks" type="text" id="cemr_mentalimpired">
                                                </div>
                                                <div class="col-md-3">
                                                    <input class="form-control mb-4" placeholder="Enter Other Remarks" type="text" id="cemr_mentalother">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="pain_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Pain Scale</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-12 col-lg-12 text-center">
                                            <div class="row">
                                                <div class="col-sm-3 col-md-3 col-lg-3">
                                                    <div class="form-group mb-3">
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3 rounded-circle" id="cimg1">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#fbec5d" class="bi bi-emoji-laughing-fill" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5c0 .501-.164.396-.415.235C6.42 6.629 6.218 6.5 6 6.5c-.218 0-.42.13-.585.235C5.164 6.896 5 7 5 6.5 5 5.672 5.448 5 6 5s1 .672 1 1.5zm5.331 3a1 1 0 0 1 0 1A4.998 4.998 0 0 1 8 13a4.998 4.998 0 0 1-4.33-2.5A1 1 0 0 1 4.535 9h6.93a1 1 0 0 1 .866.5zm-1.746-2.765C10.42 6.629 10.218 6.5 10 6.5c-.218 0-.42.13-.585.235C9.164 6.896 9 7 9 6.5c0-.828.448-1.5 1-1.5s1 .672 1 1.5c0 .501-.164.396-.415.235z" /></svg>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3 rounded-circle " id="cimg2">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#ffe135" class="bi bi-emoji-neutral-fill" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm-3 4a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8z" /></svg><div class="form-group mb-3">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3 rounded-circle " id="cimg3">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#f5c71a" class="bi bi-emoji-frown-fill" viewBox="0 0 16 16"><path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm-2.715 5.933a.5.5 0 0 1-.183-.683A4.498 4.498 0 0 1 8 9.5a4.5 4.5 0 0 1 3.898 2.25.5.5 0 0 1-.866.5A3.498 3.498 0 0 0 8 10.5a3.498 3.498 0 0 0-3.032 1.75.5.5 0 0 1-.683.183zM10 8c-.552 0-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5S10.552 8 10 8z" /></svg>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3 rounded-circle " id="cimg4">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#ffa500" class="bi bi-emoji-expressionless-fill" viewBox="0 0 16 16">
                                                            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM4.5 6h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm5 0h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1zm-5 4h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1z" />
                                                        </svg>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3 rounded-circle " id="cimg5">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#ff7518" class="bi bi-emoji-dizzy-fill" viewBox="0 0 16 16">
                                                            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM4.146 5.146a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 1 1 .708.708l-.647.646.647.646a.5.5 0 1 1-.708.708L5.5 7.207l-.646.647a.5.5 0 1 1-.708-.708l.647-.646-.647-.646a.5.5 0 0 1 0-.708zm5 0a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708.708l-.647.646.647.646a.5.5 0 0 1-.708.708l-.646-.647-.646.647a.5.5 0 1 1-.708-.708l.647-.646-.647-.646a.5.5 0 0 1 0-.708zM8 13a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" />
                                                        </svg>

                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3 rounded-circle " id="cimg6">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="70" height="70" fill="#ff4500" class="bi bi-emoji-angry-fill" viewBox="0 0 16 16">
                                                            <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zM4.053 4.276a.5.5 0 0 1 .67-.223l2 1a.5.5 0 0 1 .166.76c.071.206.111.44.111.687C7 7.328 6.552 8 6 8s-1-.672-1-1.5c0-.408.109-.778.285-1.049l-1.009-.504a.5.5 0 0 1-.223-.67zm.232 8.157a.5.5 0 0 1-.183-.683A4.498 4.498 0 0 1 8 9.5a4.5 4.5 0 0 1 3.898 2.25.5.5 0 1 1-.866.5A3.498 3.498 0 0 0 8 10.5a3.498 3.498 0 0 0-3.032 1.75.5.5 0 0 1-.683.183zM10 8c-.552 0-1-.672-1-1.5 0-.247.04-.48.11-.686a.502.502 0 0 1 .166-.761l2-1a.5.5 0 1 1 .448.894l-1.009.504c.176.27.285.64.285 1.049 0 .828-.448 1.5-1 1.5z" />
                                                        </svg>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3 col-md-3 col-lg-3">
                                                    <div class="form-group mb-3">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-sm-3 col-md-3 col-lg-3">
                                                    <div class="form-group mb-3">
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">0&nbsp;</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">2&nbsp;</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">4&nbsp;</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">6&nbsp;</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">

                                                        <label class="form-label text-black text-center">8&nbsp;</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">10&nbsp;</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3 col-md-3 col-lg-3">
                                                    <div class="form-group mb-3">
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-sm-3 col-md-3 col-lg-3">
                                                    <div class="form-group mb-3">
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">NO HURT&nbsp;</label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">
                                                            HURTS LITTLE BIT&nbsp;
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">
                                                            HURTS LITTLE MORE&nbsp;
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">
                                                            HURTS EVEN MORE&nbsp;
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">

                                                        <label class="form-label text-black text-center">
                                                            HURTS WHOLE LOT&nbsp;
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-1 col-md-1 col-lg-1">
                                                    <div class="form-group mb-3">
                                                        <label class="form-label text-black text-center">
                                                            HURTS WORST&nbsp;
                                                        </label>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3 col-md-3 col-lg-3">
                                                    <div class="form-group mb-3">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-sm-12 col-md-12 col-lg-12">
                                                    <input class="rangeslider1" data-extra-classes="irs-outline" id="cemr_pain" name="example_name" type="text">
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </section>
                            <section id="painsclasification_body">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="main-chat-msg-name">
                                            <span class='badge bg-gray' style="font-size: 1.25em;">Pain Classification</span>
                                        </div>
                                        <div class="content-inner">
                                            <div class="row">
                                                <div class="col-sm-12 col-md-3 col-lg-12">
                                                    <div class="custom-controls-stacked">
                                                        <div class="d-flex flex-row bg-light ">
                                                            <label class="custom-control custom-checkbox me-2">
                                                                <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Acute" id="acute1">
                                                                <span class="custom-control-label">Acute</span>
                                                            </label>
                                                            <label class="custom-control custom-checkbox me-2">
                                                                <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Sub Acute" id="subacute">
                                                                <span class="custom-control-label">Sub Acute</span>
                                                            </label>
                                                            <label class="custom-control custom-checkbox me-2">
                                                                <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Chronic" id="chronic">
                                                                <span class="custom-control-label">Chronic</span>
                                                            </label>
                                                            <label class="custom-control custom-checkbox me-2">
                                                                <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Recurrent" id="recurrent">
                                                                <span class="custom-control-label">Recurrent</span>
                                                            </label>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <textarea class="form-control mb-2 mt-2 d-none" placeholder="Acute Remarks..." rows="3" id="cemr_acute1"></textarea>
                                                            </div>
                                                            <div class="col-md-12">
                                                                <textarea class="form-control mb-2 d-none" placeholder="Sub Acute Remarks..." rows="3" id="cemr_subacute"></textarea>
                                                            </div>
                                                            <div class="col-md-12">
                                                                <textarea class="form-control mb-2 d-none" placeholder="Chronic Remarks..." rows="3" id="cemr_chronic"></textarea>
                                                            </div>
                                                            <div class="col-md-12">
                                                                <textarea class="form-control mb-2 d-none" placeholder="Recurrent Remarks..." rows="3" id="cemr_recurrent"></textarea>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="main-chat-msg-name">
                                            <span class='badge bg-gray' style="font-size: 1.25em;">Duration of injury</span>
                                        </div>
                                        <div class="content-inner">
                                            <div class="row">
                                                <div class="col-sm-12 col-md-6 col-lg-12">
                                                    <div class="form-group mb-3">
                                                        <input class="form-control mb-4" placeholder="Enter Duration" type="text" id="cemr_durationin">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="main-chat-msg-name">
                                            <span class='badge bg-gray' style="font-size: 1.25em;">Condition Status</span>
                                        </div>
                                        <div class="content-inner">
                                            <div class="row">
                                                <div class="custom-controls-stacked">
                                                    <div class="d-flex flex-row bg-light ">
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Getting worse" id="gettingworse">
                                                            <span class="custom-control-label">Getting worse</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Better" id="better">
                                                            <span class="custom-control-label">Better</span>
                                                        </label>
                                                        <label class="custom-control custom-checkbox me-2">
                                                            <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Still The same" id="stillsame">
                                                            <span class="custom-control-label">Still The same</span>
                                                        </label>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <input class="form-control mb-2 mt-2 d-none" placeholder="Enter Remarks" type="text" id="cemr_gettingworse">
                                                        </div>
                                                        <div class="col-md-12">
                                                            <input class="form-control mb-2 d-none" placeholder="Enter Remarks" type="text" id="cemr_better">
                                                        </div>
                                                        <div class="col-md-12">
                                                            <input class="form-control mb-2 d-none" placeholder="Enter Remarks" type="text" id="cemr_stillsame">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </section>
                            <section id="physicalassesment_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Physical Assesment</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Observation Inspection&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Observation Inspection" rows="3" id="cemr_observationins"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-2">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Palpation&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Palpation" rows="3" id="cemr_palpation"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-2">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">ROM&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="ROM" rows="3" id="cemr_rom"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Muscle Power Test&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Muscle Power Test" rows="3" id="cemr_mptest"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-2">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Special Tests&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Special Tests" rows="3" id="cemr_stest"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Affected Body Parts</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-12">
                                            <div class="form-group mb-3">
                                                <textarea class="form-control mb-4" placeholder="Affected Body Parts" rows="3" id="cemr_bodyparts"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="bodyimage_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Body/Face Marking</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row" id="body_marking">
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <button id="drawingdot" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode" data-mode="dot" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle-fill" viewBox="0 0 16 16">
                                                        <circle cx="8" cy="8" r="8" />
                                                    </svg>
                                                </button>
                                                <button id="drawingcheck" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode" data-mode="check" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                                        <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
                                                    </svg>
                                                </button>
                                                <button id="drawingcircle" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode" data-mode="circle" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle" viewBox="0 0 16 16">
                                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                                                    </svg>
                                                </button>
                                                <button id="drawingcupping" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode" data-mode="cupping" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash2" viewBox="0 0 16 16">
                                                        <path d="M14 3a.7.7 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225A.7.7 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2M3.215 4.207l1.493 8.957a1 1 0 0 0 .986.836h4.612a1 1 0 0 0 .986-.836l1.493-8.957C11.69 4.689 9.954 5 8 5s-3.69-.311-4.785-.793" />
                                                    </svg>
                                                </button>
                                                <button id="undo_button" class="btn bg-dark-transparent btn-icon btn-svg" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
                                                        <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z" />
                                                        <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z" />
                                                    </svg>
                                                </button>
                                                <button id="drawingeraser" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode" data-mode="eraser" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eraser-fill text-danger" viewBox="0 0 16 16">
                                                        <path d="M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828zm.66 11.34L3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293z" />
                                                    </svg>
                                                </button>
                                                <input id="color_picker" type="text">
                                            </div>
                                            <div>
                                                <canvas id="cuppingCanvas" width="578" height="650"></canvas>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <button id="drawingdot2" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode2" data-mode="dot2" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle-fill" viewBox="0 0 16 16">
                                                        <circle cx="8" cy="8" r="8" />
                                                    </svg>
                                                </button>
                                                <button id="drawingcheck2" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode2" data-mode="check2" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                                        <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
                                                    </svg>
                                                </button>
                                                <button id="drawingcircle2" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode2" data-mode="circle2" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle" viewBox="0 0 16 16">
                                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                                                    </svg>
                                                </button>
                                                <button id="drawingcupping2" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode2" data-mode="cupping2" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash2" viewBox="0 0 16 16">
                                                        <path d="M14 3a.7.7 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225A.7.7 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2M3.215 4.207l1.493 8.957a1 1 0 0 0 .986.836h4.612a1 1 0 0 0 .986-.836l1.493-8.957C11.69 4.689 9.954 5 8 5s-3.69-.311-4.785-.793" />
                                                    </svg>
                                                </button>
                                                <button id="undo_button2" class="btn bg-dark-transparent btn-icon btn-svg" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
                                                        <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z" />
                                                        <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z" />
                                                    </svg>
                                                </button>
                                                <button id="drawingeraser2" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode2" data-mode="eraser2" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eraser-fill text-danger" viewBox="0 0 16 16">
                                                        <path d="M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828zm.66 11.34L3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293z" />
                                                    </svg>
                                                </button>
                                                <input id="color_picker2" type="text">
                                            </div>
                                            <div>
                                                <canvas id="cuppingCanvas2" width="578" height="650"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" id="face_marking">
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <button id="drawingdot3" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode3" data-mode="dot3" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle-fill" viewBox="0 0 16 16">
                                                        <circle cx="8" cy="8" r="8" />
                                                    </svg>
                                                </button>
                                                <button id="drawingcheck3" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode3" data-mode="check3" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check" viewBox="0 0 16 16">
                                                        <path d="M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.267.267 0 0 1 .02-.022z" />
                                                    </svg>
                                                </button>
                                                <button id="drawingcircle3" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode3" data-mode="circle3" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-circle" viewBox="0 0 16 16">
                                                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                                                    </svg>
                                                </button>
                                                <button id="drawingcupping3" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode3" data-mode="cupping3" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash2" viewBox="0 0 16 16">
                                                        <path d="M14 3a.7.7 0 0 1-.037.225l-1.684 10.104A2 2 0 0 1 10.305 15H5.694a2 2 0 0 1-1.973-1.671L2.037 3.225A.7.7 0 0 1 2 3c0-1.105 2.686-2 6-2s6 .895 6 2M3.215 4.207l1.493 8.957a1 1 0 0 0 .986.836h4.612a1 1 0 0 0 .986-.836l1.493-8.957C11.69 4.689 9.954 5 8 5s-3.69-.311-4.785-.793" />
                                                    </svg>
                                                </button>
                                                <button id="undo_button3" class="btn bg-dark-transparent btn-icon btn-svg" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
                                                        <path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z" />
                                                        <path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z" />
                                                    </svg>
                                                </button>
                                                <button id="drawingeraser3" class="btn bg-dark-transparent btn-icon btn-svg drawing-mode3" data-mode="eraser3" type="button">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eraser-fill text-danger" viewBox="0 0 16 16">
                                                        <path d="M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828zm.66 11.34L3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293z" />
                                                    </svg>
                                                </button>
                                                <input id="color_picker3" type="text">
                                            </div>
                                            <div>
                                                <canvas id="cuppingCanvas3" width="650" height="450"></canvas>
                                            </div>
                                        </div>                                        
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Marking Notes&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Enter notes" rows="2" id="cemr_marking_notes"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Patient Instructions&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Enter Something" rows="2" id="cemr_management"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="neurological_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Neurological Assesment</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Reflexes&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Reflexes" rows="2" id="cemr_reflexes"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Dermatone&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Dermatone" rows="2" id="cemr_dermatone"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Myotome&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Myotome" rows="2" id="cemr_myotome"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Radiology Report&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Radiology Report" rows="2" id="cemr_radiology"></textarea>
                                            </div>
                                        </div>


                                        <div class="col-sm-12 col-md-6 col-lg-12">
                                            <label class="form-label text-black">ADL Activities&nbsp;</label>
                                            <div class="custom-controls-stacked">
                                                <div class="d-flex flex-row bg-light ">
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Independent" id="independent">
                                                        <span class="custom-control-label">Independent</span>
                                                    </label>
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Dependent" id="dependent">
                                                        <span class="custom-control-label">Dependent</span>
                                                    </label>
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Needs Crutches" id="crutches">
                                                        <span class="custom-control-label">Needs Crutches</span>
                                                    </label>
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Walker" id="walker">
                                                        <span class="custom-control-label">Walker</span>
                                                    </label>
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Wheelchair" id="wheelchair">
                                                        <span class="custom-control-label">Wheelchair</span>
                                                    </label>
                                                </div>
                                                <div class="d-flex flex-row bg-light ">
                                                    <input class="form-control me-2 d-none" placeholder="Independent" type="text" id="cemr_independent">
                                                    <input class="form-control me-2 d-none" placeholder="Dependent" type="text" id="cemr_dependent">
                                                    <input class="form-control me-2 d-none" placeholder="Needs Crutches" type="text" id="cemr_crutches">
                                                    <input class="form-control me-2 d-none" placeholder="Walker" type="text" id="cemr_walker">
                                                    <input class="form-control me-2 d-none" placeholder="Wheelchair" type="text" id="cemr_wheelchair">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-12">
                                            <label class="form-label text-black">Physical Condition&nbsp;</label>
                                            <div class="custom-controls-stacked">
                                                <div class="d-flex flex-row bg-light ">
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Active" id="active">
                                                        <span class="custom-control-label">Active</span>
                                                    </label>
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Athlete" id="athlete">
                                                        <span class="custom-control-label">Athlete</span>
                                                    </label>
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Sedentary Lifestyle" id="lifestyle">
                                                        <span class="custom-control-label">Sedentary Lifestyle</span>
                                                    </label>
                                                    <label class="custom-control custom-checkbox me-2">
                                                        <input type="checkbox" class="custom-control-input" name="cemr_checkvalue" value="Bedridden" id="bedridden">
                                                        <span class="custom-control-label">Bedridden</span>
                                                    </label>
                                                </div>
                                                <div class="d-flex flex-row bg-light ">
                                                    <input class="form-control me-2 d-none" placeholder="Active" type="text" id="cemr_active">
                                                    <input class="form-control me-2 d-none" placeholder="Athlete" type="text" id="cemr_athlete">
                                                    <input class="form-control me-2 d-none" placeholder="Sedentary Lifestyle" type="text" id="cemr_lifestyle">
                                                    <input class="form-control me-2 d-none" placeholder="Bedridden" type="text" id="cemr_bedridden">
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </section>
                            <section id="treatmentplan_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Treatment Plan</span>
                                    <span>
                                        <button class="btn btn-success btn-sm ms-lg-2 ms-sm-2" type="button" id="addTreatments">
                                            <i class="fa fa-plus"></i>   Add Treatments &amp; Procedure
                                        </button>
                                    </span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Procedure&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Procedure" rows="3" id="cemr_procedure"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Short Term Goals&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Short Term Goals" rows="3" id="cemr_stgoals"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Long Term Goals&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Long Term Goals" rows="3" id="cemr_ltgoals"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Follow Up plan and Session&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Follow Up plan and Session" rows="3" id="cemr_followup"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="followup_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Follow Up Sessions</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-12">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">-&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Enter Something" rows="3" id="cemr_session"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <section id="management_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Management</span>
                                    <span>
                                        <button class="btn btn-success btn-sm ms-lg-2 ms-sm-2" type="button" id="addPrescription">
                                            <i class="fa fa-plus"></i>   Add Prescription
                                        </button>
                                    </span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="table-responsive">
                                            <table id="tbl_prescription" class="table table-striped table-bordered text-nowrap resize-table" style="width: 100%; cursor: pointer;">
                                                <thead>
                                                    <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                        <th class="border-bottom-0 font-weight-semibold text-white text-center"></th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">ID</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Code</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Generic</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Brand</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Dosage</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Strength</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Use <br />(Units)</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Frequency<br /> Value</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Frequency</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Duration</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Quantity</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Route for Admin</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">Instructions</th>
                                                    </tr>
                                                </thead>
                                            </table>
                                        </div>

                                    </div>
                                </div>
                            </section>
                            <section id="followupdetail_body">
                                <div class="main-chat-msg-name">
                                    <span class='badge bg-gray' style="font-size: 1.25em;">Followup Details</span>
                                </div>
                                <div class="content-inner">
                                    <div class="row">
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Doctor Name&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Input box (readonly)" readonly="" type="text" value="@Model.doc_name">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Visiting Date&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Remarks" type="text" value="@Model.app_fdate.ToString()">
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Remarks&nbsp;</label>
                                                <textarea class="form-control mb-4" placeholder="Followup Remarks..." rows="3" id="cemr_followup_remarks">@Model.app_resnforvisit</textarea>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-3">
                                            <div class="form-group mb-3">
                                                <label class="form-label text-black">Actions&nbsp;</label>
                                                <input class="form-control mb-4" placeholder="Actions" type="text" value="@Model.app_status">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                        <div class="bg-light p-5">
                            <div class="row">
                                <div class="col-sm-12 col-lg-12  col-md-12">
                                    <div class="checkbox d-flex flex-row ms-5 pull-right">
                                        <div class="custom-checkbox custom-control me-2">
                                            <input type="checkbox" data-checkboxes="mygroup" class="custom-control-input" id="chk_template1" value="Appointment">
                                            <label class="custom-control-label"> Save Patient</label>
                                        </div>
                                        <div class="custom-checkbox custom-control me-2">
                                            <input type="checkbox" data-checkboxes="mygroup" class="custom-control-input" id="chk_template" value="Template">
                                            <label class="custom-control-label"> Template</label>
                                        </div>
                                        <input class="form-control d-none" style="width: 40%;" placeholder="Template Name" type="text" id="temp_name">

                                        <div class="btn-list btn-animation">
                                            <button type="submit" class="btn btn-success" id="btn_Insert_ConsultEMR">Save Consultation</button>
                                            <button type="button" class="btn btn-outline-dark" id="btn_Reset_ConsultEMR">Reset</button>
                                        </div>
                                    </div>

                                </div>


                            </div>

                        </div>
                    </form>
                </div>
            </div>

            <!-- /Row -->
        </div>

    </div>
</div>
<!-- Modal Notes Master Details -->
<div class="modal fade overflow-auto" id="complaints_emr_modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true" data-modal-from="appointment-list">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content" id="complaints_emr_body">
        </div>
    </div>
</div>
<!-- End Modal Notes Master Details -->
<!-- Modal Notes Master Details -->
<div class="modal fade overflow-auto" id="diagnosis_emr_modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true" data-modal-from="appointment-list">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content" id="diagnosis_emr_body">
        </div>
    </div>
</div>
<!-- End Modal Notes Master Details -->
<!-- Modal Notes Master Details -->
<div class="modal fade overflow-auto" id="prescription_emr_modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true" data-modal-from="appointment-list">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content" id="prescription_emr_body">
        </div>
    </div>
</div>
<!-- End Modal Notes Master Details -->
<!-- Treatments Master Details -->
<div class="modal fade overflow-auto" id="treatments_emr_modal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-hidden="true" data-modal-from="appointment-list">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content" id="treatments_emr_body">
        </div>
    </div>
</div>
<!-- End Treatments Master Details -->


<script>
    var item_arr = [];
    var isTemplate = false;
    var isvalid = true;
    var tempName = "";

    //#region Page Load
    $(function () {
        $("body").addClass("app sidebar-mini sidenav-toggled");
        $('#cemr_pain').ionRangeSlider({
            min: 0,
            max: 10,
            from: 0,
        });

        const ps = new PerfectScrollbar('#TittleList', {
            useBothWheelAxes: false,
            suppressScrollX: false,
        });

        const ps1 = new PerfectScrollbar('#Contentb', {
            useBothWheelAxes: false,
            suppressScrollX: false,
        });
        $("#cemt_type").select2({
            placeholder: 'Select Type',
            width: '100%',
            dropdownParent: $('#form_ConsultationEMR')
        });

        $("#cemt_type2").select2({
            placeholder: 'Select Type',
            width: '100%',
            dropdownParent: $('#form_ConsultationEMR')
        });

        $("#templates_load").select2({
            placeholder: 'Select your template',
            minimumResultsForSearch: '',
            width: '100%',
            dropdownParent: $('#form_ConsultationEMR')
        });


        $("#drawingMode").select2({
            placeholder: 'Select Drawing Mode',
            width: '7%',
            minimumResultsForSearch: '',
            dropdownParent: $('#form_ConsultationEMR'),
            escapeMarkup: function (markup) {
                return markup;
            }
        });
        $('#color_picker').spectrum({
            type: "flat",
            showInput: true,
            preferredFormat: "hex",
            color: '#0061da'
        });

        $("#drawingMode2").select2({
            placeholder: 'Select Drawing Mode',
            width: '7%',
            minimumResultsForSearch: '',
            dropdownParent: $('#form_ConsultationEMR'),
            escapeMarkup: function (markup) {
                return markup;
            }
        });
        $('#color_picker2').spectrum({
            type: "flat",
            showInput: true,
            preferredFormat: "hex",
            color: '#0061da'
        });

        $("#drawingMode3").select2({
            placeholder: 'Select Drawing Mode',
            width: '7%',
            minimumResultsForSearch: '',
            dropdownParent: $('#form_ConsultationEMR'),
            escapeMarkup: function (markup) {
                return markup;
            }
        });
        $('#color_picker3').spectrum({
            type: "flat",
            showInput: true,
            preferredFormat: "hex",
            color: '#0061da'
        });


        GetTemplates("");
        GetPatDiagnosis();
        GetPrescription();

        //$('[data-bs-toggle="tooltip"]').tooltip();
        //$('.btnCloseCreate').removeClass("d-none");

        $("#face_marking").hide();
        $("#ddl_hijama_type").hide();
        Loadimage("");
        Loadimage2("");
        Loadimage3("");
    });
    //#endregion Page Load

    //#region load Templates
    var GetTemplates = function (query) {
        $.ajax({
            url: '@Url.Action("GetTemplates", "ConsultationEMR", new { area = "EMR" })?query=' + query,
            type: "GET",
            dataType: "json",
            async: false,
            success: function (response) {
                $("#template").select2({
                    placeholder: 'Select Type ',
                    width: '100%',
                    minimumResultsForSearch: '',
                    maximumInputLength: 3,
                    dropdownParent: $('#form_ConsultationEMR'),

                });
                if (response.length > 0) {
                    var newOption;
                    newOption = new Option("Select Any Template", 0, true, true);
                    $('#templates_load').append(newOption);

                    var data;
                    $.each(response, function (j) {
                         data = {
                            "id": response[j].id,
                            "text": response[j].text,
                        };
                        newOption = new Option(response[j].text, response[j].id, false, false);
                        $('#templates_load').append(newOption);
                    });
                }


            },
            error: function (xhr) {
                console.log(xhr);
                alert(xhr);
            },
        });
    };
    //#endregion load Templates

    $('#Contentb').on('scroll', function () {
        var scrollPosition = $(this).scrollTop();
        $("#TittleList a").each(function () {
            var target = $($(this).attr('href'));
            if (target.position().top <= scrollPosition && target.position().top + target.outerHeight() > scrollPosition) {
                $("#TittleList a").removeClass("selected");
                $(this).addClass("selected");
            }
        });
    });

    //#region Slider Event
    $('#cemr_pain').on("change", function () {
        var $inp = $(this);
        var from = $inp.prop("value"); // reading input value
        var from2 = $inp.data("from"); // reading input data-from attribute
        if (from == 0) {
            $('#cimg1').addClass("btn  btn-outline-success");
        } else if (from == 2) {
            $('#cimg2').addClass("btn  btn-outline-success");
        } else if (from == 4) {
            $('#cimg3').addClass("btn  btn-outline-success");
        } else if (from == 6) {
            $('#cimg4').addClass("btn  btn-outline-success");
        } else if (from == 8) {
            $('#cimg5').addClass("btn  btn-outline-success");
        } else if (from == 10) {
            $('#cimg6').addClass("btn  btn-outline-success");
        } else {
            $('#cimg1').removeClass("btn  btn-outline-success");
            $('#cimg2').removeClass("btn  btn-outline-success");
            $('#cimg3').removeClass("btn  btn-outline-success");
            $('#cimg4').removeClass("btn  btn-outline-success");
            $('#cimg5').removeClass("btn  btn-outline-success");
            $('#cimg6').removeClass("btn  btn-outline-success");
        }
    });
    //#endregion Slider Event

    //#region Load PatientDiagnosis
    var GetPatDiagnosis = function () {
        $.ajax({
            type: "GET",
            url: "@Url.Action("GetAllPatientDiagnosis", "PatientDiagnosis", new { area = "EMR" })?appId=" + "@emr.appId",
            success: function (response) {
                console.log(response)
                console.log("test2");
                if (response.isAuthorized != false) {
                    if (response.length > 0) {
                        var table;
                        if ($.fn.dataTable.isDataTable('#tbl_emrpatdignosis')) {
                            table = $('#tbl_emrpatdignosis').DataTable();
                            table.clear();
                            table.rows.add(response).draw();
                        }
                        else {
                            console.log(response);
                            BindDataTableDiagEMR(response);
                        }
                    }

                }
                else {
                    console.log("You are not Authorized!");
                }
            },
            error: function (xhr) {
                console.log(xhr);
            }
        }).done(function () {
            resizedt();
        });
    }
    //#endregion Load PatientDiagnosis

    //#region Load Prescription
    var GetPrescription = function () {
        $.ajax({
            type: "GET",
            url: "@Url.Action("GetAllPrescription", "Prescription", new { area = "EMR" })?appId=" + "@emr.appId" + "&pre_med_type=CASH",
            success: function (response) {
                if (response.isAuthorized != false) {
                    var table;
                    if ($.fn.dataTable.isDataTable('#tbl_prescription')) {
                        table = $('#tbl_prescription').DataTable();
                        table.clear();
                        table.rows.add(response).draw();
                    }
                    else {
                        console.log(response);
                        BindDataTablePresc(response);
                    }
                }
                else {
                    console.log("You are not Authorized!");
                }
            },
            error: function (xhr) {
                console.log(xhr);
            }
        }).done(function () {
            resizedt();
        });
    }
    //#endregion Load Prescription

    //Load Invoice Items
    var GetInvoiceItems = function (response) {
        if (response != null && response != undefined) {
            var table;
            if ($.fn.dataTable.isDataTable('#tbl_emrpatdignosis')) {
                table = $('#tbl_emrpatdignosis').DataTable();
                table.clear();
                table.rows.add(response).draw();
            }
            else {
                BindDataTableDiagEMR(response);
            }
        }
    }

    //#region Bind Datatable
    var BindDataTableDiagEMR = function (response) {
        var table = $("#tbl_emrpatdignosis").DataTable({
            fixedHeader: {
                header: true,
                footer: true
            },
            processing: false,
            "deferRender": true,
            "pageLength": 100,
            "retrieve": true,
            lengthChange: true,
            "aaData": response,
            "aoColumns": [
                {
                    "mData": "padId",
                    "orderable": false,
                    "searchable": false,
                    "className": "text-center",
                    "render": function (data, type, row, meta) {
                        let _index = (meta.row) + 1;
                        if (_index >= 10) {
                            return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                        }
                        else {
                            return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                        }
                    }
                },

                {
                    "mData": "pad_type",
                    "className": 'text-left',

                },
                {
                    "mData": "diag_code",
                    "className": 'text-left',

                },
                {
                    "mData": "diag_name",
                    "className": 'text-left',

                },
                {
                    "mData": "pad_notes",
                    "className": 'text-left',

                },
                {
                    "mData": "pad_year",
                    "className": 'text-left',

                },
                {
                    "mData": "padId",
                    "className": 'btn-view text-center',
                    "orderable": false,
                    "searchable": false,
                    "render": function (padId, type, full, meta) {
                        var pad_type = full.pad_type;
                        var Action = '';
                        //Change diagnosis type

                        Action += '<a id=btn_Type_Diagnosis  onclick="ChangeDiagnosisType(' + padId + ',' + "'" + pad_type + "'" + ')"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-arrow-left-right" viewBox="0 0 16 16">  <path fill-rule="evenodd" d="M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"/></svg></a>';
                        return Action;

                    },
                }

            ],
            order: [[1, 'asc']],
            "searching": false,
            scrollX: true,
            scrollY: 500,
            "bPaginate": false,
            "bLengthChange": false,
            "bInfo": false,

        });
    };
    //#endregion Bind Datatable

    //#region Bind Datatable
    var BindDataTablePresc = function (response) {
        var table = $("#tbl_prescription").DataTable({
            fixedHeader: {
                header: true,
                footer: true
            },
            processing: true,
            "deferRender": true,
            "pageLength": 100,
            "retrieve": true,
            lengthChange: true,
            "aaData": response,
            "aoColumns": [
                {
                    "mData": "preId",
                    "orderable": false,
                    "className": "select-checkbox text-center inbox-small-cells",
                    'checkboxes': {
                        'selectRow': true
                    }
                },
                {
                    "mData": "preId",
                    "orderable": false,
                    "searchable": false,
                    "className": "text-center",
                    "render": function (data, type, row, meta) {
                        let _index = (meta.row) + 1;
                        if (_index >= 10) {
                            return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                        }
                        else {
                            return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                        }
                    }
                },

                {
                    "mData": "preId",
                    "className": 'text-left',

                },
                {
                    "mData": "item_code",
                    "className": 'text-left',

                },
                {
                    "mData": "item_name",
                    "className": 'text-justify text-wrap',

                },
                {
                    "mData": "item_brand",
                    "className": 'text-justify text-wrap',

                },
                {
                    "mData": "item_dosage",
                    "className": 'text-justify text-wrap',

                },{
                    "mData": "item_strength",
                    "className": 'text-left',

                },{
                    "mData": "pre_temp3",
                    "className": 'text-left',

                },{
                    "mData": "pre_temp4",
                    "className": 'text-left',

                },{
                    "mData": "pre_temp5",
                    "className": 'text-left',

                },{
                    "mData": "pre_duration",
                    "className": 'text-left',

                },{
                    "mData": "pre_qty_type",
                    "className": 'text-left',

                },{
                    "mData": "ra_code_desc",
                    "className": 'text-left',

                },{
                    "mData": "pre_instr",
                    "className": 'text-justify text-wrap',

                },


            ],
            order: [[2, 'asc']],
            "bPaginate": false,
            "bLengthChange": false,
            "bInfo": false,
            "searching": false,
        });
        table.buttons().container().appendTo('#tbl_prescription_wrapper .col-md-6:eq(0)');
    };
    //#endregion Bind Datatable

    //#region checkchange
    $('#chk_template').on('change', function () {
        if ($(this).is(':checked')) {
            isTemplate = true;
            isvalid = false;
            $("#temp_name").removeClass("d-none");
        } else {
            isTemplate = false;
            isvalid = true;
            $("#temp_name").addClass("d-none");
        }
    });
    //#endregion

    //#region Clear Controls
    var clearData = function () {
        $("#cemr_complaint").val("");
        $("#cemr_pasthistory").val("");
        $("#cemr_mentalorianted").val("");
        $("#cemr_mentaldisoriented").val("");
        $("#cemr_mentalimpired").val("");
        $("#cemr_acute1").val("");
        $("#cemr_subacute").val("");
        $("#cemr_chronic").val("");
        $("#cemr_recurrent").val("");
        $("#cemr_durationin").val("");
        $("#cemr_gettingworse").val("");
        $("#cemr_better").val("");
        $("#cemr_stillsame").val("");
        $("#cemr_bodyparts").val("");
        $("#cemr_observationins").val("");
        $("#cemr_palpation").val("");
        $("#cemr_rom").val("");
        $("#cemr_mptest").val("");
        $("#cemr_stest").val("");
        $("#cemr_reflexes").val("");
        $("#cemr_dermatone").val("");
        $("#cemr_myotome").val("");
        $("#cemr_independent").val("");
        $("#cemr_dependent").val("");
        $("#cemr_crutches").val("");
        $("#cemr_walker").val("");
        $("#cemr_wheelchair").val("");
        $("#cemr_active").val("");
        $("#cemr_athlete").val("");
        $("#cemr_lifestyle").val("");
        $("#cemr_bedridden").val("");
        $("#cemr_radiology").val("");
        $("#cemr_procedure").val("");
        $("#cemr_stgoals").val("");
        $("#cemr_ltgoals").val("");
        $("#cemr_followup").val("");
        $("#cemr_session").val("");
        $("#cemr_treatpoints").val("");
        $("#cemr_management").val("");
        $("#lfm_doc2").val("");
    }
    //#endregion Clear Controls

    //#region Add NotesMaster
    $('#addComplaints').on('click', function (e) {
        $.ajax({
            type: "GET",
            url: "@Url.Action("CheifComplaints", "CheifComplaints", new { area = "EMR" })",
            contentType: "application/json",
            dataType: "html",
            success: function (data) {
                $("#complaints_emr_body").html(data);
                $("#complaints_emr_modal").modal("show");
            },
            error: function (xhr) {
                console.log("Error while Adding Notes : " + xhr.statusText);
            }
        });
    });
    //#endregion

    //#region Create Notes On Modal Close
    $('#complaints_emr_modal').on('hidden.bs.modal', function () {
        location.reload();
    });
    //#endregion Create Notes On Modal Close

    //#region Add NotesMaster
    $('#addDiagnosis').on('click', function (e) {
        $.ajax({
            type: "GET",
            url: "@Url.Action("PatientDiagnosisModal", "PatientDiagnosis", new { area = "EMR" })",
            contentType: "application/json",
            dataType: "html",
            success: function (data) {
                $("#diagnosis_emr_body").html(data);
                $("#diagnosis_emr_modal").modal("show");
            },
            error: function (xhr) {
                console.log("Error while Adding Notes : " + xhr.statusText);
            }
        });
    });
    //#endregion

    //#region Add NotesMaster
    $('#addPrescription').on('click', function (e) {
        $.ajax({
            type: "GET",
            url: "@Url.Action("PrescriptionModal", "Prescription", new { area = "EMR" })",
            contentType: "application/json",
            dataType: "html",
            success: function (data) {
                $("#prescription_emr_body").html(data);
                $("#prescription_emr_modal").modal("show");
            },
            error: function (xhr) {
                console.log("Error while Adding Notes : " + xhr.statusText);
            }
        });
    });
    //#endregion

    //#region Add Treatments
    $('#addTreatments').on('click', function (e) {
        $.ajax({
            type: "GET",
            url: "@Url.Action("CashTreatmentsModal", "PatientTreatments", new { area = "EMR" })",
            contentType: "application/json",
            dataType: "html",
            success: function (data) {
                $("#treatments_emr_body").html(data);
                $("#treatments_emr_modal").modal("show");
            },
            error: function (xhr) {
                console.log("Error while Adding Notes : " + xhr.statusText);
            }
        });
    });
    //#endregion

    //#region drawing
    var isErasing = false;
    var canvas = document.getElementById('cuppingCanvas');
    var ctx = canvas.getContext('2d');
    var drawingHistory = [];
    var DrawingMode = 'dot';

    //Load an image
    var Loadimage = function (img) {
        if (img === "" || img === undefined || img === NaN || img === null) {
            if ("@emr.emp_dept_name" == "Laser") {
                img = "images/Therapy/face_women.png";
             }
             else {
                 img = "images/Therapy/cupping.jpg";
             }
        }


        var image = new Image();
        image.src = "@ConfigurationManager.AppSettings["ClinicSoftEndPoint"].ToString()" + img;
        image.onload = function () {
            ctx.drawImage(image, 0, 0, canvas.width, canvas.height);
        };
    }

    // Add drawing functionality
    var isDrawing = false;
    var lastX, lastY;

    canvas.addEventListener('mousedown', function (e) {
        var rect = canvas.getBoundingClientRect();
        var x = e.clientX - rect.left;
        var y = e.clientY - rect.top;

        if (isErasing) {
            erase(x, y);
        } else {
            if (DrawingMode === 'dot') {
                drawDot(x, y);
            }
            else if (DrawingMode === 'check') {
                drawcheckMark(x, y);
            }
            else if (DrawingMode === 'circle') {
                drawingCircle(x, y);
            }
            else if (DrawingMode === 'cupping') {
                drawingCupping(x, y);
            }
            else if (DrawingMode === 'eraser') {
                erasingDraw(x, y);
            }
        }
        isDrawing = true;
        drawingHistory.push(canvas.toDataURL());
    });

    const drawingButtons = document.querySelectorAll('.drawing-mode');
    drawingButtons.forEach((button) => {
        button.addEventListener('click', function () {
            DrawingMode = button.getAttribute('data-mode');
        });
    });

    canvas.addEventListener('mousemove', function (e) {

        if (isErasing) {
            var x = e.clientX - canvas.getBoundingClientRect().left;
            var y = e.clientY - canvas.getBoundingClientRect().top;
            erase(x, y);
        } else if (!isDrawing) {
            return;
        }

        if (!isDrawing) return;

        var x = e.offsetX - canvas.getBoundingClientRect().left;
        var y = e.offsetY - canvas.getBoundingClientRect().top;


        isDrawing = true;
        drawingHistory.push(canvas.toDataURL());
    });

    function drawDot(x, y) {
        ctx.fillStyle = $("#color_picker").val();
        ctx.beginPath();
        ctx.arc(x, y, 5, 0, Math.PI * 2);
        ctx.fill();
        drawingHistory.push(canvas.toDataURL());
    }

    var drawcheckMark = function (x, y) {
        ctx.strokeStyle = $("#color_picker").val();
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(x - 10, y);
        ctx.lineTo(x - 5, y + 5);
        ctx.lineTo(x + 10, y - 10);
        ctx.stroke();
        drawingHistory.push(canvas.toDataURL());
    }

    var drawingCircle = function (x, y) {
        ctx.strokeStyle = $("#color_picker").val();
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.arc(x, y, 5, 0, Math.PI * 2); // Use the arc method to draw a circle
        ctx.stroke();
        drawingHistory.push(canvas.toDataURL());
    }

    var drawingCupping = function (x, y) {
        ctx.strokeStyle = $("#color_picker").val(); // Set color for the trash icon
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(x - 8, y - 16);
        ctx.lineTo(x + 8, y - 16);
        ctx.lineTo(x + 4, y - 2);
        ctx.lineTo(x - 4, y - 2);
        ctx.closePath();
        ctx.stroke();
        drawingHistory.push(canvas.toDataURL());
    }

    var erasingDraw = function (x, y) {
        var squareSize = 20;
        ctx.fillStyle = "#ffffff";
        ctx.beginPath();
        ctx.rect(x - squareSize / 2, y - squareSize / 2, squareSize, squareSize);
        ctx.fill();
        drawingHistory.push(canvas.toDataURL());
        $("#color_picker").val("#000000");
    }

    function erase(x, y) {
        ctx.fillStyle = '#ffffff';
        ctx.beginPath();
        ctx.arc(x, y, 10, 0, Math.PI * 2);
        ctx.fill();
        drawingHistory.push(canvas.toDataURL());
    }

    canvas.addEventListener('mouseup', function () {
        isDrawing = false;
    });

    $('#undo_button').on('click', function (e) {
        if (drawingHistory.length > 1) {
            drawingHistory.pop(); // Remove the current state
            var img = new Image();
            img.src = drawingHistory[drawingHistory.length - 1];
            img.onload = function () {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            };
        }

    });
    //#endregion drawing

    //#region drawing2
    var isErasing2 = false;
    var canvas2 = document.getElementById('cuppingCanvas2');
    var ctx2 = canvas2.getContext('2d');
    var drawingHistory2 = [];
    var DrawingMode2 = 'dot2';

    //Load an image
    var Loadimage2 = function (img) {
        if (img === "" || img === undefined || img === NaN || img === null) {
            if ("@emr.emp_dept_name" == "Laser") {
                img = "images/Therapy/face_men.png";
            }
            else {
                img = "images/Therapy/cupping.jpg";
            }
        }

        var image = new Image();
        image.src = "@ConfigurationManager.AppSettings["ClinicSoftEndPoint"].ToString()" + img;
        image.onload = function () {
            ctx2.drawImage(image, 0, 0, canvas2.width, canvas2.height);
        };
    }

    // Add drawing functionality
    var isDrawing2 = false;
    var lastX2, lastY2;

    canvas2.addEventListener('mousedown', function (e) {
        var rect = canvas2.getBoundingClientRect();
        var x = e.clientX - rect.left;
        var y = e.clientY - rect.top;

        if (isErasing2) {
            erase2(x, y);
        } else {
            if (DrawingMode2 === 'dot2') {
                drawDot2(x, y);
            }
            else if (DrawingMode2 === 'check2') {
                drawcheckMark2(x, y);
            }
            else if (DrawingMode2 === 'circle2') {
                drawingCircle2(x, y);
            }
            else if (DrawingMode2 === 'cupping2') {
                drawingCupping2(x, y);
            }
            else if (DrawingMode2 === 'eraser2') {
                erasingDraw2(x, y);
            }
        }
        isDrawing2 = true;
        drawingHistory2.push(canvas2.toDataURL());
    });

    const drawingButtons2 = document.querySelectorAll('.drawing-mode2');
    drawingButtons2.forEach((button) => {
        button.addEventListener('click', function () {
            DrawingMode2 = button.getAttribute('data-mode');
        });
    });

    canvas2.addEventListener('mousemove', function (e) {

        if (isErasing2) {
            var x = e.clientX - canvas2.getBoundingClientRect().left;
            var y = e.clientY - canvas2.getBoundingClientRect().top;
            erase2(x, y);
        } else if (!isDrawing2) {
            return;
        }

        if (!isDrawing2) return;

        var x = e.offsetX - canvas2.getBoundingClientRect().left;
        var y = e.offsetY - canvas2.getBoundingClientRect().top;


        isDrawing2 = true;
        drawingHistory2.push(canvas2.toDataURL());
    });

    function drawDot2(x, y) {
        ctx2.fillStyle = $("#color_picker2").val();
        ctx2.beginPath();
        ctx2.arc(x, y, 5, 0, Math.PI * 2);
        ctx2.fill();
        drawingHistory2.push(canvas2.toDataURL());
    }
    var drawcheckMark2 = function (x, y) {
        ctx2.strokeStyle = $("#color_picker2").val();
        ctx2.lineWidth = 2;
        ctx2.beginPath();
        ctx2.moveTo(x - 10, y);
        ctx2.lineTo(x - 5, y + 5);
        ctx2.lineTo(x + 10, y - 10);
        ctx2.stroke();
        drawingHistory2.push(canvas2.toDataURL());
    }
    var drawingCircle2 = function (x, y) {
        ctx2.strokeStyle = $("#color_picker2").val();
        ctx2.lineWidth = 2;
        ctx2.beginPath();
        ctx2.arc(x, y, 5, 0, Math.PI * 2); // Use the arc method to draw a circle
        ctx2.stroke();
        drawingHistory2.push(canvas2.toDataURL());
}
    var drawingCupping2 = function (x, y) {
        ctx2.strokeStyle = $("#color_picker2").val(); // Set color for the trash icon
        ctx2.lineWidth = 2;
        ctx2.beginPath();
        ctx2.moveTo(x - 8, y - 16);
        ctx2.lineTo(x + 8, y - 16);
        ctx2.lineTo(x + 4, y - 2);
        ctx2.lineTo(x - 4, y - 2);
        ctx2.closePath();
        ctx2.stroke();

        drawingHistory2.push(canvas2.toDataURL());
    }
    var erasingDraw2 = function (x, y) {
        var squareSize = 20;
        ctx2.fillStyle = "#ffffff";
        ctx2.beginPath();
        ctx2.rect(x - squareSize / 2, y - squareSize / 2, squareSize, squareSize);
        ctx2.fill();
        drawingHistory2.push(canvas2.toDataURL());
        $("#color_picker2").val("#000000");
    }

    function erase2(x, y) {
        ctx2.fillStyle = '#ffffff';
        ctx2.beginPath();
        ctx2.arc(x, y, 10, 0, Math.PI * 2);
        ctx2.fill();
        drawingHistory2.push(canvas2.toDataURL());
    }
    canvas2.addEventListener('mouseup', function () {
        isDrawing2 = false;
    });

    $('#undo_button2').on('click', function (e) {
        if (drawingHistory2.length > 1) {
            drawingHistory2.pop(); // Remove the current state
            var img = new Image();
            img.src = drawingHistory2[drawingHistory2.length - 1];
            img.onload = function () {
                ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
                ctx2.drawImage(img, 0, 0, canvas2.width, canvas2.height);
            };
        }

    });
    //#endregion drawing

    //#region drawing3
    var isErasing3 = false;
    var canvas3 = document.getElementById('cuppingCanvas3');
    var ctx3 = canvas3.getContext('2d');
    var drawingHistory3 = [];
    var DrawingMode3 = 'dot';

    //Load an image
    var Loadimage3 = function (img) {
        if (img === "" || img === undefined || img === NaN || img === null) {
            img = "images/Therapy/cupping.jpg";
        }

        var image = new Image();
        image.src = "@ConfigurationManager.AppSettings["ClinicSoftEndPoint"].ToString()" + img;
        image.onload = function () {
            ctx3.drawImage(image, 0, 0, canvas3.width, canvas3.height);
        };
    }

    // Add drawing functionality
    var isDrawing3 = false;
    var lastX3, lastY3;

    canvas3.addEventListener('mousedown', function (e) {
        var rect = canvas3.getBoundingClientRect();
        var x = e.clientX - rect.left;
        var y = e.clientY - rect.top;

        if (isErasing3) {
            erase3(x, y);
        } else {
            if (DrawingMode3 === 'dot3') {
                drawDot3(x, y);
            }
            else if (DrawingMode3 === 'check3') {
                drawcheckMark3(x, y);
            }
            else if (DrawingMode3 === 'circle3') {
                drawingCircle3(x, y);
            }
            else if (DrawingMode3 === 'cupping3') {
                drawingCupping3(x, y);
            }
            else if (DrawingMode3 === 'eraser3') {
                erasingDraw3(x, y);
            }
        }
        isDrawing3 = true;
        drawingHistory3.push(canvas3.toDataURL());
    });

    const drawingButtons3 = document.querySelectorAll('.drawing-mode3');
    drawingButtons3.forEach((button) => {
        button.addEventListener('click', function () {
            DrawingMode3 = button.getAttribute('data-mode');
            console.log(DrawingMode3)
        });
    });

    canvas3.addEventListener('mousemove', function (e) {

        if (isErasing2) {
            var x = e.clientX - canvas3.getBoundingClientRect().left;
            var y = e.clientY - canvas3.getBoundingClientRect().top;
            erase3(x, y);
        } else if (!isDrawing3) {
            return;
        }

        if (!isDrawing3) return;

        var x = e.offsetX - canvas3.getBoundingClientRect().left;
        var y = e.offsetY - canvas3.getBoundingClientRect().top;


        isDrawing3 = true;
        drawingHistory3.push(canvas3.toDataURL());
    });

    function drawDot3(x, y) {
        ctx3.fillStyle = $("#color_picker3").val();
        ctx3.beginPath();
        ctx3.arc(x, y, 5, 0, Math.PI * 2);
        ctx3.fill();
        drawingHistory3.push(canvas3.toDataURL());
    }
    var drawcheckMark3 = function (x, y) {
        ctx3.strokeStyle = $("#color_picker3").val();
        ctx3.lineWidth = 2;
        ctx3.beginPath();
        ctx3.moveTo(x - 10, y);
        ctx3.lineTo(x - 5, y + 5);
        ctx3.lineTo(x + 10, y - 10);
        ctx3.stroke();
        drawingHistory3.push(canvas3.toDataURL());
    }
    var drawingCircle3 = function (x, y) {
        ctx3.strokeStyle = $("#color_picker2").val();
        ctx3.lineWidth = 2;
        ctx3.beginPath();
        ctx3.arc(x, y, 5, 0, Math.PI * 2); // Use the arc method to draw a circle
        ctx3.stroke();
        drawingHistory3.push(canvas3.toDataURL());
}
    var drawingCupping3 = function (x, y) {
        ctx3.strokeStyle = $("#color_picker3").val(); // Set color for the trash icon
        ctx3.lineWidth = 2;
        ctx3.beginPath();
        ctx3.moveTo(x - 8, y - 16);
        ctx3.lineTo(x + 8, y - 16);
        ctx3.lineTo(x + 4, y - 2);
        ctx3.lineTo(x - 4, y - 2);
        ctx3.closePath();
        ctx3.stroke();

        drawingHistory3.push(canvas3.toDataURL());
    }
    var erasingDraw3 = function (x, y) {
        var squareSize = 20;
        ctx3.fillStyle = "#ffffff";
        ctx3.beginPath();
        ctx3.rect(x - squareSize / 2, y - squareSize / 2, squareSize, squareSize);
        ctx3.fill();
        drawingHistory3.push(canvas3.toDataURL());
        $("#color_picker3").val("#000000");
    }

    function erase3(x, y) {
        ctx3.fillStyle = '#ffffff';
        ctx3.beginPath();
        ctx3.arc(x, y, 10, 0, Math.PI * 2);
        ctx3.fill();
        drawingHistory3.push(canvas3.toDataURL());
    }
    canvas3.addEventListener('mouseup', function () {
        isDrawing3 = false;
    });


    $('#undo_button3').on('click', function (e) {
        if (drawingHistory3.length > 1) {
            drawingHistory3.pop(); // Remove the current state
            var img = new Image();
            img.src = drawingHistory3[drawingHistory3.length - 1];
            img.onload = function () {
                ctx3.clearRect(0, 0, canvas3.width, canvas3.height);
                ctx3.drawImage(img, 0, 0, canvas3.width, canvas3.height);
            };
        }

    });
    //#endregion drawing

    //#region checkbox change event
    $('input[name="cemr_checkvalue"]').change(function () {
        var textboxId = "cemr_" + $(this).attr("id");
        var textbox = $("#" + textboxId);

        if ($(this).prop("checked")) {
            textbox.removeClass("d-none");
        } else {
            textbox.addClass("d-none");
        }
    });
    //#endregion

    $('#cemt_type2').on('select2:select', function (e) {
    var data = e.params.data;
    if (data.id === "hijama") {
        $("#ddl_hijama_type").show();
        $("#lnk_Neurological_Assesment").hide();
        $("#neurological_body").hide();
        $("#body_marking").show();
        $("#face_marking").hide();

        var data = [
            { "id": "", "text": "Select Any Type" },
            { "id": "Therapeutic", "text": "Therapeutic" },
            { "id": "Prophylactic", "text": "Prophylactic" }
        ];

        $('#cemt_type').empty();

        $.each(data, function (j) {
            var newOption = new Option(data[j].text, data[j].id, (j == 0) ? true : false, (j == 0) ? true : false);
            $('#cemt_type').append(newOption);
        });
    }
    else if (data.id === "physiotherapy") {
        $("#ddl_hijama_type").show();
        $("#lnk_Neurological_Assesment").hide();
        $("#neurological_body").hide();
        $("#body_marking").show();
        $("#face_marking").hide();

        var data = [
            { "id": "", "text": "Select Any Type" },
            { "id": "Manual Therapy", "text": "Manual Therapy" },
            { "id": "Physiotherapy", "text": "Physiotherapy" },
            { "id": "Massage Therapy", "text": "Massage Therapy" },
            { "id": "Intensive Physiotherapy Session", "text": "Intensive Physiotherapy Session" },
            { "id": "Free consultation", "text": "Free consultation" }
        ];

        $('#cemt_type').empty();

        $.each(data, function (j) {
            var newOption = new Option(data[j].text, data[j].id, (j == 0) ? true : false, (j == 0) ? true : false);
            $('#cemt_type').append(newOption);
        });
    }
    else {
        $("#ddl_hijama_type").hide();
        $("#lnk_Neurological_Assesment").show();
        $("#neurological_body").show();
        $("#body_marking").hide();
        $("#face_marking").show();
    }
    });

    //#region Resize Datatable
    function resizedt() {
        setTimeout(function () {
            $.fn.dataTable.tables({ visible: true, api: true }).columns.adjust();
        }, 350);
    }
    //#endregion Resize Datatable

    //#region Alert Timeout
    function Timeout() {
        window.setTimeout(function () {
            $(".alert").fadeTo(500, 0).slideUp(500, function () {
                $(this).remove();
            });
        }, 4200);
    }
    //#endregion Alert Timeout

    //#region Add  Click
        $('#btn_Insert_ConsultEMR').on('click', function (e) {
        e.preventDefault();
        if ($("#form_ConsultationEMR").valid()) {

            if (isTemplate) {
                if ($("#temp_name").val() == "") {
                    $("#temp_name").parent().addClass('has-error');
                    error_timeout(elem.attr("id"));
                    isvalid = false;
                }
                else {
                    isvalid = true;
                    $("#temp_name").parent().removeClass('has-error');
                }
            }

            //Body Image 1
            var canvas = $("#cuppingCanvas").get(0);
            var imgData = canvas.toDataURL();
            var chartname = "@emr.patId" + "_" + "CuppingTherapy" + "_" + "@emr.appId";
            var chartname_ = "@emr.patId" + "_" + "CuppingTherapy" + "_0";

            //Body Image 2
            var canvas2 = $("#cuppingCanvas2").get(0);
            var imgData2 = canvas2.toDataURL();
            var body_image2 = "@emr.patId" + "_" + "CuppingTherapy2" + "_" + "@emr.appId";
            var body_image_22 = "@emr.patId" + "_" + "CuppingTherapy2" + "_0";

            //Body Image 2
            var canvas3 = $("#cuppingCanvas3").get(0);
            var imgData3 = canvas3.toDataURL();
            var face_image = "@emr.patId" + "_" + "CuppingTherapy3" + "_" + "@emr.appId";
            var face_image_1 = "@emr.patId" + "_" + "CuppingTherapy3" + "_0";

            var cemr_checkvalue_ = $.map($(':checkbox[name=cemr_checkvalue]:checked'), function (n, i) {
                return n.value;
            }).join(',');

            var template_data = {
                cemt_type: $("#cemt_type").val(),
                cemt_type2: $("#cemt_type2").val(),
                cemt_name: $("#temp_name").val(),
            }

            var _template_details = {
                "cemrId": 0,
                "cemr_appId": @emr.appId,
                "cemr_cemtId": 0,
                "cemr_complaint": $("#cemr_complaint").val(),
                "cemr_pasthistory": $("#cemr_pasthistory").val(),
                "cemr_checkvalue": cemr_checkvalue_,
                "cemr_mentalorianted": $("#cemr_mentalorianted").val(),
                "cemr_mentaldisoriented": $("#cemr_mentaldisoriented").val(),
                "cemr_mentalimpired": $("#cemr_mentalimpired").val(),
                "cemr_acute1": $("#cemr_acute1").val(),
                "cemr_subacute": $("#cemr_subacute").val(),
                "cemr_chronic": $("#cemr_chronic").val(),
                "cemr_recurrent": $("#cemr_recurrent").val(),
                "cemr_durationin": $("#cemr_durationin").val(),
                "cemr_gettingworse": $("#cemr_gettingworse").val(),
                "cemr_better": $("#cemr_better").val(),
                "cemr_stillsame": $("#cemr_stillsame").val(),
                "cemr_bodyparts": $("#cemr_bodyparts").val(),
                "cemr_observationins": $("#cemr_observationins").val(),
                "cemr_palpation": $("#cemr_palpation").val(),
                "cemr_rom": $("#cemr_rom").val(),
                "cemr_mptest": $("#cemr_mptest").val(),
                "cemr_stest": $("#cemr_stest").val(),
                "cemr_reflexes": $("#cemr_reflexes").val(),
                "cemr_dermatone": $("#cemr_dermatone").val(),
                "cemr_myotome": $("#cemr_myotome").val(),
                "cemr_independent": $("#cemr_independent").val(),
                "cemr_dependent": $("#cemr_dependent").val(),
                "cemr_crutches": $("#cemr_crutches").val(),
                "cemr_walker": $("#cemr_walker").val(),
                "cemr_wheelchair": $("#cemr_wheelchair").val(),
                "cemr_active": $("#cemr_active").val(),
                "cemr_athlete": $("#cemr_athlete").val(),
                "cemr_lifestyle": $("#cemr_lifestyle").val(),
                "cemr_bedridden": $("#cemr_bedridden").val(),
                "cemr_radiology": $("#cemr_radiology").val(),
                "cemr_procedure": $("#cemr_procedure").val(),
                "cemr_stgoals": $("#cemr_stgoals").val(),
                "cemr_ltgoals": $("#cemr_ltgoals").val(),
                "cemr_followup": $("#cemr_followup").val(),
                "cemr_session": $("#cemr_session").val(),
                "cemr_treatpoints": $("#cemr_treatpoints").val(),
                "cemr_management": $("#cemr_management").val(),
                "type1": $('#chk_template:checked').val(),
                "type2": $('#chk_template1:checked').val(),
                "cemr_bodyimage": chartname_,
                "cemr_bimage": chartname,
                "image": imgData,
                "cemr_pain": $("#cemr_pain").val(),

                //Newly Added
                "cemt_type2": $("#cemt_type2").val(),
                "cemr_mentalother": $("#cemr_mentalother").val(),
                "cemr_bodyimage2": body_image_22,
                "cemr_bimage2": body_image2,
                "image2": imgData2,
                "cemr_faceimage": face_image,
                "cemr_bimage3": face_image_1,
                "image3": imgData3,
                "cemr_type": $("#cemt_type").val(),
                "cemr_type2": $("#cemt_type2").val(),
                "cemr_followup_remarks": $("#cemr_followup_remarks").val(),
                "cemr_marking_notes": $("#cemr_marking_notes").val(),

                "__RequestVerificationToken": $('input[name="__RequestVerificationToken"]').val()
            }

            var _cupping = {
                "lfm_appId": @emr.appId,
                "lfm_patId": "@emr.patId",
                "lfm_doc": chartname,
                "image": imgData,
                "lfm_doc2": $("#cemr_marking_notes").val(),
                "lfm_form": "CuppingTherapy",
            }

            var _template = {
                template_details: _template_details,
                diagnosis_items: item_arr,
                template: template_data,
                cupping: _cupping
            }

            if (isvalid) {
                $('#btn_Insert_ConsultEMR').removeClass("btn btn-success");
                $('#btn_Insert_ConsultEMR').addClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Insert_ConsultEMR').html("Saving the Record....");
                $.ajax({
                    type: "Post",
                    url: "@Url.Action("InsertConsultationTemplate", "ConsultationEMR", new {area = "EMR" })",
                    dataType: 'JSON',
                    data: _template,
                    success: function (data) {
                        $('#btn_Insert_ConsultEMR').removeClass("btn btn-success btn-loaders btn-icon");
                        $('#btn_Insert_ConsultEMR').addClass("btn btn-success");
                        $('#btn_Insert_ConsultEMR').html("Add");
                        if (data.isSuccess) {
                            var alertPlaceholder = document.getElementById("Alert");
                            function alert(e, t) {
                                var l = document.createElement("div");
                                l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" role="alert">' + e +
                                    '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                            }
                            alert("<i class='fe fe-check-circle text-white'></i>  Consultation EMR Saved Successfully!", "success");
                            /*GetMusculoSkeletal();*/
                            Timeout();

                            location.reload(true);
                        }
                        else {

                            let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                                "<div class='alert alert-warning' role='alert'>" +
                                "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                "<strong>Warning.. Consultation EMR Alredy Exists..</strong><br/>" +
                                "</div></div>";
                            $("#Alert").html(html);
                        }
                    },
                    error: function (xhr) {
                        $('#btn_Insert_ConsultEMR').removeClass("btn btn-success btn-loaders btn-icon");
                        $('#btn_Insert_ConsultEMR').addClass("btn btn-warning");
                        $('#btn_Insert_ConsultEMR').html("Add");
                        Timeout();
                    }
                });
            }
        }
        else {
            $('.modal-body').animate({
                scrollTop: ($('.has-error').offset().top - 300)
            }, 2000);
        }
    });
    //#endregion Add Click

    $('#diagnosis_emr_modal').on('hidden.bs.modal', function () {
        GetPatDiagnosis();
    });

    $('#templates_load').on('select2:select', function (e) {
        $.ajax({
            url: '@Url.Action("GetConsultationEMRTemplate", "ConsultationEMR", new { area = "EMR" })?cemtId=' + $('#templates_load').val(),
            type: "GET",
            dataType: "json",
            async: false,
            success: function (response) {
                LoadDataBySelection_Template(response);
            },
            error: function (xhr) {
                console.log(xhr);
                alert(xhr);
            },
        });
    });

    var LoadDataBySelection_Template = function (obj) {
        $("#ddl_hijama_type").hide();
        $("#body_marking").hide();
        $("#face_marking").hide();
        console.log("obj"+obj.cemr_mentaldisoriented);
        DisplayInputBasedSelection_Template(obj);

        var instance = $('#cemr_pain').data("ionRangeSlider");
        instance.update({
            from: obj.cemr_pain
        });

        LoadTreatentSubTypes_Template(obj.cemr_type2);
        selectRange_Template(obj.cemr_pain);

        $("#cemt_type2").val(obj.cemr_type2).trigger("change");
        $("#cemt_type").val(obj.cemr_type).trigger("change");

        $("#consultation").val(obj.consultation);
        $("#app_status").val(obj.app_status);
        $("#refferedby").val("");
        $("#app_comments").val(obj.app_comments);
        $("#app_type").val(obj.app_type);
        $("#consultationtype").val(obj.consultationtype);
        $("#starttime").val(obj.starttime);
        $("#endtime").val(obj.endtime);

        $("#cemr_complaint").text(obj.cemr_complaint);
        $("#cemr_pasthistory").text(obj.cemr_pasthistory);
        $("#cemr_treatpoints").text(obj.cemr_treatpoints);

        $("#cemr_mentalorianted").val(obj.cemr_mentalorianted);
        $("#cemr_mentaldisoriented").val(obj.cemr_mentaldisoriented);
        $("#cemr_mentalimpired").val(obj.cemr_mentalimpired);
        $("#cemr_mentalother").val(obj.cemr_mentalother);

        $("#cemr_acute1").val(obj.cemr_acute1);
        $("#cemr_subacute").val(obj.cemr_subacute);
        $("#cemr_chronic").val(obj.cemr_chronic);
        $("#cemr_recurrent").val(obj.cemr_recurrent);

        $("#cemr_durationin").val(obj.cemr_durationin);

        $("#cemr_gettingworse").val(obj.cemr_gettingworse);
        $("#cemr_better").val(obj.cemr_better);
        $("#cemr_stillsame").val(obj.cemr_stillsame);

        $("#cemr_observationins").text(obj.cemr_observationins);
        $("#cemr_palpation").text(obj.cemr_palpation);
        $("#cemr_rom").text(obj.cemr_rom);
        $("#cemr_mptest").text(obj.cemr_mptest);
        $("#cemr_stest").text(obj.cemr_stest);
        $("#cemr_bodyparts").text(obj.cemr_bodyparts);

        $("#cemr_management").text(obj.cemr_management);
        $("#cemr_marking_notes").text(obj.cemr_marking_notes);

        $("#cemr_reflexes").text(obj.cemr_reflexes);
        $("#cemr_dermatone").text(obj.cemr_dermatone);
        $("#cemr_myotome").text(obj.cemr_myotome);
        $("#cemr_radiology").text(obj.cemr_radiology);

        $("#cemr_independent").text(obj.cemr_independent);
        $("#cemr_dependent").text(obj.cemr_dependent);
        $("#cemr_crutches").text(obj.cemr_crutches);
        $("#cemr_walker").text(obj.cemr_walker);
        $("#cemr_wheelchair").text(obj.cemr_wheelchair);

        $("#cemr_active").text(obj.cemr_active);
        $("#cemr_athlete").text(obj.cemr_athlete);
        $("#cemr_lifestyle").text(obj.cemr_lifestyle);
        $("#cemr_bedridden").text(obj.cemr_bedridden);

        $("#cemr_procedure").text(obj.cemr_procedure);
        $("#cemr_stgoals").text(obj.cemr_stgoals);
        $("#cemr_ltgoals").text(obj.cemr_ltgoals);
        $("#cemr_followup").text(obj.cemr_followup);

        $("#cemr_session").text(obj.cemr_session);

        Loadimage(obj.cemr_bodyimage);
        Loadimage2(obj.cemr_bodyimage2);
        Loadimage3(obj.cemr_faceimage);
        GetCheckedValues(obj.cemr_checkvalue)
    }
    //#region Get CheckedValues
    var GetCheckedValues = function (checknames) {
        var data = checknames;
        if (checknames !== null) {
            var x = data.split(",");
            console.log(checknames);
            console.log(x);
            if (x != "") {
                if (x.includes("Oriented")) {
                    $('#1').attr('checked', 'checked');
                    $("#1").prop("checked", true);
                }
                if (x.includes("Disoriented")) {
                    $('#2').attr('checked', 'checked');
                    $("#2").prop("checked", true);
                }
                if (x.includes("Impired Cognition")) {
                    $('#3').attr('checked', 'checked');
                    $("#3").prop("checked", true);
                }
                if (x.includes("Other")) {
                    $('#4').attr('checked', 'checked');
                    $("#4").prop("checked", true);
                }
                if (x.includes("Acute")) {
                    $('#acute1').attr('checked', 'checked');
                    $("#acute1").prop("checked", true);
                }
                if (x.includes("Sub Acute")) {
                    $('#subacute').attr('checked', 'checked');
                    $("#subacute").prop("checked", true);
                }
                if (x.includes("Chronic")) {
                    $('#chronic').attr('checked', 'checked');
                    $("#chronic").prop("checked", true);
                }
                if (x.includes("Recurrent")) {
                    $('#recurrent').attr('checked', 'checked');
                    $("#recurrent").prop("checked", true);
                }
                if (x.includes("Getting worse")) {
                    $('#gettingworse').attr('checked', 'checked');
                    $("#gettingworse").prop("checked", true);
                }
                if (x.includes("Better")) {
                    $('#better').attr('checked', 'checked');
                    $("#better").prop("checked", true);
                }
                if (x.includes("Still The same")) {
                    $('#stillsame').attr('checked', 'checked');
                    $("#stillsame").prop("checked", true);
                }
                if (x.includes("Independent")) {
                    $('#independent').attr('checked', 'checked');
                    $("#independent").prop("checked", true);
                }
                if (x.includes("Dependent")) {
                    $('#dependent').attr('checked', 'checked');
                    $("#dependent").prop("checked", true);
                }
                if (x.includes("Needs Crutches")) {
                    $('#crutches').attr('checked', 'checked');
                    $("#crutches").prop("checked", true);
                }
                if (x.includes("Walker")) {
                    $('#walker').attr('checked', 'checked');
                    $("#walker").prop("checked", true);
                }
                if (x.includes("Wheelchair")) {
                    $('#wheelchair').attr('checked', 'checked');
                    $("#wheelchair").prop("checked", true);
                }
                if (x.includes("Active")) {
                    $('#active').attr('checked', 'checked');
                    $("#active").prop("checked", true);
                }
                if (x.includes("Athlete")) {
                    $('#athlete').attr('checked', 'checked');
                    $("#athlete").prop("checked", true);
                }
                if (x.includes("Sedentary Lifestyle")) {
                    $('#lifestyle').attr('checked', 'checked');
                    $("#lifestyle").prop("checked", true);
                }
                if (x.includes("Bedridden")) {
                    $('#bedridden').attr('checked', 'checked');
                    $("#bedridden").prop("checked", true);
                }
            }
        }
    }
    //#endregion

    var DisplayInputBasedSelection_Template = function (obj) {
        var _mentalorianted = obj.cemr_mentalorianted;
        var _mentaldisoriented = obj.cemr_mentaldisoriented;
        var _mentalimpired = obj.cemr_mentalimpired;
        var _mentalother = obj.cemr_mentalother;

        var _acute1 = obj.cemr_acute1;
        var _subacute = obj.cemr_subacute;
        var _chronic = obj.cemr_chronic;
        var _recurrent = obj.cemr_recurrent;

        var _gettingworse = obj.cemr_gettingworse;
        var _better = obj.cemr_better;
        var _stillsame = obj.cemr_stillsame;

        var _independent = obj.cemr_independent;
        var _dependent = obj.cemr_dependent;
        var _crutches = obj.cemr_crutches;
        var _walker = obj.cemr_walker;
        var _wheelchair = obj.cemr_wheelchair;

        var _active = obj.cemr_active;
        var _athlete = obj.cemr_athlete;
        var _lifestyle = obj.cemr_lifestyle;
        var _bedridden = obj.cemr_bedridden;
        console.log("_mentalorianted"+_mentalorianted);
        if (_mentalorianted === "" || _mentalorianted === undefined || _mentalorianted === NaN || _mentalorianted === null) {
            $('#1').prop("checked", false);
        }
        else {
            $('#1').prop("checked", true);
        }

        if (_mentaldisoriented === "" || _mentaldisoriented === undefined || _mentaldisoriented === NaN || _mentaldisoriented === null) {
            $('#2').prop("checked", false);
        }
        else {
            $('#2').prop("checked", true);
        }

        if (_mentalimpired === "" || _mentalimpired === undefined || _mentalimpired === NaN || _mentalimpired === null) {
            $('#3').prop("checked", false);
        }
        else {
            $('#3').prop("checked", true);
        }

        if (_mentalother === "" || _mentalother === undefined || _mentalother === NaN || _mentalother === null) {
            $('#4').prop("checked", false);
        }
        else {
            $('#4').prop("checked", true);
        }

        if (_acute1 === "" || _acute1 === undefined || _acute1 === NaN || _acute1 === null) {
            $('#cemr_acute1').addClass("d-none");
            $('#acute1').prop("checked", false);
        }
        else {
            $('#cemr_acute1').removeClass("d-none");
            $('#acute1').prop("checked", true);
        }

        if (_subacute === "" || _subacute === undefined || _subacute === NaN || _subacute === null) {
            $('#cemr_subacute').addClass("d-none");
            $('#subacute').prop("checked", false);
        }
        else {
            $('#cemr_subacute').removeClass("d-none");
            $('#subacute').prop("checked", true);
        }

        if (_chronic === "" || _chronic === undefined || _chronic === NaN || _chronic === null) {
            $('#cemr_chronic').addClass("d-none");
            $('#chronic').prop("checked", false);
        }
        else {
            $('#cemr_chronic').removeClass("d-none");
            $('#chronic').prop("checked", true);
        }

        if (_recurrent === "" || _recurrent === undefined || _recurrent === NaN || _recurrent === null) {
            $('#cemr_recurrent').addClass("d-none");
            $('#recurrent').prop("checked", false);
        }
        else {
            $('#cemr_recurrent').removeClass("d-none");
            $('#recurrent').prop("checked", true);
        }

        if (_gettingworse === "" || _gettingworse === undefined || _gettingworse === NaN || _gettingworse === null) {
            $('#cemr_gettingworse').addClass("d-none");
            $('#gettingworse').prop("checked", false);
        }
        else {
            $('#cemr_gettingworse').removeClass("d-none");
            $('#gettingworse').prop("checked", true);
        }

        if (_better === "" || _better === undefined || _better === NaN || _better === null) {
            $('#cemr_better').addClass("d-none");
            $('#better').prop("checked", false);
        }
        else {
            $('#cemr_better').removeClass("d-none");
            $('#better').prop("checked", true);
        }

        if (_stillsame === "" || _stillsame === undefined || _stillsame === NaN || _stillsame === null) {
            $('#cemr_stillsame').addClass("d-none");
            $('#stillsame').prop("checked", false);
        }
        else {
            $('#cemr_stillsame').removeClass("d-none");
            $('#stillsame').prop("checked", true);
        }

        if (_independent === "" || _independent === undefined || _independent === NaN || _independent === null) {
            $('#cemr_independent').addClass("d-none");
            $('#independent').prop("checked", false);
        }
        else {
            $('#cemr_independent').removeClass("d-none");
            $('#independent').prop("checked", true);
        }

        if (_dependent === "" || _dependent === undefined || _dependent === NaN || _dependent === null) {
            $('#cemr_dependent').addClass("d-none");
            $('#dependent').prop("checked", false);
        }
        else {
            $('#cemr_dependent').removeClass("d-none");
            $('#dependent').prop("checked", true);
        }

        if (_crutches === "" || _crutches === undefined || _crutches === NaN || _crutches === null) {
            $('#cemr_crutches').addClass("d-none");
            $('#crutches').prop("checked", false);
        }
        else {
            $('#cemr_crutches').removeClass("d-none");
            $('#crutches').prop("checked", true);
        }

        if (_walker === "" || _walker === undefined || _walker === NaN || _walker === null) {
            $('#cemr_walker').addClass("d-none");
            $('#walker').prop("checked", false);
        }
        else {
            $('#cemr_walker').removeClass("d-none");
            $('#walker').prop("checked", true);
        }

        if (_wheelchair === "" || _wheelchair === undefined || _wheelchair === NaN || _wheelchair === null) {
            $('#cemr_wheelchair').addClass("d-none");
            $('#wheelchair').prop("checked", false);
        }
        else {
            $('#cemr_wheelchair').removeClass("d-none");
            $('#wheelchair').prop("checked", true);
        }

        if (_active === "" || _active === undefined || _active === NaN || _active === null) {
            $('#cemr_active').addClass("d-none");
            $('#active').prop("checked", false);
        }
        else {
            $('#cemr_active').removeClass("d-none");
            $('#active').prop("checked", true);
        }

        if (_athlete === "" || _athlete === undefined || _athlete === NaN || _athlete === null) {
            $('#cemr_athlete').addClass("d-none");
            $('#athlete').prop("checked", false);
        }
        else {
            $('#cemr_athlete').removeClass("d-none");
            $('#athlete').prop("checked", true);
        }

        if (_lifestyle === "" || _lifestyle === undefined || _lifestyle === NaN || _lifestyle === null) {
            $('#cemr_lifestyle').addClass("d-none");
            $('#lifestyle').prop("checked", false);
        }
        else {
            $('#cemr_lifestyle').removeClass("d-none");
            $('#lifestyle').prop("checked", true);
        }

        if (_bedridden === "" || _bedridden === undefined || _bedridden === NaN || _bedridden === null) {
            $('#cemr_bedridden').addClass("d-none");
            $('#bedridden').prop("checked", false);
        }
        else {
            $('#cemr_bedridden').removeClass("d-none");
            $('#bedridden').prop("checked", true);
        }
    }

    var LoadTreatentSubTypes_Template = function (type) {
        if (type === "hijama") {
            $("#ddl_hijama_type").show();
            $("#lnk_Neurological_Assesment").hide();
            $("#neurological_body").hide();
            $("#body_marking").show();
            $("#face_marking").hide();

            var data = [
                { "id": "", "text": "Select Any Type" },
                { "id": "Therapeutic", "text": "Therapeutic" },
                { "id": "Prophylactic", "text": "Prophylactic" }
            ];

            $('#cemt_type').empty();

            $.each(data, function (j) {
                var newOption = new Option(data[j].text, data[j].id, (j == 0) ? true : false, (j == 0) ? true : false);
                $('#cemt_type').append(newOption);
            });
        }
        else if (type === "physiotherapy") {
            $("#ddl_hijama_type").show();
            $("#lnk_Neurological_Assesment").hide();
            $("#neurological_body").hide();
            $("#body_marking").show();
            $("#face_marking").hide();

            var data = [
                { "id": "", "text": "Select Any Type" },
                { "id": "Manual Therapy", "text": "Manual Therapy" },
                { "id": "Physiotherapy", "text": "Physiotherapy" },
                { "id": "Massage Therapy", "text": "Massage Therapy" },
                { "id": "Intensive Physiotherapy Session", "text": "Intensive Physiotherapy Session" },
                { "id": "Free consultation", "text": "Free consultation" }
            ];

            $('#cemt_type').empty();

            $.each(data, function (j) {
                var newOption = new Option(data[j].text, data[j].id, (j == 0) ? true : false, (j == 0) ? true : false);
                $('#cemt_type').append(newOption);
            });
        }
        else {
            $("#ddl_hijama_type").hide();
            $("#lnk_Neurological_Assesment").show();
            $("#neurological_body").show();
            $("#body_marking").hide();
            $("#face_marking").show();
        }
    }

    var selectRange_Template = function (from) {
        if (from == 0) {
            $('#cimg1').addClass("btn  btn-outline-success");
        } else if (from == 2) {
            $('#cimg2').addClass("btn  btn-outline-success");
        } else if (from == 4) {
            $('#cimg3').addClass("btn  btn-outline-success");
        } else if (from == 6) {
            $('#cimg4').addClass("btn  btn-outline-success");
        } else if (from == 8) {
            $('#cimg5').addClass("btn  btn-outline-success");
        } else if (from == 10) {
            $('#cimg6').addClass("btn  btn-outline-success");
        } else {
            $('#cimg1').removeClass("btn  btn-outline-success");
            $('#cimg2').removeClass("btn  btn-outline-success");
            $('#cimg3').removeClass("btn  btn-outline-success");
            $('#cimg4').removeClass("btn  btn-outline-success");
            $('#cimg5').removeClass("btn  btn-outline-success");
            $('#cimg6').removeClass("btn  btn-outline-success");
        }
    }



</script>

