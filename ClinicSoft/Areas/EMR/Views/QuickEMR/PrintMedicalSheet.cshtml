@using System.Linq;
@using System.Security.Claims;
@using BusinessEntities;
@using BusinessEntities.Common
@{
    var claims = ClaimsPrincipal.Current.Identities.First().Claims.ToList();
    var emp_designation = claims.Where(c => c.Type == ClaimTypes.Role).Select(c => c.Value).SingleOrDefault();
    EMRInfo emr = (EMRInfo)TempData["emr_data"];
    TempData.Keep("emr_data");
    ViewBag.Title = "Index";
    ViewBag.qemr = "VS";
    Layout = "~/Areas/EMR/Views/Shared/_EMR_Layout.cshtml";
}
<style>
    .dataTables_scrollBody, .dataTables_scrollHead {
        position: relative;
        overflow: auto;
        width: 100%;
        max-height: 500px;
        height: auto !important;
        min-height: fit-content !important;
    }
</style>
<div class="row">
    <div class="col-sm-12 col-md-6 col-lg-3">

    </div>
    <div class="col-sm-12 col-md-6 col-lg-3">
        <button type="button" class="btn btn-sm btn-outline-success" id="btn_Print_C"> Download/Print </button>
    </div>
    <div class="col-sm-12 col-md-6 col-lg-3">
        <button type="button" class="btn btn-sm btn-outline-success" id="btn_Nabidh_C"> Send Visit Summary to Nabidh </button>
    </div>
    <div class="col-sm-12 col-md-6 col-lg-3">

    </div>
</div>
<div class="row">
    <div class="col-sm-12 col-md-12 col-lg-12">
        <div class="card">
            <div class="card-body">
                <div class="row mt-2">
                    <div class="panel-group accordion-panel" role="tablist" aria-multiselectable="true">
                        <div class="panel panel-default active">
                            <div class="panel panel-default mt-2">
                                <div class="panel-heading" role="tab" id="headingTwo1">
                                    <h4 class="panel-title">
                                        <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#collapseTwo1" aria-expanded="true" aria-controls="collapseTwo1">
                                            Vital Signs

                                        </a>
                                    </h4>
                                </div>
                                <div id="collapseTwo1" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingTwo1">
                                    <div class="panel-body ">
                                        <div class="row">
                                            <div class="table-responsive" style="min-height:fit-content">
                                                <table id="tbl_vital" class="table table-striped table-bordered text-nowrap resize-table" style="width: 100%; cursor: pointer;">
                                                    <thead>
                                                        <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                            <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Temperature</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Pulse</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">BPS</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">BPD</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Height</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Weight</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">BMI</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Respiratory</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">SpO2</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Hip</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Waist</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Head Circumference</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Urinalysis</th>
                                                            <th class="border-bottom-0 font-weight-semibold text-white">Other Details</th>

                                                        </tr>
                                                    </thead>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default mt-2">
                                    <div class="panel-heading" role="tab" id="headingTwo2">
                                        <h4 class="panel-title">
                                            <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#collapseTwo2" aria-expanded="true" aria-controls="collapseTwo2">
                                                Allergies

                                            </a>
                                        </h4>
                                    </div>
                                    <div id="collapseTwo2" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingTwo2">
                                        <div class="panel-body ">
                                            <div class="row">
                                                <div class="table-responsive" style="min-height:fit-content">
                                                    <table id="tbl_allergy" class="table table-striped table-bordered text-nowrap" style="width: 100%; cursor: pointer;">
                                                        <thead>
                                                            <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                                <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Allergy Type</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Allergy Severity</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Allergies</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Allergy For</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Other Allergy For</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="panel panel-default mt-2">
                                    <div class="panel-heading" role="tab" id="headingThree3">
                                        <h4 class="panel-title">
                                            <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#collapseThree3" aria-expanded="true" aria-controls="collapseThree3">
                                                Past/Family History&nbsp;
                                            </a>
                                        </h4>
                                    </div>
                                    <div id="collapseThree3" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingThree3">
                                        <div class="panel-body ">
                                            <div class="row">

                                                <div class="table-responsive" style="min-height:fit-content">
                                                    <table id="tbl_PastHistory" class="table table-striped table-bordered text-nowrap" style="width: 100%; cursor: pointer;">
                                                        <thead>
                                                            <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                                <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Date</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Doctor</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Past<br />History</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Other Past <br /> History</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Family <br />History</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Surgical<br /> History</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Smoking</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Smoking<br /> Habit Qty</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Smoking<br /> details</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Alcohol</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Alcohol<br /> Habit Qty</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Alcohol<br /> details</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Drug</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Drug<br /> Habit Qty</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Drug<br /> details</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default mt-2">
                                    <div class="panel-heading" role="tab" id="headingThree4">
                                        <h4 class="panel-title">
                                            <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#collapseThree4" aria-expanded="true" aria-controls="collapseThree4">

                                                Chief Complaints

                                            </a>
                                        </h4>
                                    </div>
                                    <div id="collapseThree4" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingThree4">
                                        <div class="panel-body ">
                                            <div class="row">
                                                <div class="table-responsive" style="min-height:fit-content">
                                                    <table id="tbl_complaints" class="table table-striped table-bordered text-nowrap" style="width: 100%; cursor: pointer;">
                                                        <thead>
                                                            <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                                <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Complaints</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default mt-2">
                                    <div class="panel-heading" role="tab" id="headingThree5">
                                        <h4 class="panel-title">
                                            <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#collapseThree5" aria-expanded="true" aria-controls="collapseThree5">
                                                HPI
                                            </a>
                                        </h4>
                                    </div>
                                    <div id="collapseThree5" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingThree5">
                                        <div class="panel-body ">
                                            <div class="row">
                                                <div class="table-responsive" style="min-height:fit-content">
                                                    <table id="tbl_HPI" class="table table-striped table-bordered text-nowrap" style="width: 100%; cursor: pointer;">
                                                        <thead>
                                                            <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                                <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Location</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Quality</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Severity</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Duration</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Timing</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Context</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Modifying Factor</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Symptoms</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Others</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default mt-2">
                                    <div class="panel-heading" role="tab" id="headingThree6">
                                        <h4 class="panel-title">
                                            <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#collapseThree6" aria-expanded="true" aria-controls="collapseThree6">
                                                Review of Systems
                                            </a>
                                        </h4>
                                    </div>
                                    <div id="collapseThree6" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingThree6">
                                        <div class="panel-body ">
                                            <div class="row">
                                                <div class="table-responsive" style="min-height:fit-content">
                                                    <table id="tbl_ReviewofSystems" class="table table-striped table-bordered text-nowrap" style="width: 100%; cursor: pointer;">
                                                        <thead>
                                                            <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                                <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Date</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Doctor</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Const</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Skin</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Eye</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">ENT</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Respi</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Cardio</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Gastro<br />Intestinal</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Genito<br />Urinary</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Neuro</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Musculo<br />skeletal</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Phych</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Endo</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Hemato<br />Lymphatic</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Allergy<br />Immuno</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Menst<br />History</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Addi<br />ROS</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Note</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="panel panel-default mt-2">
                                    <div class="panel-heading" role="tab" id="headingThree7">
                                        <h4 class="panel-title">
                                            <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#collapseThree7" aria-expanded="true" aria-controls="collapseThree7">
                                                Nurse Notes
                                            </a>
                                        </h4>
                                    </div>
                                    <div id="collapseThree7" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingThree7">
                                        <div class="panel-body ">
                                            <div class="row">
                                                <div class="table-responsive" style="min-height:fit-content">
                                                    <table id="tbl_nursenote" class="table table-striped table-bordered text-nowrap resize-table" style="width: 100%; cursor: pointer;">
                                                        <thead>
                                                            <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                                <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Nurse Notes</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Date Recorded</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="panel panel-default mt-2">
                                    <div class="panel-heading" role="tab" id="headingThree8">
                                        <h4 class="panel-title">
                                            <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#collapseThree8" aria-expanded="true" aria-controls="collapseThree8">
                                                Narrative Diagnosis
                                            </a>
                                        </h4>
                                    </div>
                                    <div id="collapseThree8" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingThree8">
                                        <div class="panel-body ">
                                            <div class="row">
                                                <div class="table-responsive" style="min-height:fit-content">
                                                    <table id="tbl_narrative" class="table table-striped table-bordered text-nowrap" style="width: 100%; cursor: pointer;">
                                                        <thead>
                                                            <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                                <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Narrative Diagnosis</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Final Diagnosis</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="panel panel-default mt-2">
                                    <div class="panel-heading" role="tab" id="headingThree9">
                                        <h4 class="panel-title">
                                            <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#collapseThree9" aria-expanded="true" aria-controls="collapseThree9">
                                                Diagnosis
                                            </a>
                                        </h4>
                                    </div>
                                    <div id="collapseThree9" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingThree9">
                                        <div class="panel-body ">
                                            <div class="row">
                                                <div class="table-responsive" style="min-height:fit-content">
                                                    <table id="tbl_patdignosis" class="table table-striped table-bordered text-nowrap resize-table" style="width: 100%; cursor: pointer;">
                                                        <thead>
                                                            <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                                <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Type</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Code</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Diagnosis</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Notes</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">year</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default mt-2">
                                    <div class="panel-heading" role="tab" id="headingThree10">
                                        <h4 class="panel-title">
                                            <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#collapseThree10" aria-expanded="true" aria-controls="collapseThree10">
                                                Patient treatments
                                            </a>
                                        </h4>
                                    </div>
                                    <div id="collapseThree10" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingThree10">
                                        <div class="panel-body ">
                                            <div class="row">
                                                <div class="table-responsive" style="min-height:fit-content">
                                                    <table id="tbl_cashtreatments" class="table table-striped table-bordered text-nowrap resize-table" style="width: 100%; cursor: pointer;">
                                                        <thead>
                                                            <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                                <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">CPT<br /> Code</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Start<br /> Time</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">End <br />Time</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Treatment</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Qty</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Session</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">EXP.<br /> Date</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Unit<br /> Price</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Gross</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Discount</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Net</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">VAT<br /> Amount</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">NET+VAT</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Status</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Lab<br /> Status</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Doctor<br /> Notes</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default mt-2">
                                    <div class="panel-heading" role="tab" id="headingThree11">
                                        <h4 class="panel-title">
                                            <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#collapseThree11" aria-expanded="true" aria-controls="collapseThree11">
                                                Prescription
                                            </a>
                                        </h4>
                                    </div>
                                    <div id="collapseThree11" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingThree11">
                                        <div class="panel-body ">
                                            <div class="row">
                                                <div class="table-responsive" style="min-height:fit-content">
                                                    <table id="tbl_prescription" class="table table-striped table-bordered text-nowrap resize-table" style="width: 100%; cursor: pointer;">
                                                        <thead>
                                                            <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                                <th class="border-bottom-0 font-weight-semibold text-white text-center"></th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">ID</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Code</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Generic</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Brand</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Dosage</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Strength</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Use <br />(Units)</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Frequency<br /> Value</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Frequency</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Duration</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Quantity</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Route for Admin</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Instructions</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default mt-2">
                                    <div class="panel-heading" role="tab" id="headingThree12">
                                        <h4 class="panel-title">
                                            <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#collapseThree12" aria-expanded="true" aria-controls="collapseThree12">
                                                Progress Notes
                                            </a>
                                        </h4>
                                    </div>
                                    <div id="collapseThree12" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingThree12">
                                        <div class="panel-body ">
                                            <div class="row">
                                                <div class="table-responsive" style="min-height:fit-content">
                                                    <table id="tbl_ProgNote" class="table table-striped table-bordered text-nowrap" style="width: 100%; cursor: pointer;">
                                                        <thead>
                                                            <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                                <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Progress Notes</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Next visit plan </th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Other instructions </th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Date Recorded</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="panel panel-default mt-2">
                                    <div class="panel-heading" role="tab" id="headingThree13">
                                        <h4 class="panel-title">
                                            <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#collapseThree13" aria-expanded="true" aria-controls="collapseThree13">
                                                Addendum
                                            </a>
                                        </h4>
                                    </div>
                                    <div id="collapseThree13" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingThree13">
                                        <div class="panel-body ">
                                            <div class="row">
                                                <div class="table-responsive" style="min-height:fit-content">
                                                    <table id="tbl_addendum" class="table table-striped table-bordered text-nowrap resize-table" style="width: 100%; cursor: pointer;">
                                                        <thead>
                                                            <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                                <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Addendum For</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Addendum</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white">Date Recorded</th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="panel panel-default mt-2">
                                    <div class="panel-heading" role="tab" id="headingThree14">
                                        <h4 class="panel-title">
                                            <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#collapseThree14" aria-expanded="true" aria-controls="collapseThree14">
                                                OPGIOPAImages
                                            </a>
                                        </h4>
                                    </div>
                                    <div id="collapseThree14" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingThree14">
                                        <div class="panel-body ">
                                            <div class="row">
                                                <div class="table-responsive" style="min-height:fit-content">
                                                    <table id="tbl_doc_lists" class="table table-striped table-bordered text-nowrap resize-table" style="width: 100%; cursor: pointer;">
                                                        <thead>
                                                            <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D; ">
                                                                <th class="border-bottom-0 font-weight-semibold text-white text-center">Type</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white text-center">Document</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white text-center text-wrap">Description</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white text-center">Uploaded By</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white text-center">Uploaded Date &amp; Time</th>
                                                                <th class="border-bottom-0 font-weight-semibold text-white text-center"><i class="fe fe-more-vertical" style="font-size: 20px;"></i></th>
                                                            </tr>
                                                        </thead>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal View Document -->
<div class="modal fade" id="view_doc_modal" data-bs-backdrop="static" data-bs-keyboard="false" data-modal-from="patient" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" id="size">
        <div class="modal-content shadow-lg" id="view_doc_modal_body">
        </div>
    </div>
</div>
<!-- End Modal View Document-->
<script>
    //#region Page Load
        $(function () {
            var appId = "@emr.appId";
            if (appId !== "") {

                GetHPI();
                GetVitalSigns();
                GetAllergies();
                GetPastHistory();
                GetCheifComplaints();
                GetReviewofSystems();
                GetNurseNotes();
                GetNarrativeDiagnosis();
                GetPatDiagnosis();
                GetCashTreatment();
                GetPrescription();
                GetProgressNotes();
                GetAddendum();
                GetOPGIOPA(@emr.appId, "Investigation");
            }
        });
    //#endregion Page Load

    //#region Load HPI
        var GetHPI = function () {
            $.ajax({
                type: "GET",
                url: "@Url.Action("GetAllHPI", "HistoryofPresentIllness", new { area = "NurseStation" })?appId=" + "@emr.appId",
                success: function (response) {

                    if (response.isAuthorized != false) {
                        var table;
                        if ($.fn.dataTable.isDataTable('#tbl_HPI')) {
                            table = $('#tbl_HPI').DataTable();
                            table.clear();
                            table.rows.add(response).draw();
                        }
                        else {
                            console.log(response);
                            BindDataTableHPI(response);
                        }
                    }
                    else {
                        console.log("You are not Authorized!");
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            })
        }
    //#endregion Load HPI

    //#region Bind Datatable
    var BindDataTableHPI = function (response) {
          var table = $("#tbl_HPI").DataTable({
              fixedHeader: {
                  header: true,
                  footer: true
              },
              processing: true,
              "deferRender": true,
              "pageLength": 100,
              "retrieve": true,
              lengthChange: true,
              "aaData": response,
              "aoColumns": [
                  {
                      "mData": "hpiId",
                      "orderable": false,
                      "searchable": false,
                      "className": "text-center",
                      "render": function (data, type, row, meta) {
                          let _index = (meta.row) + 1;
                          if (_index >= 10) {
                              return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                          }
                          else {
                              return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                          }
                      }
                  },
                  {
                      "mData": "hpi_loc",
                      "className": "text-left"
                  },
                  {
                      "mData": "hpi_qua",
                      "className": 'text-left',

                  },
                  {
                      "mData": "hpi_sev",
                      "className": "text-left"
                  },
                  {
                      "mData": "hpi_dur",
                      "className": "text-left"
                  },
                  {
                      "mData": "hpi_tim",
                      "className": "text-left"
                  },
                  {
                      "mData": "hpi_con",
                      "className": "text-left"
                  },
                  {
                      "mData": "hpi_mod",
                      "className": "text-left"
                  },
                  {
                      "mData": "hpi_sym",
                      "className": "text-left"
                  },
                  {
                      "mData": "hpi_other",
                      "className": "text-left"
                  },

              ],
              order: [[1, 'asc']],
              "searching": false,
              scrollX: true,
              scrollY: 500,
              "bPaginate": false,
              "bLengthChange": false,
              "bInfo": false,
          });
          table.buttons().container().appendTo('#tbl_HPI_wrapper .col-md-6:eq(0)');
      };
    //#endregion Bind Datatable

    //#region Load VitalSigns
        var GetVitalSigns = function () {
            $.ajax({
                type: "GET",
                url: "@Url.Action("GetAllVitalSigns", "VitalSigns", new { area = "NurseStation" })?appId=" + "@emr.appId",
                success: function (response) {

                    if (response.isAuthorized != false) {
                        var table;
                        if ($.fn.dataTable.isDataTable('#tbl_vital')) {
                            table = $('#tbl_vital').DataTable();
                            table.clear();
                            table.rows.add(response).draw();
                        }
                        else {
                            console.log(response);
                            BindDataTableVital(response);
                        }
                    }
                    else {
                        console.log("You are not Authorized!");
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            })
        }
    //#endregion Load VitalSigns

    //#region Bind Datatable
        var BindDataTableVital = function (response) {
            var table = $("#tbl_vital").DataTable({
                fixedHeader: {
                    header: true,
                    footer: true
                },
                processing: true,
                "deferRender": true,
                "pageLength": 50,
                "retrieve": true,
                lengthChange: true,
                "aaData": response,
                "aoColumns": [
                    {
                        "mData": "signId",
                        "orderable": false,
                        "searchable": false,
                        "className": "text-center",
                        "render": function (data, type, row, meta) {
                            let _index = (meta.row) + 1;
                            if (_index >= 10) {
                                return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                            }
                            else {
                                return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                            }
                        }
                    },
                    {
                        "mData": "sign_temp",
                        "className": "text-left"
                    },
                    {
                        "mData": "sign_pulse",
                        "className": 'text-left',

                    },
                    {
                        "mData": "sign_bp",
                        "className": "text-left"
                    },
                    {
                        "mData": "sign_bpd",
                        "className": "text-left"
                    },
                    {
                        "mData": "sign_height",
                        "className": "text-left"
                    },
                    {
                        "mData": "sign_weight",
                        "className": "text-left"
                    },
                    {
                        "mData": "sign_bmi",
                        "className": "text-left"
                    },
                    {
                        "mData": "sign_resp",
                        "className": "text-left"
                    },
                    {
                        "mData": "sign_spo2",
                        "className": "text-left"
                    },
                    {
                        "mData": "sign_hip",
                        "className": "text-left"
                    },
                    {
                        "mData": "sign_waist",
                        "className": "text-left"
                    },
                    {
                        "mData": "sign_head",
                        "className": "text-left"
                    },
                    {
                        "mData": "sign_uri",
                        "className": "text-left"
                    },
                    {
                        "mData": "sign_notes",
                        "className": "text-left"
                    },

                ],
                order: [[1, 'asc']],
                "searching": false,
                "bPaginate": false,
                "bLengthChange": false,
                "bInfo": false,
                scrollX: true,
                scrollY: 500,
                scrollCollapse: true,



            });

        };
    //#endregion Bind Datatable

    //#region Load Allergies
        var GetAllergies = function () {
            $.ajax({
                type: "GET",
                url: "@Url.Action("GetAllAllergies", "Allergies", new { area = "NurseStation" })?appId=" + "@emr.appId",
                success: function (response) {

                    if (response.isAuthorized != false) {
                        var table;
                        if ($.fn.dataTable.isDataTable('#tbl_allergy')) {
                            table = $('#tbl_allergy').DataTable();
                            table.clear();
                            table.rows.add(response).draw();
                        }
                        else {
                            console.log(response);
                            BindDataTableallergy(response);
                        }
                    }
                    else {
                        console.log("You are not Authorized!");
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            })
        }
    //#endregion Load Allergies

    //#region Bind Datatable
        var BindDataTableallergy = function (response) {
            var table = $("#tbl_allergy").DataTable({
                fixedHeader: {
                    header: true,
                    footer: true
                },
                processing: true,
                "deferRender": true,
                "pageLength": 100,
                "retrieve": true,
                lengthChange: true,
                "aaData": response,
                "aoColumns": [
                    {
                        "mData": "allId",
                        "orderable": false,
                        "searchable": false,
                        "className": "text-center",
                        "render": function (data, type, row, meta) {
                            let _index = (meta.row) + 1;
                            if (_index >= 10) {
                                return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                            }
                            else {
                                return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                            }
                        }
                    },
                    {
                        "mData": "all_type",
                        "className": "text-left"
                    },
                    {
                        "mData": "allergies",
                        "className": 'text-left',

                    },
                    {
                        "mData": "all_severity",
                        "className": "text-left"
                    },
                    {
                        "mData": "all_for",
                        "className": "text-left"
                    },
                    {
                        "mData": "all_pexam",
                        "className": "text-left"
                    },

                ],
                order: [[1, 'asc']],
                "searching": false,
                scrollX: true,
                scrollY: 500,
                "bPaginate": false,
                "bLengthChange": false,
                "bInfo": false,
                scrollCollapse: true,

            });
            table.buttons().container().appendTo('#tbl_allergy_wrapper .col-md-6:eq(0)');
        };
    //#endregion Bind Datatable

    //#region Load PastHistory
        var GetPastHistory = function () {
            $.ajax({
                type: "GET",
                 url: "@Url.Action("GetAllPastHistory", "PastHistory", new { area = "NurseStation" })?appId=" + "@emr.appId",
                success: function (response) {
                    if (response.isAuthorized != false) {
                        var table;
                        if ($.fn.dataTable.isDataTable('#tbl_PastHistory')) {
                            table = $('#tbl_PastHistory').DataTable();
                            table.clear();
                            table.rows.add(response).draw();
                        }
                        else {
                            console.log(response);
                            BindDataTablePast(response);
                        }
                    }
                    else {
                        console.log("You are not Authorized!");
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            })
        }
    //#endregion Load PastHistory

    //#region  Bind Datatable
    var BindDataTablePast = function (response) {
        var table = $("#tbl_PastHistory").DataTable({
            fixedHeader: {
                header: true,
                footer: true
            },
            processing: true,
            "deferRender": true,
            "pageLength": 100,
            "retrieve": true,
            lengthChange: true,
            "aaData": response,
            "aoColumns": [
                {
                    "mData": "pfId",
                    "orderable": false,
                    "searchable": false,
                    "className": "text-center",
                    "render": function (data, type, row, meta) {
                        let _index = (meta.row) + 1;
                        if (_index >= 10) {
                            return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                        }
                        else {
                            return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                        }
                    }
                },
                {
                    "mData": "app_fdate",
                    "className": "text-left",
                    "render": function (data) {
                        return moment(data).format('DD-MM-YYYY')
                    }
                },
                {
                    "mData": "doctor_name",
                    "className": "text-left"
                },
                {
                    "mData": "pf_past",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "pf_other",
                    "className": 'text-left',

                },
                {
                    "mData": "pf_family",
                    "className": "text-left"
                },
                {
                    "mData": "pf_surgical",
                    "className": "text-left"
                },
                {
                    "mData": "pf_smok",
                    "className": "text-left"
                },
                {
                    "mData": "pf_smok_habit",
                    "className": "text-left"
                },
                {
                    "mData": "pf_smok_details",
                    "className": "text-left"
                },
                {
                    "mData": "pf_alco",
                    "className": "text-left"
                },
                {
                    "mData": "pf_alco_habit",
                    "className": "text-left"
                },
                {
                    "mData": "pf_alco_details",
                    "className": "text-left"
                },
                {
                    "mData": "pf_drug",
                    "className": "text-left"
                },
                {
                    "mData": "pf_drug_habit",
                    "className": "text-left"
                },
                {
                    "mData": "pf_drug_details",
                    "className": "text-left"
                },

            ],
            order: [[0, 'asc']],
            "searching": false,
            scrollX: true,
            scrollY: 500,
            "bPaginate": false,
            "bLengthChange": false,
            "bInfo": false,
        });
        table.buttons().container().appendTo('#tbl_PastHistory .col-md-6:eq(0)');
    };
    //#endregion  Bind Datatable

    //#region Load CheifComplaints
        var GetCheifComplaints = function () {
            $.ajax({
                type: "GET",
                url: "@Url.Action("GetAllCheifComplaints", "CheifComplaints", new { area = "EMR" })?appId=" + "@emr.appId",
                success: function (response) {

                    if (response.isAuthorized != false) {
                        var table;
                        if ($.fn.dataTable.isDataTable('#tbl_complaints')) {
                            table = $('#tbl_complaints').DataTable();
                            table.clear();
                            table.rows.add(response).draw();
                        }
                        else {
                            console.log(response);
                            BindDataTablecomplaints(response);
                        }
                    }
                    else {
                        console.log("You are not Authorized!");
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            })
        }
    //#endregion Load CheifComplaints

    //#region Bind Datatable
    var BindDataTablecomplaints = function (response) {
            var table = $("#tbl_complaints").DataTable({
                fixedHeader: {
                    header: true,
                    footer: true
                },
                processing: true,
                "deferRender": true,
                "pageLength": 100,
                "retrieve": true,
                lengthChange: true,
                "aaData": response,
                "aoColumns": [
                    {
                        "mData": "compId",
                        "orderable": false,
                        "searchable": false,
                        "className": "text-center",
                        "render": function (data, type, row, meta) {
                            let _index = (meta.row) + 1;
                            if (_index >= 10) {
                                return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                            }
                            else {
                                return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                            }
                        }
                    },

                    {
                        "mData": "complaint",
                        "className": 'text-left',

                    },

                ],
                order: [[1, 'asc']],
                "searching": false,
                scrollX: true,
                scrollY: 500,
                "bPaginate": false,
                "bLengthChange": false,
                "bInfo": false,

            });
        };
    //#endregion Bind Datatable

    //#region Load PreviousReviewofSystems
     var GetReviewofSystems = function () {
         $.ajax({
             type: "GET",
             url: "@Url.Action("GetAllReviewofSystems", "ReviewofSystems", new { area = "NurseStation" })?appId=" + "@emr.appId",
             success: function (response) {
                 if (response.isAuthorized != false) {
                     var table;
                     if ($.fn.dataTable.isDataTable('#tbl_ReviewofSystems')) {
                         table = $('#tbl_ReviewofSystems').DataTable();
                         table.clear();
                         table.rows.add(response).draw();
                     }
                     else {
                         console.log(response);
                         BindDataTableROS(response);
                     }
                 }
                 else {
                     console.log("You are not Authorized!");
                 }
             },
             error: function (xhr) {
                 console.log(xhr);
             }
         })
     }
    //#endregion Load ReviewofSystems

    //#region  Bind Datatable
    var BindDataTableROS = function (response) {
        var table = $("#tbl_ReviewofSystems").DataTable({
            fixedHeader: {
                header: true,
                footer: true
            },
            processing: true,
            "deferRender": true,
            "pageLength": 100,
            "retrieve": true,
            lengthChange: true,
            "aaData": response,
            "aoColumns": [
                {
                    "mData": "rsId",
                    "orderable": false,
                    "searchable": false,
                    "className": "text-center",
                    "render": function (data, type, row, meta) {
                        let _index = (meta.row) + 1;
                        if (_index >= 10) {
                            return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                        }
                        else {
                            return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                        }
                    }
                },
                {
                    "mData": "app_fdate",
                    "className": "text-left",
                    "render": function (data) {
                        return moment(data).format('DD-MM-YYYY')
                    }
                },
                {
                    "mData": "doctor_name",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_1",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_2",
                    "className": 'text-justify text-wrap'

                },
                {
                    "mData": "rs_3",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_4",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_5",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_6",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_7",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_8",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_9",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_10",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_11",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_12",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_13",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_14",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_15",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_16",
                    "className": 'text-justify text-wrap'
                },
                {
                    "mData": "rs_comments",
                    "className": 'text-justify text-wrap'
                },

            ],
            order: [[1, 'asc']],
            "searching": false,
            scrollX: true,
            scrollY: 500,
            "bPaginate": false,
            "bLengthChange": false,
            "bInfo": false,

        });
        table.buttons().container().appendTo('#tbl_PreReviewofSystems_wrapper .col-md-6:eq(0)');
    };
 //#endregion  Bind Datatable


    //#region Load NurseNotes
        var GetNurseNotes = function () {
            $.ajax({
                type: "GET",
                url: "@Url.Action("GetAllNurseNotes", "NurseNotes", new { area = "NurseStation" })?appId=" + "@emr.appId",
                success: function (response) {

                    if (response.isAuthorized != false) {
                        var table;
                        if ($.fn.dataTable.isDataTable('#tbl_nursenote')) {
                            table = $('#tbl_nursenote').DataTable();
                            table.clear();
                            table.rows.add(response).draw();
                        }
                        else {
                            console.log(response);
                            BindDataTableNurseNote(response);
                        }
                    }
                    else {
                        console.log("You are not Authorized!");
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            })
                .done(function () {
                    resizedt();
                });
        }
    //#endregion Load NurseNotes

    //#region Bind Datatable
    var BindDataTableNurseNote = function (response) {
        var table = $("#tbl_nursenote").DataTable({
            fixedHeader: {
                header: true,
                footer: true
            },
            processing: true,
            "deferRender": true,
            "pageLength": 100,
            "retrieve": true,
            lengthChange: true,
            "aaData": response,
            "aoColumns": [
                {
                    "mData": "nurseId",
                    "orderable": false,
                    "searchable": false,
                    "className": "text-center",
                    "render": function (data, type, row, meta) {
                        let _index = (meta.row) + 1;
                        if (_index >= 10) {
                            return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                        }
                        else {
                            return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                        }
                    }
                },

                {
                    "mData": "nurse_notes",
                    "className": 'text-left',

                },
                {
                    "mData": "nurse_date_created",
                    "className": "text-left",
                    "render": function (data) {
                        return moment(data).format('DD-MM-YYYY')
                    }
                },

            ],
            order: [[1, 'asc']],
            "searching": false,
            scrollX: true,
            scrollY: 500,
            "bPaginate": false,
            "bLengthChange": false,
            "bInfo": false,
        });
        table.buttons().container().appendTo('#tbl_nursenote_wrapper .col-md-6:eq(0)');
    };
//#endregion Bind Datatable

    //#region Load NarrativeDiagnosis
      var GetNarrativeDiagnosis = function () {
          $.ajax({
              type: "GET",
              url: "@Url.Action("GetAllNarrativeDiagnosis", "NarrativeDiagnosis", new { area = "EMR" })?appId=" + "@emr.appId",
              success: function (response) {

                  if (response.isAuthorized != false) {
                      var table;
                      if ($.fn.dataTable.isDataTable('#tbl_narrative')) {
                          table = $('#tbl_narrative').DataTable();
                          table.clear();
                          table.rows.add(response).draw();
                      }
                      else {
                          console.log(response);
                          BindDataTableNarrative(response);
                      }
                  }
                  else {
                      console.log("You are not Authorized!");
                  }
              },
              error: function (xhr) {
                  console.log(xhr);
              }
          })
      }
  //#endregion Load NarrativeDiagnosis

    //#region Bind Datatable
     var BindDataTableNarrative = function (response) {
         var table = $("#tbl_narrative").DataTable({
             fixedHeader: {
                 header: true,
                 footer: true
             },
             processing: true,
             "deferRender": true,
             "pageLength": 100,
             "retrieve": true,
             lengthChange: true,
             "aaData": response,
             "aoColumns": [
                 {
                     "mData": "ntdId",
                     "orderable": false,
                     "searchable": false,
                     "className": "text-center",
                     "render": function (data, type, row, meta) {
                         let _index = (meta.row) + 1;
                         if (_index >= 10) {
                             return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                         }
                         else {
                             return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                         }
                     }
                 },

                 {
                     "mData": "ntd_1",
                     "className": 'text-left',

                 },
                 {
                     "mData": "ntd_2",
                     "className": 'text-left',

                 },


             ],
             order: [[1, 'asc']],
             "searching": false,
             scrollX: true,
             scrollY: 500,
             "bPaginate": false,
             "bLengthChange": false,
             "bInfo": false,
         });
         table.buttons().container().appendTo('#tbl_narrative_wrapper .col-md-6:eq(0)');
     };
 //#endregion Bind Datatable

    //#region Load PatientDiagnosis
      var GetPatDiagnosis = function () {
          $.ajax({
              type: "GET",
              url: "@Url.Action("GetAllPatientDiagnosis", "PatientDiagnosis", new { area = "EMR" })?appId=" + "@emr.appId",
              success: function (response) {

                  if (response.isAuthorized != false) {
                      var table;
                      if ($.fn.dataTable.isDataTable('#tbl_patdignosis')) {
                          table = $('#tbl_patdignosis').DataTable();
                          table.clear();
                          table.rows.add(response).draw();
                      }
                      else {
                          console.log(response);
                          BindDataTableDiag(response);
                      }
                  }
                  else {
                      console.log("You are not Authorized!");
                  }
              },
              error: function (xhr) {
                  console.log(xhr);
              }
          }).done(function () {
              resizedt();
          });
      }
  //#endregion Load PatientDiagnosis

    //#region Bind Datatable
     var BindDataTableDiag = function (response) {
         var table = $("#tbl_patdignosis").DataTable({
             fixedHeader: {
                 header: true,
                 footer: true
             },
             processing: true,
             "deferRender": true,
             "pageLength": 100,
             "retrieve": true,
             lengthChange: true,
             "aaData": response,
             "aoColumns": [
                 {
                     "mData": "padId",
                     "orderable": false,
                     "searchable": false,
                     "className": "text-center",
                     "render": function (data, type, row, meta) {
                         let _index = (meta.row) + 1;
                         if (_index >= 10) {
                             return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                         }
                         else {
                             return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                         }
                     }
                 },

                 {
                     "mData": "pad_type",
                     "className": 'text-left',

                 },
                 {
                     "mData": "diag_code",
                     "className": 'text-left',

                 },
                 {
                     "mData": "diag_name",
                     "className": 'text-left',

                 },
                 {
                     "mData": "pad_notes",
                     "className": 'text-left',

                 },
                 {
                     "mData": "pad_year",
                     "className": 'text-left',

                 },

             ],
             order: [[1, 'asc']],
             "searching": false,
             scrollX: true,
             scrollY: 500,
             "bPaginate": false,
             "bLengthChange": false,
             "bInfo": false,
         });
         table.buttons().container().appendTo('#tbl_patdignosis_wrapper .col-md-6:eq(0)');
     };
 //#endregion Bind Datatable

    //#region Load CashTreatments
      var GetCashTreatment = function () {
          $.ajax({
              type: "GET",
              url: "@Url.Action("GetPatientTreatments", "QuickEMR", new { area = "EMR" })?appId=" + "@emr.appId",
              success: function (response) {

                  if (response.isAuthorized != false) {
                      var table;
                      if ($.fn.dataTable.isDataTable('#tbl_cashtreatments')) {
                          table = $('#tbl_cashtreatments').DataTable();
                          table.clear();
                          table.rows.add(response).draw();
                      }
                      else {
                          BindDataTableCashTreat(response);
                      }
                  }
                  else {
                      console.log("You are not Authorized!");
                  }
              },
              error: function (xhr) {
                  console.log(xhr);
              }
          })
              .done(function () {
                  resizedt();;
              });
      }
  //#endregion Load CashTreatments

    //#region Bind Datatable
     var BindDataTableCashTreat = function (response) {

         var table = $("#tbl_cashtreatments").DataTable({
             fixedHeader: {
                 header: true,
                 footer: true
             },
             processing: true,
             "deferRender": true,
             "pageLength": 100,
             "retrieve": true,
             lengthChange: true,
             "aaData": response,
             "aoColumns": [
                 {
                     "mData": "ptId",
                     "orderable": false,
                     "searchable": false,
                     "className": "text-center",
                     "render": function (data, type, row, meta) {
                         let _index = (meta.row) + 1;
                         if (_index >= 10) {
                             return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                         }
                         else {
                             return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                         }
                     }
                 },
                 {
                     "mData": "tr_code",
                     "className": 'text-left',

                 },
                 {
                     "mData": "pt_date_received",
                     "render": function (pt_date_received, type, full, meta) {
                         if (type === 'display' || type === 'filter') {
                             return moment(pt_date_received).format(' HH:mm');
                         }
                         return pt_date_received;
                     }

                 },
                 {
                     "mData": "pt_date_collected",
                     "render": function (pt_date_collected, type, full, meta) {
                         if (type === 'display' || type === 'filter') {
                             return moment(pt_date_collected).format(' HH:mm');
                         }
                         return pt_date_collected;
                     }

                 },

                 {
                     "mData": "tr_name_type",
                     "className": 'text-wrap text-justify',

                 },
                 {
                     "mData": "pt_qty",
                     "className": 'text-left',

                 },
                 {
                     "mData": "pt_ses",
                     "className": 'text-left',

                 },
                 {
                     "mData": "pt_pack_exp_date",
                     "render": function (pt_pack_exp_date, type, full, meta) {
                         if (type === 'display' || type === 'filter') {
                             return moment(pt_pack_exp_date).format('DD-MM-YYYY');
                         }
                         return pt_pack_exp_date;
                     }

                 },
                 {
                     "mData": "pt_uprice",
                     "className": 'text-right',
                     "render": $.fn.dataTable.render.number(',', '.', 2)
                 },
                  {
                      "mData": "pt_total",
                     "className": 'text-right',
                     "render": $.fn.dataTable.render.number(',', '.', 2)
                 },
                  {
                      "mData": "pt_disc",
                     "className": 'text-right',
                     "render": $.fn.dataTable.render.number(',', '.', 2)
                 },
                  {
                      "mData": "pt_net",
                     "className": 'text-right',
                     "render": $.fn.dataTable.render.number(',', '.', 2)
                 },
                 {
                     "mData": "pt_vat",
                     "className": 'text-right',
                     "render": $.fn.dataTable.render.number(',', '.', 2)
                 },
                 {
                     "mData": "pt_net_vat",
                     "className": 'text-right',
                     "render": $.fn.dataTable.render.number(',', '.', 2)
                 },
                 {
                     "mData": "pt_status",
                     "className": 'text-left',

                 },
                 {
                     "mData": "pt_lab_status",
                     "className": 'text-left',

                 },
                 {
                     "mData": "pt_tdn_notes",
                     "className": 'text-left',

                 },
             ],
             order: [[1, 'asc']],
             "searching": false,
             scrollX: true,
             scrollY: 500,
             "bPaginate": false,
             "bLengthChange": false,
             "bInfo": false,
         });
         table.buttons().container().appendTo('#tbl_cashtreatments_wrapper .col-md-6:eq(0)');
     };
   //#endregion Bind Datatable

    //#region Load Prescription
     var GetPrescription = function () {
         $.ajax({
             type: "GET",
             url: "@Url.Action("GetAllPrescription", "Prescription", new { area = "EMR" })?appId=" + "@emr.appId" + "&pre_med_type=CASH",
             success: function (response) {

                 if (response.isAuthorized != false) {
                     var table;
                     if ($.fn.dataTable.isDataTable('#tbl_prescription')) {
                         table = $('#tbl_prescription').DataTable();
                         table.clear();
                         table.rows.add(response).draw();
                     }
                     else {
                         console.log(response);
                         BindDataTablePresc(response);
                     }
                 }
                 else {
                     console.log("You are not Authorized!");
                 }
             },
             error: function (xhr) {
                 console.log(xhr);
             }
         }).done(function () {
             resizedt();
         });
     }
   //#endregion Load Prescription

    //#region Bind Datatable
      var BindDataTablePresc = function (response) {
          var table = $("#tbl_prescription").DataTable({
              fixedHeader: {
                  header: true,
                  footer: true
              },
              processing: true,
              "deferRender": true,
              "pageLength": 100,
              "retrieve": true,
              lengthChange: true,
              "aaData": response,
              "aoColumns": [
                  {
                      "mData": "preId",
                      "orderable": false,
                      "className": "select-checkbox text-center inbox-small-cells",
                      'checkboxes': {
                          'selectRow': true
                      }
                  },
                  {
                      "mData": "preId",
                      "orderable": false,
                      "searchable": false,
                      "className": "text-center",
                      "render": function (data, type, row, meta) {
                          let _index = (meta.row) + 1;
                          if (_index >= 10) {
                              return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                          }
                          else {
                              return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                          }
                      }
                  },

                  {
                      "mData": "preId",
                      "className": 'text-left',

                  },
                  {
                      "mData": "item_code",
                      "className": 'text-left',

                  },
                  {
                      "mData": "item_name",
                      "className": 'text-justify text-wrap',

                  },
                  {
                      "mData": "item_brand",
                      "className": 'text-justify text-wrap',

                  },
                  {
                      "mData": "item_dosage",
                      "className": 'text-justify text-wrap',

                  },{
                      "mData": "item_strength",
                      "className": 'text-left',

                  },{
                      "mData": "pre_temp3",
                      "className": 'text-left',

                  },{
                      "mData": "pre_temp4",
                      "className": 'text-left',

                  },{
                      "mData": "pre_temp5",
                      "className": 'text-left',

                  },{
                      "mData": "pre_duration",
                      "className": 'text-left',

                  },{
                      "mData": "pre_qty_type",
                      "className": 'text-left',

                  },{
                      "mData": "ra_code_desc",
                      "className": 'text-left',

                  },{
                      "mData": "pre_instr",
                      "className": 'text-justify text-wrap',

                  },

              ],
              order: [[1, 'asc']],
              "searching": false,
              scrollX: true,
              scrollY: 500,
              "bPaginate": false,
              "bLengthChange": false,
              "bInfo": false,
          });
          table.buttons().container().appendTo('#tbl_prescription_wrapper .col-md-6:eq(0)');
      };
  //#endregion Bind Datatable

    //#region Load ProgressNotes
     var GetProgressNotes = function () {
         $.ajax({
             type: "GET",
             url: "@Url.Action("GetAllProgressNotes", "ProgressNotes", new { area = "EMR" })?appId=" + "@emr.appId",
             success: function (response) {

                 if (response.isAuthorized != false) {
                     var table;
                     if ($.fn.dataTable.isDataTable('#tbl_ProgNote')) {
                         table = $('#tbl_ProgNote').DataTable();
                         table.clear();
                         table.rows.add(response).draw();
                     }
                     else {
                         console.log(response);
                         BindDataTableProgress(response);
                     }
                 }
                 else {
                     console.log("You are not Authorized!");
                 }
             },
             error: function (xhr) {
                 console.log(xhr);
             }
         })
     }
    //#endregion Load ProgressNotes

    //#region Bind Datatable
       var BindDataTableProgress = function (response) {
           var table = $("#tbl_ProgNote").DataTable({
               fixedHeader: {
                   header: true,
                   footer: true
               },
               processing: true,
               "deferRender": true,
               "pageLength": 100,
               "retrieve": true,
               lengthChange: true,
               "aaData": response,
               "aoColumns": [
                   {
                       "mData": "mnId",
                       "orderable": false,
                       "searchable": false,
                       "className": "text-center",
                       "render": function (data, type, row, meta) {
                           let _index = (meta.row) + 1;
                           if (_index >= 10) {
                               return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                           }
                           else {
                               return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                           }
                       }
                   },
                   {
                       "mData": "mn_notes",
                       "className": 'text-left',

                   },
                   {
                       "mData": "mn_visitPlan",
                       "className": 'text-left',

                   },
                   {
                       "mData": "mn_instructions",
                       "className": 'text-left',

                   },
                   {
                       "mData": "mn_date_created",
                       "className": "text-left",
                       "render": function (data) {
                           return moment(data).format('DD-MM-YYYY')
                       }
                   },

               ],
               order: [[1, 'asc']],
               "searching": false,
               scrollX: true,
               scrollY: 500,
               "bPaginate": false,
               "bLengthChange": false,
               "bInfo": false,
           });
           table.buttons().container().appendTo('#tbl__ProgNotewrapper .col-md-6:eq(0)');
       };
   //#endregion Bind Datatable

    //#region Load Addendum
     var GetAddendum = function () {
         $.ajax({
             type: "GET",
             url: "@Url.Action("GetAllAddendum", "Addendum", new { area = "EMR" })?appId=" + "@emr.appId",
             success: function (response) {

                 if (response.isAuthorized != false) {
                     var table;
                     if ($.fn.dataTable.isDataTable('#tbl_addendum')) {
                         table = $('#tbl_addendum').DataTable();
                         table.clear();
                         table.rows.add(response).draw();
                     }
                     else {
                         console.log(response);
                         BindDataTableAddendum(response);
                     }
                 }
                 else {
                     console.log("You are not Authorized!");
                 }
             },
             error: function (xhr) {
                 console.log(xhr);
             }
         })
         .done(function () {
                 resizedt();
             });
     }
 //#endregion Load Addendum

    //#region Bind Datatable
     var BindDataTableAddendum = function (response) {
         var table = $("#tbl_addendum").DataTable({
             fixedHeader: {
                 header: true,
                 footer: true
             },
             processing: true,
             "deferRender": true,
             "pageLength": 100,
             "retrieve": true,
             lengthChange: true,
             "aaData": response,
             "aoColumns": [
                 {
                     "mData": "addeId",
                     "orderable": false,
                     "searchable": false,
                     "className": "text-center",
                     "render": function (data, type, row, meta) {
                         let _index = (meta.row) + 1;
                         if (_index >= 10) {
                             return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                         }
                         else {
                             return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                         }
                     }
                 },
                 {
                     "mData": "adde_for_name",
                     "className": 'text-left',

                 },
                 {
                     "mData": "adde_notes",
                     "className": 'text-left',

                 },
                 {
                     "mData": "adde_date_created",
                     "className": "text-left",
                     "render": function (data) {
                         return moment(data).format('DD-MM-YYYY')
                     }
                 },

             ],
             order: [[1, 'asc']],
             "searching": false,
             scrollX: true,
             scrollY: 500,
             "bPaginate": false,
             "bLengthChange": false,
             "bInfo": false,
         });
         table.buttons().container().appendTo('#tbl_addendum_wrapper .col-md-6:eq(0)');
     };
    //#endregion Bind Datatable

    //#region Alert Timeout
        function Timeout() {
            window.setTimeout(function () {
                $(".alert").fadeTo(500, 0).slideUp(500, function () {
                    $(this).remove();
                });
            }, 4200);
        }
    //#endregion Alert Timeout

    //#region Resize Datatable
        function resizedt() {
            setTimeout(function () {
                $.fn.dataTable.tables({ visible: true, api: true }).columns.adjust();
            }, 350);
        }
    //#endregion Resize Datatable

    //#region Load OPGIOPA
        var GetOPGIOPA = function (id, type) {
            $.ajax({
                type: "GET",
                url: "@Url.Action("GetDocumentsById", "Patient", new { area = "Patient" })?id=" + id + "&type=" + type,
                dataType: 'json',
                success: function (response) {
                    //console.log(response);
                    if (response.isSuccess) {

                        var table;
                        if ($.fn.dataTable.isDataTable('#tbl_doc_lists')) {
                            table = $('#tbl_doc_lists').DataTable();
                            table.clear();
                            table.rows.add(response.message).draw();
                        }
                        else {
                            BindDataTable(response.message);
                        }
                    }
                },
                error: function (xhr) {
                    console.log("Error :" + xhr.statusText);
                }
            });
        }
    //#endregion Load OPGIOPA

     //#region Bind DataTable
        var BindDataTable = function (response) {
            var table = $("#tbl_doc_lists").DataTable({
                processing: true,
                "pageLength": 5,
                "retrieve": true,
                lengthChange: true,
                "aaData": response,
                "aoColumns": [
                    { "mData": "doc_category" },
                    { "mData": "doc_path" },
                    { "mData": "doc_label" },
                    { "mData": "doc_uploadedBy_name" },
                    { "mData": "doc_datecreated" },
                    { "mData": "docId" }
                ],
                "aoColumnDefs": [
                    {
                        "aTargets": [0],
                        "className": "fs-13 text-wrap"

                    },
                    {
                        "aTargets": [1],
                        "className": "fs-13",
                        "render": function (data) {
                            var html = "";
                            if (data.endsWith(".pdf")) {
                                html = '<span><svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" fill="red" class="bi bi-file-earmark-pdf" viewBox="0 0 16 16">  <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>  <path d="M4.603 14.087a.81.81 0 0 1-.438-.42c-.195-.388-.13-.776.08-1.102.198-.307.526-.568.897-.787a7.68 7.68 0 0 1 1.482-.645 19.697 19.697 0 0 0 1.062-2.227 7.269 7.269 0 0 1-.43-1.295c-.086-.4-.119-.796-.046-1.136.075-.354.274-.672.65-.823.192-.077.4-.12.602-.077a.7.7 0 0 1 .477.365c.088.164.12.356.127.538.007.188-.012.396-.047.614-.084.51-.27 1.134-.52 1.794a10.954 10.954 0 0 0 .98 1.686 5.753 5.753 0 0 1 1.334.05c.364.066.734.195.96.465.12.144.193.32.2.518.007.192-.047.382-.138.563a1.04 1.04 0 0 1-.354.416.856.856 0 0 1-.51.138c-.331-.014-.654-.196-.933-.417a5.712 5.712 0 0 1-.911-.95 11.651 11.651 0 0 0-1.997.406 11.307 11.307 0 0 1-1.02 1.51c-.292.35-.609.656-.927.787a.793.793 0 0 1-.58.029zm1.379-1.901c-.166.076-.32.156-.459.238-.328.194-.541.383-.647.547-.094.145-.096.25-.04.361.01.022.02.036.026.044a.266.266 0 0 0 .035-.012c.137-.056.355-.235.635-.572a8.18 8.18 0 0 0 .45-.606zm1.64-1.33a12.71 12.71 0 0 1 1.01-.193 11.744 11.744 0 0 1-.51-.858 20.801 20.801 0 0 1-.5 1.05zm2.446.45c.15.163.296.3.435.41.24.19.407.253.498.256a.107.107 0 0 0 .07-.015.307.307 0 0 0 .094-.125.436.436 0 0 0 .059-.2.095.095 0 0 0-.026-.063c-.052-.062-.2-.152-.518-.209a3.876 3.876 0 0 0-.612-.053zM8.078 7.8a6.7 6.7 0 0 0 .2-.828c.031-.188.043-.343.038-.465a.613.613 0 0 0-.032-.198.517.517 0 0 0-.145.04c-.087.035-.158.106-.196.283-.04.192-.03.469.046.822.024.111.054.227.09.346z"/></svg></span>';
                            } else {
                                html = '<span class="avatar avatar-xxl" style="background-image: url(' + data + ');border: 2px solid #d7d7d7;"></span>';
                            }
                            return '<div class="d-flex p-1 justify-content-center">' + html + '</div>';

                        }

                    },

                    {
                        "aTargets": [2],
                        "className": "fs-13 text-wrap"

                    },
                    {
                        "aTargets": [3],
                        "className": "fs-13 text-center"
                    },
                    {
                        "aTargets": [4],
                        "className": "fs-13 text-center",
                        "render": function (data) {
                            return moment(data).format("DD/MM/YYYY HH:mm:ss");
                        }
                    },
                    {
                        "aTargets": [5],
                        "className": "text-center",
                        "orderable": false,
                        "searchable": false,
                        "render": function (data) {

                            var html_links = '<div class="dropdown"><a type="button" class="" data-bs-toggle="dropdown"><i class="fe fe-more-vertical" style="font-size: 20px;"></i></a>' +
                                                '<div class="dropdown-menu" style="min-width:auto">' +
                                                    '<a class="dropdown-item text-dark fw-bold" href="javascript:void(0)" onclick="view_doc(\'pat_doc\',' + data + ')"><i class="fe fe-search text-dark" style="font-size: 15px;margin-right: 0.5rem;"></i>&nbsp;View</a>' +
                                                    '<a class="dropdown-item text-dark fw-bold" href="/Patient/PatientInsurance/DownloadFile?type=pat_doc&id=' + data + '"><i class="fe fe-download-cloud text-dark" style="font-size: 15px;margin-right: 0.5rem;"></i>&nbsp;Download</a>' +
                                                '</div>' +
                                            '</div>';

                            return html_links;
                        }
                    }
                ],
                order: [[3, 'desc']],
                language: {
                    searchPlaceholder: 'Search...',
                    sSearch: '<span class="text-primary font-weight-semi-bold">Search Document(s)</span>',
                    lengthMenu: '_MENU_',
                },
                scrollX: true,
                scrollY: 500,
                scrollCollapse: true,
                fixedColumns: true,
                fixedHeader: {
                    header: true,
                    footer: true
                },
                buttons: [
                    {
                        extend: 'excel',
                        title: 'OPG IOPA',
                        exportOptions: {
                            columns: [1, 2, 3]
                        },
                        action: function (e, dt, node, config) {
                            $.fn.dataTable.ext.buttons.excelHtml5.action.call(this, e, dt, node, config);
                            exportLogs("Employee Exported OPG IOPA with patId = @emr.appId to Excel!");
                        }
                    },
                    {
                        extend: 'pdf',
                        title: 'OPG IOPA',
                        exportOptions: {
                            columns: [1, 2, 3]
                        },
                        action: function (e, dt, node, config) {
                            $.fn.dataTable.ext.buttons.pdfHtml5.action.call(this, e, dt, node, config);
                            exportLogs("Employee Exported OPG IOPA with patId = @emr.appId to PDF!");
                        }
                    },
                    {
                        extend: 'csv',
                        title: 'OPG IOPA',
                        exportOptions: {
                            columns: [1, 2, 3]
                        },
                        action: function (e, dt, node, config) {
                            $.fn.dataTable.ext.buttons.csvHtml5.action.call(this, e, dt, node, config);
                            exportLogs("Employee Exported OPG IOPA with patId = @emr.appId to CSV!");
                        }
                    },
                    {
                        extend: 'print',
                        title: 'OPG IOPA',
                        exportOptions: {
                            columns: [1, 2, 3]
                        },
                        action: function (e, dt, node, config) {
                            $.fn.dataTable.ext.buttons.print.action.call(this, e, dt, node, config);
                            exportLogs("Employee Printed OPG IOPA with patId = @emr.appId Remarks!");
                        }
                    }
                ]
            });
            table.buttons().container()
                .appendTo('#tbl_doc_lists_wrapper .col-md-6:eq(0)');

            setTimeout(function () {
                table.columns.adjust().draw();
            }, 350);

        }
    //#endregion Bind DataTable
    //#region Print
        $('#btn_Print_C').on('click', function (e) {
            e.preventDefault();
            $('#btn_Print_C').removeClass("btn btn-sm btn-success");
            $('#btn_Print_C').addClass("btn btn-sm btn-success btn-loaders btn-icon");
            $('#btn_Print_C').html("Printing the Record....");
            $.ajax({
                type: "Get",
                url: "@Url.Action("PrintPDFConsent", "QuickEMR", new {area = "EMR" })?appId=" + @emr.appId + "&form=PrintMedicalSheet",
                dataType: 'JSON',
                success: function (data) {
                    if (data.isAuthorized) {
                        if (data.success) {
                            console.log(data.message.pdfPath);
                            window.location.href = data.message.pdfPath
                        }
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            });
        });
    //#endregion Print
     //#region View Doc Modal
         var view_doc = function (type, id) {
             $.ajax({
                 type: "GET",
                 url: "@Url.Action("ViewDocument", "PatientInsurance", new { area = "Patient" })?type=" + type + "&id=" + id,
                 contentType: "application/json",
                 dataType: "html",
                 success: function (data) {
                     $("#view_doc_modal_body").html(data);
                     $("#view_doc_modal").modal("show");
                 },
                 error: function (xhr) {
                     console.log(xhr);
                 }
             });
         };
    //#endregion View Doc Modal

     //#region Print
        $('#btn_Nabidh_C').on('click', function (e) {
        e.preventDefault();
        $('#btn_Nabidh_C').removeClass("btn btn-sm btn-success");
        $('#btn_Nabidh_C').addClass("btn btn-sm btn-success btn-loaders btn-icon");
        $('#btn_Nabidh_C').html("Sending the Record....");
            $.ajax({
                type: "Get",
                url: "@Url.Action("NabidhPDFConsent", "QuickEMR", new {area = "EMR" })?appId=" + @emr.appId + "&form=PrintMedicalSheet",
                dataType: 'JSON',
                success: function (data) {
                    if (data.success) {
                        var alertPlaceholder = document.getElementById("AlertP");
                        function alert(e, t) {
                            var l = document.createElement("div");
                            l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" role="alert">' + e +
                                '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                        }
                        alert("<i class='fe fe-check-circle text-white'></i> " + data.message + "", "success");
                        console.log(data.message.pdfPath);
                        window.location.href = data.message.pdfPath
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            });
        });
     //#endregion Print
</script>

