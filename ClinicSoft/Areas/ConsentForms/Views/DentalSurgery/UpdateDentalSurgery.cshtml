@using System.Linq;
@using System.Security.Claims;
@using BusinessEntities;
@model BusinessEntities.ConcentForms.DentalSurgery

@{
    var claims = ClaimsPrincipal.Current.Identities.First().Claims.ToList();
    var emp_designation = claims.Where(c => c.Type == ClaimTypes.Role).Select(c => c.Value).SingleOrDefault();
    EMRInfo emr = (EMRInfo)TempData["emr_data"];
    TempData.Keep("emr_data");
}

<form id="form_DentalSurgeryEdit" autocomplete="off" name="DentalSurgery" ondrop="return false;" onpaste="return false;" oncut="return false;">
    @Html.AntiForgeryToken()
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <div class="border">
                <div class="col-sm-12 col-md-12 col-lg-12">
                    <div class="row mt-2">
                        <div class="col-sm-12 col-md-6 col-lg-2 mb-2">
                            <div class="form-group mb-3"><label class="form-label text-black text-align-left"> Patient Name</label></div>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-4">
                            <label class="form-label text-red text-left text-capitalize">@emr.pat_name</label>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-2 mb-2">
                            <div class="form-group mb-3"><label class="form-label text-black"> Emirates ID</label></div>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-4">
                            <label class="form-label text-red text-left">@emr.pat_emirateid</label>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2 mb-2">
                            <div class="form-group mb-3 text-align-left"><label class="form-label text-black ">File No</label></div>
                        </div>
                        <div class="col-sm-12 col-md-4 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_code</label>
                        </div>
                        <div class="col-sm-12 col-md-2 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black"> DOB</label></div>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_dob</label>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2 mb-2">
                            <div class="form-group mb-3"><label class="form-label text-black"> Nationality</label></div>
                        </div>
                        <div class="col-sm-12 col-md-4 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_nationality</label>
                        </div>
                        <div class="col-sm-12 col-md-2 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black">Gender</label></div>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_gender</label>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black">Doctor's Name</label></div>
                        </div>
                        <div class="col-sm-12 col-md-4 col-lg-2">
                            <label class="form-label text-red text-left">@emr.doc_name</label>
                        </div>
                        <div class="col-sm-12 col-md-2 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black">Date</label></div>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <label class="form-label text-red text-left">@emr.app_fdate</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mb-5 mt-5 text-justify">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <ol>
                <li>
                    <p>I, the undersigned, hereby consent to <lable class="text-capitalize text-red">Dr.@emr.doc_name</lable> performing the following procedure(s):</p>
                    @Html.TextBoxFor(m => m.pds_1, new { @class = "form-control form-control-sm", @placeholder = "Enter Procedure", @id = "upds_1", @maxlength = "250" }) &nbsp;
                </li>
                <li>
                    <p>I acknowledge that the procedure(s), its implications and possible complications have been explained to me, along with the alternatives including not having any treatment.</p>
                </li>
                <li>
                    <p>I have been advised of possible complications of this procedure that are able to be reasonably anticipated, which are:</p>
                    <div class="col-sm-12 col-md-12 col-lg-12">
                        <ul style="list-style-type:disc;">
                            <li>
                                <p>Injury to a nerve, resulting in numbness or tingling of the chin, lip, cheek, gums, and/or tongue to the operated side. This may persist for several weeks, months, or, in remote instances, permanently.</p>
                            </li>
                            <li>
                                <p>Postoperative infection requiring additional treatment.</p>
                            </li>
                            <li>
                                <p>Opening of the sinus (a normal cavity situated above the upper teeth) requiring additional surgery.</p>
                            </li>
                            <li>
                                <p>Restricted mouth opening for several days or weeks, with possible dislocation of the Temporomandibular (jaw) joint.</p>
                            </li>
                            <li>
                                <p>Injury to adjacent teeth and fillings.</p>
                            </li>
                            <li>
                                <p>In rare circumstances, breakage of the jaw.</p>
                            </li>
                            <li>
                                <p>Postoperative discomfort, swelling, and bleeding that may necessitate several days of recuperation.</p>
                            </li>
                            <li>
                                <p>Decision to leave a small piece of root in the jaw when its removal requires extensive surgery.</p>
                            </li>
                            <li>
                                <p>Stretching of the corners of the mouth with resultant cracking and bruising.</p>
                            </li>
                        </ul>

                    </div>

                    <p class="text-red text-decoration-underline">Wisdom Teeth Extractions (in addition to the above):</p>
                    <p>Unforeseen conditions may arise during the procedure that requires a different procedure than as set forth above. Upon my consent, I will authorize the doctor and any associates to perform such procedures when, in their professional judgment, they are necessary.</p>
                    <p>
                        I understand that the medications, drugs, anesthetic, and prescriptions taken for this procedure may cause drowsiness and lack of awareness and coordination. I also understand that I should not consume alcohol or other drugs because they can increase these effects.
                        I have been advised not to work and not to operate any vehicle, automobile, or hazardous devices while taking such medication s until I am fully recovered from their effects. I have also been advised not to smoke for two weeks after the surgery. By signing below,
                        I give my permission for the anesthetic and oral surgical procedures agreed upon by myself and Dr.<label class="text-red">@emr.doc_name</label>. The proposed surgery and risks have been fully explained to my satisfaction and I have had the opportunity to ask questions. I also verify that to my knowledge
                        I have given an accurate report of my physical and mental health history. I have also reported any prior allergic or unusual reactions to drugs, food, insect bites, anesthetics, pollens, dust, blood or body diseases, gum or skin reactions, abnormal bleeding or any other conditions related to my health
                    </p>
                </li>
                <li>
                    <p>I acknowledge receiving a copy of the post-operative instructions, which have been explained to me. I understand all the advice given to me by my Dental Surgeon. After my discharge, I will notify my dentist if I experience any acute pain, heavy bleeding from the surgical site, respiratory problems, or any other post-operative problems.</p>
                </li>
                <li>
                    <p>I understand that no guarantee can be given of the results of surgery on the human body, but that the doctor and office staff will do their best to achieve excellent results.</p>
                </li>
                <li>
                    <p> consent to photography, filming, recording, and x-rays of the procedure to be performed for the advancement of implant dentistry, provided my identity is not revealed.</p>
                </li>
                <li>
                    <p>
                        I request and authorize medical/dental services for me, including implants and other surgery. I fully understand that during, and following the contemplated procedure, surgery, or treatment,
                        conditions may become apparent which warrant, in the judgment of the doctor, additional or alternative treatment pertinent to the success of comprehensive treatment. I also approve any modification in design, materials, or care, if it is felt this is for my best interest.
                    </p>
                    <span class="text-red"> Patient’s Initials:</span>
                    @Html.TextBoxFor(m => m.pds_2, new { @class = "form-control form-control-sm", @id = "upds_2", @maxlength = "250" }) &nbsp;
                </li>
                <li>
                    <p>
                        I certify that I have read or had read to me the contents of this form. I have read or had read to me and will follow any patient instructions related to this procedure.
                        I understand the potential risks, complications and side effects involved with any dental treatment or procedure and have decided to proceed with this procedure after considering the possibility of
                        both known and unknown risks, complications, side effects and alternatives to the procedure. I declare that I have had the opportunity to ask questions and all of my questions have been answered to my satisfaction.
                        You have the right to refuse or discontinue treatment. You will be informed about the consequence of your decision to refuse or discontinue treatment and about available care and the treatment alternatives.
                    </p>
                </li>
            </ol>

        </div> 
    </div>
    <div class="row mt-2">
        <div class="col-sm-12 col-md-12 col-lg-12 text-center table-responsive">
            <table class="table table-bordered table-condensed">
                <tr>
                    <td colspan="3" class="font-weight-bold text-danger fs-18" width="100%">
                        Sign here, only if all of your questions have been answered to your satisfaction
                    </td>
                </tr>
                <tr>
                    <td width="33%">
                        <div id="upat_sign_box" class="d-none">
                            <img alt="stamp" id="upat_sign" class="avatar avatar-xl bsquare" />
                        </div>
                    </td>
                    <td width="33%">
                        <div id="uwit_sign_box" class="d-none">
                            <img alt="stamp" id="uwit_sign" class="avatar avatar-xl bsquare" />
                        </div>
                    </td>
                    <td width="33%">
                        <img alt="stamp" src="@emr.doc_sign" id="doc_sign" class="avatar avatar-xl bsquare" />
                    </td>
                </tr>
                <tr>
                    <td width="33%">
                        If Guardian, relation to the Patient
                        <br />
                        @Html.TextBoxFor(m => m.pds_3, new { @class = "form-control form-control-sm", style = "text-align:center", @id = "upds_3", @maxlength = "250" })
                    </td>
                    <td width="33%">
                        Witness Name
                        <br />
                        @Html.TextBoxFor(m => m.pds_4, new { @class = "form-control form-control-sm", style = "text-align:center", @id = "upds_4", @maxlength = "250" })
                        Witness ID
                        <br />
                        @Html.TextBoxFor(m => m.pds_5, new { @class = "form-control form-control-sm", style = "text-align:center", @id = "upds_5", @maxlength = "250" })
                    </td>
                    <td width="33%">
                        Dental Surgeon’s Name
                        <br />
                        <span class="text-capitalize text-left text-red">@emr.app_doctor_department&nbsp;</span>
                        <br /><br />
                        Date<br />
                        <span class="text-capitalize text-left text-red">@emr.app_fdate&nbsp;</span>
                    </td>
                </tr>
                <tr>
                    <td class="font-weight-semibold text-blue text-center" width="33%">
                        Patient / Parent / Guardian Signature
                        <br />
                        <div class="btn-group mr-2">
                            <div class="dropdown">
                                <button type="button" class="btn-sm btn-secondary me-2 mb-2 dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="fa fa-paint-brush">&nbsp;&nbsp;</i> Patient
                                </button>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" onclick="openSignaturePad('patient')">Tab</a>
                                    <a class="dropdown-item" onclick="openWacomTabSignaturePad('patient')">Wacom Tab</a>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="font-weight-semibold text-blue  text-center" width="33%">
                        Witness Signature
                        <br />
                        <div class="btn-group mr-2">
                            <div class="dropdown">
                                <button type="button" class="btn-sm btn-secondary me-2 mb-2 dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="fa fa-paint-brush">&nbsp;&nbsp;</i> witness
                                </button>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" onclick="openSignaturePad('witness')">Tab</a>
                                    <a class="dropdown-item" onclick="openWacomTabSignaturePad('witness')">Wacom Tab</a>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="font-weight-semibold text-blue text-center" width="33%">Dental Surgeon’s Signature</td>
                </tr>
            </table>
        </div>
    </div>
    <div class="row mt-2">
        <div class="col-sm-12 col-md-12 col-lg-12 text-center">
            <div class="btn-list btn-animation">
                <button type="submit" class="btn btn-warning btn-sm" id="btn_Update">Save Changes</button>
                <button type="button" class="btn btn-outline-dark btn-sm" id="btn_Reset">Reset</button>
                <button type="button" class="btn btn-danger btn-sm" id="btn_DeleteForm">Delete</button>
                <button type="button" class="btn btn-sm btn-outline-success" id="btn_Print"> Download/Print </button>
            </div>
        </div>
    </div>
</form>

<script type="text/javascript">
    $(function () {
        if ("@emp_designation.ToString()" === "Super Administrator") {
            $("#btn_Update").show();
        }
        else {
            if ("@emr.set_emr_lock" == "NoLock") {
                $("#btn_Update").show();
            }
            else {
                if ("@emr.app_ae_date" >= "@emr.today") {
                    $("#btn_Update").show();
                }
                else {
                    $("#btn_Update").hide();
                }
            }
        }

        validate();
        GetSignaturename('patient');
        GetSignaturename('witness');
    });

    //#region Validation Initialization
    var validate = function () {
        $("#form_DentalSurgeryEdit").validate({
            rules: {
                pds_1: {
                    required: true
                },
                pds_2: {
                    required: true
                },
                pds_4: {
                    required: true
                },
                pds_5: {
                    required: true
                }
            },
            messages: {
                pds_1: {
                    required: "Please Enter Procedure!"
                },
                pds_2: {
                    required: "Please Enter Patient's Intials!"
                },
                pds_4: {
                    required: "Please Enter Witness Name!"
                },
                pds_5: {
                    required: "Please Enter Witness ID!"
                },
            },
            highlight: function (element) {
                var elem = $(element);
                $(element).parent().addClass('has-error');
                //error_timeout(elem.attr("id"));
            },
            unhighlight: function (element) {
                var elem = $(element);
                $(element).parent().removeClass('has-error');
            },
            errorElement: 'span',
            errorClass: 'text-danger fw-bold',
            errorPlacement: function (error, element) {
                var elem = $(element);
                if (element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                } else {
                    error.insertAfter(element);
                }
            }
        });
    }
    //#endregion

    //#region Update  Click
    $('#btn_Update').on('click', function (e) {
        e.preventDefault();
        if ($("#form_DentalSurgeryEdit").valid()) {
            $('#btn_Update').removeClass("btn btn-sm btn-success");
            $('#btn_Update').addClass("btn btn-sm btn-success btn-loaders btn-icon");
            $('#btn_Update').html("Updating the Record....");

            var _dateInsert = {
                "pdsId": 0,
                "pds_appId": @emr.appId,
                "pds_1": $("#upds_1").val(),
                "pds_2": $("#upds_2").val(),
                "pds_3": $("#upds_3").val(),
                "pds_4": $("#upds_4").val(),
                "pds_5": $("#upds_5").val(),
                "__RequestVerificationToken": $('input[name="__RequestVerificationToken"]').val()
            }

            console.log(_dateInsert);

            $.ajax({
                type: "Post",
                url: "@Url.Action("EditDentalSurgery", "DentalSurgery", new {area = "ConsentForms" })",
                dataType: 'JSON',
                data: _dateInsert,
                success: function (data) {
                    $('#btn_Update').removeClass("btn btn-sm btn-warning btn-loaders btn-icon");
                    $('#btn_Update').addClass("btn btn-sm btn-warning");
                    $('#btn_Update').html("Save Changes");

                    if (data.isSuccess) {
                        if (data.isEdited) {
                            var alertPlaceholder = document.getElementById("Alert");

                            function alert(e, t) {
                                var l = document.createElement("div");
                                l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" role="alert">' + e +
                                    '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                            }
                            alert("<i class='fe fe-check-circle text-white'></i>  Dental Surgery Consent Form Updated Successfully!", "success");

                            //GetDentalSurgery();
                            Timeout();
                        }
                        else {
                            let html = "<div class='col-12 col-sm-12 col-md-6 d-flex justify-content-center'>" +
                                "<div class='alert alert-warning' role='alert'>" +
                                "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                "<strong>Warning.. Dental Surgery Consent Form already Exists..</strong><br/>" +
                                "</div></div>";
                            $("#Alert1").html(html);
                        }
                    }
                    else {
                        let html = "<div class='col-12 col-sm-12 col-md-6 d-flex justify-content-center'>" +
                        "<div class='alert alert-danger' role='alert'>" +
                        "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                        "<strong>Validation Error.. Please correct before you submit the form!&nbsp;</strong><br/><ul>";

                        $.each(data.message, function (index, value) {
                            html += "<li><small>" + value + "</small><li>";
                            var elem = $("#" + index);
                            if (elem.hasClass("select2-hidden-accessible")) {
                                $("#select2-" + elem.attr("id") + "-container").parent().addClass('error');
                            }
                            else {
                                $(elem).addClass(" is-invalid");
                            }

                            setTimeout(function () {
                                if (elem.hasClass("select2-hidden-accessible")) {
                                    $("#select2-" + elem.attr("id") + "-container").parent().removeClass('error');
                                }
                                else {
                                    $(elem).removeClass("is-invalid");
                                }
                                }, 5000);
                        });

                        html += "</ul></div></div>";

                        $("#error").html(html);
                    }
                },
                error: function (xhr) {
                    $('#btn_Update').removeClass("btn btn-sm btn-warning btn-loaders btn-icon");
                    $('#btn_Update').addClass("btn btn-sm btn-warning");
                    $('#btn_Update').html("Save Changes");
                    Timeout();
                }
            });
        }
        else {
            $('.modal-body').animate({
                scrollTop: ($('.has-error').offset().top - 300)
            }, 2000);
        }
    });
    //#endregion Update Click

        //#region Delete Click
    $('#btn_DeleteForm').on('click', function (e) {
        e.preventDefault();
        $('#btn_DeleteForm').removeClass("btn btn-success");
        $('#btn_DeleteForm').addClass("btn btn-success btn-loaders btn-icon");
        $('#btn_DeleteForm').html("Deleting the Record....");

        $.ajax({
            url: '@Url.Action("DeleteDentalSurgery", "DentalSurgery", new { area = "ConsentForms" })?appId=' + @emr.appId,
            type: "POST",
            dataType: 'JSON',
            success: function (data) {
                $('#btn_DeleteForm').removeClass("btn btn-success btn-loaders btn-icon");
                $('#btn_DeleteForm').addClass("btn btn-warning");
                $('#btn_DeleteForm').html("Delete");
                if (data.isAuthorized) {
                    if (data.success) {
                        var alertPlaceholder = document.getElementById("Alert");
                        function alert(e, t) {
                            var l = document.createElement("div");
                            l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                                '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                        }
                        alert("<i class='fe fe-check-circle text-white'></i> Dental Surgery Consent Form Deleted Successfully!", "success");
                        clearControls();
                        Timeout();
                    }
                    else {
                        let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                            "<div class='alert alert-warning' role='alert'>" +
                            "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                            "<strong>Error!.. Failed to Delete..</strong><br/>" +
                            "</div></div>";
                        $("#error").html(html);
                    }
                }
                else {
                    var alertPlaceholder = document.getElementById("Alert");
                    function alert(e, t) {
                        var l = document.createElement("div");
                        l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                            '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                    }
                    alert("<i class='fe fe-check-circle text-white'></i> You do not have Enough Privileges to Delete this Designation!", "Access Denied!");
                }
            },
            error: function (xhr) {
                $('#btn_DeleteForm').removeClass("btn btn-success btn-loaders btn-icon");
                $('#btn_DeleteForm').addClass("btn btn-Delete");
                $('#btn_DeleteForm').html("Delete");
                Timeout();
            }
        })
    });
//#endregion

    //#region Reset
    $('#btn_Reset').on('click', function (e) {
        e.preventDefault();
        clearControls();
    });
    //#endregion Reset

    //#region Clear Controls
    var clearControls = function () {
        $(".form-control").val("");
        $(".form-control-sm").val("");
        $("#upat_sign,#uwit_sign").attr("src", "");
    }
    //#endregion Clear Controls

    //#region Print
$('#btn_Print').on('click', function (e) {
    e.preventDefault();
    $('#btn_Print').removeClass("btn btn-success");
    $('#btn_Print').addClass("btn btn-success btn-loaders btn-icon");
    $('#btn_Print').html("Printing the Record....");
    $.ajax({
        type: "Get",
        url: "@Url.Action("PrintPDFConsent", "DentalSurgery", new {area = "ConsentForms" })?appId=" + @emr.appId + "&form=DentalSurgery",
        dataType: 'JSON',
        success: function (data) {
            if (data.isAuthorized) {
                if (data.success) {
                    window.location.href = data.message.pdfPath
                }
            }
        },
        error: function (xhr) {
            console.log(xhr);
        }
    });
});
//#endregion Print
     //#region Wacom Tab Signature
 var openWacomTabSignaturePad = function (id) {
         var _data = {
    "patId": @emr.patId,
    "person": id,
    "form": "DentalSurgery",
    "appId": @emr.appId,
    "formname":"Dental Surgery",
    "formlink":"",
    "eSign":""
}
         $.ajax({
             type: "GET",
             url: "@Url.Action("WacomTabSignaturePad", "WacomTabSignaturePad", new { area = "Common" })",
             contentType: "application/json",
             dataType: "html",
             data: _data,
             success: function (response) {
                 $("#signature_pad_body").html(response);
                 $("#signature_pad").modal("show");
             },
             error: function (xhr) {
                 console.log("Error :" + xhr.statusText);
             }
         });
     }
 //#endregion
    //#region Signature
    var openSignaturePad = function (id) {
        var _data = {
            "patId": @emr.patId,
            "person": id,
            "form": "DentalSurgery",
            "appId": @emr.appId,
            "formname":"Dental Surgery",
            "formlink":"",
            "eSign":""
        }
        $.ajax({
            type: "GET",
            url: "@Url.Action("SignaturePad", "SignaturePad", new { area = "Common" })",
            contentType: "application/json",
            dataType: "html",
            data: _data,
            success: function (response) {
                $("#signature_pad_body").html(response);
                $("#signature_pad").modal("show");
            },
            error: function (xhr) {
                console.log("Error :" + xhr.statusText);
            }
        });
    }
    //#endregion Signature

    $('#signature_pad').on('hidden.bs.modal', function () {
        if (localStorage.getItem("sign") != null) {
            GetSignaturename('patient');
            GetSignaturename('witness');
            localStorage.removeItem("sign");
        }
    });

    //#region Get Signature
    var GetSignaturename = function  (person) {
        $.ajax({
            url: '@Url.Action("GetSignature", "SignaturePad", new { area = "Common" })?appId=' + @emr.appId + '&person=' + person + '&form=DentalSurgery',
            type: "GET",
            dataType: "json",
            async: false,
            success: function (response) {
                console.log(response);
                let sign = response[0].psb_sign;
                if (response[0].person == "patient") {
                    $("#upat_sign_box").removeClass("d-none");
                    $("#upat_sign").attr("src", sign);
                }
                if (response[0].person == "witness") {
                    $("#uwit_sign_box").removeClass("d-none");
                    $("#uwit_sign").attr("src", sign);
                }
            },
            error: function (xhr) {
                console.log(xhr);
                alert(xhr);
            }

        });
    };
    //#endregion Get Signature

    //#region Alert Timeout
    function Timeout() {
        window.setTimeout(function () {
            $(".alert").fadeTo(500, 0).slideUp(500, function () {
                $(this).remove();
            });
        }, 4200);
    }
    //#endregion Alert Timeout
</script>



