@using System.Linq;
@using System.Security.Claims;
@using BusinessEntities;
@model BusinessEntities.ConsentForms.BotoxArabic

@{
    var claims = ClaimsPrincipal.Current.Identities.First().Claims.ToList();
    var emp_designation = claims.Where(c => c.Type == ClaimTypes.Role).Select(c => c.Value).SingleOrDefault();
    EMRInfo emr = (EMRInfo)TempData["emr_data"];
    TempData.Keep("emr_data");
}
<form id="form_BotoxArabic" autocomplete="off" name="BotoxArabic" ondrop="return false;" onpaste="return false;" oncut="return false;">
    @Html.AntiForgeryToken()
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12 text-right" dir="rtl">
            <div class="border">
                <div class="col-sm-12 col-md-12 col-lg-12">
                    <div class="row mt-2">
                        <div class="col-sm-12 col-md-6 col-lg-2 mb-2">
                            <div class="form-group mb-3"><label class="form-label text-black text-align-left"> اسم المريض</label></div>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-4">
                            <label class="form-label text-red text-left text-capitalize">@emr.pat_name</label>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-2 mb-2">
                            <div class="form-group mb-3"><label class="form-label text-black"> الهوية الإماراتية</label></div>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-4">
                            <label class="form-label text-red text-left">@emr.pat_emirateid</label>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2 mb-2">
                            <div class="form-group mb-3 text-align-left"><label class="form-label text-black ">رقم الملف</label></div>
                        </div>
                        <div class="col-sm-12 col-md-4 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_code</label>
                        </div>
                        <div class="col-sm-12 col-md-2 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black"> تاريخ الميلاد</label></div>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_dob</label>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2 mb-2">
                            <div class="form-group mb-3"><label class="form-label text-black"> الجنسية</label></div>
                        </div>
                        <div class="col-sm-12 col-md-4 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_nationality</label>
                        </div>
                        <div class="col-sm-12 col-md-2 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black">جنس</label></div>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_gender</label>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black">اسم الطبيب</label></div>
                        </div>
                        <div class="col-sm-12 col-md-4 col-lg-2">
                            <label class="form-label text-red text-left">@emr.doc_name</label>
                        </div>
                        <div class="col-sm-12 col-md-2 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black">تاريخ</label></div>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <label class="form-label text-red text-left">@emr.app_fdate</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row col-sm-12 col-md-12 col-lg-12  mb-5 mt-5 text-justify" dir="rtl">
        <div class="font-weight-semibold"> موافقة  على  (البوتوكس)</div>
        <div>هدف العلاج: هدف هذا العلاج هو تقليل حركة العضلات التي تسبب خطوط التعابير بشكل كبير، مما يحسن مظهر هذه الخطوط. تستخدم هذه العيادة (إدراج العلامة التجارية)</div>
        <div class="font-weight-semibold">الآثار الجانبية الشائعة المرتبطة بالحقن تشمل:</div>
        <div class="col-sm-12 col-md-12 col-lg-4 mb-2 mt-2">
            <ul class="list-group">
                <li class="listunorder" style="border: none;">ألم أو حرقة عند إجراء الحقن</li>
                <li class="listunorder" style="border: none;">تورم موضعي ، أحمرار، حساسية</li>
                <li class="listunorder" style="border: none;">نزيف في مواقع الحقن</li>
            </ul>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-4 mb-2 mt-2">
            <ul class="list-group">
                <li class="listunorder" style="border: none;">كدمات</li>
                <li class="listunorder" style="border: none;">خدر أو حكة في المنطقة بعد الحقن</li>
                <li class="listunorder" style="border: none;"> صداع</li>
            </ul>
        </div>
        <div class="font-weight-semibold">الآثار الجانبية الشائعة المرتبطة بعلاج البوتوكس، نسبة حدوثها : 1%-10% :</div>
        <div class="col-sm-12 col-md-12 col-lg-4 mb-2 mt-2">
            <ul class="list-group">
                <li class="listunorder" style="border: none;">تراجع الجفن (ترهل أو ثقل في الجفن، أحد أو كلا الجفنين)</li>
            </ul>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-4 mb-2 mt-2">
            <ul class="list-group">
                <li class="listunorder" style="border: none;">تراجع الحاجب (ثقل أو انخفاض في الحاجب</li>
            </ul>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-4 mb-2 mt-2">
            <ul class="list-group">
                <li class="listunorder" style="border: none;">ألم في الوجه</li>
            </ul>
        </div>
        <div class="font-weight-semibold">الآثار الجانبية النادرة نسبة حدوثها : 0.1-1%% :</div>
        <div class="col-sm-12 col-md-12 col-lg-4 mb-2 mt-2">
            <ul class="list-group">
                <li class="listunorder" style="border: none;">تورم/ انتفاخ حول العيون</li>
                <li class="listunorder" style="border: none;">غثيان</li>
                <li class="listunorder" style="border: none;">جفاف الفم</li>
            </ul>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-4 mb-2 mt-2">
            <ul class="list-group">
                <li class="listunorder" style="border: none;">تغيير في الإحساس بالجلد، تشنج أو توتر في العضلات في المنطقة المعالجة.</li>
                <li class="listunorder" style="border: none;">ألم في العين، جفاف في العيون، دموع، حساسية للضوء، رؤية غير واضحة، انحراف في العين</li>
                <li class="listunorder" style="border: none;">أعراض شبيهة بأعراض الإنفلونزا</li>
            </ul>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-4 mb-2 mt-2">
            <ul class="list-group">
                <li class="listunorder" style="border: none;">حكة أو جفاف في الجلد</li>
                <li class="listunorder" style="border: none;">قد يتأثر العضلات غير المستهدفة</li>
                <li class="listunorder" style="border: none;">عدوى</li>
            </ul>
        </div>
        <div class="font-weight-semibold">تم أيضًا الإبلاغ عن</div>
        <div class="col-sm-12 col-md-12 col-lg-4 mb-2 mt-2">
            <ul class="list-group">
                <li class="listunorder" style="border: none;">حمى.</li>
            </ul>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-4 mb-2 mt-2">
            <ul class="list-group">
                <li class="listunorder" style="border: none;">طنين</li>
            </ul>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-4 mb-2 mt-2">
            <ul class="list-group">
                <li class="listunorder" style="border: none;">طفح جلدي</li>
            </ul>
        </div>
        <p>هذه القائمة غير شاملة، يمكنك طلب نسخة من ورقة المعلومات للمريض في الحزمة، أو التحقق من ملخص الخصائص الطبية عبر الإنترنت.</p>
        <p>قد تحدث أي تفاعلات سلبية عادة في غضون أيام قليلة من العلاج. آثار العلاج بالبوتكس غير قابلة للعكس ومن المتوقع أن تكون طابعًا مؤقتًا وتتلاشى عادة تلقائيًا في غضون أسابيع. في حالات نادرة، قد تستمر الأعراض لعدة أشهر.</p>
        <p>	أوافق على مشاركة سجلاتي الطبية مع الأطباء المختصين المناسبين.</p>
        <p>	أفهم أنه يتم التقاط الصور كجزء من سجلي الطبي.</p>
        <p>	في بعض الأحيان، يكون من المفيد مشاركة صور نتائج العلاج الخاصة بنا. أوافق على نشر الصور للأغراض التالية:</p>
        <p>	لأغراض التعليم والتدريب مع الأطباء المحترفين.</p>
        <p>	لأغراض تعليمية مع بعض المرضى المحددين خلال الاستشارة. </p>
        <p>	لأغراض تعليمية/ترويجية في محفظة العيادة المعروضة لبعض أفراد الجمهور المحددين. </p>
        <p>	لأغراض تعليمية/ترويجية على موقع العيادة على الإنترنت. </p>
        <p>لأغراض تعليمية في بعض الفعاليات العامة.</p>
        <p>	أفهم أنه لا يتم دفع أي رسوم لي أو لأي شخص آخر عن هذه المواد سواء في الوقت الحالي أو في أي وقت مستقبلي.</p>
        <p>	أؤكد أن الغرض الذي ستستخدم فيه المواد قد تم شرحه لي بطريقة فهمتها.</p>
        <p>لقد قمت بأخذ الوقت الكافي لقراءة:</p>
        <p> نموذج موافقة العلاج بالبوتوكس</p>
        <p>معلومات العلاج بالبوتوكس</p>
        <p>شروط وأحكام العيادة</p>
        <p>أقبل شروط وأحكام العيادة</p>
        <p>أنا راضٍ عن أن تم شرح العلاج البوتوكس بشكل شامل وأن الأخطار والآثار الجانبية المحتملة المرتبطة بهذا العلاج تمت مناقشتها بشكل كامل وفهمتها. لقد أخذت الوقت الكافي لمعالجة والتفكير في المعلومات المقدمة، وتم الإجابة على أي أسئلة كانت لدي برضاي، قبل اتخاذ قرار بالمضي قدمًا في خطة العلاج المتفق عليها.</p>
        <p class="d-flex"><span class="mt-2">لقد تم تنبيهي بأن تكلفة العلاج ستكون</span> @Html.TextBoxFor(m => m.baf_1, new { @class = "form-control col-md-3 mb-2 me-1", @id = "baf_1" }) </p>
        <p> وأقبل شروط الدفع وفقًا لسياسة العيادة (الشروط والأحكام).</p>

    </div>

    <div class="row mt-2" dir="rtl">
        <div class="col-sm-12 col-md-12 col-lg-12 text-center table-responsive">
            <table class="table table-bordered table-condensed">
                <tr>
                    <td colspan="2" class="font-weight-bold text-danger fs-18" width="100%">
                        قم بالتوقيع هنا فقط إذا تمت الموافقة على جميع الأسئلة
                    </td>
                </tr>
                <tr>
                    <td width="50%">
                        <div id="pat_sign_box">
                            <img alt="stamp" id="pat_sign" class="avatar avatar-xl bsquare" />
                        </div>
                    </td>
                    <td width="50%">
                        <img alt="stamp" src="@emr.doc_sign" id="doc_sign" class="avatar avatar-xl bsquare" />
                    </td>
                </tr>
                <tr>
                    <td width="50%">
                        <label class="form-label text-red text-left text-capitalize">@emr.pat_name&nbsp;</label>
                        <span class="font-weight-semibold"> اسم المريض</span>
                        <br /><br />
                        <label class="form-label text-red text-left" id="psb_date_patient" name="">&nbsp;</label>
                        <span class="font-weight-semibold">التاريخ	</span>
                    </td>
                    <td width="50%">
                        <label class="form-label text-red text-left text-capitalize">@emr.doc_name&nbsp;</label>
                        <span class="font-weight-semibold"> اسم الطبيب</span>
                        <br /><br />
                        <label class="form-label text-red text-left" id="baf_date_doctor"></label>
                        <span class="font-weight-semibold">التاريخ	</span>
                    </td>
                </tr>
                <tr>
                    <td class="font-weight-semibold text-blue" width="50%">
                        توقيع المريض
                        <br />
                        <div class="btn-group mr-2">
                            <div class="dropdown">
                                <button type="button" class="btn-sm btn-secondary me-2 mb-2 dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="fa fa-paint-brush">&nbsp;&nbsp;</i> Patient
                                </button>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" onclick="openSignaturePad('patient')">Tab</a>
                                    <a class="dropdown-item" onclick="openWacomTabSignaturePad('patient')">Wacom Tab</a>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="font-weight-semibold text-blue text-center" width="50%">الطبيب </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="row mt-2">
        <div class="col-sm-12 col-md-12 col-lg-12 text-center">
            <div class="btn-list btn-animation">
                <button type="submit" class="btn btn-success btn-sm" id="btn_Insert">Save</button>
                <button type="button" class="btn btn-outline-dark btn-sm" id="btn_Reset_C">Reset</button>
                <button type="button" class="btn btn-danger btn-sm d-none" id="btn_Delete">Delete</button>
                <button type="button" class="btn btn-sm btn-outline-success d-none" id="btn_Print_C"> Download/Print </button>
            </div>
        </div>
    </div>
</form>

<script type="text/javascript">
    $(function () {
        if ("@emp_designation.ToString()" === "Super Administrator") {
            $("#btn_Insert").show();
        }
        else {
            if ("@emr.set_emr_lock" == "NoLock") {
                $("#btn_Insert").show();
            }
            else {
                if ("@emr.app_ae_date" >= "@emr.today") {
                    $("#btn_Insert").show();
                }
                else {
                    $("#btn_Insert").hide();
                }
            }
        }

        validate();

    });

    //#region Validation Initialization
    var validate = function () {
        $("#form_BotoxArabic").validate({
            rules: {
                baf_1: {
                    required: true
                },
            },
            messages: {
                baf_1: {
                    required: "Please Enter Treatment"
                },
            },
            highlight: function (element) {
                var elem = $(element);
                $(element).parent().addClass('has-error');
                //error_timeout(elem.attr("id"));
            },
            unhighlight: function (element) {
                var elem = $(element);
                $(element).parent().removeClass('has-error');
            },
            errorElement: 'span',
            errorClass: 'text-danger fw-bold',
            errorPlacement: function (error, element) {
                var elem = $(element);
                if (element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                } else {
                    error.insertAfter(element);
                }
            }
        });
    }
    //#endregion

    //#region Add  Click
    $('#btn_Insert').on('click', function (e) {
        e.preventDefault();
        if ($("#form_BotoxArabic").valid()) {
            $('#btn_Insert').removeClass("btn btn-sm btn-success");
            $('#btn_Insert').addClass("btn btn-sm btn-success btn-loaders btn-icon");
            $('#btn_Insert').html("Saving the Record....");

            var _dateInsert = {
                "bafId": 0,
                "baf_appId": @emr.appId,
                "baf_1": $("#baf_1").val(),
                "__RequestVerificationToken": $('input[name="__RequestVerificationToken"]').val()
            }
            console.log(_dateInsert);
            $.ajax({
                type: "Post",
                url: "@Url.Action("InsertBotoxArabic", "BotoxArabic", new {area = "ConsentForms" })",
                dataType: 'JSON',
                data: _dateInsert,
                success: function (data) {
                    $('#btn_Insert').removeClass("btn btn-sm btn-success btn-loaders btn-icon");
                    $('#btn_Insert').addClass("btn btn-sm btn-success");
                    $('#btn_Insert').html("Save Changes");

                    if (data.isSuccess) {
                        if (data.isInserted) {
                            GetBotoxArabicInfo();
                            var alertPlaceholder = document.getElementById("Alert");

                            function alert(e, t) {
                                var l = document.createElement("div");
                                l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" role="alert">' + e +
                                    '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                            }
                            alert("<i class='fe fe-check-circle text-white'></i> Botox Arabic Form Saved Successfully!", "success");
                            Timeout();
                            $("#btn_Delete").removeClass("d-none");
                            $("#btn_Print").removeClass("d-none");
                        }
                        else {
                            let html = "<div class='col-12 col-sm-12 col-md-6 d-flex justify-content-center'>" +
                                "<div class='alert alert-warning' role='alert'>" +
                                "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                "<strong>Warning..Botox Arabic Form already Exists..</strong><br/>" +
                                "</div></div>";
                            $("#Alert").html(html);
                        }
                    }
                    else {
                        let html = "<div class='col-12 col-sm-12 col-md-6 d-flex justify-content-center'>" +
                        "<div class='alert alert-danger' role='alert'>" +
                        "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                        "<strong>Validation Error.. Please correct before you submit the form!&nbsp;</strong><br/><ul>";

                        $.each(data.message, function (index, value) {
                            html += "<li><small>" + value + "</small><li>";
                            var elem = $("#" + index);
                            if (elem.hasClass("select2-hidden-accessible")) {
                                $("#select2-" + elem.attr("id") + "-container").parent().addClass('error');
                            }
                            else {
                                $(elem).addClass(" is-invalid");
                            }

                            setTimeout(function () {
                                if (elem.hasClass("select2-hidden-accessible")) {
                                    $("#select2-" + elem.attr("id") + "-container").parent().removeClass('error');
                                }
                                else {
                                    $(elem).removeClass("is-invalid");
                                }
                                }, 5000);
                        });

                        html += "</ul></div></div>";

                        $("#error").html(html);
                    }
                },
                error: function (xhr) {
                    $('#btn_Insert').removeClass("btn btn-sm btn-success btn-loaders btn-icon");
                    $('#btn_Insert').addClass("btn btn-sm btn-warning");
                    $('#btn_Insert').html("Add");
                    Timeout();
                }
            });
        }
        else {
            $('.modal-body').animate({
                scrollTop: ($('.has-error').offset().top - 300)
            }, 2000);
        }
    });
    //#endregion Add Click

    //#region Delete Click
    $('#btn_Delete').on('click', function (e) {
        e.preventDefault();
        $('#btn_Delete').removeClass("btn btn-success");
        $('#btn_Delete').addClass("btn btn-success btn-loaders btn-icon");
        $('#btn_Delete').html("Deleting the Record....");

        $.ajax({
            url: '@Url.Action("DeleteBotoxArabic", "BotoxArabic", new { area = "ConsentForms" })?appId=' + @emr.appId,
            type: "POST",
            dataType: 'JSON',
            success: function (data) {
                $('#btn_Delete').removeClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Delete').addClass("btn btn-warning");
                $('#btn_Delete').html("Delete");
                if (data.isAuthorized) {
                    if (data.success) {
                        var alertPlaceholder = document.getElementById("Alert");
                        function alert(e, t) {
                            var l = document.createElement("div");
                            l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                                '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                        }
                        alert("<i class='fe fe-check-circle text-white'></i>Botox Arabic Form Deleted Successfully!", "success");
                        clearControls();
                        GetBotoxArabic();

                        $('#btn_Delete').addClass("d-none");
                        $("#pat_sign_box").addClass("d-none");
                        $("#wit_sign_box").addClass("d-none");
                    }
                    else {
                        let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                            "<div class='alert alert-warning' role='alert'>" +
                            "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                            "<strong>Error!.. Failed to Delete..</strong><br/>" +
                            "</div></div>";
                        $("#error").html(html);
                    }
                }
                else {
                    var alertPlaceholder = document.getElementById("Alert");
                    function alert(e, t) {
                        var l = document.createElement("div");
                        l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                            '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                    }
                    alert("<i class='fe fe-check-circle text-white'></i> You do not have Enough Privileges to Delete this Designation!", "Access Denied!");
                }
            },
            error: function (xhr) {
                $('#btn_Delete').removeClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Delete').addClass("btn btn-Delete");
                $('#btn_Delete').html("Delete");
                Timeout();
            }
        })
    });
//#endregion

//#region Print
    $('#btn_Print_C').on('click', function (e) {
    e.preventDefault();
        $('#btn_Print_C').removeClass("btn btn-success");
        $('#btn_Print_C').addClass("btn btn-success btn-loaders btn-icon");
        $('#btn_Print_C').html("Printing the Record....");
    $.ajax({
        type: "Get",
        url: "@Url.Action("PrintPDFConsent", "BotoxArabic", new {area = "ConsentForms" })?appId=" + @emr.appId + "&form=BotoxArabic",
        dataType: 'JSON',
        success: function (data) {
            console.log(data);
            if (data.isAuthorized) {
                if (data.success) {
                    window.location.href = data.message.pdfPath
                }
            }
        },
        error: function (xhr) {
            console.log(xhr);
        }
    });
});
//#endregion Print

    //#region Reset
    $('#btn_Reset_C').on('click', function (e) {
        e.preventDefault();
        clearControls();
    });
    //#endregion Reset

    //#region Clear Controls
    var clearControls = function () {
        $(".form-control").val("");
        $(".form-control").val("");
        $("#pat_sign,#wit_sign").attr("src", "");

    }
    //#endregion Clear Controls

    //#region Wacom Tab Signature
    var openWacomTabSignaturePad = function (id) {
       var _data = {
            "patId": @emr.patId,
            "person": id,
           "form": "BotoxArabic",
            "appId": @emr.appId,
           "formname":"Botox Arabic",
            "formlink":"",
            "eSign":""
        }
        $.ajax({
            type: "GET",
            url: "@Url.Action("WacomTabSignaturePad", "WacomTabSignaturePad", new { area = "Common" })",
            contentType: "application/json",
            dataType: "html",
            data: _data,
            success: function (response) {
                $("#signature_pad_body").html(response);
                $("#signature_pad").modal("show");
            },
            error: function (xhr) {
                console.log("Error :" + xhr.statusText);
            }
        });
    }
//#endregion

    //#region Signature
    var openSignaturePad = function (id) {
        var _data = {
            "patId": @emr.patId,
            "person": id,
            "form": "BotoxArabic",
            "appId": @emr.appId,
            "formname":"Botox Arabic",
            "formlink":"",
            "eSign":""
        }
        $.ajax({
            type: "GET",
            url: "@Url.Action("SignaturePad", "SignaturePad", new { area = "Common" })",
            contentType: "application/json",
            dataType: "html",
            data: _data,
            success: function (response) {
                $("#signature_pad_body").html(response);
                $("#signature_pad").modal("show");
            },
            error: function (xhr) {
                console.log("Error :" + xhr.statusText);
            }
        });
    }
    //#endregion Signature

    $('#signature_pad').on('hidden.bs.modal', function () {
        if (localStorage.getItem("sign") != null) {

            GetSignaturename('patient');
            GetSignaturename('witness');
            localStorage.removeItem("sign");
        }
    });

    //#region Get Signature
    var GetSignaturename = function  (person) {
        $.ajax({
            url: '@Url.Action("GetSignature", "SignaturePad", new { area = "Common" })?appId=' + @emr.appId + '&person=' + person + '&form=BotoxArabic',
            type: "GET",
            dataType: "json",
            async: false,
            success: function (response) {
                console.log(response);
                let sign = response[0].psb_sign;
                var date = moment(response[0].psb_date_modified).format("DD-MM-YYYY");

                if (response[0].person == "patient") {
                    $("#pat_sign_box").removeClass("d-none");
                    $("#psb_date_patient").html(date);
                    $("#pat_sign").attr("src", sign);
                }
                if (response[0].person == "witness") {
                    $("#wit_sign_box").removeClass("d-none");
                    $("#wit_sign").attr("src", sign);
                    $("#psb_date_witness").html(date);
                }
            },
            error: function (xhr) {
                console.log(xhr);
                alert(xhr);
            }

        });
    };
    //#endregion Get Signature

    //#region Alert Timeout
    function Timeout() {
        window.setTimeout(function () {
            $(".alert").fadeTo(500, 0).slideUp(500, function () {
                $(this).remove();
            });
        }, 4200);
    }
    //#endregion Alert Timeout

</script>