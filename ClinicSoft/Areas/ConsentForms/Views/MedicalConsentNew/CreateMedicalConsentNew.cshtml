@using System.Linq;
@using System.Security.Claims;
@using BusinessEntities;
@model BusinessEntities.ConsentForms.MedicalConsentNew

@{
    var claims = ClaimsPrincipal.Current.Identities.First().Claims.ToList();
    var emp_designation = claims.Where(c => c.Type == ClaimTypes.Role).Select(c => c.Value).SingleOrDefault();
    EMRInfo emr = (EMRInfo)TempData["emr_data"];
    TempData.Keep("emr_data");
}

<form id="form_MedicalConsentNew" autocomplete="off" name="MedicalConsentNew" ondrop="return false;" onpaste="return false;" oncut="return false;">
    @Html.AntiForgeryToken()
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <div class="border">
                <div class="col-sm-12 col-md-12 col-lg-12">
                    <div class="row mt-2">
                        <div class="col-sm-12 col-md-6 col-lg-2 mb-2">
                            <div class="form-group mb-3"><label class="form-label text-black text-align-left"> Patient Name</label></div>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-4">
                            <label class="form-label text-red text-left text-capitalize">@emr.pat_name</label>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-2 mb-2">
                            <div class="form-group mb-3"><label class="form-label text-black"> Emirates ID</label></div>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-4">
                            <label class="form-label text-red text-left">@emr.pat_emirateid</label>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2 mb-2">
                            <div class="form-group mb-3 text-align-left"><label class="form-label text-black ">File No</label></div>
                        </div>
                        <div class="col-sm-12 col-md-4 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_code</label>
                        </div>
                        <div class="col-sm-12 col-md-2 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black"> DOB</label></div>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_dob</label>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2 mb-2">
                            <div class="form-group mb-3"><label class="form-label text-black"> Nationality</label></div>
                        </div>
                        <div class="col-sm-12 col-md-4 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_nationality</label>
                        </div>
                        <div class="col-sm-12 col-md-2 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black">Gender</label></div>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_gender</label>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black">Doctor's Name</label></div>
                        </div>
                        <div class="col-sm-12 col-md-4 col-lg-2">
                            <label class="form-label text-red text-left">@emr.doc_name</label>
                        </div>
                        <div class="col-sm-12 col-md-2 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black">Date</label></div>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <label class="form-label text-red text-left">@emr.app_fdate</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mb-5 mt-5 text-justify">
        <div class="col-sm-12 col-md-12 col-lg-6">
            <p>
                I, the undersigned, do hereby authorise the <label class="text-red">@emr.ic_name</label> to:
            </p>
            <ul style="list-style-type: disc" class="ms-5">
                <li>
                    Have access to and take copies of all my files and records at any time relating to any healthcare services provided to me for services rendered under my <label class="text-red">@emr.ic_name</label> card;
                </li>
                <li>
                    Disclose my personal information and information related to my medical files and records to third parties for reasons related to insurance including but not limited to the processing of my medical claims, research/statistical purposes or to prevent /control fraudulent or improper claims;
                </li>
                <li>
                    Consult with and/or require me to attend a second opinion consultation or case management review with regard to the coverage of certain benefits as per my health insurance coverage.
                </li>
            </ul>
            <p>
                This consent is valid at any healthcare provider, including but not limited to hospitals,medical centres, clinics, laboratories, diagnostic centres, rehabilitation centres, home nursing and pharmacies.
            </p>
            <p>
                <label class="text-red">@emr.ic_name</label> will ensure the confidentiality of all information it receives in relation to this consent as required by the UAE law.
            </p>
        </div>

        <div class="col-sm-12 col-md-12 col-lg-6 fs-14" dir="rtl">
            <p>
                أنا الموقع أدناه، أفوض <label class="text-red">@emr.ic_name</label> للقيام بما يلي:
            </p>
            <ul style="list-style-type: disc" class="me-5">
                <li>
                    الوصول إلى جميع ملفاتي وسجلاتي وأخذ نسخ منها في أي وقت فيما يتعلق بأي خدمات رعاية صحية مقدمة لي مقابل الخدمات المقدمة بموجب بطاقة <label class="text-red">@emr.ic_name</label> الخاصة بي؛
                </li>
                <li>
                    الكشف عن معلوماتي الشخصية والمعلومات المتعلقة بملفاتي وسجلاتي الطبية لأطراف ثالثة لأسباب تتعلق بالتأمين بما في ذلك، على سبيل المثال لا الحصر، معالجة مطالباتي الطبية أو الأغراض البحثية/الإحصائية أو لمنع/مكافحة المطالبات الاحتيالية أو غير السليمة؛
                </li>
                <li>
                    التشاور مع و/أو مطالبتي بحضور استشارة الرأي الثاني أو مراجعة إدارة الحالة فيما يتعلق بتغطية مزايا معينة وفقًا لتغطية التأمين الصحي الخاص بي.
                </li>
            </ul>
            <p>
                هذه الموافقة صالحة في أي مقدم رعاية صحية، بما في ذلك على سبيل المثال لا الحصر المستشفيات والمراكز الطبية والعيادات والمختبرات ومراكز التشخيص ومراكز إعادة التأهيل والتمريض المنزلي والصيدليات.
            </p>
            <p>
                ستضمن شركة <label class="text-red">@emr.ic_name</label> سرية جميع المعلومات التي تتلقاها فيما يتعلق بهذه الموافقة وفقًا لما يقتضيه قانون دولة الإمارات العربية المتحدة.
            </p>
        </div>

    </div>
    <div class="row mt-2">
        <div class="col-sm-12 col-md-12 col-lg-12 text-center table-responsive">
            <table class="table table-bordered table-condensed">
                <tr>
                    <td width="33%">
                        Patient Signature:
                    </td>
                    <td width="34%">
                        <div id="pat_sign_box" class="d-none">
                            <img alt="stamp" id="pat_sign" class="avatar avatar-xl bsquare" />
                        </div>
                        <br />
                        <div class="btn-group mr-2">
                            <div class="dropdown">
                                <button type="button" class="btn-sm btn-secondary me-2 mb-2 dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="fa fa-paint-brush">&nbsp;&nbsp;</i> Patient
                                </button>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" onclick="openSignaturePad('patient')">Tab</a>
                                    <a class="dropdown-item" onclick="openWacomTabSignaturePad('patient')">Wacom Tab</a>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td width="33%">
                        :توقيع المريض
                    </td>
                </tr>
                <tr>
                    <td width="33%">
                        Name:
                    </td>
                    <td width="34%">
                        <label class="form-label text-red text-left text-capitalize">@emr.pat_name&nbsp;</label>
                    </td>
                    <td width="33%">
                        :اسم
                    </td>
                </tr>
                <tr>
                    <td width="33%">
                        Relationship <br />(If signing on behalf of a minor or an incapacitated member):
                    </td>
                    <td width="34%">
                        @Html.TextBoxFor(m => m.mct_1, new { @class = "form-control form-control-sm", style = "text-align:center", @id = "mct_1" })
                    </td>
                    <td width="33%">
                        : العلاقة <br />(في حالة التوقيع نيابة عن عضو قاصر أو عاجز)
                    </td>
                </tr>
                <tr>
                    <td width="33%">
                        Emirates ID No:
                    </td>
                    <td width="34%">
                        <label class="form-label text-red text-left">@emr.pat_emirateid&nbsp;</label>
                    </td>
                    <td width="33%">
                        : رقم الهوية الإماراتية
                    </td>
                </tr>
                <tr>
                    <td width="33%">
                        Daman/Thiqa ID No:
                    </td>
                    <td width="34%">
                        <label class="form-label text-red text-left">@emr.icId&nbsp;</label>
                    </td>
                    <td width="33%">
                        : رقم هوية الضمان/ثقة
                    </td>
                </tr>
                <tr>
                    <td width="33%">
                        Date:
                    </td>
                    <td width="34%">
                        <label class="form-label text-red text-left">@emr.app_fdate&nbsp;</label>
                    </td>
                    <td width="33%">
                        : تاريخ
                    </td>
                </tr>
                <tr>
                    <td width="33%">
                        Mobile No:
                    </td>
                    <td width="34%">
                        <label class="form-label text-red text-left">@emr.pat_mob&nbsp;</label>
                    </td>
                    <td width="33%">
                        : رقم المحمول
                    </td>
                </tr>
                <tr>
                    <td width="100%" colspan="3">
                        @*<img width="100%" src="~/images/mr_mc_a77.jpg" />*@
                        <img src="~/images/header_images/mr_mc_a77.jpg" style="width:100%" />
                    </td>
                </tr>
                <tr>
                    <td width="33%">
                        Recipient Name:
                    </td>
                    <td width="34%">
                        @Html.TextBoxFor(m => m.mct_2, new { @class = "form-control form-control-sm", style = "text-align:center", @id = "mct_2" })
                    </td>
                    <td width="33%">
                        : اسم المستلم
                    </td>
                </tr>
                <tr>
                    <td width="33%">
                        Position:
                    </td>
                    <td width="34%">
                        @Html.TextBoxFor(m => m.mct_3, new { @class = "form-control form-control-sm", style = "text-align:center", @id = "mct_3" })
                    </td>
                    <td width="33%">
                        : موضع
                    </td>
                </tr>
                <tr>
                    <td width="33%">
                        Signature:
                    </td>
                    <td class="font-weight-semibold text-blue" width="33%">
                        <div id="wit_sign_box" class="d-none">
                            <img alt="stamp" id="wit_sign" class="avatar avatar-xl bsquare" />
                        </div>
                        <br />
                        <div class="btn-group mr-2">
                            <div class="dropdown">
                                <button type="button" class="btn-sm btn-secondary me-2 mb-2 dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="fa fa-paint-brush">&nbsp;&nbsp;</i> witness
                                </button>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" onclick="openSignaturePad('witness')">Tab</a>
                                    <a class="dropdown-item" onclick="openWacomTabSignaturePad('witness')">Wacom Tab</a>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td width="33%">
                        : إمضاء
                    </td>
                </tr>
                <tr>
                    <td width="33%">
                        Date:
                    </td>
                    <td width="34%">
                        <label class="form-label text-red text-left">@emr.app_fdate&nbsp;</label>
                    </td>
                    <td width="33%">
                        : تاريخ
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div class="row mt-2">
        <div class="col-sm-12 col-md-12 col-lg-12 text-center">
            <div class="btn-list btn-animation">
                <button type="submit" class="btn btn-success btn-sm" id="btn_Insert">Save</button>
                <button type="button" class="btn btn-outline-dark btn-sm" id="btn_Reset">Reset</button>
                <button type="button" class="btn btn-danger btn-sm d-none" id="btn_Delete">Delete</button>
                <button type="button" class="btn btn-sm btn-outline-success d-none" id="btn_Print"> Download/Print </button>
            </div>
        </div>
    </div>
</form>

<script type="text/javascript">
    $(function () {
        if ("@emp_designation.ToString()" === "Super Administrator") {
            $("#btn_Insert").show();
        }
        else {
            if ("@emr.set_emr_lock" == "NoLock") {
                $("#btn_Insert").show();
            }
            else {
                if ("@emr.app_ae_date" >= "@emr.today") {
                    $("#btn_Insert").show();
                }
                else {
                    $("#btn_Insert").hide();
                }
            }
        }
        validate();
    });

    //#region Validation Initialization
    var validate = function () {
        $("#form_MedicalConsentNew").validate({
            rules: {
                mct_2: {
                    required: true
                },
                mct_3: {
                    required: true
                },

            },
            messages: {
                mct_2: {
                    required: "Please Enter Recipient Name"
                },
                mct_3: {
                    required: "Please Enter Position"
                },

            },
            highlight: function (element) {
                var elem = $(element);
                $(element).parent().addClass('has-error');
                //error_timeout(elem.attr("id"));
            },
            unhighlight: function (element) {
                var elem = $(element);
                $(element).parent().removeClass('has-error');
            },
            errorElement: 'span',
            errorClass: 'text-danger fw-bold',
            errorPlacement: function (error, element) {
                var elem = $(element);
                if (element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                } else {
                    error.insertAfter(element);
                }
            }
        });
        //$('#ads_contact').keypress(function (e) {
        //    var charCode = (e.which) ? e.which : e.keyCode
        //    var inputValue = $(this).val() + String.fromCharCode(charCode);

        //    if (String.fromCharCode(charCode).match(/[^0-9.]/g)) {
        //        return false;
        //    }
        //});
        //$('#ads_visit').keypress(function (e) {
        //    var charCode = (e.which) ? e.which : e.keyCode
        //    if (String.fromCharCode(charCode).match(/[^0-9./-]/g)) {
        //        return false;

        //    }
        //    else {
        //        if (e.target.value.length >= 18)
        //            return false;
        //    }
        //});

    }


    //#region Add  Click
    $('#btn_Insert').on('click', function (e) {
        e.preventDefault();
        if ($("#form_MedicalConsentNew").valid()) {
            $('#btn_Insert').removeClass("btn btn-sm btn-success");
            $('#btn_Insert').addClass("btn btn-sm btn-success btn-loaders btn-icon");
            $('#btn_Insert').html("Saving the Record....");

            var _dateInsert = {
                "mctId": 0,
                "mct_appId": @emr.appId,
                "mct_1": $("#mct_1").val(),
                "mct_2": $("#mct_2").val(),
                "mct_3": $("#mct_3").val(),

                //"icc_status": "Active",
                "__RequestVerificationToken": $('input[name="__RequestVerificationToken"]').val()
            }

            $.ajax({
                type: "Post",
                url: "@Url.Action("InsertMedicalConsentNew", "MedicalConsentNew", new {area = "ConsentForms" })",
                dataType: 'JSON',
                data: _dateInsert,
                success: function (data) {
                    $('#btn_Insert').removeClass("btn btn-sm btn-success btn-loaders btn-icon");
                    $('#btn_Insert').addClass("btn btn-sm btn-success");
                    $('#btn_Insert').html("Save Changes");

                    if (data.isSuccess) {
                        if (data.isInserted) {
                            var alertPlaceholder = document.getElementById("Alert");

                            function alert(e, t) {
                                var l = document.createElement("div");
                                l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" role="alert">' + e +
                                    '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                            }
                            alert("<i class='fe fe-check-circle text-white'></i>  Medical Consent New Consent Form Saved Successfully!", "success");
                            Timeout();
                            $("#btn_Delete").removeClass("d-none");
                            $("#btn_Print").removeClass("d-none");
                        }
                        else {
                            let html = "<div class='col-12 col-sm-12 col-md-6 d-flex justify-content-center'>" +
                                "<div class='alert alert-warning' role='alert'>" +
                                "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                "<strong>Warning.. Medical Consent New Consent Form already Exists..</strong><br/>" +
                                "</div></div>";
                            $("#Alert").html(html);
                        }
                    }
                    else {
                        let html = "<div class='col-12 col-sm-12 col-md-6 d-flex justify-content-center'>" +
                        "<div class='alert alert-danger' role='alert'>" +
                        "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                        "<strong>Validation Error.. Please correct before you submit the form!&nbsp;</strong><br/><ul>";

                        $.each(data.message, function (index, value) {
                            html += "<li><small>" + value + "</small><li>";
                            var elem = $("#" + index);
                            if (elem.hasClass("select2-hidden-accessible")) {
                                $("#select2-" + elem.attr("id") + "-container").parent().addClass('error');
                            }
                            else {
                                $(elem).addClass(" is-invalid");
                            }

                            setTimeout(function () {
                                if (elem.hasClass("select2-hidden-accessible")) {
                                    $("#select2-" + elem.attr("id") + "-container").parent().removeClass('error');
                                }
                                else {
                                    $(elem).removeClass("is-invalid");
                                }
                                }, 5000);
                        });

                        html += "</ul></div></div>";

                        $("#error").html(html);
                    }
                },
                error: function (xhr) {
                    $('#btn_Insert').removeClass("btn btn-sm btn-success btn-loaders btn-icon");
                    $('#btn_Insert').addClass("btn btn-sm btn-warning");
                    $('#btn_Insert').html("Add");
                    Timeout();
                }
            });
        }
        else {
            $('.modal-body').animate({
                scrollTop: ($('.has-error').offset().top - 300)
            }, 2000);
        }
    });
    //#endregion Add Click

    //#region Delete Click
    $('#btn_Delete').on('click', function (e) {
        e.preventDefault();
        $('#btn_Delete').removeClass("btn btn-success");
        $('#btn_Delete').addClass("btn btn-success btn-loaders btn-icon");
        $('#btn_Delete').html("Deleting the Record....");

        $.ajax({
            url: '@Url.Action("DeleteMedicalConsentNew", "MedicalConsentNew", new { area = "ConsentForms" })?appId=' + @emr.appId,
            type: "POST",
            dataType: 'JSON',
            success: function (data) {
                $('#btn_Delete').removeClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Delete').addClass("btn btn-warning");
                $('#btn_Delete').html("Delete");
                if (data.isAuthorized) {
                    if (data.success) {
                        var alertPlaceholder = document.getElementById("Alert");
                        function alert(e, t) {
                            var l = document.createElement("div");
                            l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                                '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                        }
                        alert("<i class='fe fe-check-circle text-white'></i> Medical Consent New Consent Form Deleted Successfully!", "success");
                        clearControls();
                        Timeout();

                        $('#btn_Delete').addClass("d-none");
                        $("#pat_sign_box").addClass("d-none");
                        $("#wit_sign_box").addClass("d-none");
                    }
                    else {
                        let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                            "<div class='alert alert-warning' role='alert'>" +
                            "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                            "<strong>Error!.. Failed to Delete..</strong><br/>" +
                            "</div></div>";
                        $("#error").html(html);
                    }
                }
                else {
                    var alertPlaceholder = document.getElementById("Alert");
                    function alert(e, t) {
                        var l = document.createElement("div");
                        l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                            '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                    }
                    alert("<i class='fe fe-check-circle text-white'></i> You do not have Enough Privileges to Delete this Designation!", "Access Denied!");
                }
            },
            error: function (xhr) {
                $('#btn_Delete').removeClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Delete').addClass("btn btn-Delete");
                $('#btn_Delete').html("Delete");
                Timeout();
            }
        })
    });
//#endregion

//#region Print
$('#btn_Print').on('click', function (e) {
    e.preventDefault();
    $('#btn_Print').removeClass("btn btn-success");
    $('#btn_Print').addClass("btn btn-success btn-loaders btn-icon");
    $('#btn_Print').html("Printing the Record....");
    $.ajax({
        type: "Get",
        url: "@Url.Action("PrintPDFConsent", "MedicalConsentNew", new {area = "ConsentForms" })?appId=" + @emr.appId + "&form=MedicalConsentNew",
        dataType: 'JSON',
        success: function (data) {
            if (data.isAuthorized) {
                if (data.success) {
                    window.location.href = data.message.pdfPath
                }
            }
        },
        error: function (xhr) {
            console.log(xhr);
        }
    });
});
//#endregion Print

    //#region Reset
    $('#btn_Reset').on('click', function (e) {
        e.preventDefault();
        clearControls();
    });
    //#endregion Reset

    //#region Clear Controls
    var clearControls = function () {
        $(".form-control").val("");
        $(".form-control-sm").val("");
        $("#pat_sign,#wit_sign").attr("src", "");

    }
    //#endregion Clear Controls

    //#region Wacom Tab Signature
        var openWacomTabSignaturePad = function (id) {
             var _data = {
                 "patId": @emr.patId,
                 "person": id,
                 "form": "MedicalConsentNew",
                 "appId": @emr.appId,
                 "formname":"MedicalConsent New",
                 "formlink":"",
                 "eSign":""
             }
            $.ajax({
                type: "GET",
                url: "@Url.Action("WacomTabSignaturePad", "WacomTabSignaturePad", new { area = "Common" })",
                contentType: "application/json",
                dataType: "html",
                data: _data,
                success: function (response) {
                    $("#signature_pad_body").html(response);
                    $("#signature_pad").modal("show");
                },
                error: function (xhr) {
                    console.log("Error :" + xhr.statusText);
                }
            });
        }
    //#endregion

    //#region Signature
    var openSignaturePad = function (id) {
        var _data = {
            "patId": @emr.patId,
            "person": id,
            "form": "MedicalConsentNew",
            "appId": @emr.appId,
            "formname":"MedicalConsent New",
            "formlink":"",
            "eSign":""
        }
        $.ajax({
            type: "GET",
            url: "@Url.Action("SignaturePad", "SignaturePad", new { area = "Common" })",
            contentType: "application/json",
            dataType: "html",
            data: _data,
            success: function (response) {
                $("#signature_pad_body").html(response);
                $("#signature_pad").modal("show");
            },
            error: function (xhr) {
                console.log("Error :" + xhr.statusText);
            }
        });
    }
    //#endregion Signature

    $('#signature_pad').on('hidden.bs.modal', function () {
        if (localStorage.getItem("sign") != null) {
            GetSignaturename('patient');
            GetSignaturename('witness');
            localStorage.removeItem("sign");
        }
    });

    //#region Get Signature
    var GetSignaturename = function  (person) {
        $.ajax({
            url: '@Url.Action("GetSignature", "SignaturePad", new { area = "Common" })?appId=' + @emr.appId + '&person=' + person + '&form=MedicalConsentNew',
            type: "GET",
            dataType: "json",
            async: false,
            success: function (response) {
                console.log(response);
                let sign = response[0].psb_sign;
                if (response[0].person == "patient") {
                    $("#pat_sign_box").removeClass("d-none");
                    $("#pat_sign").attr("src", sign);
                }
                if (response[0].person == "witness") {
                    $("#wit_sign_box").removeClass("d-none");
                    $("#wit_sign").attr("src", sign);
                }
            },
            error: function (xhr) {
                console.log(xhr);
                alert(xhr);
            }

        });
    };
    //#endregion Get Signature

    //#region Alert Timeout
    function Timeout() {
        window.setTimeout(function () {
            $(".alert").fadeTo(500, 0).slideUp(500, function () {
                $(this).remove();
            });
        }, 4200);
    }
    //#endregion Alert Timeout

</script>