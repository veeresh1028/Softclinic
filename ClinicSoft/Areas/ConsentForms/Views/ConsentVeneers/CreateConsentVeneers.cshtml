@using System.Linq;
@using System.Security.Claims;
@using BusinessEntities;
@model BusinessEntities.ConcentForms.ConsentVeneers

@{
    var claims = ClaimsPrincipal.Current.Identities.First().Claims.ToList();
    var emp_designation = claims.Where(c => c.Type == ClaimTypes.Role).Select(c => c.Value).SingleOrDefault();
    EMRInfo emr = (EMRInfo)TempData["emr_data"];
    TempData.Keep("emr_data");
}
<form id="form_ConsentVeneers" autocomplete="off" name="ConsentVeneers" ondrop="return false;" onpaste="return false;" oncut="return false;">
    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.cicvId, new { @id = "cicvId", @value = "@Model.cicvId" })
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <div class="border">
                <div class="col-sm-12 col-md-12 col-lg-12">
                    <div class="row mt-2">
                        <div class="col-sm-12 col-md-6 col-lg-2 mb-2">
                            <div class="form-group mb-3"><label class="form-label text-black text-align-left"> Patient Name</label></div>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-4">
                            <label class="form-label text-red text-left text-capitalize">@emr.pat_name</label>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-2 mb-2">
                            <div class="form-group mb-3"><label class="form-label text-black"> Emirates ID</label></div>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-4">
                            <label class="form-label text-red text-left">@emr.pat_emirateid</label>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2 mb-2">
                            <div class="form-group mb-3 text-align-left"><label class="form-label text-black ">File No</label></div>
                        </div>
                        <div class="col-sm-12 col-md-4 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_code</label>
                        </div>
                        <div class="col-sm-12 col-md-2 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black"> DOB</label></div>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_dob</label>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2 mb-2">
                            <div class="form-group mb-3"><label class="form-label text-black"> Nationality</label></div>
                        </div>
                        <div class="col-sm-12 col-md-4 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_nationality</label>
                        </div>
                        <div class="col-sm-12 col-md-2 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black">Gender</label></div>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <label class="form-label text-red text-left">@emr.pat_gender</label>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black">Doctor's Name</label></div>
                        </div>
                        <div class="col-sm-12 col-md-4 col-lg-2">
                            <label class="form-label text-red text-left">@emr.doc_name</label>
                        </div>
                        <div class="col-sm-12 col-md-2 col-lg-2">
                            <div class="form-group mb-3"><label class="form-label text-black">Date</label></div>
                        </div>
                        <div class="col-sm-12 col-md-3 col-lg-2">
                            <label class="form-label text-red text-left">@emr.app_fdate</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row mb-5 mt-5 text-justify">
        <div class="col-sm-12 col-md-6 col-lg-12 mt-2">
            <label class="form-label mb-2 text-red">
                <u>Diagnosis:</u>
                <label class="form-label mb-2 text-danger" id="diagnosis">
                </label>
            </label>
        </div>

        <p class="text-red"> <u>Facts for Consideration</u></p>

        <p>Dental veneers (sometimes called porcelain veneers or dental porcelain laminates) are custom made thin, shells of tooth-colored material.  These shells are bonded to the front of the teeth, changing their color, shape, size or length.</p>

        <p>
            Anterior (front tooth) veneer treatment involves removing less tooth structure than a full crown preparation.  However, the process is irreversible because part of the tooth’s enamel must be removed to provide adequate space to cement the shell, in the majority of cases.
        </p>

        <p>The restoration for a veneer requires two phases: 1) the preparation of the tooth, taking an impression to send to the lab, and 2) the adjustment and cementation of the veneer when esthetics and function have been verified.</p>

        <p class="text-red"><u>Benefits of veneers, not limited to the following:</u></p>

        <p>During the reduction of tooth structure or adjustments done to temporary restorations, it is possible for the tongue, cheek or other oral tissues to be inadvertently abraded or lacerated (cut).</p>
        <p>
            A veneer is typically used for teeth that are discolored, either because of root canal treatment, stains from tetracycline or other drugs, excessive fluoride or the presence of large resin fillings that have discolored the tooth.  Veneers can protect teeth that are worn down, chipped or broken.

        </p>
        <p>A veneer can be used for aesthetic purposes to repair teeth that are misaligned, uneven or irregularly shaped, and to close the space between teeth that have gaps between them.</p>

        <p class="text-red"> <u>Risks of Veneers, Not Limited to the Following:</u></p>

        <p>I understand that preparing a tooth for a veneer will consist of removing the enamel from the surface of the teeth involved.  This preparation may irritate the nerve tissue (called the pulp) in the center of the tooth, leaving my tooth feeling sensitive to heat, cold, or pressure.  Sensitive teeth may require additional treatment including endodontic (root canal) treatment. Minimal preparation (Approx.0.5mm) is usually optional to avoid this but sometimes sensitivity is unavoidable.</p>

        <p>
            I understand that holding my mouth open during treatment may temporily leave my jaw feeling stiff and sore and may make it difficult for me open wide for several days.  This can occasionally be an indication of a further problem.  I must notify your Clinic if this or other concerns arise.

        </p>

        <p>I understand that veneers are usually not repairable should they chip or crack. In this case they need to be replaced or sometimes need for a full coverage crown may be warranted.</p>

        <p>I understand that veneers may not exactly match the colour of my other teeth.  Also, the veneer’s colour cannot be altered once in place.</p>

        <p>I understand that while it is not likely, veneers can dislodge and fall off.  To minimize the chance of this occurring, I should not bite my nails, chew on pencils, ice or other hard objects, or otherwise put parafunctional  pressure on my teeth.  Also, grinding or clenching my teeth may cause the veneer to become dislodged.</p>

        <p>I understand there is a risk of aspirating (inhaling) or swallowing the veneer during treatment.</p>

        <p>I understand that I may receive a local anesthetic and / or other medication.  In rare instances, patients may have a reaction to the anesthetic, which could require emergency medical attention, or find that it reduces their ability to control swallowing. This increase the normal chance of swallowing foreign objects during treatment.  Depending on the anesthesia and medications administered, I may need a designated driver to take me home.  Rarely, temporary or permanent nerve injury can result from an injection.</p>

        <p>I understand that ALL medications have the potential for accompanying risks, side effects and drug interactions.  Therefore, it is critical that I tell my dentist of all medications I am currently taking.</p>

        <p>I understand that every reasonable effort will be made to ensure the success of my treatment.</p>

        <p class="text-red"><u>Alternatives to veneers, are not limited to the following:</u></p>

        <p>
            I understand that depending on the reasons I am choosing to have a veneer placed, alternatives may exist, including orthodontics for tooth alignment.  I have asked my dentist about them and their respective expenses (if applicable).  My questions have been answered to my satisfaction regarding the procedures and their risks, benefits and costs.
        </p>
        <p>I consent to photography, filming, recording, and x-rays of the procedure to be performed for the advancement of implant dentistry, provided my identity is not revealed.</p>

        <p>It is the patient’s responsibility to seek attention from the dentist should any undue or unexpected problems occur.  The patient must diligently follow any and all instructions, including the scheduling and attending all appointments.  I have had the chance to ask questions and express concerns about my dental condition, thetreatment options, and my refusal of treatment. The undersigned provider has answered all my questions and addressed all my concerns. I understand the full scope of the situation and am making an informed decision. </p>

        <p class="text-red"><u>Informed Consent:</u></p>

        <p>
            I have been given the opportunity to ask any questions regarding the nature and purpose of veneers and have received answers to my satisfaction.  I voluntarily assume any and all possible risks, including risk of substantial harm, if any, which may be associated with any phase of this treatment in hopes of obtaining the desired result,
            which may or may not be achieved. The fee (s) (if applicable), for this service have been explained to me and are satisfactory.  By signing this form, I am freely giving my consent to allow and authorize Dr. <label class="text-red mb-0">@emr.doc_name</label>
            and / or his associates to render treatment and administering or any medications and / or anesthetics deemed necessary for my treatment.
        </p>

        <p>
            <div class="custom-controls-stacked">
                <label class="custom-control custom-radio">
                    <input type="radio" class="custom-control-input" name="cicv_1" id="cicv_11" value="Yes">
                    <span class="custom-control-label">I have been given the opportunity to ask questions and give my consent for the proposed treatment as Described above.</span>
                </label>
                <label class="custom-control custom-radio">
                    <input type="radio" class="custom-control-input" name="cicv_1" id="cicv_12" value="No">
                    <span class="custom-control-label">I refuse to give my consent for the proposed treatment(s) as described above and have been explained the potential consequences associated with this refusal.</span>
                </label>
            </div>
        </p>

        <p colspan="3">The selected shade of veneer agreed upon with my dentist is  <label class="text-red">@emr.doc_name</label></p>
    </div>
    <div class="row mt-2">
        <div class="col-sm-12 col-md-12 col-lg-12 text-center table-responsive">
            <table class="table table-bordered table-condensed">
                <tr>
                    <td colspan="3" class="font-weight-bold text-danger fs-18" width="100%">
                        Sign here, only if all of your questions have been answered to your satisfaction

                    </td>
                </tr>

                <tr>
                    <td>
                        <div id="pat_sign_box" class="d-none">
                            <img alt="stamp" id="pat_sign" class="avatar avatar-xl bsquare" />
                        </div>
                    </td>
                    <td>
                        <div id="wit_sign_box" class="d-none">
                            <img alt="stamp" id="wit_sign" class="avatar avatar-xl bsquare" />
                        </div>
                    </td>
                    <td>
                        <img alt="stamp" src="@emr.doc_sign" id="doc_sign" class="avatar avatar-xl bsquare" />
                    </td>
                </tr>
                <tr>
                    <td width="33%">
                        <label class="form-label text-red text-left text-capitalize">@emr.pat_name&nbsp;</label>
                        <span class="font-weight-semibold">Patient Name</span>
                        <br /><br />
                        <label class="form-label text-red text-left">@emr.app_fdate&nbsp;</label>
                        <span class="font-weight-semibold">Date</span>
                    </td>
                    <td width="33%">
                        <label class="form-label text-red text-left">@emr.app_fdate&nbsp;</label>
                        <span class="font-weight-semibold">Date</span>

                    </td>
                    <td width="33%">
                        <label class="form-label text-red text-left">@emr.app_fdate&nbsp;</label>
                        <span class="font-weight-semibold">Date</span>
                    </td>
                </tr>
                <tr>
                    <td class="font-weight-semibold text-blue text-center">
                        Patient Signature
                        <br />
                        <div class="btn-group mr-2">
                            <div class="dropdown">
                                <button type="button" class="btn-sm btn-secondary me-2 mb-2 dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="fa fa-paint-brush">&nbsp;&nbsp;</i> Patient
                                </button>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" onclick="openSignaturePad('patient')">Tab</a>
                                    <a class="dropdown-item" onclick="openWacomTabSignaturePad('patient')">Wacom Tab</a>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="font-weight-semibold text-blue  text-center">
                        Witness Signature
                        <br />
                        <div class="btn-group mr-2">
                            <div class="dropdown">
                                <button type="button" class="btn-sm btn-secondary me-2 mb-2 dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="fa fa-paint-brush">&nbsp;&nbsp;</i> witness
                                </button>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" onclick="openSignaturePad('witness')">Tab</a>
                                    <a class="dropdown-item" onclick="openWacomTabSignaturePad('witness')">Wacom Tab</a>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="font-weight-semibold text-blue text-center">Dentist’s Sign/Stamp</td>
                </tr>
            </table>
        </div>
    </div>

    <div class="row mt-2">
        <div class="col-sm-12 col-md-12 col-lg-12 text-center">
            <div class="btn-list btn-animation">
                <button type="submit" class="btn btn-success btn-sm" id="btn_Insert">Save</button>
                <button type="button" class="btn btn-outline-dark btn-sm" id="btn_Reset">Reset</button>
                <button type="button" class="btn btn-danger btn-sm d-none" id="btn_Delete">Delete</button>
                <button type="button" class="btn btn-sm btn-outline-success d-none" id="btn_Print"> Download/Print </button>
            </div>
        </div>
    </div>
</form>

<script type="text/javascript">
    $(function () {
        if ("@emp_designation.ToString()" === "Super Administrator") {
            $("#btn_Insert").show();
        }
        else {
            if ("@emr.set_emr_lock" == "NoLock") {
                $("#btn_Insert").show();
            }
            else {
                if ("@emr.app_ae_date" >= "@emr.today") {
                    $("#btn_Insert").show();
                }
                else {
                    $("#btn_Insert").hide();
                }
            }
        }

        Get_Patient_Diagnosis();

    });
        //#region Load Get_Patient_Diagnosis
          var Get_Patient_Diagnosis = function () {
        $.ajax({
            type: "GET",
            url: "@Url.Action("Get_Patient_Diagnosis", "ReimbursementForms", new { area = "EMRForms" })?appId=" + "@emr.appId" + "&patId=" + @emr.patId,
            success: function (response) {
                if (response.length > 0) {
                    var str2 = response[0].diag_names;
                    var regex = /(|<([^>]+)>)/ig;
                    $("#diagnosis").text(str2.replace(/(<p>|<\/p>)/g, ""));
                }
            },
            error: function (xhr) {
            console.log(xhr);
            }
        });
    }
//#endregion


    //#region Add  Click
    $('#btn_Insert').on('click', function (e) {
        e.preventDefault();

            $('#btn_Insert').removeClass("btn btn-sm btn-success");
            $('#btn_Insert').addClass("btn btn-sm btn-success btn-loaders btn-icon");
            $('#btn_Insert').html("Saving the Record....");
            //var cicv_1_ = $.map($(':checkbox[name=cicv_1]:checked'), function (n, i) {
            //    return n.value;
            //}).join(',');

        var cicv_1 = "";

        if ($('#cicv_11').prop('checked')) {
            cicv_1 = "Yes";
        }
        else if ($('#cicv_12').prop('checked')) {
            cicv_1 = "No";
        }

            var _dateInsert = {
                "cicvId": 0,
                "cicv_appId": @emr.appId,
                "cicv_1": cicv_1,
                //"cicv_status": "Active",
                "__RequestVerificationToken": $('input[name="__RequestVerificationToken"]').val()
            }



            $.ajax({
                type: "Post",
                url: "@Url.Action("InsertConsentVeneers", "ConsentVeneers", new {area = "ConsentForms" })",
                dataType: 'JSON',
                data: _dateInsert,
                success: function (data) {
                    $('#btn_Insert').removeClass("btn btn-sm btn-success btn-loaders btn-icon");
                    $('#btn_Insert').addClass("btn btn-sm btn-success");
                    $('#btn_Insert').html("Save Changes");

                    if (data.isSuccess) {
                        if (data.isInserted) {
                            var alertPlaceholder = document.getElementById("Alert");

                            function alert(e, t) {
                                var l = document.createElement("div");
                                l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" role="alert">' + e +
                                    '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                            }
                            alert("<i class='fe fe-check-circle text-white'></i> Consent Veneers Consent Form Saved Successfully!", "success");

                            //GetSickLeaveGeneral();
                            Timeout();

                            $("#btn_Delete").removeClass("d-none");
                            $("#btn_Print").removeClass("d-none");
                        }
                        else {
                            let html = "<div class='col-12 col-sm-12 col-md-6 d-flex justify-content-center'>" +
                                "<div class='alert alert-warning' role='alert'>" +
                                "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                "<strong>Warning.. ConsentVeneers Consent Form already Exists..</strong><br/>" +
                                "</div></div>";
                            $("#Alert").html(html);
                        }
                    }
                    else {
                        let html = "<div class='col-12 col-sm-12 col-md-6 d-flex justify-content-center'>" +
                        "<div class='alert alert-danger' role='alert'>" +
                        "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                        "<strong>Validation Error.. Please correct before you submit the form!&nbsp;</strong><br/><ul>";

                        $.each(data.message, function (index, value) {
                            html += "<li><small>" + value + "</small><li>";
                            var elem = $("#" + index);
                            if (elem.hasClass("select2-hidden-accessible")) {
                                $("#select2-" + elem.attr("id") + "-container").parent().addClass('error');
                            }
                            else {
                                $(elem).addClass(" is-invalid");
                            }

                            setTimeout(function () {
                                if (elem.hasClass("select2-hidden-accessible")) {
                                    $("#select2-" + elem.attr("id") + "-container").parent().removeClass('error');
                                }
                                else {
                                    $(elem).removeClass("is-invalid");
                                }
                                }, 5000);
                        });

                        html += "</ul></div></div>";

                        $("#error").html(html);
                    }
                },
                error: function (xhr) {
                    $('#btn_Insert').removeClass("btn btn-sm btn-success btn-loaders btn-icon");
                    $('#btn_Insert').addClass("btn btn-sm btn-warning");
                    $('#btn_Insert').html("Add");
                    Timeout();
                }
            });

    });
    //#endregion Add Click

   //#region Delete Click
    $('#btn_Delete').on('click', function (e) {
        e.preventDefault();
        $('#btn_Delete').removeClass("btn btn-success");
        $('#btn_Delete').addClass("btn btn-success btn-loaders btn-icon");
        $('#btn_Delete').html("Deleting the Record....");

        $.ajax({
            url: '@Url.Action("DeleteConsentVeneers", "ConsentVeneers", new { area = "ConsentForms" })?appId=' + @emr.appId,
            type: "POST",
            dataType: 'JSON',
            success: function (data) {
                $('#btn_Delete').removeClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Delete').addClass("btn btn-warning");
                $('#btn_Delete').html("Delete");
                if (data.isAuthorized) {
                    if (data.success) {
                        var alertPlaceholder = document.getElementById("Alert");
                        function alert(e, t) {
                            var l = document.createElement("div");
                            l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                                '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                        }
                        alert("<i class='fe fe-check-circle text-white'></i> Consent Veneers Consent Form Deleted Successfully!", "success");
                        clearControls();
                        Timeout();

                        $('#btn_Delete').addClass("d-none");
                        $("#pat_sign_box").addClass("d-none");
                        $("#wit_sign_box").addClass("d-none");
                    }
                    else {
                        let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                            "<div class='alert alert-warning' role='alert'>" +
                            "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                            "<strong>Error!.. Failed to Delete..</strong><br/>" +
                            "</div></div>";
                        $("#error").html(html);
                    }
                }
                else {
                    var alertPlaceholder = document.getElementById("Alert");
                    function alert(e, t) {
                        var l = document.createElement("div");
                        l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                            '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                    }
                    alert("<i class='fe fe-check-circle text-white'></i> You do not have Enough Privileges to Delete this Designation!", "Access Denied!");
                }
            },
            error: function (xhr) {
                $('#btn_Delete').removeClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Delete').addClass("btn btn-Delete");
                $('#btn_Delete').html("Delete");
                Timeout();
            }
        })
    });
//#endregion

    //#region Reset
    $('#btn_Reset').on('click', function (e) {
        e.preventDefault();
        clearControls();
    });
    //#endregion Reset

        //#region Print
    $('#btn_Print').on('click', function (e) {
        e.preventDefault();
        $('#btn_Print').removeClass("btn btn-sm btn-success");
        $('#btn_Print').addClass("btn btn-sm btn-success btn-loaders btn-icon");
        $('#btn_Print').html("Printing the Record....");
    $.ajax({
        type: "Get",
        url: "@Url.Action("PrintPDFConsent", "ConsentVeneers", new {area = "ConsentForms" })?appId=" + @emr.appId + "&form=ConsentVeneers",
        dataType: 'JSON',
        success: function (data) {
            if (data.isAuthorized) {
                if (data.success) {
                    window.location.href = data.message.pdfPath
                }
            }
        },
        error: function (xhr) {
            console.log(xhr);
        }
    });
});
//#endregion Print


    //#region Clear Controls
    var clearControls = function () {
        $(".form-control").val("");
        $("input[name='cicv_1']:radio").prop('checked', false);
        $(".form-control-sm").val("");
        $("#pat_sign,#wit_sign").attr("src", "");

    }
    //#endregion Clear Controls

    //#region Wacom Tab Signature
        var openWacomTabSignaturePad = function (id) {
            var _data = {
                "patId": @emr.patId,
                "person": id,
                "form": "ConsentVeneers",
                "appId": @emr.appId,
                "formname":"Consent Veneers",
                "formlink":"",
                "eSign":""
            }
            $.ajax({
                type: "GET",
                url: "@Url.Action("WacomTabSignaturePad", "WacomTabSignaturePad", new { area = "Common" })",
                contentType: "application/json",
                dataType: "html",
                data: _data,
                success: function (response) {
                    $("#signature_pad_body").html(response);
                    $("#signature_pad").modal("show");
                },
                error: function (xhr) {
                    console.log("Error :" + xhr.statusText);
                }
            });
        }
    //#endregion

   //#region Signature
    var openSignaturePad = function (id) {
    var _data = {
        "patId": @emr.patId,
        "person": id,
        "form": "ConsentVeneers",
        "appId": @emr.appId,
        "formname":"Consent Veneers",
        "formlink":"",
        "eSign":""
    }
    $.ajax({
        type: "GET",
        url: "@Url.Action("SignaturePad", "SignaturePad", new { area = "Common" })",
        contentType: "application/json",
        dataType: "html",
        data: _data,
        success: function (response) {
            $("#signature_pad_body").html(response);
            $("#signature_pad").modal("show");
        },
        error: function (xhr) {
            console.log("Error :" + xhr.statusText);
        }
    });
}
//#endregion Signature

$('#signature_pad').on('hidden.bs.modal', function () {
    if (localStorage.getItem("sign") != null) {
        GetSignaturename('patient');
        GetSignaturename('witness');
        localStorage.removeItem("sign");
    }
});

//#region Get Signature
var GetSignaturename = function  (person) {
    $.ajax({
        url: '@Url.Action("GetSignature", "SignaturePad", new { area = "Common" })?appId=' + @emr.appId + '&person=' + person + '&form=ConsentVeneers',
        type: "GET",
        dataType: "json",
        async: false,
        success: function (response) {
            console.log(response);
            let sign = response[0].psb_sign;
            if (response[0].person == "patient") {
                $("#pat_sign_box").removeClass("d-none");
                $("#pat_sign").attr("src", sign);
            }
            if (response[0].person == "witness") {
                $("#wit_sign_box").removeClass("d-none");
                $("#wit_sign").attr("src", sign);
            }
        },
        error: function (xhr) {
            console.log(xhr);
            alert(xhr);
        }

    });
};
//#endregion Get Signature

//#region Alert Timeout
function Timeout() {
    window.setTimeout(function () {
        $(".alert").fadeTo(500, 0).slideUp(500, function () {
            $(this).remove();
        });
    }, 4200);
}
//#endregion Alert Timeout

</script>