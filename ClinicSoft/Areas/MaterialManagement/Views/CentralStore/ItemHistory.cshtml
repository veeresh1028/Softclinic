
@model BusinessEntities.Accounts.Masters.ItemsHistory
<div class="modal-header py-3 px-4">
    <h5 class="modal-title text-primary font-weight-semibold" id="exampleModalLongTitle">
        Item History <span class="text-secondary">
            (@Model.itemsHistoryDetail.item_code - @Model.itemsHistoryDetail.item_name) <span class="text-primary">Branch - @Model.itemsHistoryDetail.branch_name</span>
        </span>
    </h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="modal-body">

    <div class="col-sm-12 col-md-12 col-lg-12">
        @if (Model.purcaseItemsReceiveds != null && Model.purcaseItemsReceiveds.Count > 0)
        {
            <div class="text-secondary text-center align-content-center" style="font-size:17px; font-weight:bold;">Goods Reveiver Note Details</div>
            <div class="table-responsive" style="min-height:auto">
                <table id="tbl_purchase_order" class="table table-striped table-bordered text-nowrap" style="width: 100%;">
                    <thead>
                        <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D;">
                            <th class="border-bottom-0 font-weight-semibold text-white">Supplier</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Date</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">GRN #</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">DO #</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Order #</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Batch #</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Expiry Date</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Ord.Qty	</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Amount</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Rcvd.Qty</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Amount</th>
                        </tr>
                        @foreach (var data in Model.purcaseItemsReceiveds)
                        {
                            <tr>
                                <td>@data.sup_name</td>
                                <td>@data.pir_ddate</td>
                                <td>@data.pir_dcode</td>
                                <td>@data.pir_grnno</td>
                                <td>@data.pur_ocode</td>
                                <td>@data.pir_batchno</td>
                                <td>@data.pir_edate</td>
                                <td class="text-right">@data.pi_oqty</td>
                                <td class="text-right">@data.pi_uprice</td>
                                <td class="text-right">@data.pir_received</td>
                                <td class="text-right">@data.pi_uprice2</td>
                            </tr>
                        }
                    </thead>
                </table>
            </div>
        }
        else
        {
            <div class="col-12 col-sm-12 col-md-12 d-flex justify-content-center">
                <div class="alert alert-light-info alert-dismissiblefade show" role="alert">
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    <strong><i class="fa fa-exclamation-circle"></i> Info!&nbsp;</strong>No Goods Reveiver Note Details Available!
                </div>
            </div>
        }
        @if (Model.treatmentItemsUsed != null && Model.treatmentItemsUsed.Count > 0)
        {
            <div class="text-secondary text-center align-content-center" style="font-size:17px; font-weight:bold;">Usage of Items</div>
            <div class="table-responsive" style="min-height:auto">
                <table id="tbl_grn" class="table table-striped table-bordered text-nowrap" style="width: 100%;">
                    <thead>
                        <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D;">
                            <th class="border-bottom-0 font-weight-semibold text-white">Date</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Doctor</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">CPT Code</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Treatment</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Item Code</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Qty</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Notes</th>
                        </tr>
                        @foreach (var data in Model.treatmentItemsUsed)
                        {
                            <tr>
                                <td>@data.app_fdate</td>
                                <td>@data.emp_name</td>
                                <td>@data.tr_code</td>
                                <td>@data.tr_name</td>
                                <td class="text-center">@data.tit_qty</td>
                                <td class="text-right">@data.tit_cost</td>
                                <td>@data.tit_notes</td>
                            </tr>
                        }
                    </thead>
                </table>
            </div>
        }
        else
        {
            <div class="col-12 col-sm-12 col-md-12 d-flex justify-content-center">
                <div class="alert alert-light-info alert-dismissiblefade show" role="alert">
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    <strong><i class="fa fa-exclamation-circle"></i> Info!&nbsp;</strong>Item Usages Detail Not Available!
                </div>
            </div>
        }
        @if (Model.itemsQtyAdjusted != null && Model.itemsQtyAdjusted.Count > 0)
        {
            <div class="text-secondary text-center align-content-center" style="font-size:17px; font-weight:bold;">Adjustments Detail</div>
            <div class="table-responsive" style="min-height:auto">
                <table id="tbl_invoice" class="table table-striped table-bordered text-nowrap" style="width: 100%;">
                    <thead>
                        <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D;">
                            <th class="border-bottom-0 font-weight-semibold text-white">Date Adjusted</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Type</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Group</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Location</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Qty in Hand</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Qty Adjusted</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Notes</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Adjusted By</th>
                        </tr>
                        @foreach (var data in Model.itemsQtyAdjusted)
                        {
                            <tr>
                                <td>@data.iqa_date</td>
                                <td>@data.item_type</td>
                                <td>@data.ig_group</td>
                                <td>@data.item_location</td>
                                <td class="text-center">@data.iqa_qty</td>
                                <td class="text-center">@data.iqa_adj</td>
                                <td>@data.iqa_notes</td>
                                <td>@data.iqa_by_name</td>
                            </tr>
                        }
                    </thead>
                </table>
            </div>
        }
        else
        {
            <div class="col-12 col-sm-12 col-md-12 d-flex justify-content-center">
                <div class="alert alert-light-info alert-dismissiblefade show" role="alert">
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    <strong><i class="fa fa-exclamation-circle"></i> Info!&nbsp;</strong>No Adjustments Detail Available!
                </div>
            </div>
        }
        @if (Model.itemsQtyAllocated != null && Model.itemsQtyAllocated.Count > 0)
        {
            <div class="text-secondary text-center align-content-center" style="font-size:17px; font-weight:bold;">Sub Stock Allocations</div>
            <div class="table-responsive" style="min-height:auto">
                <table id="tbl_payment" class="table table-striped table-bordered text-nowrap" style="width: 100%;">
                    <thead>
                        <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D;">
                            <th class="border-bottom-0 font-weight-semibold text-white">Batch</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Exp.Date</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Appr.Date</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Ref No</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">From</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Approved Qty</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">UOM</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Amount</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Notes</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Status</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Madeby</th>
                        </tr>
                        @foreach (var data in Model.itemsQtyAllocated)
                        {
                            <tr>
                                <td>@data.ia1_batchno</td>
                                <td>@data.ia1_edate</td>
                                <td>@data.ia1_date</td>
                                <td>@data.ia1_refno</td>
                                <td>@data.ia1_from_name2</td>
                                <td class="text-center">@data.ia1_aqty</td>
                                <td>@data.ia1_aqty_uom</td>
                                <td class="text-right">@data.ia1_aqty_cost</td>
                                <td>@data.ia1_notes</td>
                                <td>@data.ia1_status</td>
                                <td>@data.ia1_madeby_name</td>
                            </tr>
                        }
                    </thead>
                </table>
            </div>
        }
        else
        {
            <div class="col-12 col-sm-12 col-md-12 d-flex justify-content-center">
                <div class="alert alert-light-info alert-dismissiblefade show" role="alert">
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    <strong><i class="fa fa-exclamation-circle"></i> Info!&nbsp;</strong>No Sub Stock Allocations Detail Available!
                </div>
            </div>
        }
        @if (Model.itemConsuptionHistory != null && Model.itemConsuptionHistory.Count > 0)
        {
            <div class="text-secondary text-center align-content-center" style="font-size:17px; font-weight:bold;">Stock Consuption Detail</div>
            <div class="table-responsive" style="min-height:auto">
                <table id="tbl_payment" class="table table-striped table-bordered text-nowrap" style="width: 100%;">
                    <thead>
                        <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D;">
                            <th class="border-bottom-0 font-weight-semibold text-white">Ref No.</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Date</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Batch</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Doctor Name</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Room</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Qty</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">UOM</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Amount</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Notes</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Madeby</th>
                        </tr>
                        @foreach (var data in Model.itemConsuptionHistory)
                        {
                            <tr>
                                <td>@data.scr_refno</td>
                                <td>@data.scr_date</td>
                                <td>@data.ib_batch</td>
                                <td>@data.doctor_name</td>
                                <td>@data.room</td>
                                <td class="text-center">@data.scr_qty</td>
                                <td>@data.scr_uom</td>
                                <td class="text-right">@data.qty_cost</td>
                                <td>@data.scr_desc</td>
                                <td>@data.madeby_name</td>
                            </tr>
                        }
                    </thead>
                </table>
            </div>
        }
        else
        {
            <div class="col-12 col-sm-12 col-md-12 d-flex justify-content-center">
                <div class="alert alert-light-info alert-dismissiblefade show" role="alert">
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    <strong><i class="fa fa-exclamation-circle"></i> Info!&nbsp;</strong>No Stock Consuption Detail Available!
                </div>
            </div>
        }
        @if (Model.itemDirectTransfer != null && Model.itemDirectTransfer.Count > 0)
        {
            <div class="text-secondary text-center align-content-center" style="font-size:17px; font-weight:bold;">Direct Stock Transfer Detail</div>
            <div class="table-responsive" style="min-height:auto">
                <table id="tbl_payment" class="table table-striped table-bordered text-nowrap" style="width: 100%;">
                    <thead>
                        <tr style="color: #fff !important; background-color: #3C457D; border-color: #3C457D;">
                            <th class="border-bottom-0 font-weight-semibold text-white">Ref No.</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Date</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">From</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">To</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Item Batch</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Qty</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">UOM</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Amount</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Notes</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Madeby</th>
                        </tr>
                        @foreach (var data in Model.itemDirectTransfer)
                        {
                            <tr>
                                <td>@data.std_refno</td>
                                <td>@data.std_date</td>
                                <td>@data.from_branch</td>
                                <td>@data.to_branch</td>
                                <td>@data.std_item_batch</td>
                                <td class="text-center">@data.std_oqty</td>
                                <td>@data.std_ouom</td>
                                <td class="text-right">@data.qty_cost</td>
                                <td>@data.std_notes</td>
                                <td>@data.madeby_name</td>
                            </tr>
                        }
                    </thead>
                </table>
            </div>
        }
        else
        {
            <div class="col-12 col-sm-12 col-md-12 d-flex justify-content-center">
                <div class="alert alert-light-info alert-dismissiblefade show" role="alert">
                    <strong><i class="fa fa-exclamation-circle"></i> Info!&nbsp;</strong>No Direct Stock Transfer Detail Available!
                </div>
            </div>
        }



    </div>
</div>
<div class="modal-footer">
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>

<style type="text/css">
    #size {
        max-width: 1200px;
    }
</style>