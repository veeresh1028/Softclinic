
@using System.Linq;
@using System.Security.Claims;
@using BusinessEntities;
@model BusinessEntities.EMRForms.Adnic
@{
    var claims = ClaimsPrincipal.Current.Identities.First().Claims.ToList();
    var emp_designation = claims.Where(c => c.Type == ClaimTypes.Role).Select(c => c.Value).SingleOrDefault();
    EMRInfo emr = (EMRInfo)TempData["emr_data"];
    TempData.Keep("emr_data");
}
<form id="form_EditAdnic" class="needs-validation fs-14" >

    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.adsId)
    @Html.HiddenFor(m => m.ads_appId)
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12 d-flex justify-content-center">
            <div class="form-group mb-3"><label class="form-label"> Voucher No :&nbsp;</label></div>
            <div class="form-group mb-3">
                <label class="form-label">
                    @Html.TextBoxFor(m => m.ads_voucher, new { @class = "form-control", @placeholder = "Enter Voucher No", @id = "uads_voucher", @width = "20px", @maxlength = "30" })&nbsp;
                </label>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12 mb-4 ">
            <div class="form-group mb-3" style="text-align: center;"><label class="form-label text-red text-align-center"> Please read the instructions & guidelines on overleaf before filling the form&nbsp;</label></div>
        </div>
    </div>

    <div class="row">
        <div class="panel-heading bg-azure-light text-white font-weight-bold">1. Patient Details</div>
        <div class="d-flex col-sm-12 col-md-6 col-lg-6 mt-2">
            <div class="col-sm-11 col-md-6 col-lg-4">
                <label class="form-label ">
                    Patient's Name&nbsp;
                </label>
            </div>
            <div class="align-items-center justify-content-center w-8  form-label">
                :
            </div>
            <div class="col-sm-12 col-md-6 col-lg-7 mb-2">
                <span class="text-capitalize text-left text-black">@emr.pat_name&nbsp;</span>
            </div>
        </div>
        <div class="d-flex col-sm-12 col-md-6 col-lg-6 mt-2">
            <div class="col-sm-12 col-md-6 col-lg-4">
                <label class="form-label mb-2">Patient Health Card No</label>
            </div>
            <div class="align-items-center justify-content-center w-8  form-label">
                :
            </div>
            <div class="col-sm-12 col-md-6 col-lg-7 mb-2">
                @if (@emr.pi_insno != "")
                {
                    <span class="font-weight-normal1 text-capitalize text-left">@emr.pi_insno&nbsp;</span>
                }
                else
                {
                    <span class="font-weight-normal1 text-capitalize text-left">N/A</span>
                }
            </div>
        </div>
    </div>
    <div class="row">
        <div class="d-flex col-sm-12 col-md-6 col-lg-6">
            <div class="col-sm-12 col-md-6 col-lg-4">
                <label class="form-label mb-2">
                    Group Member's Name&nbsp;<span class="text-red">*</span>
                </label>
            </div>
            <div class="align-items-center justify-content-center w-8  form-label">
                :
            </div>
            <div class="col-sm-12 col-md-7 col-lg-7 mb-2">
                @Html.TextBoxFor(m => m.ads_group_mem, new { @class = "form-control", @placeholder = "Enter Group Member's Name", @id = "uads_group_mem", @width = "20px", @maxlength = "30" })
            </div>
        </div>
        <div class="d-flex col-sm-12 col-md-6 col-lg-6">
            <div class="col-sm-12 col-md-6 col-lg-4">
                <label class="form-label">Type of Plan</label>
            </div>
            <div class="align-items-center justify-content-center w-8  form-label">
                :
            </div>
            <div class="col-sm-12 col-md-7 col-lg-7 mb-2">
                @if (@emr.app_ic_name != "")
                {
                    <span class="font-weight-normal1 text-capitalize text-left">@emr.app_ic_name&nbsp;</span>
                }
                else
                {
                    <span class="font-weight-normal1 text-capitalize text-left">N/A</span>
                }
            </div>
        </div>
    </div>
    <div class="row">
        <div class="d-flex col-sm-12 col-md-6 col-lg-6">
            <div class="col-sm-12 col-md-6 col-lg-4">
                <label class="form-label">
                    Employer's Name&nbsp;
                </label>
            </div>
            <div class="align-items-center justify-content-center w-8  form-label">
                :
            </div>
            <div class="col-sm-12 col-md-7 col-lg-7 mb-2">
                @if (@emr.doc_name != "")
                {
                    <span class="text-capitalize text-left text-black">@emr.doc_name&nbsp;</span>
                }
                else
                {
                    <span class="font-weight-normal1 text-capitalize text-left">N/A</span>
                }
            </div>
        </div>
        <div class="d-flex col-sm-12 col-md-6 col-lg-6">
            <div class="col-sm-12 col-md-6 col-lg-4">
                <label class="form-label">Telephone No</label>
            </div>
            <div class="align-items-center justify-content-center w-8  form-label">
                :
            </div>
            <div class="col-sm-12 col-md-7 col-lg-7 mb-2">
                @if (@emr.pat_mob != "")
                {
                    <span class="text-capitalize text-left text-black">@emr.pat_mob&nbsp;</span>
                }
                else
                {
                    <span class="font-weight-normal1 text-capitalize text-left">N/A</span>
                }
            </div>
        </div>
    </div>
    <div class="row">
        <div class="d-flex col-sm-12 col-md-6 col-lg-6">
            <div class="col-sm-12 col-md-6 col-lg-4">
                <label class="form-label">Date of Birth</label>
            </div>
            <div class="align-items-center justify-content-center w-8 form-label">
                :
            </div>
            <div class="col-sm-12 col-md-7 col-lg-7 mb-2">
                @if (@emr.pat_dob != "")
                {
                    <span class="text-capitalize text-left text-black">@emr.pat_dob&nbsp;</span>
                }
                else
                {
                    <span class="font-weight-normal1 text-capitalize text-left">N/A</span>
                }
            </div>
        </div>
        <div class="d-flex col-sm-12 col-md-6 col-lg-6">
            <div class="col-sm-12 col-md-6 col-lg-4">
                <label class="form-label">Address</label>
            </div>
            <div class="align-items-center justify-content-center w-8  form-label">
                :
            </div>
            <div class="col-sm-12 col-md-7 col-lg-7 mb-2">
                @if (@emr.pat_address != "")
                {
                    <span class="text-capitalize text-left text-black">@emr.pat_address&nbsp;</span>
                }
                else
                {
                    <span class="font-weight-normal1 text-capitalize text-left">N/A</span>
                }
            </div>

        </div>
    </div>
    <div class="row">
        <div class="d-flex col-sm-12 col-md-6 col-lg-6">

            <div class="col-sm-12 col-md-6 col-lg-4">
                <label class="form-label">
                    Email ID&nbsp;
                </label>
            </div>
            <div class="align-items-center justify-content-center w-8  form-label">
                :
            </div>
            <div class="col-sm-12 col-md-7 col-lg-7 mb-2">
                @if (@emr.pat_email != "")
                {
                    <span class="text-capitalize text-left text-black">@emr.pat_email&nbsp;</span>
                }
                else
                {
                    <span class="font-weight-normal1 text-capitalize text-left">N/A</span>
                }
            </div>
        </div>
        <div class="col-sm-12 col-md-6 col-lg-3">
        </div>

    </div>
    <div class="row">
        <div class="panel-heading bg-azure-light text-white font-weight-bold">2. Reason for not using listed healathcare facilities(Kindly indicate)</div>
        <div class="col-sm-3 col-md-4 col-lg-3 mt-2">
            <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left">
                <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                    <input type="checkbox" class="custom-control-input" name="ads_reason" value="Emergency" id="1">
                    <span class="custom-control-label">Emergency</span>
                </label>
            </div>
        </div>
        <div class="col-sm-3 col-md-4 col-lg-3 mt-2">
            <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left">
                <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                    <input type="checkbox" class="custom-control-input" name="ads_reason" value="Elective" id="2">
                    <span class="custom-control-label">Elective</span>
                </label>
            </div>
        </div>
        <div class="col-sm-3 col-md-4 col-lg-3 mt-2">
            <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left">
                <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                    <input type="checkbox" class="custom-control-input" name="ads_reason" value="Service Not Available" id="3">
                    <span class="custom-control-label">Service Not Available</span>
                </label>
            </div>
        </div>
        <div class="col-sm-3 col-md-12 col-lg-3 mt-2">
            <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left">
                <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                    <input type="checkbox" class="custom-control-input" name="ads_reason" value="On vacation/business trip outside UAE" id="4">
                    <span class="custom-control-label">On vacation/business trip outside UAE</span>
                </label>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-3 col-md-3 col-lg-3">
            <label class="form-label">
                Other(s) please specify:
            </label>
        </div>
        <div class="col-sm-9 col-md-9 col-lg-9 mb-2">
            @Html.TextAreaFor(m => m.ads_reason_other, new { @class = "form-control", @placeholder = "please specify", @row = "4", @id = "uads_reason_other" })
        </div>
    </div>

    <div class="row">
        <div class="panel-heading bg-azure-light text-white font-weight-bold"> 3. Medical Information(To be filled by treating doctor for all outpatient for cases like hospitalization procedures surgeries-detailed medical report is required)</div>
        <div class="col-sm-6 col-md-6 col-lg-6 mt-2">
            <label class="form-label">
                Condition Requiring treatment
            </label>
            @Html.TextAreaFor(m => m.ads_condition, new { @class = "form-control", @placeholder = "please specify", @row = "4", @id = "uads_condition" })
        </div>
        <div class="col-sm-6 col-md-6 col-lg-6 mt-2">
            <label class="form-label">
                Visit Date
            </label>
            <div class="input-group">
                <div class="input-group-prepend">
                    <div class="input-group-text">
                        <i class="fe fe-calendar"></i>
                    </div>
                </div>
                @Html.TextBoxFor(m => m.ads_visit, new { @class = "form-control", @placeholder = "DD-MMMM-YYYY", @id = "uads_visit" })
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <label class="form-label">
                Onset and duration of illness:
            </label>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12">
            @Html.TextAreaFor(m => m.ads_onset_duration, new { @class = "form-control", @placeholder = "Onset and duration of illness", @row = "2", @id = "uads_onset_duration" })
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12 mb-3">
            <label class="form-label">
                Treatment Details
            </label>

            @Html.TextAreaFor(m => m.ads_treat_details, new { @class = "form-control", @placeholder = "please specify", @row = "2", @id = "uads_treat_details" })
        </div>
    </div>


    <div class="row">
        <div class="col-sm-12 col-md-4 col-lg-4">
            <span class="text-capitalize text-left text-black">@emr.app_doctor_department&nbsp;</span>
        </div>
        <div class="col-sm-12 col-md-4 col-lg-4">
            <span class="text-capitalize text-left text-black">@emr.app_fdate&nbsp;</span>
        </div>
        <div class="col-sm-12 col-md-4 col-lg-4">
            <img alt="stamp" src="@emr.doc_sign" id="doc_sign" class="avatar avatar-xl bsquare" />
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12 col-md-4 col-lg-4">
            <label class="form-label">
                Name of the Doctor
            </label>
        </div>
        <div class="col-sm-12 col-md-4 col-lg-4">
            <label class="form-label">
                Date
            </label>
        </div>
        <div class="col-sm-12 col-md-4 col-lg-4">
            <label class="form-label">
                Signature & Stamp
            </label>
        </div>
    </div>

    <div class="row panel-heading bg-azure-light text-white font-weight-bold">
        <div class="col-sm-6 col-md-6 col-sm-6">
            4. Name & Address of the Hospital/Clinic
        </div>
        <div class="col-sm-6 col-md-6 col-sm-6 ">
            Treatment Details
        </div>
    </div>

    <div class="row mt-2">
        <div class="col-sm-3 col-md-3 col-lg-3 ">
            <span class="text-capitalize text-left text-black">@emr.set_company&nbsp;</span>
        </div>
        <div class="col-sm-9 col-md-9 col-lg-9 ">
            <div class="table-responsive">
                <table id="tbl_Treatment" class="table table-striped table-bordered text-nowrap" style="width: 100%; cursor: pointer;">
                    <thead>
                        <tr style="color: #fff !important; background-color: #808080; border-color: #3C457D; ">
                            <th class="border-bottom-0 font-weight-semibold text-white">#</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">CPT Code</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Treatment</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Type</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Price</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Auth. Code</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Auth. Date</th>
                            <th class="border-bottom-0 font-weight-semibold text-white">Exp. Date</th>
                        </tr>
                    </thead>
                </table>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <label class="form-label">
                Currency(If treatment availed outside UAE)
            </label>
        </div>
    </div>

    <div class="row">
        <div class="panel-heading bg-azure-light text-white font-weight-bold"> 5. Bank Details</div>

        <div class="col-sm-3 col-md-6 col-lg-3 mt-3 ">
            <label class="form-label">
                Bank Details(Compulsory):
            </label>
        </div>
        <div class="col-sm-3 col-md-6 col-lg-3 mt-2 ">
            @Html.TextBoxFor(m => m.ads_bankDetails, new { @class = "form-control", @placeholder = "Enter Details", @id = "uads_bankDetails", @width = "20px", @maxlength = "30" })
        </div>
        <div class="col-sm-3 col-md-3 col-lg-3  mt-2">
            <label class="form-label">

            </label>
        </div>
        <div class="col-sm-3 col-md-3 col-lg-3 mt-2 ">
            <label class="form-label">

            </label>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-3 col-md-6 col-lg-3 mt-3">
            <label class="form-label">
                Account Holder Name:
            </label>
        </div>
        <div class="col-sm-3 col-md-6 col-lg-3 mb-2 ">
            @Html.TextBoxFor(m => m.ads_account_holder, new { @class = "form-control", @placeholder = "Enter Holder Name ", @id = "uads_account_holder", @width = "20px", @maxlength = "30" })
        </div>
        <div class="col-sm-3 col-md-3 col-lg-3 ">
            <label class="form-label">

            </label>
        </div>
        <div class="col-sm-3 col-md-3 col-lg-3 ">
            <label class="form-label">

            </label>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-3 col-md-6 col-lg-3 mt-3">
            <label class="form-label">
                Bank Name:
            </label>
        </div>
        <div class="col-sm-3 col-md-6 col-lg-3 mb-2 ">
            @Html.TextBoxFor(m => m.ads_bank_name, new { @class = "form-control", @placeholder = "Enter Name", @id = "uads_bank_name", @width = "20px", @maxlength = "30" })
        </div>
        <div class="col-sm-3 col-md-3 col-lg-3 ">
            <label class="form-label">

            </label>
        </div>
        <div class="col-sm-3 col-md-3 col-lg-3 ">
            <label class="form-label">

            </label>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-3 col-md-6 col-lg-3 mt-3">
            <label class="form-label">
                Bank Address:
            </label>
        </div>
        <div class="col-sm-3 col-md-6 col-lg-3 mb-2 ">
            @Html.TextBoxFor(m => m.ads_bank_address, new { @class = "form-control", @placeholder = "Enter Address", @id = "uads_bank_address", @width = "20px", @maxlength = "30" })
        </div>
        <div class="col-sm-3 col-md-3 col-lg-3 ">
            <label class="form-label">

            </label>
        </div>
        <div class="col-sm-3 col-md-3 col-lg-3 ">
            <label class="form-label">

            </label>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-3 col-md-6 col-lg-3 mt-3">
            <label class="form-label">
                Currency:
            </label>
        </div>
        <div class="col-sm-3 col-md-6 col-lg-3  mb-2">
            @Html.TextBoxFor(m => m.ads_bank_currency, new { @class = "form-control", @placeholder = "Enter Currency", @id = "uads_bank_currency", @width = "20px", @maxlength = "30" })
        </div>
        <div class="col-sm-3 col-md-6 col-lg-3 mt-3">
            <label class="form-label">
                SWIFT Code:
            </label>
        </div>
        <div class="col-sm-3 col-md-6 col-lg-3 mb-2 ">
            @Html.TextBoxFor(m => m.ads_bank_swiftcode, new { @class = "form-control", @placeholder = "Enter SWIFT Code", @id = "uads_bank_swiftcode", @width = "20px", @maxlength = "30" })
        </div>
    </div>

    <div class="row">
        <div class="panel-heading bg-azure-light text-white font-weight-bold">  6. Other Information</div>
        <div class="col-sm-3 col-md-6 col-lg-3 mt-2">
            <label class="form-label">
                Is the above case work related
            </label>
        </div>
        <div class="col-sm-12 col-md-6 col-lg-2 mt-2">
            <label class="form-label">
                @Html.RadioButtonFor(x => x.ads_oth_above, true) Yes
                @Html.RadioButtonFor(x => x.ads_oth_above, false) No
            </label>
        </div>
        <div class="col-sm-7 col-md-12 col-lg-7 mt-2">
            <label class="form-label">
                (full details) @Html.TextAreaFor(m => m.ads_oth_above_det, new { @class = "form-control", @placeholder = "Enter full details", @row = "2", @id = "uads_oth_above_det" })
            </label>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-3 col-md-6 col-lg-3">
            <label class="form-label">
                Is the claim covered by another insurance
            </label>
        </div>
        <div class="col-sm-12 col-md-6 col-lg-2">
            <label class="form-label">
                @Html.RadioButtonFor(x => x.ads_oth_claim, true) Yes
                @Html.RadioButtonFor(x => x.ads_oth_claim, false) No
            </label>
        </div>
        <div class="col-sm-7 col-md-12 col-lg-7">
            <label class="form-label">
                (Please specify the amount reimbursed and by which insurance company)@Html.TextAreaFor(m => m.ads_oth_claim_det, new { @class = "form-control", @placeholder = "Please specify", @row = "2", @id = "uads_oth_claim_det" })
            </label>
        </div>
    </div>

    <div class="row ">
        <div class="panel-heading bg-azure-light text-white font-weight-bold"> 7. Declaration</div>
        <div class="col-sm-12 col-md-12 col-lg-12">
            <p class="text-justify text-black">
                I, the undersigned hereby declared that the information above is true and complete and that reimbursement requested is for expense paid by me for the treatment of my medical condition.
            </p>
            <p class="text-justify text-black">
                I agree to submit to ADNIC any requested document mandatory / deemed necessary to process my above claim . I hereby authorize ADNIC to approach ,and any doctor / Medical facility/ any Institution or any person who has any record / medical information about me or my family member to provide ADNIC with complete information including copies of the records when requested.
            </p>
        </div>
    </div>

    <div class="row">
        <div class="col-sm-3 col-md-4 col-lg-3">
            @Html.TextBoxFor(m => m.ads_witnessname, new { @class = "form-control", @placeholder = "Enter Witness Name /Relationship", @id = "uads_witnessname", @width = "20px", @maxlength = "30" })
        </div>
        <div class="col-sm-3 col-md-2 col-lg-3">
            <div class="form-group mb-3" style="display:none" id="uwitimg"><img alt="Signature" src="" id="uwit_sign" class="avatar avatar-xl bsquare" /></div>
        </div>
        <div class="col-sm-3 col-md-2 col-lg-3">
            <label class="form-label text-red text-left" id="upsb_date_witness" name="">&nbsp;</label>
        </div>
        <div class="col-sm-3 col-md-4 col-lg-3">
            @Html.TextBoxFor(m => m.ads_contact, new { @class = "form-control", @placeholder = "Enter Contact No.", @id = "uads_contact", @width = "20px", @maxlength = "14" })
        </div>
    </div>
    <div class="row">
        <div class="col-sm-3 col-md-4 col-lg-3">
            <label class="form-label">
                Name Relationship to the Card Holder
            </label>
        </div>
        <div class="col-sm-3 col-md-2 col-lg-3">
            <label class="form-label">
                Signature
            </label>
        </div>
        <div class="col-sm-3 col-md-2 col-lg-3">
            <label class="form-label">
                Date
            </label>
        </div>
        <div class="col-sm-3 col-md-2 col-lg-3">
            <label class="form-label">
                Contact No.
            </label>
        </div>

    </div>

    <div class="row ">
        <div class="panel-heading bg-azure-light text-white font-weight-bold"> Instructions</div>
    </div>
    <div class="row ">
        <div class="card-body ps-5 pe-5">
            <ul class="list-style2 text-justify text-black">
                <li>This form needs to be completed by the insured member (Card holder), only if the provider is not submitting the claim on his behalf.</li>
                <li>Please read the form carefully and make sure to complete all pertinent information. ADNIC will not be able to process any incomplete Reimbursement Claim Form with lacking proper documentation.</li>
                <li>Use a separate form for each Member.</li>
                <li>All the documents including invoices and medical reports should be in either English or Arabic. Documents in other languages must be translated by an official public translator prior to submission.</li>
                <li>
                    The following documents to be attached to your duly filled Reimbursement Claim Form.
                    <ol style="list-style-type:disc;">
                        <li>Copy of Card.</li>
                        <li>Original itemized bill/Invoices (dated) and receipts of payment.</li>
                        <li>Original prescription for medication given by the treating doctor ( except for controlled drugs) . Validity of the prescription is limited to 60 days and for controlled drugs is limited to 3 days in line with HAAD</li>
                        <li>Investigation requests/reports like laboratory tests, x-rays, etc.</li>
                    </ol>
                    Additional requirements to above:<br />
                    For Inpatient (Hospitalization Cases)
                    <ol style="list-style-type:disc;">
                        <li>Medical Report/Discharge Summary stamped & signed by the treating Doctor.</li>
                    </ol>
                    For treatment availed Outside the UAE
                    <ol style="list-style-type:disc;">
                        <li>Copy of passport showing Exit & Re-entry to UAE or any other similar documents (E.g.: E-gate)</li>
                        <li>Elective treatment is subject to ADNIC prior approval at all times.</li>
                    </ol>
                </li>
                <li>Please retain copies of receipts and documents enclosed with your claim, as ADNIC will retain original documents.</li>
                <li>All claims s ubject to reimbursement availed within or outside UAE should be submitted within 120 days of incurred treatment.</li>
                <li>
                    Please submit all the above required documents directly to MSH international - DIFC Liberty House Office No 304, Level - 3, P.O Box 506537, Dubai, United Arab Emirates<br />
                    If you need assistance in filling this form please call MSH Toll Free (UAE): 800674823|+971 4 365 1350
                </li>
            </ul>
        </div>
    </div>

    <div class="row">
        <div class="panel-heading bg-azure-light text-white font-weight-bold">  Instructions to complete the Form</div>
    </div>
    <div class="row ">
        <div class="card-body ps-5 pe-5">
            <ul class="list-style2 text-justify text-black">
                <li>Please write your name & Card Number as mentioned in the Card</li>
                <li>Medical Information – Request your treating doctor to fill up brief medical information about your condition and treatment.</li>
                <li>Provider Name & Address – Kindly use more than one line if necessary to provide this information about each facility where  you were treated.</li>
                <li>Bill No. – Please write the serial number/reference number printed on the bill/receipt/invoice for each service separately.</li>
                <li>Service Date – State date of treatment for each service against each bill.</li>
                <li>Description of Services –State type of service like Consultation/Pharmacy/Investigations/Physiotherapy/Dental/ Hospitalization.</li>
                <li>Amount – State the exact amount as appears on the invoices</li>
                <li>Total – Total amount of all the invoices submitted with this form for reimbursement from ADNIC</li>
                <li>Currency – Name of the currency in which actual payment was made.</li>
                <li>If treatment due to road traffic accident a police report is required to be submitted with this form.</li>
                <li>Declaration – Kindly write your name, signature, date, the contact number and relationship to the cardholder.</li>

            </ul>
        </div>
    </div>


    <div class="row mt-2">
        <div class="col-sm-12 col-md-12 col-lg-12 text-center">
            <div class="btn-list btn-animation">
                <button type="submit" class="btn btn-warning btn-sm" id="btn_Update_Adnic">Save Changes</button>
                <button type="submit" class="btn btn-sm btn-outline-danger" id="btn_Delete_Adnic">Delete</button>
                <button type="button" class="btn btn-sm btn-outline-light " id="btn_Print_RadioDeci" onclick="PrintAdnic()">
                    <i class="fa fa-print">&nbsp;&nbsp;</i>Print
                </button>
                <div class="btn-group mr-2">
                    <div class="dropdown">
                        <button type="button" class="btn-sm btn-secondary me-2 mb-2 dropdown-toggle" data-bs-toggle="dropdown">
                            <i class="fa fa-paint-brush">&nbsp;&nbsp;</i> Patient
                        </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" onclick="openSignaturePad('patient')">Tab</a>
                            <a class="dropdown-item" onclick="openWacomTabSignaturePad('patient')">Wacom Tab</a>
                        </div>
                    </div>
                </div>
                <button type="button" class="btn btn-outline-danger" id="btn_Close_EditAdnic" style="display:none">
                    Close
                </button>
            </div>
        </div>
    </div>
</form>
@*@section myScripts{*@
<script type="text/javascript">
        //#region Partial View Onload
            var formName1 = $(form_EditAdnic).closest('form').attr('name');
                $(function () {
                    GetAdnic();
                    validate();
                    Get_AllPatientTreatments();
                    console.log($("#adsId").val());
                    GetSignaturename('Witness');
                });
        //#endregion Partial View Onload

        //#region Load Adnic
            var GetAdnic = function () {
                $.ajax({
                    type: "GET",
                    url: "@Url.Action("GetAllAdnic", "ReimbursementForms", new { area = "EMRForms" })?appId=" + "@emr.appId",
                    success: function (response) {
                        if (response.isAuthorized != false) {
                            if (response.length > 0) {
                                GetCheckedValues(response[0].ads_reason);
                                $("#adnic_add").hide();
                                $("#adnic_edit").show();
                            }
                            else {
                                $("#adnic_add").show();
                                $("#adnic_edit").hide();

                            }
                        }
                        else {
                            console.log("You are not Authorized!");
                        }
                    },
                    error: function (xhr) {
                        console.log(xhr);
                    }
                })
            }
        //#endregion

        //#region Get CheckedValues
            var GetCheckedValues = function (checknames) {
                var data = checknames;
                if (checknames !== null) {
                    var x = data.split(",");
                    console.log(checknames);
                    console.log(x);
                    if (x != "") {
                        if (x.includes("Emergency")) {
                            $('#u1').attr('checked', 'checked');
                            $("#u1").prop("checked", true);
                        }
                        if (x.includes("Elective")) {
                            $('#u2').attr('checked', 'checked');
                            $("#u2").prop("checked", true);
                        }
                        if (x.includes("Service Not Available")) {
                            $('#u3').attr('checked', 'checked');
                            $("#u3").prop("checked", true);
                        }
                        if (x.includes("On vacation/business trip outside UAE")) {
                            $('#u4').attr('checked', 'checked');
                            $("#u4").prop("checked", true);
                        }

                    }
                }
            }
        //#endregion

        //#region Load Get_Patient_Treatments_table
            var Get_AllPatientTreatments = function () {
                $.ajax({
                    type: "GET",
                    url: "@Url.Action("GetAllPatientTreatments", "ReimbursementForms", new { area = "EMRForms" })?appId=" + "@emr.appId" + "&patId=" + @emr.patId,
                    success: function (response) {
                        console.log(response);
                        if (response.isAuthorized != false) {
                            var table;
                            if ($.fn.dataTable.isDataTable('#tbl_Treatment')) {
                                table = $('#tbl_Treatment').DataTable();
                                table.clear();
                                table.rows.add(response).draw();
                            }
                            else {
                                console.log(response);
                                BindDataTableP(response);
                            }
                        }
                        else {
                            console.log("You are not Authorized!");
                        }
                    },
                    error: function (xhr) {
                        console.log(xhr);
                    }
                })
            }
        //#endregion

        //#region Bind Get_Patient_Treatments_table
        var BindDataTableP = function (response) {
            var table = $("#tbl_Treatment").DataTable({
                fixedHeader: {
                    header: true,
                    footer: true
                },
                processing: true,
                "deferRender": true,
                "retrieve": true,
                lengthChange: true,
                "aaData": response,
                "aoColumns": [
                    {
                        "mData": "ptId",
                        "orderable": false,
                        "searchable": false,
                        "className": "text-center",
                        "render": function (data, type, row, meta) {
                            let _index = (meta.row) + 1;
                            if (_index >= 10) {
                                return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>" + _index + "</a>";
                            }
                            else {
                                return "<a href='javascript:void(0)' class='fs-13 font-weight-bold'>0" + _index + "</a>";
                            }
                        }
                    },


                    {
                        "mData": "tr_code",
                        "className": 'text-justify'
                    },
                    {
                        "mData": "tr_name",
                        "className": 'text-justify text-wrap'
                    },
                    {
                        "mData": "tr_type",
                        "className": 'text-justify'
                    },

                    {
                        "mData": "tr_price",
                        "className": 'text-justify'
                    },
                    {
                        "mData": "pt_auth_code",
                        "className": 'text-justify'
                    },
                    {
                        "mData": "pt_auth_adate",
                        "className": "text-left",
                        "render": function (data, type, row, meta) {
                            if (type === 'display' || type === 'filter') {
                                return moment(data).format("DD-MM-YYYY");
                            }
                            return moment(data).format("YYYY-MM-DD");
                        }
                    },
                    {
                        "mData": "pt_auth_edate",
                        "className": "text-left",
                        "render": function (data, type, row, meta) {
                            if (type === 'display' || type === 'filter') {
                                return moment(data).format("DD-MM-YYYY");
                            }
                            return moment(data).format("YYYY-MM-DD");
                        }
                    },

                ],
                order: [[0, 'asc']],
                scrollX: true,
                scrollY: 500,
                scrollCollapse: true,

            });

        };
        //#endregion

        //#region Update  Button Click
            $('#btn_Update_Adnic').on('click', function (e) {
                 e.preventDefault();
                if ($("#form_EditAdnic").valid()) {
                    console.log($("#adsId").val());
                    $('#btn_Update_Adnic').removeClass("btn btn-success");
                    $('#btn_Update_Adnic').addClass("btn btn-success btn-loaders btn-icon");
                    $('#btn_Update_Adnic').html("Updating the Record....");
                    var uads_reason = $.map($(':checkbox[name=uads_reason]:checked'), function (n, i) {
                        return n.value;
                    }).join(',');
                    var _dataInsert = {
                        "adsId": $("#adsId").val(),
                        "ads_appId": $("#uads_appId").val(),
                        "ads_reason": uads_reason,
                        "ads_voucher": $("#uads_voucher").val(),
                        "ads_group_mem": $("#uads_group_mem").val(),
                        "ads_type_plan": $("#uads_type_plan").val(),
                        "ads_reason_other": $("#uads_reason_other").val(),
                        "ads_condition": $("#uads_condition").val(),
                        "ads_visit": moment($("#uads_visit").val()).format("YYYY-MM-DD"),
                        "ads_treat_details": $("#uads_treat_details").val(),
                        "ads_addr1": '',
                        "ads_bill1": '',
                        "ads_tdate1": '',
                        "ads_desc1": '',
                        "ads_amt1": '',

                        "ads_addr2": '',
                        "ads_bill2": '',
                        "ads_tdate2": '',
                        "ads_desc2": '',
                        "ads_amt2": '',

                        "ads_addr3": '',
                        "ads_bill3": '',
                        "ads_tdate3": '',
                        "ads_desc3": '',
                        "ads_amt3": '',

                        "ads_addr4": '',
                        "ads_bill4": '',
                        "ads_tdate4": '',
                        "ads_desc4": '',
                        "ads_amt4": '',

                        "ads_addr5": '',
                        "ads_bill5": '',
                        "ads_tdate5": '',
                        "ads_desc5": '',
                        "ads_amt5": '',
                        "ads_total": '',
                        "ads_oth_above": $('input[name=ads_oth_above]:checked').val(),
                        "ads_oth_claim": $('input[name=ads_oth_claim]:checked').val(),
                        "ads_oth_above_det": $("#uads_oth_above_det").val(),
                        "ads_oth_claim_det": $("#uads_oth_claim_det").val(),
                        "ads_onset": $("#uads_onset_duration").val(),
                        "ads_bank": $("#uads_bankDetails").val(),
                        "ads_account": $("#uads_account_holder").val(),
                        "ads_bname": $("#uads_bank_name").val(),
                        "ads_baddress": $("#uads_bank_address").val(),
                        "ads_bcurrency": $("#uads_bank_currency").val(),
                        "ads_bswiftcode": $("#uads_bank_swiftcode").val(),
                        "ads_witnessname": $("#uads_witnessname").val(),
                        "ads_contact": $("#uads_contact").val(),
                        "__RequestVerificationToken": $('input[name="__RequestVerificationToken"]').val()
                    }
                    console.log(_dataInsert)
                    $.ajax({
                        type: "POST",
                        url: "@Url.Action("UpdateAdnic", "ReimbursementForms", new { area = "EMRForms" })",
                        dataType: 'JSON',
                        data: _dataInsert,
                        success: function (data) {
                            $('#pasthis_edit').hide();
                            $('#btn_Update_Adnic').removeClass("btn btn-warning btn-loaders btn-icon");
                            $('#btn_Update_Adnic').addClass("btn btn-warning");
                            $('#btn_Update_Adnic').html("Save Changes");
                            if (data.isSuccess) {
                                if (data.isInserted) {
                                    GetAdnic();
                                    var alertPlaceholder = document.getElementById("Alert");
                                    function alert(e, t) {
                                        var l = document.createElement("div");
                                        l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible"  role="alert">' + e +
                                            '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                                    }
                                    alert("<i class='fe fe-check-circle text-white'></i> Adnic Updated Successfully!", "success");
                                    Timeout();
                                    $("#adnic_edit").hide();
                                    $("#adnic_add").show();

                                }
                                else {
                                    let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                                        "<div class='alert alert-warning' role='alert'>" +
                                        "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                        "<strong>Warning.. Adnic Alredy Exists..</strong><br/>" +
                                        "</div></div>";
                                    $("#error").html(html);
                                }
                            }
                            else
                            {
                                let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                                    "<div class='alert alert-danger' role='alert'>" +
                                    "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                    "<strong>Validation Error.. Please correct before you submit the form!&nbsp;</strong><br/><ul>";
                                $.each(data.message, function (index, value) {
                                    html += "<li><small>" + value + "</small><li>";
                                    var elem = $("#" + index);
                                    if (elem.hasClass("select2-hidden-accessible")) {
                                        $("#select2-" + elem.attr("id") + "-container").parent().addClass('error');
                                    }
                                    else {
                                        $(elem).addClass(" is-invalid");
                                    }

                                    setTimeout(function () {
                                        if (elem.hasClass("select2-hidden-accessible")) {
                                            $("#select2-" + elem.attr("id") + "-container").parent().removeClass('error');
                                        }
                                        else {
                                            $(elem).removeClass("is-invalid");
                                        }
                                    }, 5000);
                                });
                                html += "</ul></div></div>";
                                $("#error").html(html);
                            }
                        },
                        error: function (xhr) {
                            $('#btn_Update_Adnic').removeClass("btn btn-warning btn-loaders btn-icon");
                            $('#btn_Update_Adnic').addClass("btn btn-warning");
                            $('#btn_Update_Adnic').html("Save Changes");
                            Timeout();
                        }
                    });

                }
                else {
                    $('.modal-body').animate({
                        scrollTop: ($('.has-error').offset().top - 300)
                    }, 2000);
                }
            });
        //#endregion

        //#region Delete Click
            $('#btn_Delete_Adnic').on('click', function (e) {
                e.preventDefault();
                $('#btn_Delete_Adnic').removeClass("btn btn-success");
                $('#btn_Delete_Adnic').addClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Delete_Adnic').html("Deleting the Record....");

                    $.ajax({
                        url: '@Url.Action("DeleteAdnic", "ReimbursementForms", new { area = "EMRForms" })?adsId=' + $("#adsId").val(),
                        type: "POST",
                        dataType: 'JSON',
                        success: function (data) {
                            $('#btn_Delete_Adnic').removeClass("btn btn-success btn-loaders btn-icon");
                            $('#btn_Delete_Adnic').addClass("btn btn-warning");
                            $('#btn_Delete_Adnic').html("Delete");
                            if (data.isAuthorized) {
                                if (data.success) {
                                    var alertPlaceholder = document.getElementById("Alert");
                                    function alert(e, t) {
                                        var l = document.createElement("div");
                                        l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                                            '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                                    }
                                    alert("<i class='fe fe-check-circle text-white'></i> Adnic Claim Deleted Successfully!", "success");
                                    clearControls();
                                    $("#adnic_edit").hide();
                                    $("#adnic_add").show();
                                    Timeout();
                                    Addadnic();
                                }
                                else {
                                    let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                                        "<div class='alert alert-warning' role='alert'>" +
                                        "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                        "<strong>Error!.. Failed to Delete..</strong><br/>" +
                                        "</div></div>";
                                    $("#error").html(html);
                                }
                            }
                            else {
                                var alertPlaceholder = document.getElementById("Alert");
                                function alert(e, t) {
                                    var l = document.createElement("div");
                                    l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                                        '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                                }
                                alert("<i class='fe fe-check-circle text-white'></i> You do not have Enough Privileges to Delete this Designation!", "Access Denied!");
                            }
                        },
                        error: function (xhr) {
                            $('#btn_Delete_Adnic').removeClass("btn btn-success btn-loaders btn-icon");
                            $('#btn_Delete_Adnic').addClass("btn btn-Delete");
                            $('#btn_Delete_Adnic').html("Delete");
                            Timeout();
                        }
                    })
            });
        //#endregion

    //#region Wacom Tab Signature
        var openWacomTabSignaturePad = function (id) {
                var _data = {
                    "patId": @emr.patId,
                    "person": id,
                    "form": formName1,
                    "appId": @emr.appId,
                    "formname":"Adnic",
                    "formlink":"PrintAdnicClaim.aspx",
                    "eSign":""
                }
            $.ajax({
                type: "GET",
                url: "@Url.Action("WacomTabSignaturePad", "WacomTabSignaturePad", new { area = "Common" })",
                contentType: "application/json",
                dataType: "html",
                data: _data,
                success: function (response) {
                    $("#signature_pad_body").html(response);
                    $("#signature_pad").modal("show");
                },
                error: function (xhr) {
                    console.log("Error :" + xhr.statusText);
                }
            });
        }
    //#endregion

        //#region Signature
            var openSignaturePad = function (id) {
                var _data = {
                    "patId": @emr.patId,
                    "person": id,
                    "form": formName1,
                    "appId": @emr.appId,
                    "formname":"Adnic",
                    "formlink":"PrintAdnicClaim.aspx",
                    "eSign":""
                }
                $.ajax({
                    type: "GET",
                    url: "@Url.Action("SignaturePad", "SignaturePad", new { area = "Common" })",
                    contentType: "application/json",
                    dataType: "html",
                    data: _data,
                    success: function (response) {
                        $("#signature_pad_body").html(response);
                        $("#signature_pad").modal("show");
                    },
                    error: function (xhr) {
                        console.log("Error :" + xhr.statusText);
                    }
                });
            }
        //#endregion

        //#region Get Signature
            var GetSignaturename = function  (person) {
                $.ajax({
                    url: '@Url.Action("GetSignature", "SignaturePad", new { area = "Common" })?appId=' + @emr.appId + '&person=' + person + '&form=Adnic',
                        type: "GET",
                        dataType: "json",
                        async: false,
                    success: function (response) {
                        console.log("fgxghszd");
                        console.log(response);
                        let sign = response[0].psb_sign;
                        var date = moment(response[0].psb_date_created).format("DD-MM-YYYY HH:mm");
                        if (response[0].person == "witness") {
                            $("#uwitimg").show();
                            $("#uwit_sign").attr("src", sign);
                            $("#upsb_date_witness").text(date);
                        }
                    },
                    error: function (xhr) {
                        console.log(xhr);
                        alert(xhr);
                    }

                });
            };
        //#endregion

        //#region Validation Initialization
            var validate = function () {
                $("#form_EditAdnic").validate({
                    rules: {
                        ads_visit: {
                            required: true
                        },

                    },
                    messages: {
                        ads_visit: {
                            required: "Please select Visit Date!"
                        },

                    },
                    highlight: function (element) {
                        var elem = $(element);
                        $(element).parent().addClass('has-error');
                    },
                    unhighlight: function (element) {
                        var elem = $(element);
                        $(element).parent().removeClass('has-error');
                    },
                    errorElement: 'span',
                    errorClass: 'text-danger fw-bold',
                    errorPlacement: function (error, element) {
                        var elem = $(element);
                        if (element.parent('.input-group').length) {
                            error.insertAfter(element.parent());
                        } else {
                            error.insertAfter(element);
                        }
                    }
                });
                $('#uads_contact').keypress(function (e) {
                    var charCode = (e.which) ? e.which : e.keyCode
                    var inputValue = $(this).val() + String.fromCharCode(charCode);

                    if (String.fromCharCode(charCode).match(/[^0-9.]/g)) {
                        return false;
                    }
                });
                $('#uads_visit').keypress(function (e) {
                    var charCode = (e.which) ? e.which : e.keyCode
                    if (String.fromCharCode(charCode).match(/[^0-9./-]/g)) {
                        return false;

                    }
                    else {
                        if (e.target.value.length >= 18)
                            return false;
                    }
                });
            }
        //#endregion

        //#region Alert Timeout
            function Timeout() {
                window.setTimeout(function () {
                    $(".alert").fadeTo(500, 0).slideUp(500, function () {
                        $(this).remove();
                    });
                }, 4200);
            }
        //#endregion

        //#region Clear Controls
            var clearControls = function () {
                $("#uads_voucher").val("");
                $("#uads_group_mem").val("");
                $("#ads_type_plan").val("");
                $("#ads_reason_other").val("");
                $("#ads_condition").val("");
                $("#ads_treat_details").val("");
                $("#ads_oth_above_det").val("");
                $("#ads_oth_claim_det").val("");
                $("#ads_onset_duration").val("");
                $("#ads_bankDetails").val("");
                $("#ads_account_holder").val("");
                $("#ads_bank_name").val("");
                $("#ads_bank_address").val("");
                $("#ads_bank_currency").val("");
                $("#ads_bank_swiftcode").val("");
                $("#ads_witnessname").val("");
                $("#ads_contact").val("");

                $('input[name=ads_oth_above]').prop('checked', false);
                $('input[name=ads_oth_claim]').prop('checked', false);
            }
        //#endregion

        //#region Print Adnic Request
            function PrintAdnic() {
                window.open("@Url.Action("PrintAdnic", "ReimbursementForms", new { area = "EMRForms" })?adsId=" + $("#adsId").val())
            }
        //#endregion



</script>
@*}*@