@model BusinessEntities.EMRForms.NasDarAlTakaful
@using System.Linq;
@using System.Security.Claims;
@using BusinessEntities;
@{
    var claims = ClaimsPrincipal.Current.Identities.First().Claims.ToList();
    var emp_designation = claims.Where(c => c.Type == ClaimTypes.Role).Select(c => c.Value).SingleOrDefault();
    EMRInfo emr = (EMRInfo)TempData["emr_data"];
    TempData.Keep("emr_data");
}
<div class="modal-body p-4">
    <form id="form_NasDarAlTakafulDecision" class="fs-14" autocomplete="off" name="NasDarAlTakaful" ondrop="return false;" onpaste="return false;" oncut="return false;">
        @Html.AntiForgeryToken()
        @Html.HiddenFor(m => m.ndtnId, new { @id = "ndtnId", @value = "@Model.ndtnId" })

        <div class="row">
            <div class="col-lg-12 col-xl-12 col-md-12 text-justify col-sm-12">
                <div>
                    <h5 class="font-weight-bold ps-3">Section 1 – Member Information</h5>
                </div>
                <div class="card-body">
                    <div class="row outer-border">
                        <div class="col-lg-12 col-md-12 ps-0">
                            <div class="form-group row">
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">Patient name (as printed on card)</label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_name&nbsp;</span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">Membership number from your card</label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        <span class="font-weight-normal1 text-capitalize text-left">@emr.pi_insno&nbsp;</span>
                                    </div>
                                </div>
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">Date Of Birth</label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">

                                        <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_dob&nbsp;</span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">
                                        Principal name (as printed on card)
                                    </label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        @Html.TextBoxFor(m => m.ndtn_1, new { @class = "form-control", @id = "ndtn_1", @maxlength = "10" })
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">
                                        Principal contact information
                                    </label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        @Html.TextBoxFor(m => m.ndtn_2, new { @class = "form-control", @id = "ndtn_2", @maxlength = "10" })
                                    </div>
                                </div>
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">Mob number</label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        @Html.TextBoxFor(m => m.ndtn_3, new { @class = "form-control", @id = "ndtn_3", @maxlength = "20" })
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">E-mail</label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        @Html.TextBoxFor(m => m.ndtn_4, new { @class = "form-control", @id = "ndtn_4", @maxlength = "20" })
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <h5 class="font-weight-bold ps-3 text-black text-justify text-center">
                        Section 2 – Medical Information <br />(To be fully completed by patient’s medical practitioner – all boxes must be completed in BLOCK letters.)
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row outer-border">
                        <div class="col-sm-6 col-md-6">
                            <div class="form-group">
                                <label class="form-label">Country of treatment </label>
                                @Html.TextBoxFor(m => m.ndtn_5, new { @class = "form-control", @id = "ndtn_5", @maxlength = "20" })
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6">
                            <div class="form-group">
                                <label class="form-label">Provider name and contact information</label>
                                @Html.TextBoxFor(m => m.ndtn_6, new { @class = "form-control", @id = "ndtn_6", @maxlength = "20" })
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6">
                            <div class="form-group">
                                <label class="form-label">Date when first symptoms were noticed</label>
                                @Html.TextBoxFor(m => m.ndtn_7, new { @class = "form-control", @id = "ndtn_7", @maxlength = "20" })
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6">
                            <div class="form-group">
                                <label class="form-label">Physician name and contact information </label>
                                @Html.TextBoxFor(m => m.ndtn_8, new { @class = "form-control", @id = "ndtn_8", @maxlength = "20" })
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <p>I declare that I am the patient’s medical practitioner, and that the particulars given are to the best of my knowledge true and correct</p>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="form-label">Physician signature and official stamp :</label>
                                <img alt="stamp" src="@emr.doc_sign" id="doc_sign" class="avatar avatar-xl bsquare" />
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group">
                                <p class="text-black text-justify text-center">Please provide details of diagnosis (primary and secondary) or symptom(s) and prescribed treatment(s) or investigation(s).</p>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6">
                            <div class="form-group">
                                <label class="form-label">Symptoms </label>
                                @Html.TextAreaFor(m => m.ndtn_9, new { @class = "form-control", @row = "2", @id = "ndtn_9" })
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6">
                            <div class="form-group">
                                <label class="form-label">Treatment / investigation</label>
                                @Html.TextAreaFor(m => m.ndtn_10, new { @class = "form-control", @row = "2", @id = "ndtn_10" })
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-12 col-md-12 col-lg-12">
                        <h5 class="font-weight-bold ps-3">
                            Section 3 – Claimed Invoices
                        </h5>
                        <div class="col-md-12">
                            <div class="table-responsive">
                                <table id="tbl_1" class="table table-striped table-bordered text-nowrap" style="width: 100%; cursor: pointer;">
                                    <thead>
                                        <tr style="color: #fff !important; background-color: #808080; border-color: #3C457D; ">
                                            <th class="border-bottom-0 font-weight-semibold text-white">No</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">Invoice number</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">Claimed amount</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white" style="min-width:150px">Currency</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">No</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">Invoice number</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">Claimed amount</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white" style="min-width:150px">Currency</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_11, new { @class = "form-control", @id = "ndtn_11", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_12, new { @class = "form-control", @id = "ndtn_12", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_13, new { @class = "form-control", @id = "ndtn_13", @maxlength = "20" })</td>
                                            <td>5</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_14, new { @class = "form-control", @id = "ndtn_14", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_15, new { @class = "form-control", @id = "ndtn_15", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_16, new { @class = "form-control", @id = "ndtn_16", @maxlength = "20" })</td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_17, new { @class = "form-control", @id = "ndtn_17", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_18, new { @class = "form-control", @id = "ndtn_18", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_19, new { @class = "form-control", @id = "ndtn_19", @maxlength = "20" })</td>
                                            <td>6</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_20, new { @class = "form-control", @id = "ndtn_20", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_21, new { @class = "form-control", @id = "ndtn_21", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_22, new { @class = "form-control", @id = "ndtn_22", @maxlength = "20" })</td>
                                        </tr>
                                        <tr>
                                            <td>3</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_23, new { @class = "form-control", @id = "ndtn_23", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_24, new { @class = "form-control", @id = "ndtn_24", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_25, new { @class = "form-control", @id = "ndtn_25", @maxlength = "20" })</td>
                                            <td>7</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_26, new { @class = "form-control", @id = "ndtn_26", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_27, new { @class = "form-control", @id = "ndtn_27", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_28, new { @class = "form-control", @id = "ndtn_28", @maxlength = "20" })</td>
                                        </tr>
                                        <tr>
                                            <td>4</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_29, new { @class = "form-control", @id = "ndtn_29", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_30, new { @class = "form-control", @id = "ndtn_30", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_31, new { @class = "form-control", @id = "ndtn_31", @maxlength = "20" })</td>
                                            <td>8</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_32, new { @class = "form-control", @id = "ndtn_32", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_33, new { @class = "form-control", @id = "ndtn_33", @maxlength = "20" })</td>
                                            <td>@Html.TextBoxFor(m => m.ndtn_34, new { @class = "form-control", @id = "ndtn_34", @maxlength = "20" })</td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">Total claimed amount per currency</td>
                                            <td colspan="5">@Html.TextBoxFor(m => m.ndtn_41, new { @class = "form-control", @id = "ndtn_41", @maxlength = "20" })</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <h5 class="font-weight-bold ps-3 text-black text-justify text-center">
                        Section 4 – Settlement
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row outer-border">
                        <div class="col-sm-12 col-md-12">
                            <div class="form-group row d-flex">
                                <label class="text-black col-md-6 col-lg-3">Settlement currency : Settlement by </label>
                                <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left col-md-3">
                                    <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                        <input type="checkbox" class="custom-control-input" name="ndtn_checkbox" value="1">
                                        <span class="custom-control-label">Cheque</span>
                                    </label>
                                </div>
                                <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left col-md-3">
                                    <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                        <input type="checkbox" class="custom-control-input" name="ndtn_checkbox" value="2">
                                        <span class="custom-control-label">Wire Transfer</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6">
                            <div class="form-group">
                                <label class="form-label">(A) Bank name</label>
                                @Html.TextBoxFor(m => m.ndtn_35, new { @class = "form-control", @id = "ndtn_35", @maxlength = "20" })
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6">
                            <div class="form-group">
                                <label class="form-label">(B) Account title</label>
                                @Html.TextBoxFor(m => m.ndtn_36, new { @class = "form-control", @id = "ndtn_36", @maxlength = "20" })
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6">
                            <div class="form-group">
                                <label class="form-label">(C) IBAN number / Account number </label>
                                @Html.TextBoxFor(m => m.ndtn_37, new { @class = "form-control", @id = "ndtn_37", @maxlength = "20" })
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6">
                            <div class="form-group">
                                <label class="form-label">(D) SWIFT code  </label>
                                @Html.TextBoxFor(m => m.ndtn_38, new { @class = "form-control", @id = "ndtn_38", @maxlength = "20" })
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6">
                            <div class="form-group">
                                <label class="form-label">(E) Bank address </label>
                                @Html.TextBoxFor(m => m.ndtn_39, new { @class = "form-control", @id = "ndtn_39", @maxlength = "20" })
                            </div>
                        </div>
                        <div class="col-sm-6 col-md-6">
                            <div class="form-group">
                                <label class="form-label">(F) Beneficiary address </label>
                                @Html.TextBoxFor(m => m.ndtn_40, new { @class = "form-control", @id = "ndtn_40", @maxlength = "20" })
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group text-black font-weight-bold text-justify">
                                <h4 class="text-black font-weight-bold">Important Notes:</h4>
                                <p>
                                    Please submit the medical reports from your treating physician, pharmacy prescriptions, investigations requests and their results,
                                    invoices with itemized breakdown and original receipts. In case of online submission, please retain the original documents as they may be
                                    required to finalize your claim.
                                </p>
                                <p>
                                    NAS prior approval is required for all non-emergency hospitalizations. Before admission, you are kindly required to e-mail a detailed medical
                                    report and cost estimate of the proposed treatment on official letterhead duly signed and stamped by the treating physician to claimscenter@nas.ae.
                                </p>
                                <p>Cheques are issued in the name of the principal and are valid for 6 months from the date of issue.</p>
                                <p>
                                    For transfers within the U.A.E., fields (A), (B) and (C) are mandatory. For transfers outside the U.A.E., please complete all fields in the settlement
                                    section above. In case IBAN is not available in the destination country (e.g. India), please enter bank account number in lieu of IBAN number.
                                </p>
                                <p>
                                    Claim settlements in currencies other than your bank account currency may result in foreign exchange charges. Please check with your bank regarding
                                    these and any additional fees that may be charged by your bank on incoming remittances.
                                </p>
                                <p>
                                    NAS bears no liability for any incorrect bank account details provided above. Furthermore, any charges related to corrective action shall be deducted
                                    from the final settlement.
                                </p>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-group row outer-border">
                                <h4 class="text-black font-weight-bold">Patient's declaration and conset</h4>
                                <p>
                                    I, the undersigned, confirm that I am the patient/patient’s spouse or guardian (if patient is under 18 years of age) and I wish to claim benefits
                                    and declare that all the particulars given above are to the best of my knowledge true and correct. In addition, I authorize and request any hospital,
                                    physician, and any other health provider to furnish NAS Administration Services with the complete information including copies of their records in
                                    connection with medical treatment and/ or other services provided to me or to my dependent. I also agree that a copy of this consent shall have the
                                    validity of the original. Signature of the principal and or spouse
                                </p>
                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <div>
                                        <div class="form-group mb-3" style="display:none" id="patimg"><img alt="Signature" src="" id="pat_sign" class="avatar avatar-xl bsquare" /></div>
                                    </div>
                                    <label class="form-label"> Signature of the Insured/Guardian:</label>
                                </div>
                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <div>
                                        <label class="form-label text-red text-left" id="upsb_date_witness" name="">&nbsp;</label>
                                    </div>
                                    <label class="form-label">Date:</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row ">
            <div class="row mt-2">
                <div class="col-sm-12 col-md-12 col-lg-12 text-center">
                    <div class="btn-list btn-animation">
                        <button type="submit" class="btn btn-success" id="btn_Insert_NasDarAlTakaful">Save</button>
                        <button type="button" class="btn btn-outline-dark" id="btn_Reset_NasDarAlTakaful">Reset</button>
                        <div class="btn-group mr-2">
                            <div class="dropdown">
                                <button type="button" class="btn-sm btn-secondary me-2 mb-2 dropdown-toggle" data-bs-toggle="dropdown">
                                    <i class="fa fa-paint-brush">&nbsp;&nbsp;</i> Patient
                                </button>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" onclick="openSignaturePad('patient')">Tab</a>
                                    <a class="dropdown-item" onclick="openWacomTabSignaturePad('patient')">Wacom Tab</a>
                                </div>
                            </div>
                        </div>
                        <button type="button" class="btn btn-outline-danger me-1" id="btn_Close_NasDarAlTakaful" style="display:none">
                            Close
                        </button>
                    </div>
                    <div id="warningMessage" class="text-danger" style="display: none;">Please fill in at least one field before submitting.</div>
                </div>
            </div>
        </div>
    </form>
</div>
@*@section myScripts{*@
<script type="text/javascript">
    //#region Page Load
        var formName1 = $(form_NasDarAlTakafulDecision).closest('form').attr('name');
        $(function () {
            validate();
        });
    //#endregion

    //#region Function to check if any field is filled
        function isAnyFieldFilledOrSelected() {
            var isFilledOrSelected = false;

            // Check input fields
            $('.form-control').each(function () {
                if ($(this).val().trim() !== '') {
                    isFilledOrSelected = true;
                    return false; // Exit the loop if any input field is filled
                }
            });

            // Check checkboxes and radio buttons
            $('input[type="checkbox"], input[type="radio"]').each(function () {
                if ($(this).is(':checked')) {
                    isFilledOrSelected = true;
                    return false; // Exit the loop if any checkbox or radio button is selected
                }
            });

            return isFilledOrSelected;
        }
    //#endregion

    //#region Alert Timeout
        function Timeout() {
            window.setTimeout(function () {
                $(".alert").fadeTo(500, 0).slideUp(500, function () {
                    $(this).remove();
                });
            }, 4200);
        }
    //#endregion

    //#region Reset
        $('#btn_Reset_NasDarAlTakaful').on('click', function (e) {
            e.preventDefault();
            clearControls();
        });
    //#endregion

    //#region Validation Initialization
        var validate = function () {
            $('#ndtn_12').keypress(function (e) {
                var charCode = (e.which) ? e.which : e.keyCode
                var inputValue = $(this).val() + String.fromCharCode(charCode);

                if (String.fromCharCode(charCode).match(/[^0-9.]/g)) {
                    return false;
                }

                if (parseFloat(inputValue) > 1000000) {
                    return false;
                }
            });
            $("#ndtn_12").on('input', function () {
                var disc = $(this).val();
                if (disc == "" || disc == null || disc == undefined) {
                    $("#ndtn_12").val(0.00);
                }
            });
            $('#ndtn_15').keypress(function (e) {
                var charCode = (e.which) ? e.which : e.keyCode
                var inputValue = $(this).val() + String.fromCharCode(charCode);

                if (String.fromCharCode(charCode).match(/[^0-9.]/g)) {
                    return false;
                }

                if (parseFloat(inputValue) > 1000000) {
                    return false;
                }
            });
            $("#ndtn_15").on('input', function () {
                var disc = $(this).val();
                if (disc == "" || disc == null || disc == undefined) {
                    $("#ndtn_15").val(0.00);
                }
            });
            $('#ndtn_18').keypress(function (e) {
                var charCode = (e.which) ? e.which : e.keyCode
                var inputValue = $(this).val() + String.fromCharCode(charCode);

                if (String.fromCharCode(charCode).match(/[^0-9.]/g)) {
                    return false;
                }

                if (parseFloat(inputValue) > 1000000) {
                    return false;
                }
            });
            $("#ndtn_18").on('input', function () {
                var disc = $(this).val();
                if (disc == "" || disc == null || disc == undefined) {
                    $("#ndtn_18").val(0.00);
                }
            });
            $('#ndtn_21').keypress(function (e) {
                var charCode = (e.which) ? e.which : e.keyCode
                var inputValue = $(this).val() + String.fromCharCode(charCode);

                if (String.fromCharCode(charCode).match(/[^0-9.]/g)) {
                    return false;
                }

                if (parseFloat(inputValue) > 1000000) {
                    return false;
                }
            });
            $("#ndtn_21").on('input', function () {
                var disc = $(this).val();
                if (disc == "" || disc == null || disc == undefined) {
                    $("#ndtn_21").val(0.00);
                }
            });
            $('#ndtn_24').keypress(function (e) {
                var charCode = (e.which) ? e.which : e.keyCode
                var inputValue = $(this).val() + String.fromCharCode(charCode);

                if (String.fromCharCode(charCode).match(/[^0-9.]/g)) {
                    return false;
                }

                if (parseFloat(inputValue) > 1000000) {
                    return false;
                }
            });
            $("#ndtn_24").on('input', function () {
                var disc = $(this).val();
                if (disc == "" || disc == null || disc == undefined) {
                    $("#ndtn_24").val(0.00);
                }
            });
            $('#ndtn_27').keypress(function (e) {
                var charCode = (e.which) ? e.which : e.keyCode
                var inputValue = $(this).val() + String.fromCharCode(charCode);

                if (String.fromCharCode(charCode).match(/[^0-9.]/g)) {
                    return false;
                }

                if (parseFloat(inputValue) > 1000000) {
                    return false;
                }
            });
            $("#ndtn_27").on('input', function () {
                var disc = $(this).val();
                if (disc == "" || disc == null || disc == undefined) {
                    $("#ndtn_27").val(0.00);
                }
            });
            $('#ndtn_30').keypress(function (e) {
                var charCode = (e.which) ? e.which : e.keyCode
                var inputValue = $(this).val() + String.fromCharCode(charCode);

                if (String.fromCharCode(charCode).match(/[^0-9.]/g)) {
                    return false;
                }

                if (parseFloat(inputValue) > 1000000) {
                    return false;
                }
            });
            $("#ndtn_30").on('input', function () {
                var disc = $(this).val();
                if (disc == "" || disc == null || disc == undefined) {
                    $("#ndtn_30").val(0.00);
                }
            });
            $('#ndtn_33').keypress(function (e) {
                var charCode = (e.which) ? e.which : e.keyCode
                var inputValue = $(this).val() + String.fromCharCode(charCode);

                if (String.fromCharCode(charCode).match(/[^0-9.]/g)) {
                    return false;
                }

                if (parseFloat(inputValue) > 1000000) {
                    return false;
                }
            });
            $("#ndtn_33").on('input', function () {
                var disc = $(this).val();
                if (disc == "" || disc == null || disc == undefined) {
                    $("#ndtn_33").val(0.00);
                }
            });
        }

    //#endregion

    //#region Wacom Tab Signature
        var openWacomTabSignaturePad = function (id) {
            var _data = {
                "patId": @emr.patId,
                "person": id,
                "form": "NasDarAlTakaful",
                "appId": @emr.appId,
                "formname":"NasDarAlTakaful",
                "formlink":"PrintNasDarAlTakafulClaim.aspx",
                "eSign":""
            }
            $.ajax({
                type: "GET",
                url: "@Url.Action("WacomTabSignaturePad", "WacomTabSignaturePad", new { area = "Common" })",
                contentType: "application/json",
                dataType: "html",
                data: _data,
                success: function (response) {
                    $("#signature_pad_body").html(response);
                    $("#signature_pad").modal("show");
                },
                error: function (xhr) {
                    console.log("Error :" + xhr.statusText);
                }
            });
        }
    //#endregion

    //#region Signature
        var openSignaturePad = function (id) {
            var _data = {
                "patId": @emr.patId,
                "person": id,
                "form": "NasDarAlTakaful",
                "appId": @emr.appId,
                "formname":"NasDarAlTakaful",
                "formlink":"PrintNasDarAlTakafulClaim.aspx",
                "eSign":""
            }
            $.ajax({
                type: "GET",
                url: "@Url.Action("SignaturePad", "SignaturePad", new { area = "Common" })",
                contentType: "application/json",
                dataType: "html",
                data: _data,
                success: function (response) {
                    $("#signature_pad_body").html(response);
                    $("#signature_pad").modal("show");
                },
                error: function (xhr) {
                    console.log("Error :" + xhr.statusText);
                }
            });
        }
    //#endregion

    //#region Clear Controls
        var clearControls = function () {
            $("#ndtn_1").val("");
            $("#ndtn_2").val("");
            $("#ndtn_3").val("");
            $("#ndtn_5").val("");
            $("#ndtn_6").val("");
            $("#ndtn_7").val("");
            $("#ndtn_8").val("");
            $("#ndtn_9").val("");
            $("#ndtn_10").val("");
            $("#ndtn_11").val("");
            $("#ndtn_12").val("");
            $("#ndtn_13").val("");
            $("#ndtn_14").val("");
            $("#ndtn_15").val("");
            $("#ndtn_16").val("");
            $("#ndtn_17").val("");
            $("#ndtn_18").val("");
            $("#ndtn_19").val("");
            $("#ndtn_20").val("");
            $("#ndtn_21").val("");
            $("#ndtn_22").val("");
            $("#ndtn_23").val("");
            $("#ndtn_24").val("");
            $("#ndtn_25").val("");
            $("#ndtn_26").val("");
            $("#ndtn_27").val("");
            $("#ndtn_28").val("");
            $("#ndtn_27").val("");
            $("#ndtn_30").val("");
            $("#ndtn_31").val("");
            $("#ndtn_32").val("");
            $("#ndtn_33").val("");
            $("#ndtn_34").val("");
            $("#ndtn_35").val("");
            $("#ndtn_36").val("");
            $("#ndtn_37").val("");
            $("#ndtn_38").val("");
            $("#ndtn_37").val("");
            $("#ndtn_40").val("");
            $("#ndtn_41").val("");
        }
    //#endregion

    //#region Insert Button Click
        $('#btn_Insert_NasDarAlTakaful').on('click', function (e) {
            e.preventDefault();
            if (isAnyFieldFilledOrSelected()) {
                if ($("#form_NasDarAlTakafulDecision").valid()) {
                    $('#btn_Insert_NasDarAlTakaful').removeClass("btn btn-success");
                    $('#btn_Insert_NasDarAlTakaful').addClass("btn btn-success btn-loaders btn-icon");
                    $('#btn_Insert_NasDarAlTakaful').html("Saving the Record....");
                    var ndtn_chkbox = "";
                    $('.custom-control-input:checked').each(function (index) {
                        ndtn_chkbox = ndtn_chkbox + ',' + $(this).val();
                    });
                    var ndtn_checkbox = ndtn_chkbox.substring(1);
                    var _dataInsert = {
                    "ndtnId": 0,
                    "ndtn_appId": @emr.appId,
                    "ndtn_checkbox": ndtn_checkbox,
                    "ndtn_1": $("#ndtn_1").val(),
                    "ndtn_2": $("#ndtn_2").val(),
                    "ndtn_3": $("#ndtn_3").val(),
                    "ndtn_4": $("#ndtn_4").val(),
                    "ndtn_5": $("#ndtn_5").val(),
                    "ndtn_6": $("#ndtn_6").val(),
                    "ndtn_7": $("#ndtn_7").val(),
                    "ndtn_8": $("#ndtn_8").val(),
                    "ndtn_9": $("#ndtn_9").val(),
                    "ndtn_10": $("#ndtn_10").val(),
                    "ndtn_11": $("#ndtn_11").val(),
                    "ndtn_12": $("#ndtn_12").val(),
                    "ndtn_13": $("#ndtn_13").val(),
                    "ndtn_14": $("#ndtn_14").val(),
                    "ndtn_15": $("#ndtn_15").val(),
                    "ndtn_16": $("#ndtn_16").val(),
                    "ndtn_17": $("#ndtn_17").val(),
                    "ndtn_18": $("#ndtn_18").val(),
                    "ndtn_19": $("#ndtn_19").val(),
                    "ndtn_20": $("#ndtn_20").val(),
                    "ndtn_21": $("#ndtn_21").val(),
                    "ndtn_22": $("#ndtn_22").val(),
                    "ndtn_23": $("#ndtn_23").val(),
                    "ndtn_24": $("#ndtn_24").val(),
                    "ndtn_25": $("#ndtn_25").val(),
                    "ndtn_26": $("#ndtn_26").val(),
                    "ndtn_27": $("#ndtn_27").val(),
                    "ndtn_28": $("#ndtn_28").val(),
                    "ndtn_27": $("#ndtn_27").val(),
                    "ndtn_30": $("#ndtn_30").val(),
                    "ndtn_31": $("#ndtn_31").val(),
                    "ndtn_32": $("#ndtn_32").val(),
                    "ndtn_33": $("#ndtn_33").val(),
                    "ndtn_34": $("#ndtn_34").val(),
                    "ndtn_35": $("#ndtn_35").val(),
                    "ndtn_36": $("#ndtn_36").val(),
                    "ndtn_37": $("#ndtn_37").val(),
                    "ndtn_38": $("#ndtn_38").val(),
                    "ndtn_37": $("#ndtn_37").val(),
                    "ndtn_40": $("#ndtn_40").val(),
                    "ndtn_41": $("#ndtn_41").val(),
                    "ndtn_42": '',
                    "ndtn_43": '',
                    "__RequestVerificationToken": $('input[name="__RequestVerificationToken"]').val()
                    }
                    console.log(_dataInsert);
                $.ajax({
                type: "POST",
                url: "@Url.Action("InsertNasDarAlTakaful", "ReimbursementForms", new { area = "EMRForms" })",
                dataType: 'JSON',
                data: _dataInsert,
                success: function (data) {
                $('#btn_Insert_NasDarAlTakaful').removeClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Insert_NasDarAlTakaful').addClass("btn btn-success");
                $('#btn_Insert_NasDarAlTakaful').html("Add");

                if (data.isSuccess) {
                if (data.isInserted) {
                GetNasDarAlTakaful();
                var alertPlaceholder = document.getElementById("Alert");
                function alert(e, t) {
                    var l = document.createElement("div");
                    l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" role="alert">' + e +
                        '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                }
                alert("<i class='fe fe-check-circle text-white'></i> NasDarAlTakaful Claim Form Added Successfully!", "success");
                Timeout();
                Editnasdaraltakaful();
                }
                else {
                    let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                        "<div class='alert alert-light-warning' role='alert'>" +
                        "<button type='button' class='btn-close text-warning' style='margin-bottom:-5px;' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                        "<strong><i class='fa fa-exclamation-triangle text-warning'></i> NasDarAlTakaful Claim Form Alredy Exists!</strong><br/>" +
                        "</div></div>";
                    $("#error").html(html);
                }
                }
                else {
                let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                    "<div class='alert alert-light-danger' role='alert'>" +
                    "<button type='button' class='btn-close text-danger' style='margin-bottom:-5px;' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                    "<strong><i class='fa fa-ban text-danger'></i> Validation Error! Please validate before submitting.&nbsp;</strong><br/><ul>";

                $.each(data.message, function (index, value) {
                    html += "<li><small>" + value + "</small><li>";
                    var elem = $("#" + index);
                    if (elem.hasClass("select2-hidden-accessible")) {
                        $("#select2-" + elem.attr("id") + "-container").parent().addClass('error');
                    }
                    else {
                        $(elem).addClass(" is-invalid");
                    }

                    setTimeout(function () {
                        if (elem.hasClass("select2-hidden-accessible")) {
                            $("#select2-" + elem.attr("id") + "-container").parent().removeClass('error');
                        }
                        else {
                            $(elem).removeClass("is-invalid");
                        }
                    }, 5000);
                });
                html += "</ul></div></div>";
                $("#error").html(html);
                }
                },
                error: function (xhr) {
                $('#btn_Insert_NasDarAlTakaful').removeClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Insert_NasDarAlTakaful').addClass("btn btn-success");
                $('#btn_Insert_NasDarAlTakaful').html("Add");
                Timeout();
                }
                });
                }
                else {
                $('.modal-body').animate({
                    scrollTop: ($('.has-error').offset().top - 300)
                }, 2000);
            }
            } else {
                // Show a message box or alert indicating that at least one field must be filled
                //alert('Please fill in at least one field before submitting.');
                $('#warningMessage').show();
                // Prevent form submission
                return false;
            }
            });
    //#endregion

</script>
@*}*@
<style>
    .outer-border {
        border: 2px solid #000; /* You can adjust the border thickness and color as needed */
        padding: 10px; /* Optional: Add padding for spacing */
    }
</style>