
@using System.Linq;
@using System.Security.Claims;
@using BusinessEntities;
@model BusinessEntities.EMRForms.Wamped
@{
    var claims = ClaimsPrincipal.Current.Identities.First().Claims.ToList();
    var emp_designation = claims.Where(c => c.Type == ClaimTypes.Role).Select(c => c.Value).SingleOrDefault();
    EMRInfo emr = (EMRInfo)TempData["emr_data"];
    TempData.Keep("emr_data");
}
<form id="form_EditWamped" class="needs-validation fs-14" >

    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.wapnId)
    @Html.HiddenFor(m => m.wapn_appId)

    <!-- End Row-->
    <div class="row">
        <div class="col-lg-12 col-xl-12 col-md-12 col-sm-12">
            <div class="wapnd">
                <div class="wapnd-body">
                    <div class="form-horizontal">
                        <div class="form-group row">
                            <label class="form-label col-md-6 label-with-border">
                                1- Name of the Company / Main Member<br /><span class="text-black">(In whose name policy is issued, Name of the Company in case of Group policy)</span>
                                @Html.TextBoxFor(m => m.wapn_1, new { @class = "form-control", @id = "uwapn_1", @width = "20px", @maxlength = "20" })&nbsp;
                            </label>
                            <label class="form-label col-md-6 label-with-border">
                                Name of Insurance Co.
                                @Html.TextBoxFor(m => m.wapn_2, new { @class = "form-control", @id = "uwapn_2", @width = "20px", @maxlength = "20" })&nbsp;
                            </label>
                        </div>
                        <div class="form-group row  label-with-border">
                            <label class="col-md-12 form-label">2- Details of the Insured Member ( In respect of whom claim is made)</label>
                        </div>
                        <div class="form-group row">
                            <label class="form-label col-md-6 label-with-border">
                                Patient's Name and Address<br />
                                @if (@emr.pat_name != "")
                                {
                                    <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_name&nbsp;</span>
                                    <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_address&nbsp;</span>
                                }
                                else
                                {
                                    <span class="font-weight-normal1 text-capitalize text-left">N/A</span>
                                }
                            </label>
                            <div class="form-label col-md-6 label-with-border">
                                <label class="form-label col-md-12 col-lg-6">
                                    Membership No. (UHID No.)
                                    @Html.TextBoxFor(m => m.wapn_3, new { @class = "form-control", @id = "uwapn_3", @width = "20px", @maxlength = "20" })&nbsp;
                                </label>
                                <label class="form-label col-md-12 col-lg-6">
                                    Relationship with insured
                                    @Html.TextBoxFor(m => m.wapn_4, new { @class = "form-control", @id = "uwapn_4", @width = "20px", @maxlength = "20" })&nbsp;
                                </label>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="form-label col-md-6 label-with-border">
                                Policy No.<br />
                                @Html.TextBoxFor(m => m.wapn_5, new { @class = "form-control", @id = "uwapn_5", @width = "20px", @maxlength = "20" })&nbsp;
                            </label>
                            <label class="form-label col-md-6 label-with-border">
                                Date of Birth<br />
                                <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_dob&nbsp;</span>
                            </label>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-6 label-with-border">
                                <label class="form-label d-flex">
                                    Other Insurance Coverage &nbsp;
                                    <label class="custom-control custom-radio">
                                        <input type="radio" class="custom-control-input" name="wapn_checkbox[1]" value="1" id="1">
                                        <span class="custom-control-label">Yes</span>
                                    </label> &nbsp;
                                    <label class="custom-control custom-radio">
                                        <input type="radio" class="custom-control-input" name="wapn_checkbox[1]" value="2" id="2">
                                        <span class="custom-control-label">No</span>
                                    </label> &nbsp;
                                    (If yes attach details)
                                </label>
                                @Html.TextBoxFor(m => m.wapn_6, new { @class = "form-control", @id = "uwapn_6", @width = "20px", @maxlength = "20" })&nbsp;
                            </div>
                            <div class="col-md-6 label-with-border">
                                <label class="form-label">
                                    Gender (Male / Female)
                                </label>
                                <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_gender&nbsp;</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="form-label col-md-6 label-with-border">
                                Employee Number (Group Policy)
                                @Html.TextBoxFor(m => m.wapn_7, new { @class = "form-control", @id = "uwapn_7", @width = "20px", @maxlength = "20" })&nbsp;
                            </label>
                            <label class="form-label col-md-6 label-with-border">
                                Telephone Number
                                @Html.TextBoxFor(m => m.wapn_8, new { @class = "form-control", @id = "uwapn_8", @width = "20px", @maxlength = "20" })&nbsp;
                            </label>
                        </div>
                        <div class="form-group row  label-with-border">
                            <label class="col-md-12 form-label">
                                3- Name & Address of the Provider
                            </label>
                            @Html.TextBoxFor(m => m.wapn_9, new { @class = "form-control", @id = "uwapn_9", @width = "20px", @maxlength = "20" })&nbsp;
                        </div>
                        <div class="form-group row">
                            <div class=" form-label col-md-6 label-with-border">
                                <label class="form-label"> 4- Date of Admission / Service</label>
                                <div class="input-group col-md-12 col-lg-6 mb-1">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text">
                                            <i class="fe fe-calendar"></i>
                                        </div>
                                    </div>
                                    @Html.TextBoxFor(m => m.wapn_d1, new { @class = "form-control", @placeholder = "DD-MMMM-YYYY", @id = "uwapn_d1" })
                                </div>
                            </div>
                            <div class="form-label col-md-6 label-with-border">
                                <label class="form-label">Date of Discharge</label>
                                <div class="input-group col-md-12 col-lg-6 mb-1">
                                    <div class="input-group-prepend">
                                        <div class="input-group-text">
                                            <i class="fe fe-calendar"></i>
                                        </div>
                                    </div>
                                    @Html.TextBoxFor(m => m.wapn_d2, new { @class = "form-control", @placeholder = "DD-MMMM-YYYY", @id = "uwapn_d2" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class=" form-label col-md-6 label-with-border">
                                <label class="form-label">
                                    5- Amount Claimed
                                </label>
                                @Html.TextBoxFor(m => m.wapn_10, new { @class = "form-control", @id = "uwapn_10", @width = "20px", @maxlength = "20" })&nbsp;
                            </div>
                            <div class="form-label col-md-6 label-with-border">
                                <label class="form-label">Currency</label>
                                @Html.TextBoxFor(m => m.wapn_11, new { @class = "form-control", @id = "uwapn_11", @width = "20px", @maxlength = "20" })&nbsp;
                            </div>
                        </div>
                        <div class="form-group row">
                            <h4 class="text-blue">TO BE COMPLETED BY TREATING DOCTOR</h4>
                        </div>
                        <div class="form-group row  label-with-border">
                            <label class="col-md-12 form-label">
                                6- Diagnosis
                            </label>
                            @Html.TextBoxFor(m => m.wapn_12, new { @class = "form-control", @id = "uwapn_12", @width = "20px", @maxlength = "20" })&nbsp;
                        </div>
                        <div class="form-group row  label-with-border">
                            <label class="col-md-12 form-label">
                                7- Details of Disease / Illness contracted or injury suffered
                            </label>
                            @Html.TextBoxFor(m => m.wapn_13, new { @class = "form-control", @id = "uwapn_13", @width = "20px", @maxlength = "20" })&nbsp;
                        </div>
                        <div class="form-group row d-flex label-with-border">
                            <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left col-md-3">
                                <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                    <input type="checkbox" class="custom-control-input" name="wapn_checkbox" value="3" id="3">
                                    <span class="custom-control-label">Acute</span>
                                </label>
                            </div>
                            <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left col-md-3">
                                <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                    <input type="checkbox" class="custom-control-input" name="wapn_checkbox" value="4" id="4">
                                    <span class="custom-control-label">Chronic</span>
                                </label>
                            </div>
                            <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left col-md-3">
                                <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                    <input type="checkbox" class="custom-control-input" name="wapn_checkbox" value="5" id="5">
                                    <span class="custom-control-label">Congenital</span>
                                </label>
                            </div>
                            <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left col-md-3">
                                <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                    <input type="checkbox" class="custom-control-input" name="wapn_checkbox" value="6" id="6">
                                    <span class="custom-control-label">Others</span>
                                </label>
                            </div>
                        </div>
                        <div class="form-group row  label-with-border">
                            <label class="col-md-12 form-label">
                                8- Date of injury sustained or Disease / Illness first detected
                            </label>
                            @Html.TextBoxFor(m => m.wapn_14, new { @class = "form-control", @id = "uwapn_14", @width = "20px", @maxlength = "20" })&nbsp;
                        </div>
                        <div class="form-group row d-flex  label-with-border">
                            <label class="col-md-6 form-label">
                                9- Infertility treatment taken for the present pregnancy ( for Maternity Claims)
                            </label>
                            <div class="col-md-2">
                                <label class="custom-control custom-radio ">
                                    <input type="radio" class="custom-control-input" name="wapn_checkbox[7]" value="7" id="7">
                                    <span class="custom-control-label">Yes</span>
                                </label>
                            </div>
                            <div class="col-md-2">
                                <label class="custom-control custom-radio">
                                    <input type="radio" class="custom-control-input" name="wapn_checkbox[17]" value="8" id="8">
                                    <span class="custom-control-label">No</span>
                                </label>
                            </div>
                        </div>
                        <div class="form-group row  label-with-border">
                            <label class="col-md-12 form-label">
                                10- Investigations Done
                            </label>
                            @Html.TextBoxFor(m => m.wapn_15, new { @class = "form-control", @id = "uwapn_15", @width = "20px", @maxlength = "20" })&nbsp;
                        </div>
                        <div class="form-group row  label-with-border">
                            <label class="col-md-12 form-label">
                                11- Treatment Given
                            </label>
                            @Html.TextBoxFor(m => m.wapn_16, new { @class = "form-control", @id = "uwapn_16", @width = "20px", @maxlength = "20" })&nbsp;
                        </div>
                        <div class="form-group row  label-with-border">
                            <label class="col-md-12 form-label">
                                12- Name of Doctor
                            </label>
                            <span class="font-weight-normal1 text-capitalize text-left">@emr.doc_name&nbsp;</span>
                        </div>
                        <div class="form-group row  label-with-border">
                            <label class="col-md-12 form-label">
                                13- Telephone No
                            </label>
                            @Html.TextBoxFor(m => m.wapn_17, new { @class = "form-control", @id = "uwapn_17", @width = "20px", @maxlength = "20" })&nbsp;
                        </div>
                        <div class="form-group row  label-with-border">
                            <label class="col-md-12 form-label">
                                14- Details of Disease/Illness contracted or injury suffered.
                            </label>
                            @Html.TextBoxFor(m => m.wapn_18, new { @class = "form-control", @id = "uwapn_18", @width = "20px", @maxlength = "20" })&nbsp;
                        </div>
                        <div class="form-group row">
                            <h4 class="text-blue">TO BE COMPLETED BY DENTAL PRACTITIONER</h4>
                        </div>
                        <div class="form-group row  label-with-border">
                            <label class="col-md-12 form-label">
                                15- Details of injury sustained or Disease / Illness first detected (dd/mm/yy)
                            </label>
                            <div class="input-group col-md-6 col-lg-3 mb-1">
                                <div class="input-group-prepend">
                                    <div class="input-group-text">
                                        <i class="fe fe-calendar"></i>
                                    </div>
                                </div>
                                @Html.TextBoxFor(m => m.wapn_d3, new { @class = "form-control", @placeholder = "DD-MMMM-YYYY", @id = "uwapn_d3" })
                            </div>
                        </div>
                        <div class="row">
                            <div class="table-responsive">
                                <table id="tbl_1" class="table table-striped table-bordered text-nowrap" style="width: 100%; cursor: pointer;">
                                    <thead>
                                        <tr style="color: #fff !important; background-color: #808080; border-color: #3C457D; ">
                                            <th class="border-bottom-0 font-weight-semibold text-white">Type of Treatment</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white" style="min-width:150px">Amount</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">Type of Treatment</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white" style="min-width:150px">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Extraction</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_19, new { @class = "form-control", @id = "uwapn_19", @width = "20px" })</td>
                                            <td>Filling</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_20, new { @class = "form-control", @id = "uwapn_20", @width = "20px" })</td>
                                        </tr>
                                        <tr>
                                            <td>Neurectomy</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_21, new { @class = "form-control", @id = "uwapn_21", @width = "21px" })</td>
                                            <td>Gum Treatment</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_22, new { @class = "form-control", @id = "uwapn_22", @width = "22px" })</td>
                                        </tr>
                                        <tr>
                                            <td>X-ray</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_23, new { @class = "form-control", @id = "uwapn_23", @width = "20px" })</td>
                                            <td>R.C.T</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_24, new { @class = "form-control", @id = "uwapn_24", @width = "20px" })</td>
                                        </tr>
                                        <tr>
                                            <td>Cleaning</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_25, new { @class = "form-control", @id = "uwapn_25", @width = "20px" })</td>
                                            <td>Scaling</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_26, new { @class = "form-control", @id = "uwapn_26", @width = "20px" })</td>
                                        </tr>
                                        <tr>
                                            <td>Bridge</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_27, new { @class = "form-control", @id = "uwapn_27", @width = "20px" })</td>
                                            <td>Orthodontics</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_28, new { @class = "form-control", @id = "uwapn_28", @width = "20px" })</td>
                                        </tr>
                                        <tr>
                                            <td>Dentures</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_29, new { @class = "form-control", @id = "uwapn_29", @width = "20px" })</td>
                                            <td>Crown</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_30, new { @class = "form-control", @id = "uwapn_30", @width = "20px" })</td>
                                        </tr>
                                        <tr>
                                            <td>Restoration</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_31, new { @class = "form-control", @id = "uwapn_31", @width = "20px" })</td>
                                            <td>Prophylaxis</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_32, new { @class = "form-control", @id = "uwapn_32", @width = "20px" })</td>
                                        </tr>
                                        <tr>
                                            <td>Others</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_33, new { @class = "form-control", @id = "uwapn_33", @width = "20px" })</td>
                                            <td>TOTAL CLAIMED AMOUNT</td>
                                            <td>@Html.TextBoxFor(m => m.wapn_34, new { @class = "form-control", @id = "uwapn_34", @width = "20px" })</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="form-group row label-with-border">
                            <label class="col-md-12 form-label">
                                16- Other Investigations Done
                            </label>
                            @Html.TextBoxFor(m => m.wapn_35, new { @class = "form-control", @id = "uwapn_35", @width = "20px", @maxlength = "20" })
                        </div>
                        <div class="form-group row label-with-border">
                            <div class="d-flex col-sm-12 col-md-6 col-lg-6 ps-0">
                                <label class="col-md-4 form-label">
                                    17- Name of Doctor
                                </label>
                                <div class="d-flex  justify-content-center w-8  form-label">
                                    :
                                </div>
                                <div class="col-md-6">
                                    <span class="font-weight-normal1 text-capitalize text-left">@emr.doc_name&nbsp;</span>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row label-with-border">
                            <div class="col-sm-12 col-md-6 col-lg-6 ps-0">
                                <label class="col-md-12 form-label">
                                    18- Sign and Stamp of Doctor
                                </label>
                                <img alt="stamp" src="@emr.doc_sign" id="doc_sign" class="avatar avatar-xl bsquare" />
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-6">
                                <label class="col-md-4 form-label">
                                    Telephone No:
                                </label>
                                <div class="col-md-12 col-lg-6">
                                    @Html.TextBoxFor(m => m.wapn_36, new { @class = "form-control", @id = "uwapn_36", @width = "20px", @maxlength = "20" })
                                </div>
                            </div>
                        </div>
                        <div class="form-group row d-flex label-with-border">
                            <label class="col-md-6 form-label">
                                Have you personally had to pay costs for the treatment that you are claiming for?
                            </label>
                            <div class="col-md-2">
                                <label class="custom-control custom-radio ">
                                    <input type="radio" class="custom-control-input" name="wapn_checkbox[9]" value="9" id="10">
                                    <span class="custom-control-label">Yes</span>
                                </label>
                            </div>
                            <div class="col-md-2">
                                <label class="custom-control custom-radio">
                                    <input type="radio" class="custom-control-input" name="wapn_checkbox[9]" value="10" id="11">
                                    <span class="custom-control-label">No</span>
                                </label>
                            </div>
                        </div>
                        <div class="form-group row">
                            <h4 class="text-blue">PAYMENTS DETAILS</h4>
                        </div>
                        <div class="form-group row label-with-border">
                            <label class="col-md-12 form-label">
                                If yes, and you are personally seeking reimbursement, please provide following details:
                            </label>
                        </div>
                        <div class="form-group row">
                            <label class="form-label col-md-6 label-with-border">
                                Name of your bank
                                @Html.TextBoxFor(m => m.wapn_37, new { @class = "form-control", @id = "uwapn_37", @width = "20px", @maxlength = "20" })
                            </label>
                            <label class="form-label col-md-6 label-with-border">
                                Account number
                                @Html.TextBoxFor(m => m.wapn_38, new { @class = "form-control", @id = "uwapn_38", @width = "20px", @maxlength = "20" })
                            </label>
                        </div>
                        <div class="form-group row label-with-border">
                            <label class="form-label">
                                Address for your bank
                            </label>
                            @Html.TextBoxFor(m => m.wapn_39, new { @class = "form-control", @id = "uwapn_39", @width = "20px", @maxlength = "20" })
                        </div>
                        <div class="form-group row">
                            <label class="form-label col-md-6 label-with-border">
                                Name of Account holder
                                @Html.TextBoxFor(m => m.wapn_40, new { @class = "form-control", @id = "uwapn_40", @width = "20px", @maxlength = "20" })
                            </label>
                            <label class="form-label col-md-6 label-with-border">
                                BIC number
                                @Html.TextBoxFor(m => m.wapn_41, new { @class = "form-control", @id = "uwapn_41", @width = "20px", @maxlength = "20" })
                            </label>
                        </div>
                        <div class="form-group row">
                            <label class="form-label col-md-6 label-with-border">
                                Bank sort code
                                @Html.TextBoxFor(m => m.wapn_42, new { @class = "form-control", @id = "uwapn_42", @width = "20px", @maxlength = "20" })
                            </label>
                            <label class="form-label col-md-6 label-with-border">
                                IBAN number
                                @Html.TextBoxFor(m => m.wapn_43, new { @class = "form-control", @id = "uwapn_43", @width = "20px", @maxlength = "20" })
                            </label>
                        </div>
                        <div class="form-group row">
                            <label class="form-label col-md-6 label-with-border">
                                Currency of bank account
                                @Html.TextBoxFor(m => m.wapn_44, new { @class = "form-control", @id = "uwapn_44", @width = "20px", @maxlength = "20" })
                            </label>
                            <label class="form-label col-md-6 label-with-border">
                                Routing code / Swift code
                                @Html.TextBoxFor(m => m.wapn_45, new { @class = "form-control", @id = "uwapn_45", @width = "20px", @maxlength = "20" })
                            </label>
                        </div>
                        <div class="form-group row">
                            <h4 class="text-blue">MEMBER'S DECLARATION</h4>
                            <p class="text-blue text-justify">
                                I declare that all the details given in this claim form are true accurate and that I have not missed out any details important to this claim.
                                I understand that if this claim is found to be fraudulent, in whole or part, I am committing a criminal offence and that this will invalidate
                                the plan and make me liable to prosecution. For this medical claim I authorize any medical practitioner, specialist, consultant, therapist or
                                other relevant establishment who has attended me/the patient in the past or is attending me/the patient at present, to give any details that
                                may be asked for by Wapmed / Insurer. I confirm and agree that any personal information collected or held by Wapmed / Insurer, whether given
                                in this form or collected in any other way, may be used by Wapmed / Insurer, or disclosed to or transferred to any organization for the purpose of
                                i) assessing this claim and giving ongoing insurance cover, customer service and the processing of future claims, ii) processing and making payments,
                                and iii) providing marketing communications in respect of Wapmed / Insurer, its related products and services and those of its associated companies.
                            </p>
                        </div>
                        <div class="form-group row">
                            <div class="form-label col-md-6">
                                Member's Signature
                                <div class="form-group mb-3" style="display:none" id="upatimg"><img alt="Signature" src="" id="upat_sign" class="avatar avatar-xl bsquare" /></div>
                            </div>
                            <label class="form-label col-md-6">
                                Date
                                <label class="text-black text-red text-left" id="upsb_date_witness" name="">&nbsp;</label>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Row -->

    <div class="row mt-2">
        <div class="col-sm-12 col-md-12 col-lg-12 text-center">
            <div class="btn-list btn-animation">
                <button type="submit" class="btn btn-warning btn-sm" id="btn_Update_Wamped">Save Changes</button>
                <button type="submit" class="btn btn-sm btn-outline-danger" id="btn_Delete_Wamped">Delete</button>
                <button type="button" class="btn btn-sm btn-outline-light " id="btn_Print_RadioDeci" onclick="PrintWamped()">
                    <i class="fa fa-print">&nbsp;&nbsp;</i>Print
                </button>
                <div class="btn-group mr-2">
                    <div class="dropdown">
                        <button type="button" class="btn-sm btn-secondary me-2 mb-2 dropdown-toggle" data-bs-toggle="dropdown">
                            <i class="fa fa-paint-brush">&nbsp;&nbsp;</i> Patient
                        </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" onclick="openSignaturePad('patient')">Tab</a>
                            <a class="dropdown-item" onclick="openWacomTabSignaturePad('patient')">Wacom Tab</a>
                        </div>
                    </div>
                </div>
                <button type="button" class="btn btn-outline-danger" id="btn_Close_EditWamped" style="display:none">
                    Close
                </button>
            </div>
        </div>
    </div>
</form>

<script type="text/javascript">
    //#region Partial View Onload
        var formName1 = $(form_EditWamped).closest('form').attr('name');
        $(function () {
            validate();
            set_date();
            GetSignaturename('patient');
            GetCheckedValues("@Model.wapn_checkbox");
        });
    //#endregion

    //#region Load set Date
        var set_date = function () {
            $('#uwapn_d1,#uwapn_d2,#uwapn_d3,#uwapn_d4').bootstrapdatepicker({
                    format: "dd-MM-yyyy",
                    viewMode: "date",
                    todayHighlight: true,
                    autoclose: true,
                    multidate: false,
                    multidateSeparator: "-"
            });
            var d1 = "@Model.wapn_d1";
            if (d1 != "1/1/1950 12:00:00 AM") {
                $("#uwapn_d1").bootstrapdatepicker("setDate", moment(new Date("@Model.wapn_d1")).format("DD-MMMM-YYYY"));
            }
            else {
                $("#uwapn_d1").bootstrapdatepicker("setDate", '');
            }
            var d2 = "@Model.wapn_d2";
            if (d2 != "1/1/1950 12:00:00 AM") {
                $("#uwapn_d2").bootstrapdatepicker("setDate", moment(new Date("@Model.wapn_d2")).format("DD-MMMM-YYYY"));
            }
            else {
                $("#uwapn_d2").bootstrapdatepicker("setDate", '');
            }

            var d3 = "@Model.wapn_d3";
            if (d3 != "1/1/1950 12:00:00 AM") {
                $("#uwapn_d3").bootstrapdatepicker("setDate", moment(new Date("@Model.wapn_d3")).format("DD-MMMM-YYYY"));
            }
            else {
                $("#uwapn_d3").bootstrapdatepicker("setDate", '');
            }
        }
    //#endregion

    //#region Get CheckedValues
        var GetCheckedValues = function (checknames) {
            var str = checknames;
            var myarray = str.split(',');

            for (var i = 0; i < myarray.length; i++) {
                $('.custom-control-input').each(function () {
                    if (this.id == myarray[i]) {
                        $("#" +this.id).attr('checked', 'checked');
                        $("#" +this.id).prop("checked", true);

                    }
                });
            }

        }
    //#endregion

    //#region Update  Button Click
        $('#btn_Update_Wamped').on('click', function (e) {
                e.preventDefault();
            if ($("#form_EditWamped").valid()) {
                console.log($("#wapnId").val());
                $('#btn_Update_Wamped').removeClass("btn btn-success");
                $('#btn_Update_Wamped').addClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Update_Wamped').html("Updating the Record....");
                var wapn_chkbox = "";
                $('.custom-control-input:checked').each(function (index) {
                    wapn_chkbox = wapn_chkbox + ',' + $(this).val();
                });
                var wapn_checkbox = wapn_chkbox.substring(1);
                var _dataInsert = {
                    "wapnId": @Model.wapnId,
                    "wapn_appId": @emr.appId,
                    "wapn_checkbox": wapn_checkbox,
                    "wapn_1": $("#uwapn_1").val(),
                    "wapn_1": $("#uwapn_1").val(),
                    "wapn_2": $("#uwapn_2").val(),
                    "wapn_3": $("#uwapn_3").val(),
                    "wapn_4": $("#uwapn_4").val(),
                    "wapn_5": $("#uwapn_5").val(),
                    "wapn_6": $("#uwapn_6").val(),
                    "wapn_7": $("#uwapn_7").val(),
                    "wapn_8": $("#uwapn_8").val(),
                    "wapn_9": $("#uwapn_9").val(),
                    "wapn_10": $("#uwapn_10").val(),
                    "wapn_11": $("#uwapn_11").val(),
                    "wapn_12": $("#uwapn_12").val(),
                    "wapn_13": $("#uwapn_13").val(),
                    "wapn_14": $("#uwapn_14").val(),
                    "wapn_15": $("#uwapn_15").val(),
                    "wapn_16": $("#uwapn_16").val(),
                    "wapn_17": $("#uwapn_17").val(),
                    "wapn_18": $("#uwapn_18").val(),
                    "wapn_19": $("#uwapn_19").val(),
                    "wapn_20": $("#uwapn_20").val(),
                    "wapn_21": $("#uwapn_21").val(),
                    "wapn_22": $("#uwapn_22").val(),
                    "wapn_23": $("#uwapn_23").val(),
                    "wapn_24": $("#uwapn_24").val(),
                    "wapn_25": $("#uwapn_25").val(),
                    "wapn_26": $("#uwapn_26").val(),
                    "wapn_27": $("#uwapn_27").val(),
                    "wapn_28": $("#uwapn_28").val(),
                    "wapn_29": $("#uwapn_29").val(),
                    "wapn_30": $("#uwapn_30").val(),
                    "wapn_31": $("#uwapn_31").val(),
                    "wapn_32": $("#uwapn_32").val(),
                    "wapn_33": $("#uwapn_33").val(),
                    "wapn_34": $("#uwapn_34").val(),
                    "wapn_35": $("#uwapn_35").val(),
                    "wapn_36": $("#uwapn_36").val(),
                    "wapn_37": $("#uwapn_37").val(),
                    "wapn_38": $("#uwapn_38").val(),
                    "wapn_39": $("#uwapn_39").val(),
                    "wapn_40": $("#uwapn_40").val(),
                    "wapn_41": $("#uwapn_41").val(),
                    "wapn_42": $("#uwapn_42").val(),
                    "wapn_43": $("#uwapn_43").val(),
                    "wapn_44": $("#uwapn_44").val(),
                    "wapn_45": $("#uwapn_45").val(),
                    "wapn_d1": moment($("#uwapn_d1").val()).format("YYYY-MM-DD"),
                    "wapn_d2": moment($("#uwapn_d2").val()).format("YYYY-MM-DD"),
                    "wapn_d3": moment($("#uwapn_d3").val()).format("YYYY-MM-DD"),
                    "__RequestVerificationToken": $('input[name="__RequestVerificationToken"]').val()
                }
                console.log(_dataInsert)
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("UpdateWamped", "ReimbursementForms", new { area = "EMRForms" })",
                    dataType: 'JSON',
                    data: _dataInsert,
                    success: function (data) {
                        $('#btn_Update_Wamped').removeClass("btn btn-warning btn-loaders btn-icon");
                        $('#btn_Update_Wamped').addClass("btn btn-warning");
                        $('#btn_Update_Wamped').html("Save Changes");
                        if (data.isSuccess) {
                            if (data.isInserted) {
                                GetWamped();
                                var alertPlaceholder = document.getElementById("Alert");
                                function alert(e, t) {
                                    var l = document.createElement("div");
                                    l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible"  role="alert">' + e +
                                        '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                                }
                                alert("<i class='fe fe-check-circle text-white'></i> Wamped Updated Successfully!", "success");
                                Timeout();
                                $("#wamped_edit").show();
                                $("#wamped_edit").hide();
                            }
                            else {
                                let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                                    "<div class='alert alert-warning' role='alert'>" +
                                    "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                    "<strong>Warning.. Wamped Alredy Exists..</strong><br/>" +
                                    "</div></div>";
                                $("#error").html(html);
                            }
                        }
                        else
                        {
                            let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                                "<div class='alert alert-danger' role='alert'>" +
                                "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                "<strong>Validation Error.. Please correct before you submit the form!&nbsp;</strong><br/><ul>";
                            $.each(data.message, function (index, value) {
                                html += "<li><small>" + value + "</small><li>";
                                var elem = $("#" + index);
                                if (elem.hasClass("select2-hidden-accessible")) {
                                    $("#select2-" + elem.attr("id") + "-container").parent().addClass('error');
                                }
                                else {
                                    $(elem).addClass(" is-invalid");
                                }

                                setTimeout(function () {
                                    if (elem.hasClass("select2-hidden-accessible")) {
                                        $("#select2-" + elem.attr("id") + "-container").parent().removeClass('error');
                                    }
                                    else {
                                        $(elem).removeClass("is-invalid");
                                    }
                                }, 5000);
                            });
                            html += "</ul></div></div>";
                            $("#error").html(html);
                        }
                    },
                    error: function (xhr) {
                        $('#btn_Update_Wamped').removeClass("btn btn-warning btn-loaders btn-icon");
                        $('#btn_Update_Wamped').addClass("btn btn-warning");
                        $('#btn_Update_Wamped').html("Save Changes");
                        Timeout();
                    }
                });

            }
            else {
                $('.modal-body').animate({
                    scrollTop: ($('.has-error').offset().top - 300)
                }, 2000);
            }
        });
    //#endregion

    //#region Delete Click
        $('#btn_Delete_Wamped').on('click', function (e) {
            e.preventDefault();
            $('#btn_Delete_Wamped').removeClass("btn btn-success");
            $('#btn_Delete_Wamped').addClass("btn btn-success btn-loaders btn-icon");
            $('#btn_Delete_Wamped').html("Deleting the Record....");

                $.ajax({
                    url: '@Url.Action("DeleteWamped", "ReimbursementForms", new { area = "EMRForms" })?wapnId=' + $("#wapnId").val(),
                    type: "POST",
                    dataType: 'JSON',
                    success: function (data) {
                        $('#btn_Delete_Wamped').removeClass("btn btn-success btn-loaders btn-icon");
                        $('#btn_Delete_Wamped').addClass("btn btn-warning");
                        $('#btn_Delete_Wamped').html("Delete");
                        if (data.isAuthorized) {
                            if (data.success) {
                                var alertPlaceholder = document.getElementById("Alert");
                                function alert(e, t) {
                                    var l = document.createElement("div");
                                    l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                                        '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                                }
                                alert("<i class='fe fe-check-circle text-white'></i> Wamped Claim Deleted Successfully!", "success");
                                clearControls();
                                $("#wamped_edit").hide();
                                $("#wamped_edit").show();
                                Addwamped();
                            }
                            else {
                                let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                                    "<div class='alert alert-warning' role='alert'>" +
                                    "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                    "<strong>Error!.. Failed to Delete..</strong><br/>" +
                                    "</div></div>";
                                $("#error").html(html);
                            }
                        }
                        else {
                            var alertPlaceholder = document.getElementById("Alert");
                            function alert(e, t) {
                                var l = document.createElement("div");
                                l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                                    '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                            }
                            alert("<i class='fe fe-check-circle text-white'></i> You do not have Enough Privileges to Delete this Designation!", "Access Denied!");
                        }
                    },
                    error: function (xhr) {
                        $('#btn_Delete_Wamped').removeClass("btn btn-success btn-loaders btn-icon");
                        $('#btn_Delete_Wamped').addClass("btn btn-Delete");
                        $('#btn_Delete_Wamped').html("Delete");
                        Timeout();
                    }
                })
        });
    //#endregion

    //#region Wacom Tab Signature
        var openWacomTabSignaturePad = function (id) {
            var _data = {
                "patId": @emr.patId,
                "person": id,
                "form": formName1,
                "appId": @emr.appId,
                "formname":"Wamped",
                "formlink":"PrintWampedClaim.aspx",
                "eSign":""
            }
            $.ajax({
                type: "GET",
                url: "@Url.Action("WacomTabSignaturePad", "WacomTabSignaturePad", new { area = "Common" })",
                contentType: "application/json",
                dataType: "html",
                data: _data,
                success: function (response) {
                    $("#signature_pad_body").html(response);
                    $("#signature_pad").modal("show");
                },
                error: function (xhr) {
                    console.log("Error :" + xhr.statusText);
                }
            });
        }
    //#endregion

    //#region Signature
        var openSignaturePad = function (id) {
            var _data = {
                "patId": @emr.patId,
                "person": id,
                "form": formName1,
                "appId": @emr.appId,
                "formname":"Wamped",
                "formlink":"PrintWampedClaim.aspx",
                "eSign":""
            }
            $.ajax({
                type: "GET",
                url: "@Url.Action("SignaturePad", "SignaturePad", new { area = "Common" })",
                contentType: "application/json",
                dataType: "html",
                data: _data,
                success: function (response) {
                    $("#signature_pad_body").html(response);
                    $("#signature_pad").modal("show");
                },
                error: function (xhr) {
                    console.log("Error :" + xhr.statusText);
                }
            });
        }
    //#endregion

    //#region Get Signature
        var GetSignaturename = function  (person) {
            $.ajax({
                url: '@Url.Action("GetSignature", "SignaturePad", new { area = "Common" })?appId=' + @emr.appId + '&person=' + person + '&form=Wamped',
                    type: "GET",
                    dataType: "json",
                    async: false,
                success: function (response) {
                    console.log("fgxghszd");
                    console.log(response);
                    let sign = response[0].psb_sign;
                    var date = moment(response[0].psb_date_created).format("DD-MM-YYYY HH:mm");
                    if (response[0].person == "patient") {
                        $("#upatimg").show();
                        $("#upat_sign").attr("src", sign);
                        $("#upsb_date_witness").text(date);
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                    alert(xhr);
                }

            });
        };
    //#endregion

    //#region Validation Initialization
        var validate = function () {

            $("#form_WampedDecision").validate({
                rules: {
                    wapn_1: {
                        required: true
                    },

                },
                messages: {
                    wapn_1: {
                        required: "Please Enter Group Name!"
                    },

                },
                highlight: function (element) {
                    var elem = $(element);
                    $(element).parent().addClass('has-error');
                    error_timeout(elem.attr("id"));
                },
                unhighlight: function (element) {
                    var elem = $(element);
                    $(element).parent().removeClass('has-error');
                },
                errorElement: 'span',
                errorClass: 'text-danger fw-bold',
                errorPlacement: function (error, element) {
                    var elem = $(element);
                    if (element.parent('.input-group').length) {
                        error.insertAfter(element.parent());
                    } else {
                        error.insertAfter(element);
                    }
                }
            });

        }
    //#endregion Validation Initialization

    //#region Alert Timeout
        function Timeout() {
            window.setTimeout(function () {
                $(".alert").fadeTo(500, 0).slideUp(500, function () {
                    $(this).remove();
                });
            }, 4200);
        }
    //#endregion

    //#region Clear Controls
        var clearControls = function () {
            $("#uwapn_1").val("");
            $("#uwapn_2").val("");
            $("#uwapn_3").val("");
            $("#uwapn_4").val("");
            $("#uwapn_5").val("");
            $("#uwapn_6").val("");
            $("#uwapn_7").val("");
            $("#uwapn_8").val("");
            $("#uwapn_9").val("");
            $("#uwapn_10").val("");
            $("#uwapn_11").val("");
            $("#uwapn_12").val("");
            $("#uwapn_13").val("");
            $("#uwapn_14").val("");
            $("#uwapn_15").val("");
            $("#uwapn_16").val("");
            $("#uwapn_17").val("");
            $("#uwapn_18").val("");
            $("#uwapn_19").val("");
            $("#uwapn_20").val("");
            $("#uwapn_21").val("");
            $("#uwapn_22").val("");
            $("#uwapn_23").val("");
            $("#uwapn_24").val("");
            $("#uwapn_25").val("");
            $("#uwapn_26").val("");
            $("#uwapn_27").val("");
            $("#uwapn_28").val("");
            $("#uwapn_29").val("");
            $("#uwapn_30").val("");
            $("#uwapn_31").val("");
            $("#uwapn_32").val("");
            $("#uwapn_33").val("");
            $("#uwapn_34").val("");
            $("#uwapn_35").val("");
            $("#uwapn_36").val("");
            $("#uwapn_37").val("");
            $("#uwapn_38").val("");
            $("#uwapn_39").val("");
            $("#uwapn_40").val("");
            $("#uwapn_41").val("");
            $("#uwapn_42").val("");
            $("#uwapn_43").val("");
            $("#uwapn_44").val("");
            $("#uwapn_45").val("");
        }
    //#endregion

    //#region Print Wamped Request
        function PrintWamped() {
            window.open("@Url.Action("PrintWamped", "ReimbursementForms", new { area = "EMRForms" })?wapnId=" + @Model.wapnId)
        }
    //#endregion

</script>
<style>
    .label-with-border {
        border: 1px solid #000;
        /* You can customize border styles here */
    }
</style>