

@using System.Linq;
@using System.Security.Claims;
@using BusinessEntities;
@model BusinessEntities.EMRForms.Metlife
@{
    var claims = ClaimsPrincipal.Current.Identities.First().Claims.ToList();
    var emp_designation = claims.Where(c => c.Type == ClaimTypes.Role).Select(c => c.Value).SingleOrDefault();
    EMRInfo emr = (EMRInfo)TempData["emr_data"];
    TempData.Keep("emr_data");
}
<form id="form_EditMetlife" class="needs-validation fs-14" >

    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.metId)
    @Html.HiddenFor(m => m.met_appId)
    <div class="row">
        <img src="~/images/Reimbursement_Forms/met.png" />
    </div>
    <div class="form-group row">
        <div class="col-lg-12">
            <div class="card">
                <div>
                    <h3 class="card-title font-weight-bold text-justify">To avoid any delays in the processing of your claim, please ensure that</h3>
                </div>
                <div class="card-body ps-5 pe-5 pb-2">
                    <ul class="list-style2">
                        <li class=" text-justify">
                            All original claim documents should be submitted either in English or Arabic. Documents in other languages must be translated by an official public translator
                            prior to submission
                        </li>
                        <li class=" text-justify">
                            All necessary original claims documents are to be submitted within 30 days of the incurred date. Subject to your policy terms and conditions, MetLife reserves
                            the right to deny claims that you submit after 90 days of the incurred date.
                        </li>
                    </ul>
                </div>
                <div>
                    <h3 class="card-title font-weight-bold">Requirements</h3>
                </div>
                <div class="card-body ps-5 pe-5 pt-2 pb-0">
                    <ul class="list-style2 font-weight-bold">
                        <li class=" text-justify">
                            Medical Claim Reimbursement Form (if not submitting the claim on e-services)
                        </li>
                        <li class=" text-justify">
                            Attending Physician Section (mandatory)
                        </li>
                        <li class="text-justify">Supporting documents - Please refer to the checklist on page 2</li>
                    </ul>
                </div>
                <div>
                    <hr class="new4" />
                </div>
                <div>
                    <h3 class="card-title font-weight-bold text-justify">EMPLOYEE’S SECTION (*All Fields are Mandatory) – Not required if submitting the claim directly on e-Services</h3>
                </div>
                <div class="card-body pb-0">
                    <div class="row">
                        <div class="col-lg-12 col-md-12">
                            <div class="form-group row">
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">Employees’s Full Name<span class="text-danger">*</span></label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        <span class="font-weight-normal1 text-capitalize text-left">@emr.doc_name&nbsp;</span>
                                    </div>
                                </div>
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 col-lg-4 form-label">Date of Birth</label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6 col-lg-6">
                                        <div class="col-md-10 col-lg-8 input-group">
                                            <div class="input-group-prepend">
                                                <div class="input-group-text">
                                                    <i class="fe fe-calendar"></i>
                                                </div>
                                            </div>
                                            @Html.TextBoxFor(m => m.met_4, new { @class = "form-control", @placeholder = "DD-MMMM-YYYY", @id = "umet_4" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">Patient’s Full Name<span class="text-danger">*</span></label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_name&nbsp;</span>
                                    </div>
                                </div>
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">Date of Birth</label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_dob&nbsp;</span>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">Employee’s Nationality<span class="text-danger">*</span></label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        @if (@emr.emp_nat != "")
                                        {
                                            <span class="font-weight-normal1 text-capitalize text-left">@emr.emp_nat&nbsp;</span>
                                        }
                                        else
                                        {
                                            <span class="font-weight-normal1 text-capitalize text-left">N/A</span>
                                        }
                                    </div>
                                </div>
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">
                                        Patient’s Nationality<span class="text-danger">*</span>
                                    </label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        @if (@emr.pat_nationality != "")
                                        {
                                            <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_nationality&nbsp;</span>
                                        }
                                        else
                                        {
                                            <span class="font-weight-normal1 text-capitalize text-left">N/A</span>
                                        }
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">Employee Contact No<span class="text-danger">*</span></label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        @if (@emr.emp_tel != "")
                                        {
                                            <span class="font-weight-normal1 text-capitalize text-left">@emr.emp_tel&nbsp;</span>
                                        }
                                        else
                                        {
                                            <span class="font-weight-normal1 text-capitalize text-left">N/A</span>
                                        }
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">Policy Number<span class="text-danger">*</span></label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        @if (@emr.pi_polocyno != "")
                                        {
                                            <span class="font-weight-normal1 text-capitalize text-left">@emr.pi_polocyno&nbsp;</span>
                                        }
                                        else
                                        {
                                            <span class="font-weight-normal1 text-capitalize text-left">N/A</span>
                                        }
                                    </div>
                                </div>
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">
                                        Patient Member ID<span class="text-danger">*</span>
                                    </label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        @if (@emr.pi_insno != "")
                                        {
                                            <span class="font-weight-normal1 text-capitalize text-left">@emr.pi_insno&nbsp;</span>
                                        }
                                        else
                                        {
                                            <span class="font-weight-normal1 text-capitalize text-left">N/A</span>
                                        }
                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">Employee E-mail Address<span class="text-danger">*</span></label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        @if (@emr.emp_address != "")
                                        {
                                            <span class="font-weight-normal1 text-capitalize text-left">@emr.emp_address&nbsp;</span>
                                        }
                                        else
                                        {
                                            <span class="font-weight-normal1 text-capitalize text-left">N/A</span>
                                        }
                                    </div>
                                </div>
                                <div class="d-flex col-sm-12 col-md-12 col-lg-6 ps-0">
                                    <label class="col-md-4 form-label">
                                        Patient Address<span class="text-danger">*</span>
                                    </label>
                                    <div class="d-flex  justify-content-center w-8  form-label">
                                        :
                                    </div>
                                    <div class="col-md-6">
                                        @if (@emr.pat_address != "")
                                        {
                                            <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_address&nbsp;</span>
                                        }
                                        else
                                        {
                                            <span class="font-weight-normal1 text-capitalize text-left">N/A</span>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <hr class="new4" />
                </div>
                <div>
                    <h3 class="card-title font-weight-bold">REIMBURSEMENT METHOD</h3>
                </div>
                <div class="card-body ps-3 pe-3 pt-2 pb-0">
                    <div class="card-body pb-0">
                        <div class="row">
                            <div class="col-lg-12 col-md-12">
                                <div class="form-group row">
                                    <div class="col-md-3 col-lg-2">
                                        <label class="custom-control custom-radio">
                                            <input type="radio" class="custom-control-input" name="met_check[1]" value="1" id="1">
                                            <span class="custom-control-label">Wire Transfer</span>
                                        </label>
                                    </div>
                                    <div class="col-md-3 col-lg-2">
                                        <label class="custom-control custom-radio">
                                            <input type="radio" class="custom-control-input" name="met_check[1]" value="2" id="2">
                                            <span class="custom-control-label">Cheque</span>
                                        </label>
                                    </div>
                                    <div class="col-md-12">
                                        <label class="form-label font-weight-bold">
                                            Bank detail must be updated on e-services
                                        </label>
                                    </div>
                                </div>
                                <div class="form-horizontal">
                                    <div class="form-group row">
                                        <label class="col-md-6 col-lg-2 form-label">Total Amount Claimed</label>
                                        <div class="col-md-6 col-lg-3">
                                            @Html.TextBoxFor(m => m.met_claim_amount, new { @class = "form-control mb-1", @id = "umet_claim_amount" })
                                        </div>
                                        <label class="col-md-6 col-lg-1 form-label">Currency</label>
                                        <div class="col-md-6 col-lg-3">
                                            @Html.TextBoxFor(m => m.met_currency, new { @class = "form-control", @id = "umet_currency" })
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <hr class="new4" />
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">
                            <div>
                                <h3 class="card-title font-weight-bold">AUTHORIZATION STATEMENT</h3>
                            </div>
                            <div class="card-body ps-5 pe-5">
                                <ul class="list-style">
                                    <li class="text-black text-justify">
                                        I hereby certify that all answers and all original documents submitted with the claim form are complete and true. I hereby authorize any doctor, hospital, or medical provider, any insurance company
                                        or any other company, institution or any other person who has any record or information about me and / or any of my family members to provide MetLife (American Life Insurance Company) with the
                                        complete information's, including copies of their records with reference to my sickness or accident, any treatment, examination, advice, or hospitalization. Any photocopy of this authorization shall be
                                        taken as the original copy.
                                    </li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="card-title font-weight-bold"> DISCLAIMER</h3>
                            </div>
                            <div class="card-body ps-5 pe-5">
                                <ul class="list-style">
                                    <li class="text-black text-justify">
                                        I hereby authorize MetLife to wire transfer claim reimbursements to the account indicated above. This agreement will remain in effect until I give written notice to withdraw from wire transfer or MetLife
                                        notifies me that this service has been terminated. If ever MetLife credits more money than the correct benefit amount to the account due to duplicate or erroneous electronic funds transfers, I authorize
                                        MetLife to revise the Transaction and withdraw the overpayment.
                                    </li>
                                    <li class="text-black text-justify">
                                        MetLife will bear charges on account of claims reimbursement levied by the remitting bank. All charges that may be levied by the beneficiary’s bank / other third-party provider will be borne by the
                                        beneficiary. We suggest confirming these charges, if any, with your banking provider”.
                                    </li>
                                    <li class="text-black text-justify">
                                        I verify that the documentation submitted electronically is true and unaltered and I have all the original documents that can be presented upon request of the Insurance Company. I also accept and
                                        recognize that at the sole discretion of the MetLife, these documents may be requested at any time during a period of one year counted from the submission of the claim, which I will provide within a
                                        period not exceeding of 30 days from the request. Failing to comply could imply the claim to be declined. If the case is confirmed to be declined, I will reimburse any amount paid by MetLife to me or
                                        to any party as related to this claim.
                                    </li>
                                    <li class="text-blue text-justify">
                                        MetLife will not provide coverage in, reimburse for treatment obtained in, reimburse for services received in, or make wire transfers or any payments to the countries identified on
                                        OFAC’s sanctions list, including but not limited to payments to any financial institutions or medical providers located in a sanctioned country. Also, MetLife will not pay a claim to
                                        individuals who: i) are residing in a sanctioned country; ii) are listed on the OFAC Specially Designated Nationals (SDN) list or any other international or local sanctions list; or iii) have
                                        traveled to a sanctioned country for purposes of receiving medical, or other treatment or services, subject to the Policy and / or Supplementary contract terms and conditions.
                                    </li>
                                    <li class="text-black text-justify">
                                        I hereby provide MetLife my unambiguous consent to process, share, and transfer my personal data to a recipient outside the country (e.g. to the Company Headquarters in the USA and / or to other
                                        branches or affiliates of the Insurer’s Group and Reinsurer) where the transfer, sharing, is necessary for the performance of the contract or for the compliance with any legal obligation to which the
                                        Company is subject and where necessary transfer, share any such information with the regulators and other law enforcement agencies for the performance of its obligations related to the international
                                        sanctions and other regulations applicable to the Company
                                    </li>

                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12 col-md-6 col-lg-6 mt-2">
                        <span class="text-capitalize text-left text-red">@emr.doc_name&nbsp;</span>
                        <label class="form-label">
                            Doctor Name
                        </label>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-6 mt-2">
                        <img alt="stamp" src="@emr.doc_sign" id="doc_sign" class="avatar avatar-xl bsquare" />
                        <label class="form-label">
                            Signature & Stamp
                        </label>
                    </div>
                </div>
                <div>
                    <hr class="new4" />
                </div>
                <div class="row">
                    <div class="col-lg-12 col-xl-12 col-md-12 col-sm-12">
                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">ATTENDING PHYSICIAN SECTION (*Mandatory Fields)</h4>
                                <h6 class="card-title font-italic">To be filled by attending physician</h6>
                            </div>
                            <div class="card-body">
                                <div class="form-horizontal">
                                    <div class="form-group row">
                                        <label class="col-md-6 col-lg-2 form-label">Patient’s Full Name</label>
                                        <div class="col-md-6 col-lg-3">
                                            <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_name&nbsp;</span>
                                        </div>
                                        <label class="col-md-6 col-lg-2 form-label">Date of Birth</label>
                                        <div class="col-md-6 col-lg-3">
                                            <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_dob&nbsp;</span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Chief Complains<span class="text-danger">*</span></label>
                                        <label class="text-black text-red text-left" id="complaints" name="">&nbsp;</label>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Diagnosis<span class="text-danger">*</span></label>
                                        <label class="text-black text-red text-left" id="diagnosis" name="">&nbsp;</label>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">How long has the patient been suffering from this sickness?<span class="text-danger">*</span></label>
                                        <label class="form-label">Please specify the date symptoms first appeared.</label>
                                        @Html.TextAreaFor(m => m.met_1, new { @class = "form-control", @row = "2", @id = "umet_1" })
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">If treated by other medical provider please specify the name and treatment details</label>
                                        @Html.TextAreaFor(m => m.met_2, new { @class = "form-control", @row = "2", @id = "umet_2" })
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">If the claim is resulting from pregnancy / childbirth, please provide the LMP<span class="text-danger">*</span></label>
                                        @Html.TextAreaFor(m => m.met_3, new { @class = "form-control", @row = "2", @id = "umet_3" })
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Details of the treatment (other than Prescription)</label>
                                        <label class="text-black text-red text-left" id="treatments" name="">&nbsp;</label>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">If further treatment or operative procedure anticipated, please provide the details</label>
                                        <label class="text-black text-red text-left" id="Prescriptions_details" name="">&nbsp;</label>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Physician’s Name, Address and Tel. No.</label>
                                        <span class="font-weight-normal1 text-capitalize text-left">@emr.doc_name&nbsp;,</span>
                                        <span class="font-weight-normal1 text-capitalize text-left">@emr.emp_address&nbsp;,</span>
                                        <span class="font-weight-normal1 text-capitalize text-left">@emr.emp_tel&nbsp;</span>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Physician’s Signature and Stamp</label>
                                        <img alt="stamp" src="@emr.doc_sign" id="doc_sign" class="avatar avatar-xl bsquare" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <hr class="new4" />
                </div>
                <!-- Row -->
                <div class="row">
                    <div class="col-md-12 col-lg-12">
                        <div class="card">
                            <div class="card-body">
                                <div class="row mt-4">
                                    <div class="col-lg-12">
                                        <h3 class="card-title font-weight-bold">CHECKLIST FOR INSURED MEMBER</h3>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="table-responsive">
                                            <table id="tbl_Treatment" class="table table-striped table-bordered text-nowrap" style="width: 100%; cursor: pointer;">
                                                <thead>
                                                    <tr style="color: #fff !important; background-color: dodgerblue; border-color: #3C457D; ">
                                                        <th class="border-bottom-0 font-weight-semibold text-white">REQUIRED</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">CHECK BOX</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">DOCUMENT</th>
                                                        <th class="border-bottom-0 font-weight-semibold text-white">NOTE</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>YES</td>
                                                        <td>
                                                            <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left">
                                                                <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                                                    <input type="checkbox" class="custom-control-input" name="met_check" value="7" id="7">
                                                                    <span class="custom-control-label"></span>
                                                                </label>
                                                            </div>
                                                        </td>
                                                        <td>Claim Form (including Attending Physician Section)</td>
                                                        <td>Fully completed and signed by you and your physician / surgeon</td>
                                                    </tr>
                                                    <tr>
                                                        <td>YES</td>
                                                        <td>
                                                            <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left">
                                                                <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                                                    <input type="checkbox" class="custom-control-input" name="met_check" value="8" id="8">
                                                                    <span class="custom-control-label"></span>
                                                                </label>
                                                            </div>
                                                        </td>
                                                        <td>Detailed medical report</td>
                                                        <td>Detailing ailment / diagnosis or accident with dates it started / happened, signed by your treating physicia</td>
                                                    </tr>
                                                    <tr>
                                                        <td>YES</td>
                                                        <td>
                                                            <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left">
                                                                <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                                                    <input type="checkbox" class="custom-control-input" name="met_check" value="9" id="9">
                                                                    <span class="custom-control-label"></span>
                                                                </label>
                                                            </div>
                                                        </td>
                                                        <td>Original hospital / clinic bil</td>
                                                        <td>Original</td>
                                                    </tr>
                                                    <tr>
                                                        <td>If applicable</td>
                                                        <td>
                                                            <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left">
                                                                <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                                                    <input type="checkbox" class="custom-control-input" name="met_check" value="10" id="10">
                                                                    <span class="custom-control-label"></span>
                                                                </label>
                                                            </div>
                                                        </td>
                                                        <td>Copy of all relevant X-Rays / Echography / MRIs and reports</td>
                                                        <td>Should reflect your name and date they were taken</td>
                                                    </tr>
                                                    <tr>
                                                        <td>If applicable</td>
                                                        <td>
                                                            <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left">
                                                                <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                                                    <input type="checkbox" class="custom-control-input" name="met_check" value="11" id="11">
                                                                    <span class="custom-control-label"></span>
                                                                </label>
                                                            </div>
                                                        </td>
                                                        <td>Copy of all lab tests and reports</td>
                                                        <td>Only related to this incident</td>
                                                    </tr>
                                                    <tr>
                                                        <td>If applicable</td>
                                                        <td>
                                                            <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left">
                                                                <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                                                    <input type="checkbox" class="custom-control-input" name="met_check" value="12" id="12">
                                                                    <span class="custom-control-label"></span>
                                                                </label>
                                                            </div>
                                                        </td>
                                                        <td>Copy of police report</td>
                                                        <td>Required if claim relates to an accident</td>
                                                    </tr>

                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <h3 class="card-title font-weight-bold text-blue font-italic">Please remember</h3>
                                    </div>
                                    <div class="col-lg-12">
                                        <p class="text-black text-justify">
                                            To help us process your insurance claim as quickly as possible, we ask you to provide the above documents. Otherwise your claim could be
                                            delayed or potentially rejected.
                                        </p>
                                    </div>

                                    <div class="col-lg-12">
                                        <div class="expanel expanel-secondary">
                                            <div class="expanel-heading">
                                                <h3 class="expanel-title">HOW TO SUBMIT THE CLAIM</h3>
                                            </div>
                                            <div class="expanel-body bg-blue-light">
                                                Login to e-Services <span class="font-weight-bold">OR</span> Please contact your H.R. for the Claim Submission Process
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--End Row -->
            </div>
        </div>
    </div>

    <div class="row mt-2">
        <div class="col-sm-12 col-md-12 col-lg-12 text-center">
            <div class="btn-list btn-animation">
                <button type="submit" class="btn btn-warning btn-sm" id="btn_Update_Metlife">Save Changes</button>
                <button type="submit" class="btn btn-sm btn-outline-danger" id="btn_Delete_Metlife">Delete</button>
                <button type="button" class="btn btn-sm btn-outline-light " id="btn_Print_RadioDeci" onclick="PrintMetlife()">
                    <i class="fa fa-print">&nbsp;&nbsp;</i>Print
                </button>
            </div>
        </div>
    </div>
</form>
<script type="text/javascript">

    //#region Partial View Onload
        var formName1 = $(form_EditMetlife).closest('form').attr('name');
        $(function () {
            Get_EMRINFO();
            set_date();
            validate();
            Get_AllPatientDrugs();
            GetCheckedValues("@Model.met_check");
        });
    //#endregion

    //#region Load set Date
        var set_date = function () {
            $('#umet_4').bootstrapdatepicker({
                    format: "dd-MM-yyyy",
                    viewMode: "date",
                    todayHighlight: true,
                    autoclose: true,
                    multidate: false,
                    multidateSeparator: "-"
            });
            var d1 = "@Model.met_4";
            if (d1 != "1/1/1950 12:00:00 AM") {
                $("#umet_4").bootstrapdatepicker("setDate", moment(new Date("@Model.met_4")).format("DD-MMMM-YYYY"));
            }
            else {
                $("#umet_4").bootstrapdatepicker("setDate", '');
            }
        }
    //#endregion

    //#region Get CheckedValues
        var GetCheckedValues = function (checknames) {
            var str = checknames;
            var myarray = str.split(',');

            for (var i = 0; i < myarray.length; i++) {
                $('.custom-control-input').each(function () {
                    if (this.id == myarray[i]) {
                        $("#" +this.id).attr('checked', 'checked');
                        $("#" +this.id).prop("checked", true);

                    }
                });
            }

        }
    //#endregion

    //#region Load Get Drugs
        var Get_AllPatientDrugs = function () {
            $.ajax({
                type: "GET",
                url: "@Url.Action("Get_AllPatientDrugs", "ReimbursementForms", new { area = "EMRForms" })?appId=" + "@emr.appId" + "&patId=" + @emr.patId,
                success: function (response) {
                    if (response.length > 0) {
                        $('#Prescriptions_details').text(response[0].Prescriptions);
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            })
        }
    //#endregion

    //#region Load Get Diagnosis,treatments,history,invoice
        var Get_EMRINFO = function () {
            $.ajax({
                type: "GET",
                url: "@Url.Action("GetEmrInfo", "ReimbursementForms", new { area = "EMRForms" })?appId=" + "@emr.appId" + "&patId=" + @emr.patId,
                success: function (response) {
                    if (response.length > 0) {
                        $('#past').text(response[0].past);
                        $('#complaints').text(response[0].complaints);
                        $('#diagnosis').text(response[0].diagnosis);
                        $('#treatments').text(response[0].treatments);
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            })
        }
    //#endregion

    //#region Update  Button Click
        $('#btn_Update_Metlife').on('click', function (e) {
                e.preventDefault();
            if ($("#form_EditMetlife").valid()) {
                console.log($("#metId").val());
                $('#btn_Update_Metlife').removeClass("btn btn-success");
                $('#btn_Update_Metlife').addClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Update_Metlife').html("Updating the Record....");
                var met_check = "";
                $('.custom-control-input:checked').each(function (index) {
                    met_check = met_check + ',' + $(this).val();
                });
                var met_checkbx = met_check.substring(1);
                var _dataInsert = {
                    "metId": @Model.metId,
                    "met_appId": @emr.appId,
                    "met_check": met_checkbx,
                    "met_1": $("#umet_1").val(),
                    "met_2": $("#umet_2").val(),
                    "met_3": $("#umet_3").text(),
                    "met_claim_amount": $("#umet_claim_amount").val(),
                    "met_currency": $("#umet_currency").val(),
                    "met_4": moment($("#umet_4").val()).format("YYYY-MM-DD"),
                    "__RequestVerificationToken": $('input[name="__RequestVerificationToken"]').val()
                }
                console.log(_dataInsert)
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("UpdateMetlife", "ReimbursementForms", new { area = "EMRForms" })",
                    dataType: 'JSON',
                    data: _dataInsert,
                    success: function (data) {
                        $('#btn_Update_Metlife').removeClass("btn btn-warning btn-loaders btn-icon");
                        $('#btn_Update_Metlife').addClass("btn btn-warning");
                        $('#btn_Update_Metlife').html("Save Changes");
                        if (data.isSuccess) {
                            if (data.isInserted) {
                                GetMetlife();
                                var alertPlaceholder = document.getElementById("Alert");
                                function alert(e, t) {
                                    var l = document.createElement("div");
                                    l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible"  role="alert">' + e +
                                        '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                                }
                                alert("<i class='fe fe-check-circle text-white'></i> Metlife Updated Successfully!", "success");
                                Timeout();
                                $("#metlife_edit").show();
                                $("#metlife_add").hide();
                            }
                            else {
                                let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                                    "<div class='alert alert-warning' role='alert'>" +
                                    "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                    "<strong>Warning.. Metlife Alredy Exists..</strong><br/>" +
                                    "</div></div>";
                                $("#error").html(html);
                            }
                        }
                        else
                        {
                            let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                                "<div class='alert alert-danger' role='alert'>" +
                                "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                "<strong>Validation Error.. Please correct before you submit the form!&nbsp;</strong><br/><ul>";
                            $.each(data.message, function (index, value) {
                                html += "<li><small>" + value + "</small><li>";
                                var elem = $("#" + index);
                                if (elem.hasClass("select2-hidden-accessible")) {
                                    $("#select2-" + elem.attr("id") + "-container").parent().addClass('error');
                                }
                                else {
                                    $(elem).addClass(" is-invalid");
                                }

                                setTimeout(function () {
                                    if (elem.hasClass("select2-hidden-accessible")) {
                                        $("#select2-" + elem.attr("id") + "-container").parent().removeClass('error');
                                    }
                                    else {
                                        $(elem).removeClass("is-invalid");
                                    }
                                }, 5000);
                            });
                            html += "</ul></div></div>";
                            $("#error").html(html);
                        }
                    },
                    error: function (xhr) {
                        $('#btn_Update_Metlife').removeClass("btn btn-warning btn-loaders btn-icon");
                        $('#btn_Update_Metlife').addClass("btn btn-warning");
                        $('#btn_Update_Metlife').html("Save Changes");
                        Timeout();
                    }
                });

            }
            else {
                $('.modal-body').animate({
                    scrollTop: ($('.has-error').offset().top - 300)
                }, 2000);
            }
        });
    //#endregion

    //#region Delete Click
        $('#btn_Delete_Metlife').on('click', function (e) {
            e.preventDefault();
            $('#btn_Delete_Metlife').removeClass("btn btn-success");
            $('#btn_Delete_Metlife').addClass("btn btn-success btn-loaders btn-icon");
            $('#btn_Delete_Metlife').html("Deleting the Record....");

                $.ajax({
                    url: '@Url.Action("DeleteMetlife", "ReimbursementForms", new { area = "EMRForms" })?metId=' + $("#metId").val(),
                    type: "POST",
                    dataType: 'JSON',
                    success: function (data) {
                        $('#btn_Delete_Metlife').removeClass("btn btn-success btn-loaders btn-icon");
                        $('#btn_Delete_Metlife').addClass("btn btn-warning");
                        $('#btn_Delete_Metlife').html("Delete");
                        if (data.isAuthorized) {
                            if (data.success) {
                                var alertPlaceholder = document.getElementById("Alert");
                                function alert(e, t) {
                                    var l = document.createElement("div");
                                    l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                                        '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                                }
                                alert("<i class='fe fe-check-circle text-white'></i> Metlife Claim Deleted Successfully!", "success");
                                clearControls();
                                $("#metlife_edit").hide();
                                $("#metlife_add").show();
                                Addmetlife();
                            }
                            else {
                                let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                                    "<div class='alert alert-warning' role='alert'>" +
                                    "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                    "<strong>Error!.. Failed to Delete..</strong><br/>" +
                                    "</div></div>";
                                $("#error").html(html);
                            }
                        }
                        else {
                            var alertPlaceholder = document.getElementById("Alert");
                            function alert(e, t) {
                                var l = document.createElement("div");
                                l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                                    '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                            }
                            alert("<i class='fe fe-check-circle text-white'></i> You do not have Enough Privileges to Delete this Designation!", "Access Denied!");
                        }
                    },
                    error: function (xhr) {
                        $('#btn_Delete_Metlife').removeClass("btn btn-success btn-loaders btn-icon");
                        $('#btn_Delete_Metlife').addClass("btn btn-Delete");
                        $('#btn_Delete_Metlife').html("Delete");
                        Timeout();
                    }
                })
        });
    //#endregion

    //#region Validation Initialization
        var validate = function () {
            $('#umet_4').keypress(function (e) {
                var charCode = (e.which) ? e.which : e.keyCode
                if (String.fromCharCode(charCode).match(/[^0-9./-]/g)) {
                    return false;

                }
                else {
                    if (e.target.value.length >= 18)
                        return false;
                }
            });
            $('#umet_claim_amount').keypress(function (e) {
                var charCode = (e.which) ? e.which : e.keyCode
                var inputValue = $(this).val() + String.fromCharCode(charCode);

                if (String.fromCharCode(charCode).match(/[^0-9.]/g)) {
                    return false;
                }

                if (parseFloat(inputValue) > 1000000) {
                    return false;
                }
            });
            $("#umet_claim_amount").on('input', function () {
                var disc = $(this).val();
                if (disc == "" || disc == null || disc == undefined) {
                    $("#umet_claim_amount").val(0.00);
                }
            });

        }
    //#endregion

    //#region Alert Timeout
        function Timeout() {
            window.setTimeout(function () {
                $(".alert").fadeTo(500, 0).slideUp(500, function () {
                    $(this).remove();
                });
            }, 4200);
        }
    //#endregion

    //#region Clear Controls
    var clearControls = function () {
        $("#umet_1").val("");
        $("#umet_2").val("");
        $("#umet_3").val("");
        $("#umet_claim_amount").val("");
        $("#umet_currency").val("");
        var elements = document.getElementsByClassName('custom-control-input');
        Array.prototype.forEach.call(elements, function (element) {
            element.checked = false;
        });
        $("#umet_4").bootstrapdatepicker("setDate", '');
    }
//#endregion

    //#region Print Metlife Request
        function PrintMetlife() {
            window.open("@Url.Action("PrintMetlife", "ReimbursementForms", new { area = "EMRForms" })?metId=" + @Model.metId)
        }
    //#endregion

</script>

<style>
    hr.new4 {
        border: 5px solid #007CC3;
        height: 5px;
    }
</style>