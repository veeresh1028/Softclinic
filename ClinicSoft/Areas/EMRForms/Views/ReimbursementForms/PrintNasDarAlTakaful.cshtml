

@model BusinessEntities.EMRForms.NasDarAlTakaful
@using System.Linq;
@using System.Security.Claims;
@using BusinessEntities;
@{
    ViewBag.Title = "Print NasDarAlTakaful Reimbursement Claim Form";
    Layout = "~/Areas/EMR/Views/Shared/_EMR_Layout.cshtml";

    var claims = ClaimsPrincipal.Current.Identities.First().Claims.ToList();
    var emp_designation = claims.Where(c => c.Type == ClaimTypes.Role).Select(c => c.Value).SingleOrDefault();
    EMRInfo emr = (EMRInfo)TempData["emr_data"];
    TempData.Keep("emr_data");
}
<div class="row mb-2 mt-2 text-center">
    <div class="col-md-12">

        <button id="btnPrint" type="button" onclick="printDiv('printDiv')" class="btn btn-primary d-print-none"><i class="si si-printer"></i> Print</button>
    </div>
</div>
<div class="row fs-14" id="printDiv">
    <div class="col-md-12">
        <div class="card overflow-hidden">
            <div class="card-body">
                <div class="col-lg-12 col-md-12 text-center d-flex">
                    <img src="~/images/Reimbursement_Forms/gulf.png" />
                </div>
                <!-- End Row-->
                <div class="row">
                    <div class="col-lg-12 col-xl-12 col-md-12 col-sm-12">
                        <div>
                            <h5 class="font-weight-bold ps-3">Section 1 – Member Information</h5>
                        </div>
                        <div class="card-body">
                            <div class="row outer-border">
                                <div class="col-lg-12 col-md-12 ps-0">
                                    <div class="form-group row">
                                        <div class="d-flex col-sm-12 col-md-6 col-lg-6 ps-0">
                                            <label class="col-md-4 form-label">Patient name (as printed on card)</label>
                                            <div class="d-flex  justify-content-center w-8  form-label">
                                                :
                                            </div>
                                            <div class="col-md-6">
                                                <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_name&nbsp;</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="d-flex col-sm-12 col-md-6 col-lg-6 ps-0">
                                            <label class="col-md-4 form-label">Membership number from your card</label>
                                            <div class="d-flex  justify-content-center w-8  form-label">
                                                :
                                            </div>
                                            <div class="col-md-6">
                                                <span class="font-weight-normal1 text-capitalize text-left">@emr.pi_insno&nbsp;</span>
                                            </div>
                                        </div>
                                        <div class="d-flex col-sm-12 col-md-6 col-lg-6 ps-0">
                                            <label class="col-md-4 form-label">Date Of Birth</label>
                                            <div class="d-flex  justify-content-center w-8  form-label">
                                                :
                                            </div>
                                            <div class="col-md-6">

                                                <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_dob&nbsp;</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="d-flex col-sm-12 col-md-6 col-lg-6 ps-0">
                                            <label class="col-md-4 form-label">
                                                Principal name (as printed on card)
                                            </label>
                                            <div class="d-flex  justify-content-center w-8  form-label">
                                                :
                                            </div>
                                            <div class="col-md-6">
                                                <label class="text-black text-left">@Model.ndtn_1</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="d-flex col-sm-12 col-md-6 col-lg-6 ps-0">
                                            <label class="col-md-4 form-label">
                                                Principal contact information
                                            </label>
                                            <div class="d-flex  justify-content-center w-8  form-label">
                                                :
                                            </div>
                                            <div class="col-md-6">
                                                <label class="text-black text-left">@Model.ndtn_2</label>
                                            </div>
                                        </div>
                                        <div class="d-flex col-sm-12 col-md-6 col-lg-6 ps-0">
                                            <label class="col-md-4 form-label">Mob number</label>
                                            <div class="d-flex  justify-content-center w-8  form-label">
                                                :
                                            </div>
                                            <div class="col-md-6">
                                                <label class="text-black text-left">@Model.ndtn_3</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <div class="d-flex col-sm-12 col-md-6 col-lg-6 ps-0">
                                            <label class="col-md-4 form-label">E-mail</label>
                                            <div class="d-flex  justify-content-center w-8  form-label">
                                                :
                                            </div>
                                            <div class="col-md-6">
                                                <label class="text-black text-left">@Model.ndtn_4</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h5 class="font-weight-bold ps-3 text-black text-justify text-center">
                                Section 2 – Medical Information <br />(To be fully completed by patient’s medical practitioner – all boxes must be completed in BLOCK letters.)
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row outer-border">
                                <div class="col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">Country of treatment </label>
                                        <label class="text-black text-left">@Model.ndtn_5</label>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">Provider name and contact information</label>
                                        <label class="text-black text-left">@Model.ndtn_6</label>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">Date when first symptoms were noticed</label>
                                        <label class="text-black text-left">@Model.ndtn_7</label>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">Physician name and contact information </label>
                                        <label class="text-black text-left">@Model.ndtn_8</label>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group">
                                        <p>I declare that I am the patient’s medical practitioner, and that the particulars given are to the best of my knowledge true and correct</p>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">Physician signature and official stamp :</label>
                                        <img alt="stamp" src="@emr.doc_sign" id="doc_sign" class="avatar avatar-xl bsquare" />
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <p class="text-black text-justify text-center">Please provide details of diagnosis (primary and secondary) or symptom(s) and prescribed treatment(s) or investigation(s).</p>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">Symptoms </label>
                                        <label class="text-black text-left">@Model.ndtn_9</label>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">Treatment / investigation</label>
                                        <label class="text-black text-left">@Model.ndtn_10</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-sm-12 col-md-12 col-lg-12">
                                <h5 class="font-weight-bold ps-3">
                                    Section 3 – Claimed Invoices
                                </h5>
                                <div class="col-md-12">
                                    <div class="table-responsive">
                                        <table id="tbl_1" class="table table-striped table-bordered text-nowrap" style="width: 100%; cursor: pointer;">
                                            <thead>
                                                <tr style="color: #fff !important; background-color: #808080; border-color: #3C457D; ">
                                                    <th class="border-bottom-0 font-weight-semibold text-white">No</th>
                                                    <th class="border-bottom-0 font-weight-semibold text-white">Invoice number</th>
                                                    <th class="border-bottom-0 font-weight-semibold text-white">Claimed amount</th>
                                                    <th class="border-bottom-0 font-weight-semibold text-white">Currency</th>
                                                    <th class="border-bottom-0 font-weight-semibold text-white">No</th>
                                                    <th class="border-bottom-0 font-weight-semibold text-white">Invoice number</th>
                                                    <th class="border-bottom-0 font-weight-semibold text-white">Claimed amount</th>
                                                    <th class="border-bottom-0 font-weight-semibold text-white">Currency</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>1</td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_11</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_12</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_13</label>
                                                    </td>
                                                    <td>5</td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_14</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_15</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_16</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>2</td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_17</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_18</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_19</label>
                                                    </td>
                                                    <td>6</td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_20</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_21</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_22</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>3</td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_23</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_24</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_25</label>
                                                    </td>
                                                    <td>7</td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_26</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_27</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_28</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>4</td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_29</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_30</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_31</label>
                                                    </td>
                                                    <td>8</td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_32</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_33</label>
                                                    </td>
                                                    <td>
                                                        <label class="text-black text-left">@Model.ndtn_34</label>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="3">Total claimed amount per currency</td>
                                                    <td colspan="5"> <label class="text-black text-left">@Model.ndtn_41</label></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h5 class="font-weight-bold ps-3 text-black text-justify text-center">
                                Section 4 – Settlement
                            </h5>
                        </div>
                        <div class="card-body">
                            <div class="row outer-border">
                                <div class="col-sm-12 col-md-12">
                                    <div class="form-group row d-flex">
                                        <label class="text-black  col-md-3">Settlement currency : Settlement by </label>
                                        <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left col-md-3">
                                            <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                                <input type="checkbox" class="custom-control-input" name="ndtn_checkbox" value="1" id="1">
                                                <span class="custom-control-label">Cheque</span>
                                            </label>
                                        </div>
                                        <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left col-md-3">
                                            <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                                <input type="checkbox" class="custom-control-input" name="ndtn_checkbox" value="2" id="2">
                                                <span class="custom-control-label">Wire Transfer</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">(A) Bank name</label>
                                        <label class="text-black text-left">@Model.ndtn_35</label>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">(B) Account title</label>
                                        <label class="text-black text-left">@Model.ndtn_36</label>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">(C) IBAN number / Account number </label>
                                        <label class="text-black text-left">@Model.ndtn_37</label>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">(D) SWIFT code  </label>
                                        <label class="text-black text-left">@Model.ndtn_38</label>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">(E) Bank address </label>
                                        <label class="text-black text-left">@Model.ndtn_39</label>
                                    </div>
                                </div>
                                <div class="col-sm-6 col-md-6">
                                    <div class="form-group">
                                        <label class="form-label">(F) Beneficiary address </label>
                                        <label class="text-black text-left">@Model.ndtn_40</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group text-black font-weight-bold text-justify">
                                        <h4 class="text-black font-weight-bold">Important Notes:</h4>
                                        <p>
                                            Please submit the medical reports from your treating physician, pharmacy prescriptions, investigations requests and their results,
                                            invoices with itemized breakdown and original receipts. In case of online submission, please retain the original documents as they may be
                                            required to finalize your claim.
                                        </p>
                                        <p>
                                            NAS prior approval is required for all non-emergency hospitalizations. Before admission, you are kindly required to e-mail a detailed medical
                                            report and cost estimate of the proposed treatment on official letterhead duly signed and stamped by the treating physician to claimscenter@nas.ae.
                                        </p>
                                        <p>Cheques are issued in the name of the principal and are valid for 6 months from the date of issue.</p>
                                        <p>
                                            For transfers within the U.A.E., fields (A), (B) and (C) are mandatory. For transfers outside the U.A.E., please complete all fields in the settlement
                                            section above. In case IBAN is not available in the destination country (e.g. India), please enter bank account number in lieu of IBAN number.
                                        </p>
                                        <p>
                                            Claim settlements in currencies other than your bank account currency may result in foreign exchange charges. Please check with your bank regarding
                                            these and any additional fees that may be charged by your bank on incoming remittances.
                                        </p>
                                        <p>
                                            NAS bears no liability for any incorrect bank account details provided above. Furthermore, any charges related to corrective action shall be deducted
                                            from the final settlement.
                                        </p>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="form-group row outer-border">
                                        <h4 class="text-black font-weight-bold">Patient's declaration and conset</h4>
                                        <p>
                                            I, the undersigned, confirm that I am the patient/patient’s spouse or guardian (if patient is under 18 years of age) and I wish to claim benefits
                                            and declare that all the particulars given above are to the best of my knowledge true and correct. In addition, I authorize and request any hospital,
                                            physician, and any other health provider to furnish NAS Administration Services with the complete information including copies of their records in
                                            connection with medical treatment and/ or other services provided to me or to my dependent. I also agree that a copy of this consent shall have the
                                            validity of the original. Signature of the principal and or spouse
                                        </p>
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div>
                                                <div class="form-group mb-3" style="display:none" id="upatimg"><img alt="Signature" src="" id="upat_sign" class="avatar avatar-xl bsquare" /></div>
                                            </div>
                                            <label class="form-label"> Signature of the Insured/Guardian:</label>
                                        </div>
                                        <div class="col-sm-12 col-md-6 col-lg-6">
                                            <div>
                                                <label class="form-label text-red text-left" id="upsb_date_witness" name="">&nbsp;</label>
                                            </div>
                                            <label class="form-label">Date:</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Row -->
                <div class="text-center">
                    <img src="@Model.set_footer_image" />
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    //#region Partial View Onload
        $(function () {
           GetSignaturename('patient');
           GetCheckedValues("@Model.ndtn_checkbox");
        });
    //#endregion

    //#region Get CheckedValues
        var GetCheckedValues = function (checknames) {
            var str = checknames;
            console.log(str);
            var myarray = str.split(',');
            for (var i = 0; i < myarray.length; i++) {
                $('.custom-control-input').each(function () {
                    if (this.id == myarray[i]) {
                        $("#" + this.id).attr('checked', 'checked');
                        $("#" + this.id).prop("checked", true);
                    }
                });
            }
        }
    //#endregion

    //#region Print
        function printDiv(divName) {
            var printContents = document.getElementById(divName).innerHTML;
            var originalContents = document.body.innerHTML;
            document.body.innerHTML = printContents;
            window.print();
            document.body.innerHTML = originalContents;
        }
    //#endregion

    //#region Get Signature
        var GetSignaturename = function  (person) {
            $.ajax({
                url: '@Url.Action("GetSignature", "SignaturePad", new { area = "Common" })?appId=' + @emr.appId + '&person=' + person + '&form=NasDarAlTakaful',
                    type: "GET",
                    dataType: "json",
                    async: false,
                success: function (response) {
                    let sign = response[0].psb_sign;
                    var date = moment(response[0].psb_date_created).format("DD-MM-YYYY HH:mm");
                    if (response[0].person == "patient") {
                        $("#upatimg").show();
                        $("#upat_sign").attr("src", sign);
                        $("#upsb_date_witness").text(date);
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                    alert(xhr);
                }

            });
        };
    //#endregion

</script>

<style>
    .outer-border {
        border: 2px solid #000; /* You can adjust the border thickness and color as needed */
        padding: 10px; /* Optional: Add padding for spacing */
    }
</style>