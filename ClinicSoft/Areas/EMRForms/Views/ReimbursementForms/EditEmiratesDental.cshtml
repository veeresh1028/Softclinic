
@using System.Linq;
@using System.Security.Claims;
@using BusinessEntities;
@model BusinessEntities.EMRForms.EmiratesDental
@{
    var claims = ClaimsPrincipal.Current.Identities.First().Claims.ToList();
    var emp_designation = claims.Where(c => c.Type == ClaimTypes.Role).Select(c => c.Value).SingleOrDefault();
    EMRInfo emr = (EMRInfo)TempData["emr_data"];
    TempData.Keep("emr_data");
}
<form id="form_EditEmiratesDental" class="needs-validation fs-14" >

    @Html.AntiForgeryToken()
    @Html.HiddenFor(m => m.emdnId)
    @Html.HiddenFor(m => m.emdn_appId)
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12 text-center">
            <img src="~/images/Reimbursement_Forms/emirates.png" />
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12 text-center ps-6">
            <p class="text-black text-justify font-weight-bold">
                Submit your completed claim form and supporting documents online:
            </p>
            <p class="text-black text-justify font-weight-bold">
                HRDirect > Profile > Remuneration & Benefits > Medical Benefits > Member Portal > Submit Reimbursement claim
            </p>
        </div>
    </div>
    <div>
        <hr class="new4" />
    </div>
    <!-- End Row-->
    <div class="row">
        <div class="col-lg-12 col-xl-12 col-md-12 col-sm-12">
            <div class="card">
                <div class="card-header">
                    <h4 class="card-title text-success font-weight-bold">Section A - Employee Details</h4>
                </div>
                <div class="card-body pb-0">
                    <div class="form-horizontal">
                        <div class="form-group row">
                            <label class="col-md-6  col-lg-2  form-label">Name of Employee  :</label>
                            <div class="col-md-6  col-lg-4 ">
                                <span class="font-weight-normal1 text-capitalize text-left">@emr.doc_name&nbsp;</span>
                            </div>
                            <label class="col-md-6 col-lg-2 form-label">	Staff Number  :</label>
                            <div class="col-md-6  col-lg-4">
                                @Html.TextBoxFor(m => m.emdn_2, new { @class = "form-control", @id = "uemdn_2", @maxlength = "10" })
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <hr class="new4" />
                </div>
                <div class="card-header">
                    <h4 class="card-title text-success font-weight-bold">Section B – Patient Medical Details (To be fully completed by treating dentist)</h4>
                </div>
                <div class="card-body pb-0">
                    <div class="form-horizontal">
                        <div class="form-group row">
                            <label class="col-md-6 col-lg-2 form-label">Patient Name  :</label>
                            <div class="col-md-6 col-lg-4">
                                <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_name&nbsp;</span>
                            </div>
                            <label class="col-md-6 col-lg-2 form-label">Date Of Birth  :</label>
                            <div class="col-md-6 col-lg-4">
                                <span class="font-weight-normal1 text-capitalize text-left">@emr.pat_dob&nbsp;</span>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="text-black">Complaints / Onset / History</label>
                            <div class="col-md-12">
                                <label class="text-black text-red text-left" id="complaints" name="">&nbsp;</label>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="text-black">Diagnosis</label>
                            <div class="col-md-12">
                                <label class="text-black text-red text-left" id="diagnosis" name="">&nbsp;</label>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="text-black">Mark the affected tooth with <span class="font-weight-bold">“X”</span> and specify diagnosis details in the above field</label>
                        </div>
                        <div class="form-group row">
                            <div class="table-responsive">
                                <table id="tbl_1" class="table table-striped table-bordered text-nowrap" style="width: 100%; cursor: pointer;">
                                    <thead>
                                        <tr style="color: #fff !important; background-color: #808080; border-color: #3C457D;">
                                            <th class="border-bottom-0 font-weight-semibold text-white">1</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">2</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">3</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">4</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">5</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">6</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">7</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">8</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">9</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">10</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">11</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">12</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">13</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">14</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">15</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">16</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>@Html.TextBoxFor(m => m.emdn_3, new { @class = "form-control text-uppercase", @id = "uemdn_3", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_4, new { @class = "form-control text-uppercase", @id = "uemdn_4", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_5, new { @class = "form-control text-uppercase", @id = "uemdn_5", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_6, new { @class = "form-control text-uppercase", @id = "uemdn_6", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_7, new { @class = "form-control text-uppercase", @id = "uemdn_7", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_8, new { @class = "form-control text-uppercase", @id = "uemdn_8", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_9, new { @class = "form-control text-uppercase", @id = "uemdn_9", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_10, new { @class = "form-control text-uppercase", @id = "uemdn_10", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_11, new { @class = "form-control text-uppercase", @id = "uemdn_11", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_12, new { @class = "form-control text-uppercase", @id = "uemdn_12", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_13, new { @class = "form-control text-uppercase", @id = "uemdn_13", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_14, new { @class = "form-control text-uppercase", @id = "uemdn_14", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_15, new { @class = "form-control text-uppercase", @id = "uemdn_15", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_16, new { @class = "form-control text-uppercase", @id = "uemdn_16", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_17, new { @class = "form-control text-uppercase", @id = "uemdn_17", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_18, new { @class = "form-control text-uppercase", @id = "uemdn_18", @maxlength = "1" })</td>
                                        </tr>
                                        <tr>
                                            <td colspan="16"><hr class="new4" /></td>
                                        </tr>
                                        <tr>
                                            <td>@Html.TextBoxFor(m => m.emdn_19, new { @class = "form-control text-uppercase", @id = "uemdn_19", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_20, new { @class = "form-control text-uppercase", @id = "uemdn_20", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_21, new { @class = "form-control text-uppercase", @id = "uemdn_21", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_22, new { @class = "form-control text-uppercase", @id = "uemdn_22", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_23, new { @class = "form-control text-uppercase", @id = "uemdn_23", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_24, new { @class = "form-control text-uppercase", @id = "uemdn_24", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_25, new { @class = "form-control text-uppercase", @id = "uemdn_25", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_26, new { @class = "form-control text-uppercase", @id = "uemdn_26", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_27, new { @class = "form-control text-uppercase", @id = "uemdn_27", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_28, new { @class = "form-control text-uppercase", @id = "uemdn_28", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_29, new { @class = "form-control text-uppercase", @id = "uemdn_29", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_30, new { @class = "form-control text-uppercase", @id = "uemdn_30", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_31, new { @class = "form-control text-uppercase", @id = "uemdn_31", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_32, new { @class = "form-control text-uppercase", @id = "uemdn_32", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_33, new { @class = "form-control text-uppercase", @id = "uemdn_33", @maxlength = "1" })</td>
                                            <td>@Html.TextBoxFor(m => m.emdn_34, new { @class = "form-control text-uppercase", @id = "uemdn_34", @maxlength = "1" })</td>
                                        </tr>
                                    </tbody>
                                    <thead>
                                        <tr style="color: #fff !important; background-color: #808080; border-color: #3C457D;">
                                            <th class="border-bottom-0 font-weight-semibold text-white">32</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">31</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">30</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">29</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">28</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">27</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">26</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">25</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">24</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">23</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">22</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">21</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">20</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">19</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">18</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">17</th>
                                        </tr>
                                    </thead>
                                </table>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="text-black">Planned Treatment</label>
                            <div class="col-md-12">
                                @Html.TextAreaFor(m => m.emdn_35, new { @class = "form-control", @row = "2", @id = "uemdn_35" })
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="text-black">Signature and Stamp</label>
                            <div class="col-md-12">
                                <p class="text-black text-justify">
                                    I declare that I am the patient’s treating doctor/dentist and that theparticulars given are to the best of my knowledge true and correct
                                </p>
                            </div>
                        </div>
                        <div class="form-group row">
                            <div class="col-md-12 text-right">
                                <img alt="stamp" src="@emr.doc_sign" id="doc_sign" class="avatar avatar-xl bsquare" />
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <hr class="new4" />
                </div>
                <div class="card-header">
                    <h4 class="card-title text-success font-weight-bold">Section C – Patient / Spouse / Guardian Signature</h4>
                </div>
                <div class="card-body pb-0">
                    <div class="form-horizontal">
                        <div class="form-group row">
                            <p class="text-black text-justify">
                                I hereby authorise the Emirates Group to obtain any and all medical records, reports and test results, either in original hard-copy form or via access to
                                electronic data systems, as may be required to validate my claim. I consent to the Emirates Group disclosing my medical records, reports and test results
                                for the purpose of processing and validating my claim. In addition, I understand any such medical information provided to the Emirates Group will be
                                accessible to Emirates Group employees (including employees of wholly owned subsidiaries) on the Emirates Medical Benefits System Employee Portal via
                                confidential log-in.
                            </p>
                        </div>
                        <div class="form-group row">
                            <label class="col-md-2 form-label">signature:</label>
                            <div class="col-md-3">
                                <div class="form-group mb-3" style="display:none" id="upatimg"><img alt="Signature" src="" id="upat_sign" class="avatar avatar-xl bsquare" /></div>
                            </div>
                            <label class="col-md-2 form-label">	Date:</label>
                            <div class="col-md-3">
                                <label class="form-label text-red text-left" id="upsb_date_witness" name="">&nbsp;</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div>
                    <hr class="new4" />
                </div>
                <div class="card-header">
                    <h4 class="card-title text-success font-weight-bold">Section D – Employee Checklist (* Mandatory Fields)</h4>
                </div>
                <div class="card-body pb-0">
                    <div class="form-horizontal">
                        <div class="form-group row">
                            <div class="table-responsive">
                                <table id="tbl_1" class="table table-striped table-bordered text-nowrap" style="width: 30%; cursor: pointer;">
                                    <thead>
                                        <tr style="color: #fff !important; background-color: #808080; border-color: #3C457D;">
                                            <th class="border-bottom-0 font-weight-semibold text-white">Employee check</th>
                                            <th class="border-bottom-0 font-weight-semibold text-white">Documents Submitted</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>
                                                <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left">
                                                    <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                                        <input type="checkbox" class="custom-control-input" name="emdn_check" value="1" id="1">
                                                        <span class="custom-control-label"></span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td>Claim form</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left">
                                                    <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                                        <input type="checkbox" class="custom-control-input" name="emdn_check" value="2" id="2">
                                                        <span class="custom-control-label"></span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td>Payment receipts with costs breakdown</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left">
                                                    <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                                        <input type="checkbox" class="custom-control-input" name="emdn_check" value="3" id="3">
                                                        <span class="custom-control-label"></span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td>Copy of x-ray film (.pdf)</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left">
                                                    <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                                        <input type="checkbox" class="custom-control-input" name="emdn_check" value="4" id="4">
                                                        <span class="custom-control-label"></span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td>Medical report and prescription</td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="custom-controls d-lg-flex d-md-flex flex-row justify-content-left">
                                                    <label class="custom-control custom-checkbox ms-sm-2 md-md-2 ms-lg-2">
                                                        <input type="checkbox" class="custom-control-input" name="emdn_check" value="5" id="5">
                                                        <span class="custom-control-label"></span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td>EK referral (for EK Dental Clinic members)</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Row -->


    <div class="row mt-2">
        <div class="col-sm-12 col-md-12 col-lg-12 text-center">
            <div class="btn-list btn-animation">
                <button type="submit" class="btn btn-warning btn-sm" id="btn_Update_EmiratesDental">Save Changes</button>
                <button type="submit" class="btn btn-sm btn-outline-danger" id="btn_Delete_EmiratesDental">Delete</button>
                <div class="btn-group mr-2">
                    <div class="dropdown">
                        <button type="button" class="btn-sm btn-secondary me-2 mb-2 dropdown-toggle" data-bs-toggle="dropdown">
                            <i class="fa fa-paint-brush">&nbsp;&nbsp;</i> Patient
                        </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" onclick="openSignaturePad('patient')">Tab</a>
                            <a class="dropdown-item" onclick="openWacomTabSignaturePad('patient')">Wacom Tab</a>
                        </div>
                    </div>
                </div>
                <button type="button" class="btn btn-sm btn-outline-light " id="btn_Print_RadioDeci" onclick="PrintEmiratesDental()">
                    <i class="fa fa-print">&nbsp;&nbsp;</i>Print
                </button>
            </div>
        </div>
    </div>
</form>
<script type="text/javascript">

    //#region Partial View Onload
        var formName1 = $(form_EditEmiratesDental).closest('form').attr('name');
        $(function () {
            Get_EMRINFO();
            GetCheckedValues("@Model.emdn_chk");
            GetSignaturename('patient');
        });
    //#endregion

    //#region Get CheckedValues
        var GetCheckedValues = function (checknames) {
            var str = checknames;
            var myarray = str.split(',');

            for (var i = 0; i < myarray.length; i++) {
                $('.custom-control-input').each(function () {
                    if (this.id == myarray[i]) {
                        $("#" +this.id).attr('checked', 'checked');
                        $("#" +this.id).prop("checked", true);

                    }
                });
            }

        }
    //#endregion

    //#region Load Get Diagnosis,treatments,history,invoice
        var Get_EMRINFO = function () {
            $.ajax({
                type: "GET",
                url: "@Url.Action("GetEmrInfo", "ReimbursementForms", new { area = "EMRForms" })?appId=" + "@emr.appId" + "&patId=" + @emr.patId,
                success: function (response) {
                    if (response.length > 0) {
                        $('#diagnosis').text(response[0].diagnosis);
                        $('#complaints').text(response[0].complaints + '/' + response[0].past);
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                }
            })
        }
    //#endregion

    //#region Update  Button Click
        $('#btn_Update_EmiratesDental').on('click', function (e) {
                e.preventDefault();
            if ($("#form_EditEmiratesDental").valid()) {
                console.log($("#emdnId").val());
                $('#btn_Update_EmiratesDental').removeClass("btn btn-success");
                $('#btn_Update_EmiratesDental').addClass("btn btn-success btn-loaders btn-icon");
                $('#btn_Update_EmiratesDental').html("Updating the Record....");
                var emdn_check = "";
                $('.custom-control-input:checked').each(function (index) {
                    emdn_check = emdn_check + ',' + $(this).val();
                });
                var emdn_checkbx = emdn_check.substring(1);
                var _dataInsert = {
                    "emdnId": @Model.emdnId,
                    "emdn_appId": @emr.appId,
                    "emdn_1": '',
                    "emdn_2": $("#uemdn_2").val(),
                    "emdn_3": $("#uemdn_3").val(),
                    "emdn_4": $("#uemdn_4").val(),
                    "emdn_5": $("#uemdn_5").val(),
                    "emdn_6": $("#uemdn_6").val(),
                    "emdn_7": $("#uemdn_7").val(),
                    "emdn_8": $("#uemdn_8").val(),
                    "emdn_9": $("#uemdn_9").val(),
                    "emdn_10": $("#uemdn_10").val(),
                    "emdn_11": $("#uemdn_11").val(),
                    "emdn_12": $("#uemdn_12").val(),
                    "emdn_13": $("#uemdn_13").val(),
                    "emdn_14": $("#uemdn_14").val(),
                    "emdn_15": $("#uemdn_15").val(),
                    "emdn_16": $("#uemdn_16").val(),
                    "emdn_17": $("#uemdn_17").val(),
                    "emdn_18": $("#uemdn_18").val(),
                    "emdn_19": $("#uemdn_19").val(),
                    "emdn_20": $("#uemdn_20").val(),
                    "emdn_21": $("#uemdn_21").val(),
                    "emdn_22": $("#uemdn_22").val(),
                    "emdn_23": $("#uemdn_23").val(),
                    "emdn_24": $("#uemdn_24").val(),
                    "emdn_25": $("#uemdn_25").val(),
                    "emdn_26": $("#uemdn_26").val(),
                    "emdn_27": $("#uemdn_27").val(),
                    "emdn_28": $("#uemdn_28").val(),
                    "emdn_29": $("#uemdn_29").val(),
                    "emdn_30": $("#uemdn_30").val(),
                    "emdn_31": $("#uemdn_31").val(),
                    "emdn_32": $("#uemdn_32").val(),
                    "emdn_33": $("#uemdn_33").val(),
                    "emdn_34": $("#uemdn_34").val(),
                    "emdn_35": $("#uemdn_35").val(),
                    "emdn_chk": emdn_checkbx,
                    "__RequestVerificationToken": $('input[name="__RequestVerificationToken"]').val()
                }
                console.log(_dataInsert)
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("UpdateEmiratesDental", "ReimbursementForms", new { area = "EMRForms" })",
                    dataType: 'JSON',
                    data: _dataInsert,
                    success: function (data) {
                        $('#btn_Update_EmiratesDental').removeClass("btn btn-warning btn-loaders btn-icon");
                        $('#btn_Update_EmiratesDental').addClass("btn btn-warning");
                        $('#btn_Update_EmiratesDental').html("Save Changes");
                        if (data.isSuccess) {
                            if (data.isInserted) {
                                GetEmiratesDental();
                                var alertPlaceholder = document.getElementById("Alert");
                                function alert(e, t) {
                                    var l = document.createElement("div");
                                    l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible"  role="alert">' + e +
                                        '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                                }
                                alert("<i class='fe fe-check-circle text-white'></i> EmiratesDental Updated Successfully!", "success");
                                Timeout();
                                $("#emiratesdental_edit").show();
                                $("#emiratesdental_add").hide();
                            }
                            else {
                                let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                                    "<div class='alert alert-warning' role='alert'>" +
                                    "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                    "<strong>Warning.. EmiratesDental Alredy Exists..</strong><br/>" +
                                    "</div></div>";
                                $("#error").html(html);
                            }
                        }
                        else
                        {
                            let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                                "<div class='alert alert-danger' role='alert'>" +
                                "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                "<strong>Validation Error.. Please correct before you submit the form!&nbsp;</strong><br/><ul>";
                            $.each(data.message, function (index, value) {
                                html += "<li><small>" + value + "</small><li>";
                                var elem = $("#" + index);
                                if (elem.hasClass("select2-hidden-accessible")) {
                                    $("#select2-" + elem.attr("id") + "-container").parent().addClass('error');
                                }
                                else {
                                    $(elem).addClass(" is-invalid");
                                }

                                setTimeout(function () {
                                    if (elem.hasClass("select2-hidden-accessible")) {
                                        $("#select2-" + elem.attr("id") + "-container").parent().removeClass('error');
                                    }
                                    else {
                                        $(elem).removeClass("is-invalid");
                                    }
                                }, 5000);
                            });
                            html += "</ul></div></div>";
                            $("#error").html(html);
                        }
                    },
                    error: function (xhr) {
                        $('#btn_Update_EmiratesDental').removeClass("btn btn-warning btn-loaders btn-icon");
                        $('#btn_Update_EmiratesDental').addClass("btn btn-warning");
                        $('#btn_Update_EmiratesDental').html("Save Changes");
                        Timeout();
                    }
                });

            }
            else {
                $('.modal-body').animate({
                    scrollTop: ($('.has-error').offset().top - 300)
                }, 2000);
            }
        });
    //#endregion

    //#region Delete Click
        $('#btn_Delete_EmiratesDental').on('click', function (e) {
            e.preventDefault();
            $('#btn_Delete_EmiratesDental').removeClass("btn btn-success");
            $('#btn_Delete_EmiratesDental').addClass("btn btn-success btn-loaders btn-icon");
            $('#btn_Delete_EmiratesDental').html("Deleting the Record....");

                $.ajax({
                    url: '@Url.Action("DeleteEmiratesDental", "ReimbursementForms", new { area = "EMRForms" })?emdnId=' + $("#emdnId").val(),
                    type: "POST",
                    dataType: 'JSON',
                    success: function (data) {
                        $('#btn_Delete_EmiratesDental').removeClass("btn btn-success btn-loaders btn-icon");
                        $('#btn_Delete_EmiratesDental').addClass("btn btn-warning");
                        $('#btn_Delete_EmiratesDental').html("Delete");
                        if (data.isAuthorized) {
                            if (data.success) {
                                var alertPlaceholder = document.getElementById("Alert");
                                function alert(e, t) {
                                    var l = document.createElement("div");
                                    l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                                        '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                                }
                                alert("<i class='fe fe-check-circle text-white'></i> EmiratesDental Claim Deleted Successfully!", "success");
                                clearControls();
                                $("#emiratesdental_edit").hide();
                                $("#emiratesdental_add").show();
                                Addemiratesdental();
                            }
                            else {
                                let html = "<div class='col-12 col-sm-12 col-md-12 d-flex justify-content-center'>" +
                                    "<div class='alert alert-warning' role='alert'>" +
                                    "<button type='button' class='btn-close mr-negative-16' data-bs-dismiss='alert' aria-hidden='true' aria-label='Close'>×</button>" +
                                    "<strong>Error!.. Failed to Delete..</strong><br/>" +
                                    "</div></div>";
                                $("#error").html(html);
                            }
                        }
                        else {
                            var alertPlaceholder = document.getElementById("Alert");
                            function alert(e, t) {
                                var l = document.createElement("div");
                                l.innerHTML = '<div class="alert alert-' + t + ' alert-dismissible" >' + e +
                                    '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-hidden="Close">x</button></div>', alertPlaceholder.append(l)
                            }
                            alert("<i class='fe fe-check-circle text-white'></i> You do not have Enough Privileges to Delete this Designation!", "Access Denied!");
                        }
                    },
                    error: function (xhr) {
                        $('#btn_Delete_EmiratesDental').removeClass("btn btn-success btn-loaders btn-icon");
                        $('#btn_Delete_EmiratesDental').addClass("btn btn-Delete");
                        $('#btn_Delete_EmiratesDental').html("Delete");
                        Timeout();
                    }
                })
        });
    //#endregion

    //#region Alert Timeout
        function Timeout() {
            window.setTimeout(function () {
                $(".alert").fadeTo(500, 0).slideUp(500, function () {
                    $(this).remove();
                });
            }, 4200);
        }
    //#endregion

    //#region Clear Controls
    var clearControls = function () {
        $("#uemdn_2").val("");
        $("#uemdn_3").val("");
        $("#uemdn_4").val("");
        $("#uemdn_5").val("");
        $("#uemdn_6").val("");
        $("#uemdn_7").val("");
        $("#uemdn_8").val("");
        $("#uemdn_9").val("");
        $("#uemdn_10").val("");
        $("#uemdn_11").val("");
        $("#uemdn_12").val("");
        $("#uemdn_13").val("");
        $("#uemdn_14").val("");
        $("#uemdn_15").val("");
        $("#uemdn_16").val("");
        $("#uemdn_17").val("");
        $("#uemdn_18").val("");
        $("#uemdn_19").val("");
        $("#uemdn_20").val("");
        $("#uemdn_21").val("");
        $("#uemdn_22").val("");
        $("#uemdn_23").val("");
        $("#uemdn_24").val("");
        $("#uemdn_25").val("");
        $("#uemdn_26").val("");
        $("#uemdn_27").val("");
        $("#uemdn_28").val("");
        $("#uemdn_29").val("");
        $("#uemdn_30").val("");
        $("#uemdn_31").val("");
        $("#uemdn_32").val("");
        $("#uemdn_33").val("");
        $("#uemdn_34").val("");
        $("#uemdn_35").val("");
        var elements = document.getElementsByClassName('custom-control-input');
        Array.prototype.forEach.call(elements, function (element) {
            element.checked = false;
        });
    }
//#endregion

    //#region Print EmiratesDental Request
        function PrintEmiratesDental() {
            window.open("@Url.Action("PrintEmiratesDental", "ReimbursementForms", new { area = "EMRForms" })?emdnId=" + @Model.emdnId)
        }
    //#endregion

    //#region Wacom Tab Signature
        var openWacomTabSignaturePad = function (id) {
            var _data = {
                "patId": @emr.patId,
                "person": id,
                "form": "EmiratesDental",
                "appId": @emr.appId,
                "formname":"EmiratesDental",
                "formlink":"PrintEmiratesDentalClaim.aspx",
                "eSign":""
            }
            $.ajax({
                type: "GET",
                url: "@Url.Action("WacomTabSignaturePad", "WacomTabSignaturePad", new { area = "Common" })",
                contentType: "application/json",
                dataType: "html",
                data: _data,
                success: function (response) {
                    $("#signature_pad_body").html(response);
                    $("#signature_pad").modal("show");
                },
                error: function (xhr) {
                    console.log("Error :" + xhr.statusText);
                }
            });
        }
    //#endregion

    //#region Signature
        var openSignaturePad = function (id) {
            var _data = {
                "patId": @emr.patId,
                "person": id,
                "form": "EmiratesDental",
                "appId": @emr.appId,
                "formname":"EmiratesDental",
                "formlink":"PrintEmiratesDentalClaim.aspx",
                "eSign":""
            }
            $.ajax({
                type: "GET",
                url: "@Url.Action("SignaturePad", "SignaturePad", new { area = "Common" })",
                contentType: "application/json",
                dataType: "html",
                data: _data,
                success: function (response) {
                    $("#signature_pad_body").html(response);
                    $("#signature_pad").modal("show");
                },
                error: function (xhr) {
                    console.log("Error :" + xhr.statusText);
                }
            });
        }
    //#endregion

    //#region Get Signature
        var GetSignaturename = function  (person) {
            $.ajax({
                url: '@Url.Action("GetSignature", "SignaturePad", new { area = "Common" })?appId=' + @emr.appId + '&person=' + person + '&form=EmiratesDental',
                    type: "GET",
                    dataType: "json",
                    async: false,
                success: function (response) {
                    console.log("fgxghszd");
                    console.log(response);
                    let sign = response[0].psb_sign;
                    var date = moment(response[0].psb_date_created).format("DD-MM-YYYY HH:mm");
                    if (response[0].person == "patient") {
                        $("#upatimg").show();
                        $("#upat_sign").attr("src", sign);
                        $("#upsb_date_witness").text(date);
                    }
                },
                error: function (xhr) {
                    console.log(xhr);
                    alert(xhr);
                }

            });
        };
    //#endregion

</script>

<style>
    hr.new4 {
        border: 5px solid #5A5A5A;
        margin-top: 0px;
        margin-bottom: 0px;
    }
</style>