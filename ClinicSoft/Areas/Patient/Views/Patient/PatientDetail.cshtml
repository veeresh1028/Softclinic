@model BusinessEntities.Patient.PatientDetailInfo

<div class="modal-header py-3 px-4">
    <h5 class="modal-title text-primary font-weight-semibold" id="exampleModalLongTitle">Detailed information of &nbsp;</h5>
    <span class="badge bg-primary-light-1 text-uppercase"> @Model.pat_name </span>
    <button type="button" class="btn-close close-modal" data-bs-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>

<div class="modal-body p-4" style="background: #f5f5f5;">
    <!-- Row -->
    <div class="row">
        <div class="col-xl-3 col-lg-4">
            <div class="card box-widget widget-user">
                <div class="widget-user-image mx-auto mt-5">
                    @if (!string.IsNullOrEmpty(@Model.pat_info.pat_photo))
                    {
                        <img alt="Photo" src="~/images/patient_images/@Model.pat_info.pat_photo" class="rounded-circle" />
                    }
                    else
                    {
                        if (!string.IsNullOrEmpty(Model.pat_info.pat_gender))
                        {
                            if (Model.pat_info.pat_gender.ToLower().Trim() == "male")
                            {
                                <img alt="Photo" src="~/images/no-photo-male.jpg" class="rounded-circle" />
                            }
                            else if (Model.pat_info.pat_gender.ToLower().Trim() == "female")
                            {
                                <img alt="Photo" src="~/images/no-photo-female.jpg" class="rounded-circle" />
                            }
                            else
                            {
                                <img alt="Photo" src="~/assets/images/clinicsoft9/emid.jpg" class="rounded-circle" />
                            }
                        }
                        else
                        {
                            <img alt="Photo" src="~/assets/images/clinicsoft9/emid.jpg" class="rounded-circle" />
                        }
                    }
                </div>
                <div class="card-body pt-7">
                    <div class="pro-user text-center">
                        @{
                            string pclass = Model.pat_info.pat_class;

                            if (pclass == "VIP")
                            {
                                pclass = "<span title=\"VIP Patient\"><i class=\"fa fa-star text-orange\"></i></span>";
                            }
                            else if (pclass == "Employee Related")
                            {
                                pclass = "<span title=\"This Patient is related with Employee\"><i class=\"fa fa-street-view text-info\"></i></span>";
                            }
                            else if (pclass == "Management Related")
                            {
                                pclass = "<span title=\"This Patient is related with Management\"><i class=\"fa fa-handshake-o text-primary\"></i></span>";
                            }
                            else
                            {
                                pclass = "<i class=\"fa fa-crown\"></i>";
                            }

                        }
                        <h3 class="pro-user-username  mb-1 fs-22">@Model.pat_info.pat_name @Model.pat_info.pat_lname @Html.Raw(pclass)</h3>
                        <h6 class="pro-user-desc text-muted">@Model.pat_info.pat_emirateid</h6>

                        @if (Model.pat_info.pat_emirateid.StartsWith("784"))
                        {
                            <div class="text-center mb-2">
                                @if (Model.pat_info.id_card_edate < DateTime.Now.Date)
                                {
                                    <span class="text-danger"><i class="fa fa-exclamation-triangle text-danger"></i>&nbsp; Status : Expired (@DateTime.Parse(Model.pat_info.id_card_edate.ToString()).ToString("dd/MM/yyyy"))</span>
                                }
                                else
                                {
                                    <span class="text-success"><i class="fa fa-check-circle text-success"></i>&nbsp; Status : Active</span>
                                }
                            </div>

                            if (!string.IsNullOrEmpty(Model.pat_info.id_card_front))
                            {
                                <a href="javascript:void(0);" onclick="view_doc('id_card_front',@Model.pat_info.patId)" class="btn btn-primary mt-3">View ID Card Front</a>
                            }

                            if (!string.IsNullOrEmpty(Model.pat_info.id_card_back))
                            {
                                <a href="javascript:void(0);" onclick="view_doc('id_card_back',@Model.pat_info.patId)" class="btn btn-primary mt-3">View ID Card Back</a>
                            }
                        }
                    </div>
                    <div>
                        <div class="mb-3 mt-4">
                            <div class="d-flex">
                                <div class="Recent-transactions-img brround bg-primary text-white font-weight-normal1">
                                    <i class="fa fa-id-card-o text-white"></i>
                                </div>
                                <div class="">
                                    <a href="javascript:void(0);" class="font-weight-normal1 mb-1 fs-13">@Model.pat_info.pat_code</a>
                                    <p class="text-muted fs-11">File No (MRN)</p>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex">
                                <div class="Recent-transactions-img brround bg-danger text-white font-weight-normal1">
                                    <i class="fa fa-mobile-phone text-white"></i>
                                </div>
                                <div class="">
                                    <a href="javascript:void(0);" class="font-weight-normal1 mb-1 fs-13">@Model.pat_info.pat_mob</a>
                                    <p class="text-muted fs-11">Mobile No</p>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex">
                                <div class="Recent-transactions-img brround bg-info text-white font-weight-normal1">
                                    <i class="fa fa-envelope-o text-white"></i>
                                </div>
                                <div class="">
                                    @{
                                        if (!string.IsNullOrEmpty(Model.pat_info.pat_email))
                                        {
                                            <a href="javascript:void(0);" class="font-weight-normal1 mb-1 fs-13">@Model.pat_info.pat_email</a>
                                        }
                                        else
                                        {
                                            <a href="javascript:void(0);" class="font-weight-normal1 mb-1 fs-13">N/A</a>
                                        }
                                    }
                                    <p class="text-muted fs-11">Email ID</p>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex">
                                <div class="Recent-transactions-img brround bg-success text-white font-weight-normal1">
                                    @{
                                        if (!string.IsNullOrEmpty(Model.pat_info.pat_gender))
                                        {
                                            if (Model.pat_info.pat_gender.ToLower().Trim() == "male")
                                            {
                                                <i class="fa fa-male text-white"></i>
                                            }
                                            else if (Model.pat_info.pat_gender.ToLower().Trim() == "female")
                                            {
                                                <i class="fa fa-female text-white"></i>
                                            }
                                            else
                                            {
                                                <i class="fa fa-male text-white"></i>
                                            }
                                        }
                                        else
                                        {
                                            <i class="fa fa-male text-white"></i>
                                        }
                                    }
                                </div>
                                <div class="">
                                    <a href="javascript:void(0);" class="font-weight-normal1 mb-1 fs-13">@Model.pat_info.pat_gender</a>
                                    <p class="text-muted fs-11">Gender</p>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex">
                                <div class="Recent-transactions-img brround bg-secondary text-white font-weight-normal1">
                                    <i class="fa fa-flag-o text-white"></i>
                                </div>
                                <div class="">
                                    <a href="javascript:void(0);" class="font-weight-normal1 mb-1 fs-13">@Model.pat_info.nationality</a>
                                    <p class="text-muted fs-11">Nationality</p>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex">
                                <div class="Recent-transactions-img brround bg-secondary text-white font-weight-normal1">
                                    <i class="fa fa-calendar-o text-white"></i>
                                </div>
                                <div class="">
                                    @{
                                        DateTime defaultDate = new DateTime(1900, 1, 1, 0, 0, 0);

                                        if (Model.pat_info.pat_dob == defaultDate)
                                        {
                                            <a href="javascript:void(0);" class="font-weight-normal1 mb-1 fs-13">N/A</a>
                                        }
                                        else
                                        {
                                            <a href="javascript:void(0);" class="font-weight-normal1 mb-1 fs-13">@Model.pat_info.pat_dob.ToString("dd-MM-yyyy")</a>
                                        }
                                    }
                                    <p class="text-muted fs-11">Date Of Birth</p>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="d-flex">
                                <div class="Recent-transactions-img brround bg-secondary text-white font-weight-normal1">
                                    <i class="fa fa-calendar-check-o text-white"></i>
                                </div>
                                <div class="">
                                    @{
                                        if (Model.pat_info.app_last_visit == defaultDate)
                                        {
                                            <a href="javascript:void(0);" class="font-weight-normal1 mb-1 fs-13">N/A</a>
                                        }
                                        else
                                        {
                                            <a href="javascript:void(0);" class="font-weight-normal1 mb-1 fs-13">@Model.pat_info.app_last_visit.ToString("dd-MM-yyyy")</a>
                                        }
                                    }
                                    <p class="text-muted fs-11">Last Visit Date</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-9 col-lg-8">
            <div class="row">
                <div class="col-sm-12 col-lg-3">
                    <div class="card">
                        <div class="card-body text-center list-icons">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="svg-icon2 text-primary icon-dropshadow-primary bi bi-coin" viewBox="0 0 16 16">
                                <path d="M5.5 9.511c.076.954.83 1.697 2.182 1.785V12h.6v-.709c1.4-.098 2.218-.846 2.218-1.932 0-.987-.626-1.496-1.745-1.76l-.473-.112V5.57c.6.068.982.396 1.074.85h1.052c-.076-.919-.864-1.638-2.126-1.716V4h-.6v.719c-1.195.117-2.01.836-2.01 1.853 0 .9.606 1.472 1.613 1.707l.397.098v2.034c-.615-.093-1.022-.43-1.114-.9H5.5zm2.177-2.166c-.59-.137-.91-.416-.91-.836 0-.47.345-.822.915-.925v1.76h-.005zm.692 1.193c.717.166 1.048.435 1.048.91 0 .542-.412.914-1.135.982V8.518l.087.02z" />
                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z" />
                                <path d="M8 13.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11zm0 .5A6 6 0 1 0 8 2a6 6 0 0 0 0 12z" />
                            </svg>
                            <p class="card-text mt-3 mb-0">Cash Sales</p>
                            <p class="h2 text-center font-weight-bold">@Model.acc_summary.CashSales.ToString("N2")</p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-lg-3">
                    <div class="card">
                        <div class="card-body text-center list-icons">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="svg-icon2 fill-secondary icon-dropshadow-secondary bi bi-cash-coin" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0z" />
                                <path d="M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1h-.003zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195l.054.012z" />
                                <path d="M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083c.058-.344.145-.678.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1H1z" />
                                <path d="M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 5.982 5.982 0 0 1 3.13-1.567z" />
                            </svg>
                            <p class="card-text mt-3 mb-0">Insurance Sales</p>
                            <p class="h2 text-center font-weight-bold">@Model.acc_summary.InsSales.ToString("N2")</p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-lg-3">
                    <div class="card">
                        <div class="card-body text-center list-icons">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="svg-icon2  fill-success text-success icon-dropshadow-success bi bi-patch-check" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M10.354 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708 0z" />
                                <path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z" />
                            </svg>
                            <p class="card-text mt-3 mb-0">Received</p>
                            <p class="h2 text-center font-weight-bold">@Model.acc_summary.ReceivedAmt.ToString("N2")</p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-lg-3">
                    <div class="card">
                        <div class="card-body text-center list-icons">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="svg-icon2 fill-danger text-danger icon-dropshadow-danger bi bi-patch-question" viewBox="0 0 16 16">
                                <path d="M8.05 9.6c.336 0 .504-.24.554-.627.04-.534.198-.815.847-1.26.673-.475 1.049-1.09 1.049-1.986 0-1.325-.92-2.227-2.262-2.227-1.02 0-1.792.492-2.1 1.29A1.71 1.71 0 0 0 6 5.48c0 .393.203.64.545.64.272 0 .455-.147.564-.51.158-.592.525-.915 1.074-.915.61 0 1.03.446 1.03 1.084 0 .563-.208.885-.822 1.325-.619.433-.926.914-.926 1.64v.111c0 .428.208.745.585.745z" />
                                <path d="m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z" />
                                <path d="M7.001 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0z" />
                            </svg>
                            <p class="card-text mt-3 mb-0">Outstanding</p>
                            <p class="h2 text-center font-weight-bold">@Model.acc_summary.OutStandingAmt.ToString("N2")</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="row me-0 ms-0">
                    <div class="col-xl-2 col-lg-6 col-sm-6 pe-0 ps-0 border-end">
                        <div class="card-body text-center text-info">
                            <p class="mb-1">Booked</p>
                            <h2 class="mb-1 font-weight-bold">@Model.app_status_summary.Booked.ToString("D2")</h2>
                        </div>
                    </div>
                    <div class="col-xl-2 col-lg-6 col-sm-6 pe-0 ps-0 border-end">
                        <div class="card-body text-center text-primary">
                            <p class="mb-1">Confirmed</p>
                            <h2 class="mb-1 font-weight-bold">@Model.app_status_summary.Confirmed.ToString("D2")</h2>
                        </div>
                    </div>
                    <div class="col-xl-2 col-lg-6 col-sm-6 pe-0 ps-0 border-end">
                        <div class="card-body text-center text-azure">
                            <p class="mb-1">Arrived</p>
                            <h2 class="mb-1 font-weight-bold">@Model.app_status_summary.Arrived.ToString("D2")</h2>
                        </div>
                    </div>
                    <div class="col-xl-2 col-lg-6 col-sm-6 pe-0 ps-0 border-end">
                        <div class="card-body text-center text-success">
                            <p class="mb-1">Completed</p>
                            <h2 class="mb-1 font-weight-bold">@Model.app_status_summary.Completed.ToString("D2")</h2>
                        </div>
                    </div>
                    <div class="col-xl-2 col-lg-6 col-sm-6 pe-0 ps-0 border-end">
                        <div class="card-body text-center text-gray-dark">
                            <p class="mb-1">Cancelled</p>
                            <h2 class="mb-1 font-weight-bold">@Model.app_status_summary.Cancelled.ToString("D2")</h2>
                        </div>
                    </div>
                    <div class="col-xl-2 col-lg-6 col-sm-6 pe-0 ps-0">
                        <div class="card-body text-center text-danger">
                            <p class="mb-1">Deleted</p>
                            <h2 class="mb-1 font-weight-bold">@Model.app_status_summary.Deleted.ToString("D2")</h2>
                        </div>
                    </div>
                </div>
            </div>


            <div class="card p-1">
                <div class="panel-group accordion-panel" role="tablist" aria-multiselectable="true">
                    <div class="panel panel-default active">
                        <div class="panel-heading " role="tab" id="pat_appointments">
                            <h4 class="panel-title">
                                <a role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#pnl_appointments" aria-expanded="true" aria-controls="pnl_appointments">
                                    <i class="fa fa-calendar-check-o me-2"></i>Appointments
                                    <span class="float-end"><i class="fe fe-chevrons-down"></i></span>
                                </a>
                            </h4>
                        </div>
                        <div id="pnl_appointments" class="panel-collapse collapse" role="tabpanel" aria-labelledby="pat_appointments">
                            <div class="panel-body">
                                <div class="table-responsive" style="min-height:unset;">
                                    <table id="tbl_app_summary" class="table table-bordered text-nowrap resize-table" style="width:100%;">
                                        <thead>
                                            <tr style="color: #fff !important; background-color: #5b73e8; border-color: #5b73e8; ">
                                                <th class="border-bottom-0 font-weight-semibold text-white">Visit ID</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Date &amp; Time</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Room</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Doctor</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Type</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Status</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Remark</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Made By</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white text-center"><i class="fe fe-more-vertical" style="font-size: 20px;"></i></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var dr in Model.summary.app_summary)
                                            {
                                                <tr>
                                                    <td class="fs-13">@dr.appId</td>
                                                    <td class="fs-13">
                                                        <i class="fa fa-calendar-check-o text-dark me-1"></i>
                                                        @dr.app_fdate.ToString("dd-MM-yyyy") <br />

                                                        <i class="fa fa-clock-o text-dark me-1"></i>
                                                        @dr.app_doc_ftime - @dr.app_doc_ttime
                                                    </td>
                                                    <td class="fs-13">@dr.room</td>
                                                    <td class="fs-13">@dr.app_doctor</td>
                                                    <td class="fs-13">
                                                        @if (dr.app_type.ToLower() == "first time")
                                                        {
                                                            <span class="font-weight-semibold text-primary">First Time</span>
                                                        }
                                                        else if (dr.app_type.ToLower() == "followup")
                                                        {
                                                            <span class="font-weight-semibold text-secondary">Followup</span>
                                                        }
                                                        else if (dr.app_type.ToLower() == "repeat")
                                                        {
                                                            <span class="font-weight-semibold text-danger">Repeat</span>
                                                        }
                                                        else
                                                        {
                                                            <span class="font-weight-semibold text-dark">@dr.app_type</span>
                                                        }
                                                    </td>
                                                    <td class="fs-13">
                                                        @if (dr.app_status.ToLower() == "booked")
                                                        {
                                                            <span class="dot-label bg-info me-2 w-2 h-2"></span>
                                                            <span class="font-weight-semibold text-info">Booked</span>
                                                        }
                                                        else if (dr.app_status.ToLower() == "confirmed")
                                                        {
                                                            <span class="dot-label bg-primary me-2 w-2 h-2"></span>
                                                            <span class="font-weight-semibold text-primary">Confirmed</span>
                                                        }
                                                        else if (dr.app_status.ToLower() == "arrived")
                                                        {
                                                            <span class="dot-label bg-secondary me-2 w-2 h-2"></span>
                                                            <span class="font-weight-semibold text-secondary">Arrived</span>
                                                        }
                                                        else if (dr.app_status.ToLower() == "invoiced")
                                                        {
                                                            <span class="dot-label bg-success me-2 w-2 h-2"></span>
                                                            <span class="font-weight-semibold text-success">Completed</span>
                                                        }
                                                        else if (dr.app_status.ToLower() == "cancelled")
                                                        {
                                                            <span class="dot-label bg-gray me-2 w-2 h-2"></span>
                                                            <span class="font-weight-semibold text-gray-dark">Cancelled</span>
                                                        }
                                                        else if (dr.app_status.ToLower() == "deleted")
                                                        {
                                                            <span class="dot-label bg-danger me-2 w-2 h-2"></span>
                                                            <span class="font-weight-semibold text-danger">Deleted</span>
                                                        }
                                                        else
                                                        {
                                                            <span class="dot-label bg-dark me-2 w-2 h-2"></span>
                                                            <span class="font-weight-semibold text-dark">@dr.app_status</span>
                                                        }
                                                    </td>
                                                    <td class="fs-13">
                                                        @if (string.IsNullOrEmpty(dr.remarks.Trim()))
                                                        {
                                                            <span class="text-muted">No Remarks</span>
                                                        }
                                                        else
                                                        {
                                                            <span class="text-info text-wrap">@dr.remarks</span>
                                                        }
                                                    </td>
                                                    <td class="fs-13">@dr.app_madeby_name</td>
                                                    <td class="fs-13 text-center">
                                                        <div class="dropdown">
                                                            <a type="button" class="" data-bs-toggle="dropdown"><i class="fe fe-more-vertical" style="font-size: 20px;"></i></a>
                                                            <div class="dropdown-menu" style="min-width:auto">
                                                                <a class="dropdown-item text-dark fw-bold" href="javascript:void(0)" onclick="PrintMedical_Sheet(@dr.appId)">
                                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-pulse text-danger" viewBox="0 0 16 16" style="font-size: 15px;margin-right: 0.5rem;">
                                                                        <path fill-rule="evenodd" d="M10 1.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-1Zm-5 0A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5v1A1.5 1.5 0 0 1 9.5 4h-3A1.5 1.5 0 0 1 5 2.5v-1Zm-2 0h1v1H3a1 1 0 0 0-1 1V14a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V3.5a1 1 0 0 0-1-1h-1v-1h1a2 2 0 0 1 2 2V14a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3.5a2 2 0 0 1 2-2Zm6.979 3.856a.5.5 0 0 0-.968.04L7.92 10.49l-.94-3.135a.5.5 0 0 0-.895-.133L4.232 10H3.5a.5.5 0 0 0 0 1h1a.5.5 0 0 0 .416-.223l1.41-2.115 1.195 3.982a.5.5 0 0 0 .968-.04L9.58 7.51l.94 3.135A.5.5 0 0 0 11 11h1.5a.5.5 0 0 0 0-1h-1.128L9.979 5.356Z" />
                                                                    </svg>
                                                                    Medical Sheet
                                                                </a>
                                                                <a class="dropdown-item text-dark fw-bold" href="javascript:void(0)" onclick="appointment_AuditLogs(@dr.appId)"><i class="fa fa-eye text-dark" style="font-size: 15px; margin-right: 0.5rem; color: #046058 !important;"></i>&nbsp;Logs</a>
                                                            </div>
                                                        </div>
                                                    </td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default mt-2">
                        <div class="panel-heading" role="tab" id="pat_treatments">
                            <h4 class="panel-title">
                                <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#pnl_treatments" aria-expanded="false" aria-controls="pnl_treatments">
                                    <i class="fa fa-medkit me-2"></i>Treatments/Procedures
                                    <span class="float-end"><i class="fe fe-chevrons-down"></i></span>
                                </a>
                            </h4>
                        </div>
                        <div id="pnl_treatments" class="panel-collapse collapse" role="tabpanel" aria-labelledby="pat_treatments">
                            <div class="panel-body ">
                                <div class="table-responsive" style="min-height:unset;">
                                    <table id="tbl_treatment_summary" class="table table-bordered text-nowrap resize-table" style="width:100%;">
                                        <thead>
                                            <tr style="color: #fff !important; background-color: #5b73e8; border-color: #5b73e8; ">
                                                <th class="border-bottom-0 font-weight-semibold text-white">Visit ID</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">CPT Code</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Treatment</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Qty</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Unit Price</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Total</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Discount</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">VAT</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Net+VAT</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var dr in Model.summary.treatment_summary)
                                            {
                                                int _val = (dr.pt_tr_name.Length >= 50) ? 1 : 0;
                                                <tr>
                                                    <td class="fs-13">
                                                        @dr.appId.ToString() <br />
                                                        <i class="fa fa-calendar-check-o text-dark me-1"></i>
                                                        @dr.pt_app_fdate.ToString("dd-MM-yyyy") <br />
                                                    </td>
                                                    <td class="fs-13">@dr.pt_tr_code</td>
                                                    <td class="fs-13 text-wrap">
                                                        @if (_val == 1)
                                                        {
                                                            @dr.pt_tr_name.Substring(0, 50)
                                                            <span class="text-muted-dark ms-1" title="@dr.pt_tr_name">...</span>
                                                        }
                                                        else
                                                        {
                                                            @dr.pt_tr_name
                                                        }
                                                        <br />
                                                        <small class="text-info">(@dr.ip_name)</small>
                                                    </td>
                                                    <td class="fs-13 text-muted">@dr.pt_qty</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.pt_uprice.ToString()).ToString("N2") </td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.pt_total.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.pt_disc.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.pt_vat.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.pt_total.ToString()).ToString("N2")</td>
                                                </tr>
                                            }
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <th colspan="4" class="text-end fs-14 font-weight-semibold">Total:</th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default mt-2">
                        <div class="panel-heading" role="tab" id="pat_invoices">
                            <h4 class="panel-title">
                                <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#pnl_invoices" aria-expanded="false" aria-controls="pnl_invoices">
                                    <i class="fa fa-file-pdf-o me-2"></i>Invoices
                                    <span class="float-end"><i class="fe fe-chevrons-down"></i></span>
                                </a>
                            </h4>
                        </div>
                        <div id="pnl_invoices" class="panel-collapse collapse" role="tabpanel" aria-labelledby="pat_invoices">
                            <div class="panel-body ">
                                <div class="table-responsive" style="min-height:unset;">
                                    <table id="tbl_invoice_summary" class="table table-bordered text-nowrap resize-table" style="width:100%;">
                                        <thead>
                                            <tr style="color: #fff !important; background-color: #5b73e8; border-color: #5b73e8; ">
                                                <th class="border-bottom-0 font-weight-semibold text-white">Visit ID</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Invoice #</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Type</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Date &amp; Time</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Status</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Gross</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Discount</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Net</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">VAT</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Net+VAT</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var dr in Model.summary.invoices_summary)
                                            {
                                                <tr>
                                                    <td class="fs-13">
                                                        @dr.inv_appId.ToString() <br />
                                                        <i class="fa fa-calendar-check-o text-dark me-1"></i>
                                                        @dr.app_fdate.ToString("dd-MM-yyyy") <br />
                                                    </td>
                                                    <td class="fs-13">@dr.inv_no</td>
                                                    <td class="fs-13 text-wrap">
                                                        @if (dr.inv_type.ToLower() == "cash")
                                                        {
                                                            <span class="text-primary">Cash</span>
                                                        }
                                                        else
                                                        {
                                                            <span class="text-info">@dr.inv_type</span>
                                                        }
                                                    </td>
                                                    <td class="fs-13">
                                                        <i class="fa fa-calendar-check-o text-dark me-1"></i>
                                                        @dr.inv_date.ToString("dd-MM-yyyy") <br />
                                                        <i class="fa fa-clock-o text-dark me-1"></i>
                                                        @dr.inv_date.ToString("HH:mm:ss")
                                                    </td>
                                                    <td class="fs-13 text-wrap">
                                                        @if (dr.inv_status.ToLower() == "paid")
                                                        {
                                                            <span class="dot-label bg-success me-2 w-2 h-2"></span>
                                                            <span class="text-success">Paid</span>
                                                        }
                                                        else if (dr.inv_status.ToLower() == "partly paid")
                                                        {
                                                            <span class="dot-label bg-orange me-2 w-2 h-2"></span>
                                                            <span class="text-orange">Partly Paid</span>
                                                        }
                                                        else if (dr.inv_status.ToLower() == "unpaid")
                                                        {
                                                            <span class="dot-label bg-danger me-2 w-2 h-2"></span>
                                                            <span class="text-danger">Unpaid</span>
                                                        }
                                                        else
                                                        {
                                                            <span class="dot-label bg-dark me-2 w-2 h-2"></span>
                                                            <span class="text-dark">@dr.inv_status</span>
                                                        }
                                                    </td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.inv_total.ToString()).ToString("N2") </td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.inv_disc.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.inv_net.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.inv_vat.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.inv_netvat.ToString()).ToString("N2")</td>
                                                </tr>
                                            }
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <th colspan="5" class="text-end fs-14 font-weight-semibold">Total:</th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default mt-2">
                        <div class="panel-heading" role="tab" id="pat_receipts">
                            <h4 class="panel-title">
                                <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#pnl_receipts" aria-expanded="false" aria-controls="pnl_receipts">
                                    <i class="fa fa-file-excel-o me-2"></i>Receipts
                                    <span class="float-end"><i class="fe fe-chevrons-down"></i></span>
                                </a>
                            </h4>
                        </div>
                        <div id="pnl_receipts" class="panel-collapse collapse" role="tabpanel" aria-labelledby="pat_receipts">
                            <div class="panel-body ">
                                <div class="table-responsive" style="min-height:unset;">
                                    <table id="tbl_receipts_summary" class="table table-bordered text-nowrap resize-table" style="width:100%;">
                                        <thead>
                                            <tr style="color: #fff !important; background-color: #5b73e8; border-color: #5b73e8; ">
                                                <th class="border-bottom-0 font-weight-semibold text-white">Rec. Code</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Invoice #</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Cash</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Credit Card</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Credit Card Charges</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Cheque</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Bank</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Allocated</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Voucher</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Loyality</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Bad Debit</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Received</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Refunded</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Net</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Receipt By</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var dr in Model.summary.receipts_summary)
                                            {
                                                <tr>
                                                    <td class="fs-13">@dr.rec_code</td>
                                                    <td class="fs-13">
                                                        @dr.rec_invoice_no.ToString() <br />
                                                        <i class="fa fa-calendar-check-o text-dark me-1"></i>
                                                        @dr.rec_date.ToString("dd-MM-yyyy") <br />
                                                    </td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_cash.ToString()).ToString("N2") </td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_cc.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_cc_charges.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_chq.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_bt.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_allocated.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_vamount.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_lamount.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_debit.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_total.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.total_refunded.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.total_net.ToString()).ToString("N2")</td>
                                                    <td class="fs-13">@dr.rec_madeby_name</td>
                                                </tr>
                                            }
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <th colspan="2" class="text-end fs-14 font-weight-semibold">Total:</th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default mt-2">
                        <div class="panel-heading" role="tab" id="pat_advances">
                            <h4 class="panel-title">
                                <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#pnl_advances" aria-expanded="false" aria-controls="pnl_advances">
                                    <i class="fa fa-money me-2"></i>Advances
                                    <span class="float-end"><i class="fe fe-chevrons-down"></i></span>
                                </a>
                            </h4>
                        </div>
                        <div id="pnl_advances" class="panel-collapse collapse" role="tabpanel" aria-labelledby="pat_advances">
                            <div class="panel-body ">
                                <div class="table-responsive" style="min-height:unset;">
                                    <table id="tbl_advances_summary" class="table table-bordered text-nowrap resize-table" style="width:100%;">
                                        <thead>
                                            <tr style="color: #fff !important; background-color: #5b73e8; border-color: #5b73e8; ">
                                                <th class="border-bottom-0 font-weight-semibold text-white">Rec. Code</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Invoice #</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Cash</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Credit Card</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Credit Card Charges</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Cheque</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Bank</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Allocated</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Balance</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Voucher</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Loyality</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Bad Debit</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Received</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Refunded</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Net</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Receipt By</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var dr in Model.summary.advances_summary)
                                            {
                                                <tr>
                                                    <td class="fs-13">@dr.rec_code</td>
                                                    <td class="fs-13">
                                                        @dr.rec_invoice_no.ToString() <br />
                                                        <i class="fa fa-calendar-check-o text-dark me-1"></i>
                                                        @dr.rec_date.ToString("dd-MM-yyyy") <br />
                                                    </td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_cash.ToString()).ToString("N2") </td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_cc.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_cc_charges.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_chq.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_bt.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_allocated.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_balance.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_vamount.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_lamount.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_debit.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.rec_total.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.total_refunded.ToString()).ToString("N2")</td>
                                                    <td class="fs-13 text-end">@decimal.Parse(dr.total_net.ToString()).ToString("N2")</td>
                                                    <td class="fs-13">@dr.rec_madeby_name</td>
                                                </tr>
                                            }
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <th colspan="2" class="text-end fs-14 font-weight-semibold">Total:</th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                                <th class="text-end fs-14 font-weight-semibold text-dark"></th>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default mt-2">
                        <div class="panel-heading" role="tab" id="pat_signedforms">
                            <h4 class="panel-title">
                                <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#pnl_signedforms" aria-expanded="false" aria-controls="pnl_signedforms">
                                    <i class="fa fa-file-word-o me-2"></i>Signed Forms
                                    <span class="float-end"><i class="fe fe-chevrons-down"></i></span>
                                </a>
                            </h4>
                        </div>
                        <div id="pnl_signedforms" class="panel-collapse collapse" role="tabpanel" aria-labelledby="pat_signedforms">
                            <div class="panel-body">
                                <div class="table-responsive" style="min-height:unset;">
                                    <table id="tbl_signedforms_summary" class="table table-bordered text-nowrap resize-table" style="width:100%;">
                                        <thead>
                                            <tr style="color: #fff !important; background-color: #5b73e8; border-color: #5b73e8; ">
                                                <th class="border-bottom-0 font-weight-semibold text-white">Visit ID</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Date &amp; Time</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Document</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white text-center">View</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var dr in Model.summary.doc_summary)
                                            {
                                                <tr>
                                                    <td class="fs-13">@dr.csd_appId</td>
                                                    <td class="fs-13">
                                                        <i class="fa fa-calendar-check-o text-dark me-1"></i>
                                                        @dr.app_fdate.ToString("dd-MM-yyyy") <br />
                                                    </td>
                                                    <td class="fs-13">@dr.csd_form</td>
                                                    <td class="fs-13 text-center">
                                                        <a href="@dr.csd_formlink" target="_blank"><i class="fe fe-search text-dark"></i></a>
                                                    </td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default mt-2">
                        <div class="panel-heading" role="tab" id="pat_packageorder">
                            <h4 class="panel-title">
                                <a class="collapsed" role="button" data-bs-toggle="collapse" data-parent="#accordion1" href="#pnl_packageorder" aria-expanded="false" aria-controls="pnl_packageorder">
                                    <i class="fa fa-send-o me-2"></i>Package Orders
                                    <span class="float-end"><i class="fe fe-chevrons-down"></i></span>
                                </a>
                            </h4>
                        </div>
                        <div id="pnl_packageorder" class="panel-collapse collapse" role="tabpanel" aria-labelledby="pat_packageorder">
                            <div class="panel-body">
                                <div class="table-responsive" style="min-height:unset;">
                                    <table id="tbl_po_summary" class="table table-bordered text-nowrap resize-table" style="width:100%;">
                                        <thead>
                                            <tr style="color: #fff !important; background-color: #5b73e8; border-color: #5b73e8; ">
                                                <th class="border-bottom-0 font-weight-semibold text-white">Ref.No</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Package</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Service</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Qty</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Used</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Available</th>
                                                <th class="border-bottom-0 font-weight-semibold text-white">Status</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var dr in Model.summary.po_summary)
                                            {
                                                int _pk = (dr.ps_packagename.Length >= 50) ? 1 : 0;
                                                int _sr = (dr.service_name.Length >= 50) ? 1 : 0;
                                                <tr>
                                                    <td class="fs-13">@dr.po_refno</td>
                                                    <td class="fs-13 text-wrap">
                                                        @if (_pk == 1)
                                                        {
                                                            @dr.ps_packagename.Substring(0, 50)
                                                            <span class="text-muted-dark ms-1" title="@dr.ps_packagename">...</span>
                                                        }
                                                        else
                                                        {
                                                            @dr.ps_packagename
                                                        }
                                                        <br />
                                                        <small class="text-info">(@dr.package_code)</small>
                                                    </td>
                                                    <td class="fs-13 text-wrap">
                                                        @if (_sr == 1)
                                                        {
                                                            @dr.service_name.Substring(0, 50)
                                                            <span class="text-muted-dark ms-1" title="@dr.service_name">...</span>
                                                        }
                                                        else
                                                        {
                                                            @dr.service_name
                                                        }
                                                        <br />
                                                        <small class="text-info">(@dr.service_code)</small>
                                                    </td>
                                                    <td class="fs-13 text-end text-dark">@dr.ps_qty.ToString("D2")</td>
                                                    <td class="fs-13 text-end text-info">@dr.used_ses.ToString("D2")</td>
                                                    <td class="fs-13 text-end text-success">@dr.avail_ses.ToString("D2")</td>
                                                    <td class="fs-13">
                                                        @if (dr.po_status.ToLower() == "active")
                                                        {
                                                            <span class="font-weight-semibold text-info">Active</span>
                                                        }
                                                        else if (dr.po_status.ToLower() == "invoiced")
                                                        {
                                                            <span class="font-weight-semibold text-success">Invoiced</span>
                                                        }
                                                        else if (dr.po_status.ToLower() == "deleted")
                                                        {
                                                            <span class="font-weight-semibold text-danger">Deleted</span>
                                                        }
                                                        else
                                                        {
                                                            <span class="font-weight-semibold text-dark">@dr.po_status</span>
                                                        }
                                                    </td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Row-->
</div>
<!-- Modal View Document -->
<div class="modal fade" id="view_doc_modal" data-bs-backdrop="static" data-bs-keyboard="false" data-modal-from="patient" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" id="size">
        <div class="modal-content" id="view_doc_modal_body">
        </div>
    </div>
</div>
<!-- End Modal View Document-->
<script>
    //#region Document on Load
    $(function () {
        load_app_summary();
        load_treatment_summary();
        load_invoice_summary();
        load_receipts_summary();
        load_advances_summary();
        load_signedforms_summary();
        load_po_summary();
    });
    //#endregion

    //#region Load Summary DataTables
    var load_app_summary = function () {
        var table = $('#tbl_app_summary').DataTable({
            lengthChange: true,
            buttons: [
                {
                    extend: 'excel',
                    className: 'btn-secondary',
                    title: 'Appointment Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.excelHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Appointment Summary for patId = @Model.pat_info.patId to Excel!");
                    }
                },
                {
                    extend: 'pdf',
                    className: 'btn-secondary',
                    title: 'Appointment Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.pdfHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Appointment Summary for patId = @Model.pat_info.patId to PDF!");
                    }
                },
                {
                    extend: 'csv',
                    className: 'btn-secondary',
                    title: 'Appointment Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.csvHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Appointment Summary for patId = @Model.pat_info.patId to CSV!");
                    }
                },
                {
                    extend: 'print',
                    className: 'btn-secondary',
                    title: 'Appointment Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.print.action.call(this, e, dt, node, config);
                        exportLogs("Employee Printed Appointment Summary for patId = @Model.pat_info.patId!");
                    }
                }
            ],
            order: [[0, 'asc']],
            language: {
                searchPlaceholder: 'Search...',
                sSearch: '<span class="text-primary font-weight-semi-bold">Search</span>',
                lengthMenu: '_MENU_ ',
            },
            "aoColumnDefs": [
                {
                    "aTargets": [8],
                    "orderable": false,
                    "searchable": false
                }
            ]
        });
        table.buttons().container().appendTo('#tbl_app_summary_wrapper .col-md-6:eq(0)');
    }

    var load_treatment_summary = function () {
        var numberRenderer = $.fn.dataTable.render.number(',', '.', 2,).display;
        var table = $('#tbl_treatment_summary').DataTable({
            lengthChange: true,
            buttons: [
                {
                    extend: 'excel',
                    className: 'btn-secondary',
                    title: 'Treatments Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.excelHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Treatments Summary for patId = @Model.pat_info.patId to Excel!");
                    }
                },
                {
                    extend: 'pdf',
                    className: 'btn-secondary',
                    title: 'Treatments Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.pdfHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Treatments Summary for patId = @Model.pat_info.patId to PDF!");
                    }
                },
                {
                    extend: 'csv',
                    className: 'btn-secondary',
                    title: 'Treatments Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.csvHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Treatments Summary for patId = @Model.pat_info.patId to CSV!");
                    }
                },
                {
                    extend: 'print',
                    className: 'btn-secondary',
                    title: 'Treatments Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.print.action.call(this, e, dt, node, config);
                        exportLogs("Employee Printed Treatments Summary for patId = @Model.pat_info.patId!");
                    }
                }
            ],
            order: [[0, 'asc']],
            language: {
                searchPlaceholder: 'Search...',
                sSearch: '<span class="text-primary font-weight-semi-bold">Search</span>',
                lengthMenu: '_MENU_ ',
            },
            footerCallback: function (row, data, start, end, display) {
                var api = this.api();

                // Remove the formatting to get integer data for summation
                var intVal = function (i) {
                    return typeof i === 'string' ? i.replace(/[\$,]/g, '') * 1 : typeof i === 'number' ? i : 0;
                };

                // Footer Total
                total_upr = api.column(4).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total_tot = api.column(5).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total_dis = api.column(6).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total_vat = api.column(7).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total_net = api.column(8).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);

                $(api.column(4).footer()).html(numberRenderer(total_upr.toFixed(2)));
                $(api.column(5).footer()).html(numberRenderer(total_tot.toFixed(2)));
                $(api.column(6).footer()).html(numberRenderer(total_dis.toFixed(2)));
                $(api.column(7).footer()).html(numberRenderer(total_vat.toFixed(2)));
                $(api.column(8).footer()).html(numberRenderer(total_net.toFixed(2)));
            }
        });
        table.buttons().container().appendTo('#tbl_treatment_summary_wrapper .col-md-6:eq(0)');
    }

    var load_invoice_summary = function () {
        var numberRenderer = $.fn.dataTable.render.number(',', '.', 2,).display;

        var table = $('#tbl_invoice_summary').DataTable({
            lengthChange: true,
            buttons: [
                {
                    extend: 'excel',
                    className: 'btn-secondary',
                    title: 'Invoice Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.excelHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Invoice Summary for patId = @Model.pat_info.patId to Excel!");
                    }
                },
                {
                    extend: 'pdf',
                    className: 'btn-secondary',
                    title: 'Invoice Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.pdfHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Invoice Summary for patId = @Model.pat_info.patId to PDF!");
                    }
                },
                {
                    extend: 'csv',
                    className: 'btn-secondary',
                    title: 'Invoice Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.csvHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Invoice Summary for patId = @Model.pat_info.patId to CSV!");
                    }
                },
                {
                    extend: 'print',
                    className: 'btn-secondary',
                    title: 'Invoice Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.print.action.call(this, e, dt, node, config);
                        exportLogs("Employee Printed Invoice Summary for patId = @Model.pat_info.patId!");
                    }
                }
            ],
            order: [[0, 'asc']],
            language: {
                searchPlaceholder: 'Search...',
                sSearch: '<span class="text-primary font-weight-semi-bold">Search</span>',
                lengthMenu: '_MENU_ ',
            },
            footerCallback: function (row, data, start, end, display) {
                var api = this.api();

                // Remove the formatting to get integer data for summation
                var intVal = function (i) {
                    return typeof i === 'string' ? i.replace(/[\$,]/g, '') * 1 : typeof i === 'number' ? i : 0;
                };

                // Footer Total
                total1 = api.column(5).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total2 = api.column(6).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total3 = api.column(7).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total4 = api.column(8).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total5 = api.column(9).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);

                $(api.column(5).footer()).html(numberRenderer(total1.toFixed(2)));
                $(api.column(6).footer()).html(numberRenderer(total2.toFixed(2)));
                $(api.column(7).footer()).html(numberRenderer(total3.toFixed(2)));
                $(api.column(8).footer()).html(numberRenderer(total4.toFixed(2)));
                $(api.column(9).footer()).html(numberRenderer(total5.toFixed(2)));
            }
        });
        table.buttons().container().appendTo('#tbl_invoice_summary_wrapper .col-md-6:eq(0)');
    }

    var load_receipts_summary = function () {
        var numberRenderer = $.fn.dataTable.render.number(',', '.', 2,).display;

        var table = $('#tbl_receipts_summary').DataTable({
            lengthChange: true,
            buttons: [
                {
                    extend: 'excel',
                    className: 'btn-secondary',
                    title: 'Receipt Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.excelHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Receipt Summary for patId = @Model.pat_info.patId to Excel!");
                    }
                },
                {
                    extend: 'pdf',
                    className: 'btn-secondary',
                    title: 'Receipt Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.pdfHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Receipt Summary for patId = @Model.pat_info.patId to PDF!");
                    }
                },
                {
                    extend: 'csv',
                    className: 'btn-secondary',
                    title: 'Receipt Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.csvHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Receipt Summary for patId = @Model.pat_info.patId to CSV!");
                    }
                },
                {
                    extend: 'print',
                    className: 'btn-secondary',
                    title: 'Receipt Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.print.action.call(this, e, dt, node, config);
                        exportLogs("Employee Printed Receipt Summary for patId = @Model.pat_info.patId!");
                    }
                }
            ],
            order: [[0, 'asc']],
            language: {
                searchPlaceholder: 'Search...',
                sSearch: '<span class="text-primary font-weight-semi-bold">Search</span>',
                lengthMenu: '_MENU_ ',
            },
            footerCallback: function (row, data, start, end, display) {
                var api = this.api();

                // Remove the formatting to get integer data for summation
                var intVal = function (i) {
                    return typeof i === 'string' ? i.replace(/[\$,]/g, '') * 1 : typeof i === 'number' ? i : 0;
                };

                // Footer Total
                total1 = api.column(2).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total2 = api.column(3).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total3 = api.column(4).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total4 = api.column(5).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total5 = api.column(6).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total6 = api.column(7).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total7 = api.column(8).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total8 = api.column(9).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total9 = api.column(10).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total10 = api.column(11).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total11 = api.column(12).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total12 = api.column(13).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);

                $(api.column(2).footer()).html(numberRenderer(total1.toFixed(2)));
                $(api.column(3).footer()).html(numberRenderer(total2.toFixed(2)));
                $(api.column(4).footer()).html(numberRenderer(total3.toFixed(2)));
                $(api.column(5).footer()).html(numberRenderer(total4.toFixed(2)));
                $(api.column(6).footer()).html(numberRenderer(total5.toFixed(2)));
                $(api.column(7).footer()).html(numberRenderer(total6.toFixed(2)));
                $(api.column(8).footer()).html(numberRenderer(total7.toFixed(2)));
                $(api.column(9).footer()).html(numberRenderer(total8.toFixed(2)));
                $(api.column(9).footer()).html(numberRenderer(total8.toFixed(2)));
                $(api.column(10).footer()).html(numberRenderer(total9.toFixed(2)));
                $(api.column(11).footer()).html(numberRenderer(total10.toFixed(2)));
                $(api.column(12).footer()).html(numberRenderer(total11.toFixed(2)));
                $(api.column(13).footer()).html(numberRenderer(total12.toFixed(2)));
            }
        });
        table.buttons().container().appendTo('#tbl_receipts_summary_wrapper .col-md-6:eq(0)');
    }

    var load_advances_summary = function () {
        var numberRenderer = $.fn.dataTable.render.number(',', '.', 2,).display;

        var table = $('#tbl_advances_summary').DataTable({
            lengthChange: true,
            buttons: [
                {
                    extend: 'excel',
                    className: 'btn-secondary',
                    title: 'Advances Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.excelHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Advances Summary for patId = @Model.pat_info.patId to Excel!");
                    }
                },
                {
                    extend: 'pdf',
                    className: 'btn-secondary',
                    title: 'Advances Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.pdfHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Advances Summary for patId = @Model.pat_info.patId to PDF!");
                    }
                },
                {
                    extend: 'csv',
                    className: 'btn-secondary',
                    title: 'Advances Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.csvHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Advances Summary for patId = @Model.pat_info.patId to CSV!");
                    }
                },
                {
                    extend: 'print',
                    className: 'btn-secondary',
                    title: 'Advances Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.print.action.call(this, e, dt, node, config);
                        exportLogs("Employee Printed Advances Summary for patId = @Model.pat_info.patId!");
                    }
                }
            ],
            order: [[0, 'asc']],
            language: {
                searchPlaceholder: 'Search...',
                sSearch: '<span class="text-primary font-weight-semi-bold">Search</span>',
                lengthMenu: '_MENU_ ',
            },
            footerCallback: function (row, data, start, end, display) {
                var api = this.api();

                // Remove the formatting to get integer data for summation
                var intVal = function (i) {
                    return typeof i === 'string' ? i.replace(/[\$,]/g, '') * 1 : typeof i === 'number' ? i : 0;
                };

                // Footer Total
                total1 = api.column(2).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total2 = api.column(3).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total3 = api.column(4).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total4 = api.column(5).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total5 = api.column(6).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total6 = api.column(7).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total7 = api.column(8).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total8 = api.column(9).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total9 = api.column(10).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total10 = api.column(11).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total11 = api.column(12).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);
                total12 = api.column(13).data().reduce(function (a, b) { return intVal(a) + intVal(b); }, 0);

                $(api.column(2).footer()).html(numberRenderer(total1.toFixed(2)));
                $(api.column(3).footer()).html(numberRenderer(total2.toFixed(2)));
                $(api.column(4).footer()).html(numberRenderer(total3.toFixed(2)));
                $(api.column(5).footer()).html(numberRenderer(total4.toFixed(2)));
                $(api.column(6).footer()).html(numberRenderer(total5.toFixed(2)));
                $(api.column(7).footer()).html(numberRenderer(total6.toFixed(2)));
                $(api.column(8).footer()).html(numberRenderer(total7.toFixed(2)));
                $(api.column(9).footer()).html(numberRenderer(total8.toFixed(2)));
                $(api.column(9).footer()).html(numberRenderer(total8.toFixed(2)));
                $(api.column(10).footer()).html(numberRenderer(total9.toFixed(2)));
                $(api.column(11).footer()).html(numberRenderer(total10.toFixed(2)));
                $(api.column(12).footer()).html(numberRenderer(total11.toFixed(2)));
                $(api.column(13).footer()).html(numberRenderer(total12.toFixed(2)));
            }
        });
        table.buttons().container().appendTo('#tbl_advances_summary_wrapper .col-md-6:eq(0)');
    }

    var load_signedforms_summary = function () {
        var table = $('#tbl_signedforms_summary').DataTable({
            lengthChange: true,
            buttons: [
                {
                    extend: 'excel',
                    className: 'btn-secondary',
                    title: 'Signed Forms Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.excelHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Signed Forms Summary for patId = @Model.pat_info.patId to Excel!");
                    }
                },
                {
                    extend: 'pdf',
                    className: 'btn-secondary',
                    title: 'Signed Forms Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.pdfHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Signed Forms Summary for patId = @Model.pat_info.patId to PDF!");
                    }
                },
                {
                    extend: 'csv',
                    className: 'btn-secondary',
                    title: 'Signed Forms Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.csvHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Signed Forms Summary for patId = @Model.pat_info.patId to CSV!");
                    }
                },
                {
                    extend: 'print',
                    className: 'btn-secondary',
                    title: 'Signed Forms Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.print.action.call(this, e, dt, node, config);
                        exportLogs("Employee Printed Signed Forms Summary for patId = @Model.pat_info.patId!");
                    }
                }
            ],
            order: [[0, 'asc']],
            language: {
                searchPlaceholder: 'Search...',
                sSearch: '<span class="text-primary font-weight-semi-bold">Search</span>',
                lengthMenu: '_MENU_ ',
            }
        });
        table.buttons().container().appendTo('#tbl_signedforms_summary_wrapper .col-md-6:eq(0)');
    }

    var load_po_summary = function () {
        var table = $('#tbl_po_summary').DataTable({
            lengthChange: true,
            buttons: [
                {
                    extend: 'excel',
                    className: 'btn-secondary',
                    title: 'Package Orders Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.excelHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Package Orders Summary for patId = @Model.pat_info.patId to Excel!");
                    }
                },
                {
                    extend: 'pdf',
                    className: 'btn-secondary',
                    title: 'Package Orders Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.pdfHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Package Orders Summary for patId = @Model.pat_info.patId to PDF!");
                    }
                },
                {
                    extend: 'csv',
                    className: 'btn-secondary',
                    title: 'Package Orders Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.csvHtml5.action.call(this, e, dt, node, config);
                        exportLogs("Employee Exported Package Orders Summary for patId = @Model.pat_info.patId to CSV!");
                    }
                },
                {
                    extend: 'print',
                    className: 'btn-secondary',
                    title: 'Package Orders Summary',
                    action: function (e, dt, node, config) {
                        $.fn.dataTable.ext.buttons.print.action.call(this, e, dt, node, config);
                        exportLogs("Employee Printed Package Orders Summary for patId = @Model.pat_info.patId!");
                    }
                }
            ],
            order: [[0, 'asc']],
            language: {
                searchPlaceholder: 'Search...',
                sSearch: '<span class="text-primary font-weight-semi-bold">Search</span>',
                lengthMenu: '_MENU_ ',
            }
        });
        table.buttons().container().appendTo('#tbl_po_summary_wrapper .col-md-6:eq(0)');
    }
    //#endregion

    //#region View Doc Modal
    var view_doc = function (type, id) {
        $.ajax({
            type: "GET",
            url: "@Url.Action("ViewDocument", "PatientInsurance", new { area = "Patient" })?type=" + type + "&id=" + id,
            contentType: "application/json",
            dataType: "html",
            success: function (data) {
                $("#view_doc_modal_body").html(data);
                $("#view_doc_modal").modal("show");
            },
            error: function (xhr) {
                console.log(xhr);
            }
        });
    };
    //#endregion

    //#region View Appointment Audit Logs
    var appointment_AuditLogs = function (appId) {
        $.ajax({
            type: "GET",
            url: "@Url.Action("AppointmentAuditLogs", "AppointmentList", new { area = "Appointment" })",
            contentType: "application/json",
            data: { "appaId": appId },
            dataType: "html",
            success: function (response) {
                $("#patient_details").modal("hide");
                $("#app_logs_body").html(response);
                $("#app_logs").modal("show");
            },
            error: function (xhr) {
                console.log("Error :" + xhr.statusText);
            }
        });
    }
    //#endregion

    //#region View Medical Sheets
        var PrintMedical_Sheet = function (appId) {
            $.ajax({
                type: 'POST',
                url: '@Url.Action("GetEMRPatientInfo", "Appointment", new { area = "Appointment" })' + "?appId=" + appId,
                dataType: 'json',
                success: function (response) {
                   $.ajax({
                    type: "GET",
                    url: "@Url.Action("MedicalSheet", "AppointmentList", new { area = "Appointment" })",
                    contentType: "application/json",
                    data: { "appaId": appId },
                    dataType: "html",
                    success: function (response) {
                        $("#patient_details").modal("hide");
                        $("#med_sheet_body").html(response);
                        $("#med_sheet").modal("show");
                    },
                    error: function (xhr) {
                        console.log("Error :" + xhr.statusText);
                    }
                });
                },
                error: function (xhr, status, error) {
                    console.log(xhr.statusText);
                }
            });


        }
    //#endregion
</script>